<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Linuxé¢è¯•å¸¸è§30é—®ç­”]]></title>
    <url>%2F2019%2F12%2F17%2FLinux%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%8130%E9%97%AE%E7%AD%94%2F</url>
    <content type="text"><![CDATA[30 Linux Questions One Should Know for Interviewé¢è¯•æ—¶åº”è¯¥çŸ¥é“çš„30ä¸ª Linux é—®é¢˜Linux Tutorials æ•™ç¨‹ | By Meenakshi Agarwal ç±³çº³å…‹ä»€ Â· é˜¿åŠ ç“¦å°” Greetings! Today, we are listing down thirty essential Linux questions every beginner should know. Itâ€™s our attempt to unravel the core Linux areas so that even a beginner can feel a bit confident during a faceoff in a Linux interview. ä½ å¥½ï¼ ä»Šå¤©ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸‰åä¸ªæ¯ä¸ª Linux åˆå­¦è€…éƒ½åº”è¯¥çŸ¥é“çš„åŸºæœ¬é—®é¢˜ã€‚ æˆ‘ä»¬è¯•å›¾æ­å¼€ Linux æ ¸å¿ƒé¢†åŸŸçš„é¢çº±ï¼Œè¿™æ ·å³ä½¿æ˜¯ä¸€ä¸ªåˆå­¦è€…ä¹Ÿå¯ä»¥åœ¨é¢å¯¹é¢çš„ Linux é‡‡è®¿ä¸­æ„Ÿå—åˆ°ä¸€ç‚¹è‡ªä¿¡ã€‚ For some of us, since our college times, learning Linux has been a nightmare. But now is the time when you canâ€™t ignore it anymore. Itâ€™s one of the areas where most IT companies look for candidates with solid Linux skills. Also, you may have a dozen of interviews lined up, so you are already short of time. å¯¹äºŽæˆ‘ä»¬ä¸­çš„ä¸€äº›äººæ¥è¯´ï¼Œä»Žå¤§å­¦æ—¶ä»£å¼€å§‹ï¼Œå­¦ä¹  Linux å°±åƒæ˜¯ä¸€åœºå™©æ¢¦ã€‚ ä½†æ˜¯çŽ°åœ¨æ˜¯ä½ ä¸èƒ½å†å¿½è§†å®ƒçš„æ—¶å€™äº†ã€‚ è¿™æ˜¯å¤§å¤šæ•° It å…¬å¸å¯»æ‰¾å…·æœ‰æ‰Žå®ž Linux æŠ€èƒ½çš„å€™é€‰äººçš„é¢†åŸŸä¹‹ä¸€ã€‚ æ­¤å¤–ï¼Œä½ å¯èƒ½æœ‰ä¸€æ‰“çš„é¢è¯•æŽ’é˜Ÿï¼Œæ‰€ä»¥ä½ å·²ç»å¾ˆçŸ­çš„æ—¶é—´ã€‚ But you shouldnâ€™t worry, just try to make the most out of the remaining time. And read all the essential Linux questions mentioned in this post. Weâ€™ve tried adding the gist of all important Linux concepts into this Linux tutorial. ä½†æ˜¯ä½ ä¸å¿…æ‹…å¿ƒï¼Œåªè¦å°½é‡åˆ©ç”¨å‰©ä¸‹çš„æ—¶é—´å°±å¥½äº†ã€‚ é˜…è¯»æœ¬æ–‡ä¸­æåˆ°çš„æ‰€æœ‰å…³äºŽ Linux çš„åŸºæœ¬é—®é¢˜ã€‚ æˆ‘ä»¬å°è¯•å°†æ‰€æœ‰é‡è¦çš„ Linux æ¦‚å¿µçš„è¦ç‚¹æ·»åŠ åˆ°è¿™ä¸ª Linux æ•™ç¨‹ä¸­ã€‚ ðŸ’¡ Recommended â€“ 50 Linux Commands Every Beginner Should Know æŽ¨èâ€”â€”æ¯ä¸ªåˆå­¦è€…éƒ½åº”è¯¥çŸ¥é“çš„50æ¡ Linux å‘½ä»¤ Now, you can proceed on reading the most important Linux interview questions and answers. And get aware of the latest trends in Linux interviews. çŽ°åœ¨ï¼Œæ‚¨å¯ä»¥ç»§ç»­é˜…è¯»æœ€é‡è¦çš„ Linux é¢è¯•é—®é¢˜å’Œç­”æ¡ˆã€‚ äº†è§£ Linux é‡‡è®¿çš„æœ€æ–°è¶‹åŠ¿ã€‚ Essential Linux Questions For InterviewEssential Linux Questions for Interview. é¢è¯•çš„åŸºæœ¬é—®é¢˜ã€‚ Q-1. What Is Linux And Why Is It So Popular? ä»€ä¹ˆæ˜¯ Linuxï¼Œä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤å—æ¬¢è¿Žï¼ŸAns. Linux is an operating system based on UNIX and was first introduced by Linus Torvalds. Most servers use Linux as its Operating System. It runs on different hardware platforms manufactured by Intel, MIPS, HP, IBM, SPARC, and Motorola. Another striking element in Linux is its mascot, a penguin figure with name Tux. ç­”æ¡ˆã€‚ Linux æ˜¯åŸºäºŽ UNIX çš„æ“ä½œç³»ç»Ÿï¼Œæœ€æ—©ç”± Linus Torvalds å¼•å…¥ã€‚ å¤§å¤šæ•°æœåŠ¡å™¨ä½¿ç”¨ Linux ä½œä¸ºå…¶æ“ä½œç³»ç»Ÿã€‚ å®ƒè¿è¡Œåœ¨è‹±ç‰¹å°”ã€ MIPSã€æƒ æ™®ã€ IBMã€ SPARC å’Œæ‘©æ‰˜ç½—æ‹‰åˆ¶é€ çš„ä¸åŒç¡¬ä»¶å¹³å°ä¸Šã€‚ Linux ä¸­å¦ä¸€ä¸ªå¼•äººæ³¨ç›®çš„å…ƒç´ æ˜¯å®ƒçš„å‰ç¥¥ç‰©ï¼Œä¸€ä¸ªåä¸º Tux çš„ä¼é¹…å½¢è±¡ã€‚ The popularity of Linux is mainly because of the following reasons. Linux çš„æµè¡Œä¸»è¦æ˜¯ç”±äºŽä»¥ä¸‹åŽŸå› ã€‚ It is free and open-source. We can download Linux for free and customize it as per our needs. å®ƒæ˜¯å…è´¹å’Œå¼€æºçš„ã€‚ æˆ‘ä»¬å¯ä»¥å…è´¹ä¸‹è½½ Linuxï¼Œå¹¶æ ¹æ®æˆ‘ä»¬çš„éœ€è¦è¿›è¡Œå®šåˆ¶ It is very robust and adaptable. å®ƒéžå¸¸å¼ºå£®ï¼Œé€‚åº”èƒ½åŠ›å¾ˆå¼º It accompanies with an immense amount of libraries and utilities. å®ƒä¼´éšç€å¤§é‡çš„å›¾ä¹¦é¦†å’Œå…¬ç”¨äº‹ä¸š Q-2. What Is BASH? ä»€ä¹ˆæ˜¯ BASHï¼ŸAns. BASH is a short form for Bourne Again Shell. Steve Bourne developed it as a replacement to the original Bourne Shell (represented by /bin/sh). It combines all the features from the original version of Bourne Shell, plus additional functions to make it easier and more convenient to use. Since then it has been adapted as the default shell for most running systems. ç­”æ¡ˆã€‚ æ˜¯ BASH çš„ç¼©å†™å½¢å¼ã€‚ Steve Bourne å¼€å‘å®ƒæ˜¯ä¸ºäº†æ›¿æ¢åŽŸå§‹çš„ Bourne Shell (ç”± / bin / sh è¡¨ç¤º)ã€‚ å®ƒç»“åˆäº† Bourne Shell åŽŸå§‹ç‰ˆæœ¬çš„æ‰€æœ‰ç‰¹æ€§ï¼ŒåŠ ä¸Šé™„åŠ çš„åŠŸèƒ½ï¼Œä½¿å®ƒæ›´å®¹æ˜“å’Œæ›´æ–¹ä¾¿åœ°ä½¿ç”¨ã€‚ ä»Žé‚£æ—¶èµ·ï¼Œå®ƒå·²ç»è¢«æ”¹ç¼–ä¸ºå¤§å¤šæ•°è¿è¡Œç³»ç»Ÿçš„é»˜è®¤ shellã€‚ Q-3. What Is The Core Of The Linux Operating System? Linux æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼ŸAns. The core of the Linux operating system is Kernel. It is broken down into Shell, Command, Script, and Terminal. Shell is the Command Line Interpreter. ç­”æ¡ˆã€‚ Linux æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯å†…æ ¸ã€‚ å®ƒè¢«åˆ†è§£ä¸º Shellã€ Commandã€ Script å’Œ Terminalã€‚ Shell æ˜¯å‘½ä»¤è¡Œè§£é‡Šå™¨ã€‚ A Command is an instruction given to the Computer by the user to perform a task. A Script is a collection of commands stored in a file, and Terminal is the CLI. å‘½ä»¤æ˜¯ç”¨æˆ·ç»™è®¡ç®—æœºå‘å‡ºçš„æ‰§è¡Œä»»åŠ¡çš„æŒ‡ä»¤ã€‚ Script æ˜¯å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„å‘½ä»¤é›†åˆï¼ŒTerminal æ˜¯ CLIã€‚ Q-4. What Are The Basic Differences Between UNIX And Linux Operating Systems? Unix å’Œ Linux æ“ä½œç³»ç»Ÿçš„åŸºæœ¬åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ŸAns. Linux is free and open-source software (allows programmers to program with Linux, not around it). Linus Torvalds and community developed its Kernel. ç­”æ¡ˆã€‚ Linux æ˜¯è‡ªç”±åŠå¼€æ”¾æºä»£ç è½¯ä»¶çš„(å…è®¸ç¨‹åºå‘˜ä½¿ç”¨ Linux ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯ç»•å¼€å®ƒ)ã€‚ Linus Torvalds å’Œç¤¾åŒºå¼€å‘äº†å†…æ ¸ã€‚ UNIX, on the other hand, is a copyrighted name. Only big companies can access and use its copyright and name. å¦ä¸€æ–¹é¢ï¼ŒUNIX æ˜¯ä¸€ä¸ªæœ‰ç‰ˆæƒçš„åç§°ã€‚ åªæœ‰å¤§å…¬å¸æ‰èƒ½è®¿é—®å’Œä½¿ç”¨å…¶ç‰ˆæƒå’Œåç§°ã€‚ For example, the products like IBMAIX, SunSolaris, and HP-UX are all UNIX-based Operating Systems. ä¾‹å¦‚ï¼Œåƒ IBMAIXã€ SunSolaris å’Œ HP-UX è¿™æ ·çš„äº§å“éƒ½æ˜¯åŸºäºŽ unix çš„æ“ä½œç³»ç»Ÿã€‚ Q-5. What Is LILO? ä»€ä¹ˆæ˜¯ LILOï¼ŸAns. LILO is a boot loader for Linux. Lilo æ˜¯ Linux çš„å¼•å¯¼åŠ è½½ç¨‹åºã€‚ It is used mainly to load the Linux operating system into main memory so that it can begin its operations. å®ƒä¸»è¦ç”¨äºŽå°† Linux æ“ä½œç³»ç»ŸåŠ è½½åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å¼€å§‹æ“ä½œã€‚ Q-6. What Is An INODE? ä»€ä¹ˆæ˜¯ INODEï¼ŸAns. All files have its description stored in a structure called â€œinodeâ€. It stores information about the size of the file, access and modification times, file permissions and so on. ç­”æ¡ˆã€‚ æ‰€æœ‰æ–‡ä»¶çš„æè¿°éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªåä¸ºâ€œ inodeâ€çš„ç»“æž„ä¸­ã€‚ å®ƒå­˜å‚¨æœ‰å…³æ–‡ä»¶å¤§å°ã€è®¿é—®å’Œä¿®æ”¹æ¬¡æ•°ã€æ–‡ä»¶æƒé™ç­‰ä¿¡æ¯ã€‚ In addition to above, it also holds the pointer to the data blocks of the files. é™¤äº†ä¸Šé¢çš„ä»£ç ï¼Œå®ƒè¿˜ä¿å­˜äº†æŒ‡å‘æ–‡ä»¶æ•°æ®å—çš„æŒ‡é’ˆã€‚ Q-7. What Is A Swap Space? ä»€ä¹ˆæ˜¯äº¤æ¢ç©ºé—´ï¼ŸAns. A swap space is a certain amount of space used by Linux to temporarily hold some programs that are running concurrently. ç­”æ¡ˆã€‚ äº¤æ¢ç©ºé—´æ˜¯ Linux ç”¨æ¥æš‚æ—¶ä¿å­˜ä¸€äº›å¹¶å‘è¿è¡Œçš„ç¨‹åºçš„ç‰¹å®šç©ºé—´ã€‚ It is useful when RAM does not have enough available memory to hold all the programs that are executing at the same time. This space gets free when the execution of the program is complete. å½“ RAM æ²¡æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜æ¥å®¹çº³åŒæ—¶æ‰§è¡Œçš„æ‰€æœ‰ç¨‹åºæ—¶ï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ å½“ç¨‹åºæ‰§è¡Œå®Œæˆæ—¶ï¼Œè¿™ä¸ªç©ºé—´å°±å¯ä»¥é‡Šæ”¾äº†ã€‚ Q-8. What Is The Advantage Of Using An Open Source Software? ä½¿ç”¨å¼€æºè½¯ä»¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼ŸAns. Open source allows you to distribute your software including the source code, freely to anyone who is interested. Anyone can help by adding new features to the software and can even debug and correct errors present in the source code. ç­”æ¡ˆã€‚ å¼€æ”¾æºç å…è®¸æ‚¨å…è´¹å‘ä»»ä½•æ„Ÿå…´è¶£çš„äººåˆ†å‘æ‚¨çš„è½¯ä»¶ï¼ŒåŒ…æ‹¬æºä»£ç ã€‚ ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡å‘è½¯ä»¶æ·»åŠ æ–°ç‰¹æ€§æ¥æä¾›å¸®åŠ©ï¼Œç”šè‡³å¯ä»¥è°ƒè¯•å’Œæ›´æ­£æºä»£ç ä¸­å‡ºçŽ°çš„é”™è¯¯ã€‚ They can even make it run better and then redistribute the enhanced source code freely again. In this way, open-source benefits everyone in the community. ä»–ä»¬ç”šè‡³å¯ä»¥è®©å®ƒè¿è¡Œå¾—æ›´å¥½ï¼Œç„¶åŽé‡æ–°è‡ªç”±åœ°å‘å¸ƒå¢žå¼ºçš„æºä»£ç ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¼€æ”¾æºç ä½¿ç¤¾åŒºä¸­çš„æ¯ä¸ªäººéƒ½å—ç›Šã€‚ Q-9. What Are The Key Differences Between BASH And DOS? Bash å’Œ DOS ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ŸAns. Following are the main differences between both the Console. ä¸‹é¢æ˜¯ä¸¤ä¸ªæŽ§åˆ¶å°ä¹‹é—´çš„ä¸»è¦åŒºåˆ«ã€‚ BASH commands are case-sensitive while DOS commands are not. Bash å‘½ä»¤åŒºåˆ†å¤§å°å†™ï¼Œè€Œ DOS å‘½ä»¤ä¸åŒºåˆ†å¤§å°å†™ Under BASH, /character is a directory separator and acts as an escape character. Under DOS, /serves as a command argument delimiter and is the directory separator. åœ¨ BASH ä¸‹ï¼Œ/ character æ˜¯ä¸€ä¸ªç›®å½•åˆ†éš”ç¬¦ï¼Œå¹¶å……å½“è½¬ä¹‰å­—ç¬¦ã€‚ åœ¨ DOS ä¸‹ï¼Œ/ ç”¨ä½œå‘½ä»¤å‚æ•°åˆ†éš”ç¬¦ï¼Œå¹¶ä¸”æ˜¯ç›®å½•åˆ†éš”ç¬¦ DOS follows a naming convention for files, where it allows maximum 8 characters of filename followed by a dot and then 3 characters for the extension. However, BASH follows no such convention. éµå¾ªäº†ä¸€ä¸ªæ–‡ä»¶å˜æ•°å‘½ååŽŸåˆ™ï¼Œå…¶ä¸­å…è®¸æœ€å¤š8ä¸ªå­—ç¬¦çš„æ–‡ä»¶ååŽé¢è·Ÿç€ä¸€ä¸ªç‚¹ï¼Œç„¶åŽ3ä¸ªå­—ç¬¦çš„æ‰©å±•åã€‚ ä½†æ˜¯ï¼ŒBASH æ²¡æœ‰éµå¾ªè¿™æ ·çš„çº¦å®š Q-10. What Are The Differences Between TCP And UDP? Tcp å’Œ UDP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAns. The main differences between the two are as follows. ä¸¤è€…çš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹ã€‚ TCP stands for Transmission Control Protocol. It first establishes the connection before sending data and thus called as connection-oriented protocol. It controls the flow of data and also guarantees the delivery of packets. Tcp æ˜¯ä¼ è¾“æŽ§åˆ¶åè®®çš„ç¼©å†™ã€‚ å®ƒåœ¨å‘é€æ•°æ®ä¹‹å‰é¦–å…ˆå»ºç«‹è¿žæŽ¥ï¼Œå› æ­¤ç§°ä¸ºé¢å‘è¿žæŽ¥çš„åè®®ã€‚ å®ƒæŽ§åˆ¶æ•°æ®æµå¹¶ä¿è¯æ•°æ®åŒ…çš„ä¼ é€’ UDP stands for User Datagram Protocol. It simply sends datagrams on to the wire. There is no ordering of packets, if some of the packets get lost in the way or they arrive in bad order then there is no way to request those packets again. Thus it is called as connection-less protocol. Some services like DNS resolution, SNMP, DHCP, RIP, and VOIP prefer to use UDP for its speed due to less network overhead. Any errors that occur during data transfer gets handled on the application layer rather than the network layer. æ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®®çš„ç¼©å†™ã€‚ å®ƒåªæ˜¯ç®€å•åœ°å°†æ•°æ®æŠ¥å‘é€åˆ°çº¿è·¯ä¸Šã€‚ è¿™é‡Œæ²¡æœ‰æ•°æ®åŒ…çš„é¡ºåºï¼Œå¦‚æžœä¸€äº›æ•°æ®åŒ…åœ¨è·¯ä¸Šä¸¢å¤±äº†ï¼Œæˆ–è€…å®ƒä»¬åˆ°è¾¾çš„é¡ºåºä¸æ­£ç¡®ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰åŠžæ³•å†æ¬¡è¯·æ±‚è¿™äº›æ•°æ®åŒ…ã€‚ å› æ­¤ï¼Œå®ƒè¢«ç§°ä¸ºæ— è¿žæŽ¥åè®®ã€‚ ç”±äºŽç½‘ç»œå¼€é”€è¾ƒå°ï¼Œåƒ DNS è§£æžã€ SNMPã€ DHCPã€ RIP å’Œ VOIP è¿™æ ·çš„æœåŠ¡æ›´å–œæ¬¢ä½¿ç”¨ UDP æ¥æé«˜é€Ÿåº¦ã€‚ åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿçš„ä»»ä½•é”™è¯¯éƒ½ç”±åº”ç”¨ç¨‹åºå±‚è€Œä¸æ˜¯ç½‘ç»œå±‚å¤„ç† Q-11. How Does DNS Resolution Determine The IP Address? Dns è§£æžå¦‚ä½•å†³å®š IP åœ°å€ï¼ŸAns. A client application requests an IP address from the name server usually by connecting to UDP port 53. The nameserver will attempt to resolve the FQDN based on its resolver library, which may contain authoritative information about the host requested or cached data about that name from an earlier query. ç­”æ¡ˆã€‚ å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºé€šå¸¸é€šè¿‡è¿žæŽ¥ UDP ç«¯å£53ä»Žåç§°æœåŠ¡å™¨è¯·æ±‚ IP åœ°å€ã€‚ åç§°æœåŠ¡å™¨å°†å°è¯•åŸºäºŽå…¶è§£æžå™¨åº“è§£æž FQDNï¼Œè¯¥è§£æžå™¨åº“å¯èƒ½åŒ…å«æœ‰å…³è¯·æ±‚çš„ä¸»æœºçš„æƒå¨ä¿¡æ¯ï¼Œæˆ–è€…ä»Žæ—©æœŸæŸ¥è¯¢ç¼“å­˜æœ‰å…³è¯¥åç§°çš„æ•°æ®ã€‚ If the nameserver does not already have the answer, it will turn to root nameservers to determine the authoritative for the FQDN in question. Then, with that information, it will query the authoritative nameservers for that name to determine the IP address. å¦‚æžœåç§°æœåŠ¡å™¨è¿˜æ²¡æœ‰å¾—åˆ°ç­”æ¡ˆï¼Œå®ƒå°†è½¬å‘æ ¹åç§°æœåŠ¡å™¨æ¥ç¡®å®šæ‰€æ¶‰åŠçš„ FQDN çš„æƒå¨æ€§ã€‚ ç„¶åŽï¼Œæ ¹æ®è¯¥ä¿¡æ¯ï¼Œå®ƒå°†å‘æƒå¨å‘½åæœåŠ¡å™¨æŸ¥è¯¢è¯¥åç§°ä»¥ç¡®å®š IP åœ°å€ã€‚ Q-12. Describe What Is A Root Account In Linux? è¯·æè¿° Linux ä¸­çš„æ ¹å¸æˆ·æ˜¯ä»€ä¹ˆï¼ŸAns. It is like a system administrators account that grants full control on the system. It allows creating and maintaining user accounts and assigning different permissions for each account, has access to all commands and files on the system. It is the default account that gets created at every new installation of Linux. ç­”æ¡ˆã€‚ å®ƒç±»ä¼¼äºŽç³»ç»Ÿç®¡ç†å‘˜å¸æˆ·ï¼ŒæŽˆäºˆå¯¹ç³»ç»Ÿçš„å®Œå…¨æŽ§åˆ¶æƒã€‚ å®ƒå…è®¸åˆ›å»ºå’Œç»´æŠ¤ç”¨æˆ·å¸æˆ·ï¼Œå¹¶ä¸ºæ¯ä¸ªå¸æˆ·åˆ†é…ä¸åŒçš„æƒé™ï¼Œå¯ä»¥è®¿é—®ç³»ç»Ÿä¸Šçš„æ‰€æœ‰å‘½ä»¤å’Œæ–‡ä»¶ã€‚ å®ƒæ˜¯åœ¨æ¯ä¸ªæ–°çš„ Linux å®‰è£…ä¸­åˆ›å»ºçš„é»˜è®¤å¸æˆ·ã€‚ We can refer to it as the root user or a super user. There is a special command named (for â€œsuper userâ€, or â€œswitch userâ€) that allows to switch over to the root account on the command line. If you enter the correct root password, you enter into the root account to execute commands with full system privileges. æˆ‘ä»¬å¯ä»¥å°†å…¶ç§°ä¸ºæ ¹ç”¨æˆ·æˆ–è¶…çº§ç”¨æˆ·ã€‚ æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å‘½ä»¤åä¸º su (è¡¨ç¤ºâ€œ super userâ€æˆ–â€œ switch userâ€) ï¼Œå®ƒå…è®¸åœ¨å‘½ä»¤è¡Œä¸Šåˆ‡æ¢åˆ° root å¸æˆ·ã€‚ å¦‚æžœæ‚¨è¾“å…¥äº†æ­£ç¡®çš„ root å¯†ç ï¼Œé‚£ä¹ˆæ‚¨å°†è¾“å…¥ root å¸æˆ·ï¼Œä»¥ä¾¿ä»¥å®Œæ•´çš„ç³»ç»Ÿæƒé™æ‰§è¡Œå‘½ä»¤ã€‚ Q-13. Which Linux Command Do You Use To Check The Memory Available For Use? æ‚¨ä½¿ç”¨å“ªä¸ª Linux å‘½ä»¤æ¥æ£€æŸ¥å¯ç”¨çš„å†…å­˜ï¼ŸAns. From a command shell, execute the concatenate command to provide the memory usage information. ç­”æ¡ˆã€‚ åœ¨å‘½ä»¤ shell ä¸­ï¼Œæ‰§è¡Œ concatenate å‘½ä»¤ä»¥æä¾›å†…å­˜ä½¿ç”¨ä¿¡æ¯ã€‚ 1cat /proc/meminfo This command displays the following output on the terminal. æ­¤å‘½ä»¤åœ¨ç»ˆç«¯ä¸Šæ˜¾ç¤ºä»¥ä¸‹è¾“å‡ºã€‚ 1Mem: 64655360 This output tells about the total memory available for use. æ­¤è¾“å‡ºè¯´æ˜Žå¯ç”¨çš„æ€»å†…å­˜ã€‚ Q-14. What Do You Know About The MX Record? ä½ å¯¹ MX è®°å½•äº†è§£å¤šå°‘ï¼ŸAns. MX (Mail eXchanger) records are like an address for your domainâ€™s email. It tells the rest of the internet about the mail server responsible for accepting email messages on behalf of a recipientâ€™s domain. ç­”æ¡ˆã€‚ Mx (é‚®ä»¶äº¤æ¢å™¨)è®°å½•ç±»ä¼¼äºŽåŸŸåçš„ç”µå­é‚®ä»¶åœ°å€ã€‚ å®ƒå‘Šè¯‰äº’è”ç½‘çš„å…¶ä½™éƒ¨åˆ†å…³äºŽä»£è¡¨æ”¶ä»¶äººåŸŸåæŽ¥å—ç”µå­é‚®ä»¶ä¿¡æ¯çš„é‚®ä»¶æœåŠ¡å™¨ã€‚ It is also a kind of preference value which determines the server for processing the mail delivery if multiple servers are available. This number can assume any value between 0 to 65535. å®ƒä¹Ÿæ˜¯ä¸€ç§é¦–é€‰é¡¹å€¼ï¼Œç”¨äºŽç¡®å®šåœ¨æœ‰å¤šä¸ªæœåŠ¡å™¨å¯ç”¨çš„æƒ…å†µä¸‹å¤„ç†é‚®ä»¶ä¼ é€’çš„æœåŠ¡å™¨ã€‚ è¿™ä¸ªæ•°å­—å¯ä»¥å‡è®¾0åˆ°65535ä¹‹é—´çš„ä»»ä½•å€¼ã€‚ The MX record with the lowest number will have more weightage over the others. The user can also set multiple e-mail servers with the same preference value for load balancing. æ•°é‡æœ€å°‘çš„ MX è®°å½•æ¯”å…¶ä»–è®°å½•å…·æœ‰æ›´å¤§çš„æƒé‡ã€‚ ç”¨æˆ·è¿˜å¯ä»¥ä¸ºè´Ÿè½½å¹³è¡¡è®¾ç½®å¤šä¸ªå…·æœ‰ç›¸åŒé¦–é€‰å€¼çš„ç”µå­é‚®ä»¶æœåŠ¡å™¨ã€‚ Q-15. What Are The Steps That Define The Linux Boot-Up Sequence? å®šä¹‰ Linux å¯åŠ¨é¡ºåºçš„æ­¥éª¤æ˜¯ä»€ä¹ˆï¼ŸAns. There are seven steps in the boot-up sequence. å¯åŠ¨è¿‡ç¨‹æœ‰ä¸ƒä¸ªæ­¥éª¤ã€‚ BIOS (basic input/output system) â€“ Executes the MBR where Boot Loader sits. Bios (åŸºæœ¬è¾“å…¥ / è¾“å‡ºç³»ç»Ÿ)-æ‰§è¡Œå¼•å¯¼åŠ è½½ç¨‹åºæ‰€åœ¨çš„ MBR MBR â€“ Master boot reads Kernel into memory. ä¸»å¼•å¯¼å°†å†…æ ¸è¯»å…¥å†…å­˜ GRUB(Grand Unified Bootloader)- Kernel starts Init process. å†…æ ¸å¯åŠ¨ Init GNU GRUB Kernel â€“ It executes the &lt;/sbin/init&gt; program. Then, the init process reads file and executes the . Kernel-å®ƒæ‰§è¡Œ / sbin / init ç¨‹åºã€‚ ç„¶åŽï¼Œinit è¿›ç¨‹è¯»å– inittab æ–‡ä»¶å¹¶æ‰§è¡Œ rc.sysinit The init script â€“ It is the script to start services for reaching the default run level. Init è„šæœ¬â€”â€”å®ƒæ˜¯å¯åŠ¨æœåŠ¡ä»¥è¾¾åˆ°é»˜è®¤è¿è¡Œçº§åˆ«çš„ rc è„šæœ¬ Run level programs â€“ These programs execute from the &lt;/etc/rc.d/rc.dl&gt;. è¿è¡Œçº§åˆ«ç¨‹åº-è¿™äº›ç¨‹åºä»Ž / etc / rc æ‰§è¡Œã€‚ D / rc . Dl Q-16. What Is The Recommended Size For A Swap Partition Under A Linux System? åœ¨ Linux ç³»ç»Ÿä¸‹ï¼Œäº¤æ¢åˆ†åŒºçš„æŽ¨èå¤§å°æ˜¯å¤šå°‘ï¼ŸAns. The standard size for a swap partition is twice the amount of physical memory available on the system. ç­”æ¡ˆã€‚ äº¤æ¢åˆ†åŒºçš„æ ‡å‡†å¤§å°æ˜¯ç³»ç»Ÿä¸Šå¯ç”¨ç‰©ç†å†…å­˜é‡çš„ä¸¤å€ã€‚ If this is not possible, then the minimum size should be the same as the amount of memory installed. å¦‚æžœè¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£ä¹ˆæœ€å°å¤§å°åº”è¯¥ä¸Žå®‰è£…çš„å†…å­˜é‡ç›¸åŒã€‚ Q-17. How Do You Search For A Pattern And Then Replace It In An Entire File? Q-17. å¦‚ä½•æœç´¢ä¸€ä¸ªæ¨¡å¼ï¼Œç„¶åŽåœ¨æ•´ä¸ªæ–‡ä»¶ä¸­æ›¿æ¢å®ƒï¼ŸAns. Linux provides command and to perform â€œsearch and replaceâ€ action for a pattern. ç­”æ¡ˆã€‚ Linux æä¾› sed å‘½ä»¤å’Œ vi-editor æ¥æ‰§è¡Œæ¨¡å¼çš„â€œæœç´¢å’Œæ›¿æ¢â€æ“ä½œã€‚ 1. Using Sed Command.1. ä½¿ç”¨ Sed å‘½ä»¤The sed command searches for a particular pattern in the file. And if a match occurs, then it replaces the text with the target string mentioned in the command.Syntax for sed â€œSearch and Replaceâ€- Sed å‘½ä»¤åœ¨æ–‡ä»¶ä¸­æœç´¢ç‰¹å®šçš„æ¨¡å¼ã€‚ å¦‚æžœå‘ç”ŸåŒ¹é…ï¼Œåˆ™ç”¨å‘½ä»¤ä¸­æåˆ°çš„ç›®æ ‡å­—ç¬¦ä¸²æ›¿æ¢æ–‡æœ¬ã€‚ Sed çš„è¯­æ³•â€œ Search and Replaceâ€- 1sed &apos;s/SEARCH/REPLACE/OPTIONS&apos; FILE.txt where, åœ¨å“ªé‡Œ, â€œsâ€ is used to search for a pattern. â€œ sâ€æ˜¯ç”¨æ¥å¯»æ‰¾æ¨¡å¼çš„ â€œ/â€ â€“ Itâ€™s a delimiter. There are some alternatives for / like # % @ :. â€œ / â€-è¿™æ˜¯ä¸€ä¸ªåˆ†éš”ç¬¦ã€‚ æœ‰ä¸€äº›æ›¿ä»£å“ï¼Œæ¯”å¦‚ #%@: SEARCH â€“ mention the search pattern here. æœç´¢â€”â€”åœ¨è¿™é‡ŒæåŠæœç´¢æ¨¡å¼ REPLACE â€“ define the string that will replace the search pattern. Replace-å®šä¹‰å°†æ›¿æ¢æœç´¢æ¨¡å¼çš„å­—ç¬¦ä¸² OPTIONS â€“ This command comes with the following options. é€‰é¡¹-è¿™ä¸ªå‘½ä»¤å¸¦æœ‰ä»¥ä¸‹é€‰é¡¹ â€“ Helpful when the user requires replacing ALL the SEARCH instances with REPLACE string. å½“ç”¨æˆ·éœ€è¦ç”¨ REPLACE å­—ç¬¦ä¸²æ›¿æ¢æ‰€æœ‰çš„ SEARCH å®žä¾‹æ—¶ï¼Œè¿™å¾ˆæœ‰å¸®åŠ© â€“ To search a pattern in case insensitive mode. ä»¥ä¸åŒºåˆ†å¤§å°å†™çš„æ¨¡å¼æœç´¢æ¨¡å¼ â€“ Unlike option , requires replacing only the nth occurrence of the search pattern. ä¸Žé€‰é¡¹ g ä¸åŒï¼Œn åªéœ€è¦æ›¿æ¢å‡ºçŽ° n æ¬¡çš„æœç´¢æ¨¡å¼ â€“ prints only the line containing the search pattern. P-åªæ‰“å°åŒ…å«æœç´¢æ¨¡å¼çš„è¡Œ â€“ To edit the original file, you may use option . But, in case you want to write the output to another file, keeping the original file intact, you can use option . Using redirection operators (&gt; or &gt;&gt;) is another way. è¦ç¼–è¾‘åŽŸå§‹æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨é€‰é¡¹ iã€‚ ä½†æ˜¯ï¼Œå¦‚æžœå¸Œæœ›å°†è¾“å‡ºå†™å…¥å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¿æŒåŽŸå§‹æ–‡ä»¶ä¸å˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨é€‰é¡¹ wã€‚ ä½¿ç”¨é‡å®šå‘æ“ä½œç¬¦(æˆ–)æ˜¯å¦ä¸€ç§æ–¹æ³• 2. Using Vi Editor.2. ä½¿ç”¨ Vi ç¼–è¾‘å™¨vi also has a powerful search and replace capabilities. For searching any string in a file, just type a colon (:), â€œsâ€, forward slash (/) and the search string in the command mode of the vi editor. What we type will appear on the bottom line of the display screen.On pressing ENTER, the area containing the matching text will get highlighted, if it exists.The formal syntax for searching is: Vi è¿˜æœ‰å¼ºå¤§çš„æœç´¢å’Œæ›¿æ¢èƒ½åŠ›ã€‚ è¦åœ¨æ–‡ä»¶ä¸­æœç´¢ä»»ä½•å­—ç¬¦ä¸²ï¼Œåªéœ€åœ¨ vi ç¼–è¾‘å™¨çš„å‘½ä»¤æ¨¡å¼ä¸­é”®å…¥å†’å·(:)ã€â€œ sâ€ã€æ­£æ–œæ (/)å’Œæœç´¢å­—ç¬¦ä¸²ã€‚ æˆ‘ä»¬é”®å…¥çš„å†…å®¹å°†å‡ºçŽ°åœ¨æ˜¾ç¤ºå±çš„åº•çº¿ä¸Šã€‚æŒ‰ ENTER é”®æ—¶ï¼ŒåŒ…å«åŒ¹é…æ–‡æœ¬çš„åŒºåŸŸå°†çªå‡ºæ˜¾ç¤ºï¼Œå¦‚æžœå®ƒå­˜åœ¨çš„è¯ã€‚ æœç´¢çš„æ­£å¼è¯­æ³•æ˜¯: 1:s/string The syntax for replacing one string with another string in the current line is: ç”¨å½“å‰è¡Œä¸­çš„å¦ä¸€ä¸ªå­—ç¬¦ä¸²æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ä¸²çš„è¯­æ³•æ˜¯: 1:s/search pattern/replace string/ Following is the command to replace all the occurrences of the search string in the entire text. You have to add a â€œ%â€ in front of the â€œsâ€ as: ä¸‹é¢æ˜¯æ›¿æ¢æ•´ä¸ªæ–‡æœ¬ä¸­å‡ºçŽ°çš„æ‰€æœ‰æœç´¢å­—ç¬¦ä¸²çš„å‘½ä»¤ã€‚ ä½ å¿…é¡»åœ¨â€œ sâ€å‰é¢åŠ ä¸Šâ€œ% â€å¦‚ä¸‹: 1:%s/search pattern/replace string/ Q-18. How Does The Following Key (Ctrl+Alt+Del) Combination Work In Linux? Q-18. ä¸‹é¢çš„ç»„åˆé”®(Ctrl + Alt + Del)åœ¨ Linux ä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼ŸAns. Yes, it works in Linux just like Windows. This key combination when used performs a system restart. ç­”æ¡ˆã€‚ æ˜¯çš„ï¼Œå®ƒåƒ Windows ä¸€æ ·åœ¨ Linux ä¸­å·¥ä½œã€‚ å½“ä½¿ç”¨æ­¤ç»„åˆé”®æ‰§è¡Œç³»ç»Ÿé‡æ–°å¯åŠ¨æ—¶ã€‚ The only difference is that no confirmation pop-up occurs and therefore the reboot is immediate. å”¯ä¸€çš„åŒºåˆ«æ˜¯ä¸ä¼šå‡ºçŽ°ç¡®è®¤å¼¹å‡ºçª—å£ï¼Œå› æ­¤é‡æ–°å¯åŠ¨æ˜¯ç«‹å³çš„ã€‚ Q-19. How Do You Perform The List And Flush Of All IP Tables? å¦‚ä½•å®Œæˆæ‰€æœ‰ IP è¡¨çš„åˆ—è¡¨å’Œåˆ·æ–°ï¼ŸAns. First, you use the â€“L switch to view all the currently present rules and then â€“F to flush them. ç­”æ¡ˆã€‚ é¦–å…ˆï¼Œä½¿ç”¨ -l å¼€å…³æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„è§„åˆ™ï¼Œç„¶åŽä½¿ç”¨ -f åˆ·æ–°å®ƒä»¬ã€‚ Q-20. How Do You Change Permissions In Linux? ä½ å¦‚ä½•åœ¨ Linux ä¸­æ”¹å˜æƒé™ï¼ŸAns. A system administrator or the owner of a file or directory can grant permission using the command. ç­”æ¡ˆã€‚ ç³»ç»Ÿç®¡ç†å‘˜æˆ–æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…å¯ä»¥ä½¿ç”¨ chmod å‘½ä»¤æŽˆäºˆæƒé™ã€‚ User adds permission to a file using â€œ+â€ symbol and denies permission using â€œâ€“â€ symbol, along with one or more of the following letters. ç”¨æˆ·å‘ä½¿ç”¨â€œ + â€ç¬¦å·çš„æ–‡ä»¶æ·»åŠ æƒé™ï¼Œå¹¶æ‹’ç»ä½¿ç”¨â€œ-â€ç¬¦å·ä»¥åŠä¸‹åˆ—ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ¯çš„æƒé™ã€‚ -u(user), - u (ç”¨æˆ·) , -g(group), - g (ç»„åˆ«)ã€ -o(others), - o (å…¶ä»–)ã€ -a(all), - a (æ‰€æœ‰) , -r(read), - r (read) , -w(write), and - w (å†™) ï¼Œä»¥åŠ -x(execute). - x (æ‰§è¡Œ) For example the command. ä¾‹å¦‚å‘½ä»¤ã€‚ 1chmod go+rw FILE1.TXT It grants read and write access to the file FILE1.TXT, which is accessible to both groups and others. å®ƒæŽˆäºˆå¯¹ FILE1.TXT æ–‡ä»¶çš„è¯»å†™è®¿é—®æƒé™ï¼Œè¯¥æ–‡ä»¶å¯¹ç»„å’Œå…¶ä»–ç»„éƒ½å¯ä»¥è®¿é—®ã€‚ Q-21. What Is A Shell? List The Name Of Different Shells Available In Linux. Q-21. ä»€ä¹ˆæ˜¯è´å£³ï¼Ÿ åˆ—å‡º Linux ä¸­å¯ç”¨çš„ä¸åŒ Shell çš„åç§°Ans. Shell is a user program or itâ€™s environment provided for user interaction. It is a command language interpreter that executes the commands read from the standard input device like a keyboard or from a file. ç­”æ¡ˆã€‚ Shell æ˜¯ä¸ºç”¨æˆ·äº¤äº’æä¾›çš„ç”¨æˆ·ç¨‹åºæˆ–çŽ¯å¢ƒã€‚ å®ƒæ˜¯ä¸€ä¸ªå‘½ä»¤è¯­è¨€è§£é‡Šå™¨ï¼Œæ‰§è¡Œä»Žæ ‡å‡†è¾“å…¥è®¾å¤‡(å¦‚é”®ç›˜æˆ–æ–‡ä»¶)è¯»å–çš„å‘½ä»¤ã€‚ Shell is not part of the system kernel but uses the system kernel to execute programs and create files. Shell ä¸æ˜¯ç³»ç»Ÿå†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä½¿ç”¨ç³»ç»Ÿå†…æ ¸æ¥æ‰§è¡Œç¨‹åºå’Œåˆ›å»ºæ–‡ä»¶ã€‚ Following Shells are available with Linux SH, BASH, CSH, TCSH, and KSH. Other functions of a shell include scripting capability, the path memory, multitasking, and file handling. ä»¥ä¸‹ shell å¯ç”¨äºŽ linuxshã€ BASHã€ CSHã€ TCSH å’Œ KSHã€‚ Shell çš„å…¶ä»–åŠŸèƒ½åŒ…æ‹¬è„šæœ¬åŠŸèƒ½ã€è·¯å¾„å­˜å‚¨ã€å¤šä»»åŠ¡å’Œæ–‡ä»¶å¤„ç†ã€‚ Q-22. In Linux, What Names Are Assigned To The Different Serial Ports? Q-22. åœ¨ Linux ä¸­ï¼Œåˆ†é…ç»™ä¸åŒä¸²è¡Œç«¯å£çš„åç§°æ˜¯ä»€ä¹ˆï¼ŸAns. Serial ports are identified as /dev/ttyS0 to /dev/ttyS7. ç­”æ¡ˆã€‚ ä¸²è¡Œç«¯å£æ ‡è¯†ä¸º / dev / ttys0 to / dev / ttys7ã€‚ These are the names equivalent to COM1 to COM8 in Windows. è¿™äº›åç§°ç›¸å½“äºŽ Windows ä¸­çš„ COM1åˆ° COM8ã€‚ Q-23. What Is A Zombie Process? ä»€ä¹ˆæ˜¯åƒµå°¸è¿‡ç¨‹ï¼ŸAns. Zombies are essentially the premature processes whose mature parent processes died without reaping its children. Zombie processes are already dead. ç­”æ¡ˆã€‚ åƒµå°¸æœ¬è´¨ä¸Šæ˜¯æ—©ç†Ÿçš„è¿›ç¨‹ï¼Œå…¶æˆç†Ÿçš„çˆ¶è¿›ç¨‹åœ¨æ²¡æœ‰æ”¶èŽ·å­è¿›ç¨‹çš„æƒ…å†µä¸‹æ­»äº¡ã€‚ åƒµå°¸è¿›ç¨‹å·²ç»æ­»äº¡ã€‚ The kill command or system call has no effect on it. Itâ€™s just an entry in the process table. None of the resources like memory, running code or any active file does have any association with a zombie. Kill å‘½ä»¤æˆ–ç³»ç»Ÿè°ƒç”¨å¯¹å…¶æ²¡æœ‰å½±å“ã€‚ å®ƒåªæ˜¯æµç¨‹è¡¨ä¸­çš„ä¸€ä¸ªæ¡ç›®ã€‚ å†…å­˜ã€è¿è¡Œä»£ç æˆ–ä»»ä½•æ´»åŠ¨æ–‡ä»¶ç­‰èµ„æºéƒ½ä¸Žåƒµå°¸æ²¡æœ‰ä»»ä½•å…³è”ã€‚ Q-24. What Makes A Process A Zombie? æ˜¯ä»€ä¹ˆä½¿ä¸€ä¸ªè¿‡ç¨‹æˆä¸ºåƒµå°¸ï¼ŸAns. When a process dies, all resources are cleaned up including the entry in the process table. This entry is kept around, forming a zombie, to allow the parent process to track the exit status of the child. ç­”æ¡ˆã€‚ å½“ä¸€ä¸ªå·¥è‰ºæ­»äº¡æ—¶ï¼ŒåŒ…æ‹¬å·¥è‰ºè¡¨ä¸­çš„æ¡ç›®åœ¨å†…çš„æ‰€æœ‰èµ„æºéƒ½è¢«æ¸…ç†ã€‚ è¿™ä¸ªæ¡ç›®è¢«ä¿ç•™ä¸‹æ¥ï¼Œå½¢æˆä¸€ä¸ªåƒµå°¸ï¼Œä»¥å…è®¸çˆ¶è¿›ç¨‹è·Ÿè¸ªå­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ã€‚ The parent determines the exit status by calling wait() syscall. Calling wait() drives the zombie to disappear and this means reaping the child. Thus we can say that a zombie comes into existence when a process dies, but its parent hasnâ€™t called wait yet. çˆ¶çº§é€šè¿‡è°ƒç”¨ wait ()ç³»ç»Ÿè°ƒç”¨æ¥ç¡®å®šé€€å‡ºçŠ¶æ€ã€‚ è°ƒç”¨ wait ()å°†é©±åŠ¨åƒµå°¸æ¶ˆå¤±ï¼Œè¿™æ„å‘³ç€æ”¶èŽ·å­ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è¯´åƒµå°¸æ˜¯åœ¨è¿›ç¨‹æ­»äº¡æ—¶å‡ºçŽ°çš„ï¼Œä½†å®ƒçš„çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰è°ƒç”¨ waitã€‚ Q-25. How Can We See If There Are Zombie Processes On A System? æˆ‘ä»¬æ€Žæ ·æ‰èƒ½çŸ¥é“ä¸€ä¸ªç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨åƒµå°¸è¿›ç¨‹ï¼ŸAns. An existing zombie process can be determined by running â€œps auxâ€ and then looking for a Z in the STAT column. ç­”æ¡ˆã€‚ å¯ä»¥é€šè¿‡è¿è¡Œâ€œ psauxâ€ ï¼Œç„¶åŽåœ¨ STAT åˆ—ä¸­æŸ¥æ‰¾ z æ¥ç¡®å®šçŽ°æœ‰çš„åƒµå°¸è¿›ç¨‹ã€‚ Q-26. How To Remove The Zombie Process From A System? å¦‚ä½•ä»Žç³»ç»Ÿä¸­åŽ»é™¤åƒµå°¸è¿›ç¨‹ï¼ŸAns. There are two ways to terminate a zombie. æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ç»ˆç»“åƒµå°¸ã€‚ If the parent is alive, then it must call a wait() syscall to clean up a zombie. å¦‚æžœçˆ¶ä»£è¿˜æ´»ç€ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»è°ƒç”¨ä¸€ä¸ª wait ()ç³»ç»Ÿè°ƒç”¨æ¥æ¸…ç†åƒµå°¸ In the other case, if the parent dies before the child or dies without reading the childâ€™s status, the zombieâ€™s parent process is set to (the process with PID 1). Now, the has to ensure to call the wait() for the occupied zombie process. åœ¨å¦ä¸€ç§æƒ…å†µä¸‹ï¼Œå¦‚æžœçˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹ä¹‹å‰æ­»äº¡ï¼Œæˆ–è€…åœ¨æ²¡æœ‰è¯»å–å­è¿›ç¨‹çŠ¶æ€çš„æƒ…å†µä¸‹æ­»äº¡ï¼Œåˆ™åƒµå°¸çš„çˆ¶è¿›ç¨‹è¢«è®¾ç½®ä¸º init (å…·æœ‰ PID 1çš„è¿›ç¨‹)ã€‚ çŽ°åœ¨ï¼Œinit å¿…é¡»ç¡®ä¿ä¸ºè¢«å ç”¨çš„åƒµå°¸è¿›ç¨‹è°ƒç”¨ wait () Q-27. How Do You Access Partitions Under Linux? Q-27: ä½ å¦‚ä½•è®¿é—® Linux ä¸‹çš„åˆ†åŒºï¼ŸAns. Linux assigns numbers at the end of the identifiers assigned to drives. Linux åœ¨åˆ†é…ç»™é©±åŠ¨å™¨çš„æ ‡è¯†ç¬¦çš„æœ«å°¾åˆ†é…æ•°å­—ã€‚ For example, if the first IDE hard drive had three primary partitions, they would be named/numbered as &lt;/dev/hda1&gt;, &lt;/dev/hda2&gt;, and &lt;/dev/hda3&gt;. ä¾‹å¦‚ï¼Œå¦‚æžœç¬¬ä¸€ä¸ª IDE ç¡¬ç›˜é©±åŠ¨å™¨æœ‰ä¸‰ä¸ªä¸»åˆ†åŒºï¼Œå®ƒä»¬å°†è¢«å‘½åä¸º / dev / hda1ã€ / dev / hda2å’Œ / dev / hda3ã€‚ Q-28. What Is The Purpose Of â€˜Hashâ€™ Command? â€œå“ˆå¸Œâ€å‘½ä»¤çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼ŸAns. The â€œhashâ€ is one of a bash shellâ€™s built-in command. It makes use of a hash table to keep the list of pathnames for the commands executed in the shell. Whenever you run any command, the shell starts searching for it in the variable $PATH. ç­”æ¡ˆã€‚ â€œæ•£åˆ—â€æ˜¯ bash shell çš„å†…ç½®å‘½ä»¤ä¹‹ä¸€ã€‚ å®ƒä½¿ç”¨æ•£åˆ—è¡¨æ¥ä¿å­˜åœ¨ shell ä¸­æ‰§è¡Œçš„å‘½ä»¤çš„è·¯å¾„ååˆ—è¡¨ã€‚ æ— è®ºä½•æ—¶è¿è¡Œä»»ä½•å‘½ä»¤ï¼Œshell éƒ½ä¼šå¼€å§‹åœ¨å˜é‡ $PATH ä¸­æœç´¢å®ƒã€‚ However, if the command is present in the hash table, then the Shell picks it from there for execution. The hash table stores all the entrances of each command used so far in that shell. ä½†æ˜¯ï¼Œå¦‚æžœè¯¥å‘½ä»¤å­˜åœ¨äºŽå“ˆå¸Œè¡¨ä¸­ï¼Œé‚£ä¹ˆ Shell å°†ä»Žè¯¥å“ˆå¸Œè¡¨ä¸­é€‰æ‹©æ‰§è¡Œè¯¥å‘½ä»¤ã€‚ æ•£åˆ—è¡¨å­˜å‚¨åˆ°ç›®å‰ä¸ºæ­¢åœ¨è¯¥ shell ä¸­ä½¿ç”¨çš„æ¯ä¸ªå‘½ä»¤çš„æ‰€æœ‰å…¥å£ã€‚ For Example. ä¾‹å¦‚ã€‚ 12345$ hashhits command 1 /usr/bin/cat 2 /usr/bin/ps 4 /usr/bin/ls You can delete a particular command from a hash table using -d option, and -r option to reset the complete hash table. å¯ä»¥ä½¿ç”¨-d é€‰é¡¹ä»Žå“ˆå¸Œè¡¨ä¸­åˆ é™¤ç‰¹å®šå‘½ä»¤ï¼Œä½¿ç”¨-r é€‰é¡¹é‡ç½®å®Œæ•´å“ˆå¸Œè¡¨ã€‚ 12345$ hash -d cat$ hashhits command 2 /usr/bin/ps 4 /usr/bin/ls Q-29. What Is A Virtual Desktop? ä»€ä¹ˆæ˜¯è™šæ‹Ÿæ¡Œé¢ï¼ŸAns. It serves as an alternate to the action of minimizing and maximizing of different windows that need to focus on the current desktop. Every desktop that uses this feature behaves like a clean slate where you can open one or more programs. ç­”æ¡ˆã€‚ å®ƒå¯ä»¥ä½œä¸ºæœ€å°åŒ–å’Œæœ€å¤§åŒ–éœ€è¦å…³æ³¨å½“å‰æ¡Œé¢çš„ä¸åŒçª—å£çš„æ›¿ä»£æ“ä½œã€‚ æ¯ä¸ªä½¿ç”¨è¿™ä¸ªç‰¹æ€§çš„æ¡Œé¢éƒ½åƒä¸€ä¸ªå¹²å‡€çš„æ¿å²©ï¼Œä½ å¯ä»¥æ‰“å¼€ä¸€ä¸ªæˆ–å¤šä¸ªç¨‹åºã€‚ It is simple to shuffle between virtual desktops keeping the programs intact in each one of them. Rather than, minimizing/restoring these programs again and again while focusing on them. åœ¨è™šæ‹Ÿæ¡Œé¢ä¹‹é—´åˆ‡æ¢å¾ˆç®€å•ï¼Œå¯ä»¥ä¿æŒæ¯ä¸ªæ¡Œé¢ä¸­çš„ç¨‹åºå®Œå¥½æ— æŸã€‚ è€Œä¸æ˜¯åœ¨ä¸“æ³¨äºŽè¿™äº›ç¨‹åºçš„åŒæ—¶ï¼Œä¸€æ¬¡åˆä¸€æ¬¡åœ°æœ€å°åŒ– / æ¢å¤è¿™äº›ç¨‹åºã€‚ Q-30. How Will You Share A Program Across Different Virtual Desktops Under Linux? Q-30. åœ¨ Linux ä¸‹ï¼Œä½ å°†å¦‚ä½•åœ¨ä¸åŒçš„è™šæ‹Ÿæ¡Œé¢ä¸Šå…±äº«ä¸€ä¸ªç¨‹åºï¼ŸAns. There is an icon present in the upper left-hand corner of the program window that looks like a pushpin. e.g. In Ubuntu. ç­”æ¡ˆã€‚ åœ¨ç¨‹åºçª—å£çš„å·¦ä¸Šè§’æœ‰ä¸€ä¸ªå›¾æ ‡ï¼Œå®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªå›¾é’‰ã€‚ ä¾‹å¦‚:ã€‚ åœ¨ Ubuntu ä¸­ã€‚ On pressing this button, the application will get pinned, causing it to appear on all virtual desktops and in the same position on their screen. æŒ‰ä¸‹è¿™ä¸ªæŒ‰é’®ï¼Œåº”ç”¨ç¨‹åºå°†è¢«å›ºå®šï¼Œå¯¼è‡´å®ƒå‡ºçŽ°åœ¨æ‰€æœ‰çš„è™šæ‹Ÿæ¡Œé¢ä¸Šï¼Œå¹¶åœ¨å±å¹•ä¸Šçš„ç›¸åŒä½ç½®ã€‚ Summary â€“ Essential Linux Questions To Prepare For InterviewåŸºæœ¬çš„ Linux é—®é¢˜ä¸ºé¢è¯•åšå‡†å¤‡We are hopeful that the above essential Linux questions and answers would help you immensely. And youâ€™ll do well in your upcoming interviews. æˆ‘ä»¬å¸Œæœ›ä»¥ä¸Šå…³äºŽ Linux çš„åŸºæœ¬é—®é¢˜å’Œç­”æ¡ˆèƒ½å¯¹ä½ æœ‰æžå¤§çš„å¸®åŠ©ã€‚ ä½ ä¼šåœ¨å³å°†åˆ°æ¥çš„é¢è¯•ä¸­è¡¨çŽ°è‰¯å¥½ã€‚ It would be great if you let us know your feedback on this post. å¦‚æžœä½ èƒ½å‘Šè¯‰æˆ‘ä»¬ä½ å¯¹è¿™ç¯‡æ–‡ç« çš„åé¦ˆï¼Œé‚£å°±å¤ªå¥½äº†ã€‚ Also, you can ask us to write on a topic of your choice. Weâ€™ll add it to our writing roadmap. å¦å¤–ï¼Œä½ å¯ä»¥è¦æ±‚æˆ‘ä»¬æ ¹æ®ä½ çš„é€‰æ‹©å†™ä¸€ä¸ªè¯é¢˜ã€‚ æˆ‘ä»¬å°†æŠŠå®ƒæ·»åŠ åˆ°æˆ‘ä»¬çš„å†™ä½œè·¯çº¿å›¾ä¸­ã€‚ Lastly, if youâ€™d enjoyed the post, then please care to share it with friends and on social media. æœ€åŽï¼Œå¦‚æžœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·åœ¨ç¤¾äº¤åª’ä½“ä¸Šä¸Žæœ‹å‹åˆ†äº«ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[Dockeré¢è¯•å¸¸è§50é—®ç­”-2]]></title>
    <url>%2F2019%2F12%2F17%2FDocker%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%8150%E9%97%AE%E7%AD%94-2%2F</url>
    <content type="text"><![CDATA[é—®ï¼šDocker å’Œ ä¼ ç»Ÿçš„è™šæ‹Ÿæœºæœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿç­”ï¼š æˆ‘ä»¬çŸ¥é“inuxç³»ç»Ÿå°†è‡ªèº«åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºæ ¸å¿ƒè½¯ä»¶ï¼Œä¹Ÿç§°ä½œå†…æ ¸ç©ºé—´(kernel)ï¼Œå¦ä¸€éƒ¨åˆ†ä¸ºæ™®é€šåº”ç”¨ç¨‹åºï¼Œè¿™éƒ¨åˆ†ç§°ä¸ºç”¨æˆ·ç©ºé—´(userland)ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯ç›´æŽ¥è¿è¡ŒäºŽå®¿ä¸»å†…æ ¸çš„ï¼Œè¿™ç‚¹å’Œå®¿ä¸»è¿›ç¨‹ä¸€è‡´ï¼Œåªæ˜¯å®¹å™¨çš„ userland ä¸åŒï¼Œå®¹å™¨çš„ userland ç”±å®¹å™¨é•œåƒæä¾›ï¼Œä¹Ÿå°±æ˜¯è¯´é•œåƒæä¾›äº† rootfsã€‚å‡è®¾å®¿ä¸»æ˜¯ Ubuntuï¼Œå®¹å™¨æ˜¯ CentOSã€‚CentOS å®¹å™¨ä¸­çš„è¿›ç¨‹ä¼šç›´æŽ¥å‘ Ubuntu å®¿ä¸»å†…æ ¸å‘é€ syscallï¼Œè€Œä¸ä¼šç›´æŽ¥æˆ–é—´æŽ¥çš„ä½¿ç”¨ä»»ä½• Ubuntu çš„ userland çš„åº“ã€‚è¿™ç‚¹å’Œè™šæ‹Ÿæœºæœ‰æœ¬è´¨çš„ä¸åŒï¼Œè™šæ‹Ÿæœºæ˜¯è™šæ‹ŸçŽ¯å¢ƒï¼Œåœ¨çŽ°æœ‰ç³»ç»Ÿä¸Šè™šæ‹Ÿä¸€å¥—ç‰©ç†è®¾å¤‡ï¼Œç„¶åŽåœ¨è™šæ‹ŸçŽ¯å¢ƒå†…è¿è¡Œä¸€ä¸ªè™šæ‹ŸçŽ¯å¢ƒçš„æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œåœ¨å†…æ ¸ä¹‹ä¸Šå†è·‘å®Œæ•´ç³»ç»Ÿï¼Œå¹¶åœ¨é‡Œé¢è°ƒç”¨è¿›ç¨‹ã€‚è¿˜ä»¥ä¸Šé¢çš„ä¾‹å­åŽ»è€ƒè™‘ï¼Œè™šæ‹Ÿæœºä¸­ï¼ŒCentOS çš„è¿›ç¨‹å‘é€ syscall å†…æ ¸è°ƒç”¨ï¼Œè¯¥è¯·æ±‚ä¼šè¢«è™šæ‹Ÿæœºå†…çš„ CentOS çš„å†…æ ¸æŽ¥åˆ°ï¼Œç„¶åŽ CentOS å†…æ ¸è®¿é—®è™šæ‹Ÿç¡¬ä»¶æ—¶ï¼Œç”±è™šæ‹Ÿæœºçš„æœåŠ¡è½¯ä»¶æˆªèŽ·ï¼Œå¹¶ä½¿ç”¨å®¿ä¸»ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯ Ubuntu çš„å†…æ ¸åŠ userland çš„åº“åŽ»æ‰§è¡Œã€‚è€Œä¸”ï¼ŒLinux å’Œ Windows åœ¨è¿™ç‚¹ä¸Šéžå¸¸ä¸åŒã€‚Linux çš„è¿›ç¨‹æ˜¯ç›´æŽ¥å‘ syscall çš„ï¼Œè€Œ Windows åˆ™æŠŠ syscall éšè—äºŽä¸€å±‚å±‚çš„ DLL æœåŠ¡ä¹‹åŽï¼Œå› æ­¤ Windows çš„ä»»ä½•ä¸€ä¸ªè¿›ç¨‹å¦‚æžœè¦æ‰§è¡Œï¼Œä¸ä»…ä»…éœ€è¦ Windows å†…æ ¸ï¼Œè¿˜éœ€è¦ä¸€ç¾¤æœåŠ¡æ¥æ”¯æ’‘ï¼Œæ‰€ä»¥å¦‚æžœ Windows è¦å®žçŽ°ç±»ä¼¼çš„æœºåˆ¶ï¼Œå®¹å™¨å†…å°†ä¸ä¼šåƒ Linux è¿™æ ·è½»é‡çº§ï¼Œè€Œæ˜¯éžå¸¸è‡ƒè‚¿ã€‚çœ‹ä¸€ä¸‹å¾®è½¯ç§»æ¤çš„ Docker å°±éžå¸¸æ¸…æ¥šäº†ã€‚æ‰€ä»¥ä¸è¦æŠŠ Docker å’Œè™šæ‹Ÿæœºå¼„æ··ï¼ŒDocker å®¹å™¨åªæ˜¯ä¸€ä¸ªè¿›ç¨‹è€Œå·²ï¼Œåªä¸è¿‡åˆ©ç”¨é•œåƒæä¾›çš„ rootfs æä¾›äº†è°ƒç”¨æ‰€éœ€çš„ userland åº“æ”¯æŒï¼Œä½¿å¾—è¿›ç¨‹å¯ä»¥åœ¨å—æŽ§çŽ¯å¢ƒä¸‹è¿è¡Œè€Œå·²ï¼Œå®ƒå¹¶æ²¡æœ‰è™šæ‹Ÿå‡ºä¸€ä¸ªæœºå™¨å‡ºæ¥ã€‚ Linux å®¹å™¨ä¸æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯å¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ã€‚ é—®ï¼šå¦‚ä½•å®‰è£… Dockerï¼Ÿç­”ï¼š å¾ˆå¤šäººé—®åˆ° docker, docker.io, docker-engine ç”šè‡³ lxc-docker éƒ½æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…¶ä¸­ï¼ŒRHEL/CentOS è½¯ä»¶æºä¸­çš„ Docker åŒ…åä¸º dockerï¼›Ubuntu è½¯ä»¶æºä¸­çš„ Docker åŒ…åä¸º docker.ioï¼›è€Œå¾ˆå¤è€çš„ Docker æºä¸­ Docker ä¹Ÿæ›¾å«åš lxc-dockerã€‚è¿™äº›éƒ½æ˜¯éžå¸¸è€æ—§çš„ Docker ç‰ˆæœ¬ï¼Œå¹¶ä¸”åŸºæœ¬ä¸ä¼šæ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè€Œå¯¹äºŽä½¿ç”¨ Docker è€Œè¨€ï¼Œä½¿ç”¨æœ€æ–°ç‰ˆæœ¬éžå¸¸é‡è¦ã€‚å¦å¤–ï¼Œ17.04 ä»¥åŽï¼ŒåŒ…åä»Ž docker-engine æ”¹ä¸º docker-ceï¼Œå› æ­¤ä»ŽçŽ°åœ¨å¼€å§‹å®‰è£…ï¼Œåº”è¯¥éƒ½ä½¿ç”¨ docker-ceè¿™ä¸ªåŒ…ã€‚æ­£ç¡®çš„å®‰è£…æ–¹æ³•æœ‰ä¸¤ç§ï¼š ä¸€ç§æ˜¯å‚è€ƒå®˜æ–¹å®‰è£…æ–‡æ¡£åŽ»é…ç½® apt æˆ–è€… yum çš„æºï¼› å¦ä¸€ç§åˆ™æ˜¯ä½¿ç”¨å®˜æ–¹æä¾›çš„å®‰è£…è„šæœ¬å¿«é€Ÿå®‰è£…ã€‚ å®˜æ–¹æ–‡æ¡£å¯¹é…ç½®æºçš„æ–¹æ³•å·²ç»æœ‰å¾ˆè¯¦ç»†çš„è®²è§£:å®˜æ–¹æ–‡æ¡£åœ°å€ 17.04 åŠä»¥åŽçš„ç‰ˆæœ¬å®‰è£…æ–¹æ³•ï¼šä»Ž 17.04 ä»¥åŽï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…ã€‚ 1export CHANNEL=stablecurl -fsSL https://get.docker.com/ | sh -s -- --mirror Aliyun è¿™é‡Œä½¿ç”¨çš„æ˜¯å®˜æ–¹è„šæœ¬å®‰è£…ï¼Œé€šè¿‡çŽ¯å¢ƒå˜é‡æŒ‡å®šå®‰è£…é€šé“ä¸º stableï¼Œï¼ˆå¦‚æžœå–œæ¬¢å°é²œå¯ä»¥æ”¹ä¸º edge, testï¼‰ï¼Œå¹¶ä¸”æŒ‡å®šä½¿ç”¨é˜¿é‡Œäº‘çš„æº(apt/yum)æ¥å®‰è£… Docker CE ç‰ˆæœ¬ã€‚ 17.03 åŠä»¥å‰çš„ç‰ˆæœ¬å®‰è£…æ–¹æ³•ï¼šæ—©æœŸçš„ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘æˆ–è€… DaoCloud è€çš„è„šæœ¬å®‰è£…ï¼šä½¿ç”¨é˜¿é‡Œäº‘çš„å®‰è£…è„šæœ¬ï¼š 1curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh - ä½¿ç”¨DaoCloudçš„Dockerå®‰è£…è„šæœ¬ï¼š 1curl -sSL https://get.daocloud.io/docker | sh Centos7æœºå™¨ç›´æŽ¥ç”¨RPMåŒ…å®‰è£…æ–¹æ³•ï¼šå¯åŽ»é˜¿é‡Œäº‘å¯»æ‰¾åˆ°æœ€æ–°çš„rpmåŒ…å¹¶ä¸‹è½½å®‰è£…ï¼š[é˜¿é‡Œäº‘docker rpmåœ°å€]:(https://mirrors.aliyun.com/docker-ce/linux/centos/7/x86_64/stable/Packages/) 1wget https://mirrors.aliyun.com/docker-ce/linux/centos/7/x86_64/stable/Packages/docker-ce-18.03.0.ce-1.el7.centos.x86_64.rpm -O docker-ce-18.03.0.ce-1.el7.centos.x86_64.rpmyum install -y container-selinuxyum -y localinstall docker-ce-18.03.0.ce-1.el7.centos.x86_64.rpm é—®ï¼šDockerä¸­ä½¿ç”¨äº†é‚£äº›æ ¸å¿ƒæŠ€æœ¯ï¼Ÿç­”ï¼š Linux Namespaceå‘½åç©ºé—´ã€Linux CGroupå…¨ç§°Linux Control GroupæŽ§åˆ¶ç»„å’Œ UnionFS å…¨ç§°Union File Systemè”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œä¸‰å¤§æŠ€æœ¯æ”¯æ’‘äº†ç›®å‰ Docker çš„å®žçŽ°ï¼Œä¹Ÿæ˜¯ Docker èƒ½å¤Ÿå‡ºçŽ°çš„æœ€é‡è¦åŽŸå› ã€‚ Linux Namespaceæ˜¯Linuxæä¾›çš„ä¸€ç§å†…æ ¸çº§åˆ«çŽ¯å¢ƒéš”ç¦»çš„æ–¹æ³•ã€‚é€šè¿‡éš”ç¦»è¦åšåˆ°çš„æ•ˆæžœæ˜¯ï¼šå¦‚æžœæŸä¸ª Namespace ä¸­æœ‰è¿›ç¨‹åœ¨é‡Œé¢è¿è¡Œï¼Œå®ƒä»¬åªèƒ½çœ‹åˆ°è¯¥ Namespace çš„ä¿¡æ¯ï¼Œæ— æ³•çœ‹åˆ° Namespace ä»¥å¤–çš„ä¸œè¥¿ã€‚Linux çš„å‘½åç©ºé—´æœºåˆ¶æä¾›äº†ä»¥ä¸‹ä¸ƒç§ä¸åŒçš„å‘½åç©ºé—´ï¼ŒåŒ…æ‹¬CLONE_NEWCGROUPã€CLONE_NEWIPCã€CLONE_NEWNETã€CLONE_NEWNSã€CLONE_NEWPIDã€CLONE_NEWUSER å’Œ CLONE_NEWUTSï¼Œé€šè¿‡è¿™ä¸ƒä¸ªé€‰é¡¹æˆ‘ä»¬èƒ½åœ¨åˆ›å»ºæ–°çš„è¿›ç¨‹æ—¶è®¾ç½®æ–°è¿›ç¨‹åº”è¯¥åœ¨å“ªäº›èµ„æºä¸Šä¸Žå®¿ä¸»æœºå™¨è¿›è¡Œéš”ç¦»ã€‚è¿™äº› Namespace åŸºæœ¬ä¸Šè¦†ç›–äº†ä¸€ä¸ªç¨‹åºè¿è¡Œæ‰€éœ€çš„çŽ¯å¢ƒï¼Œä¿è¯è¿è¡Œåœ¨çš„éš”ç¦»çš„ Namespace ä¸­çš„ï¼Œä¼šè®©ç¨‹åºä¸ä¼šå—åˆ°å…¶ä»–æ”¶åˆ° Namespaceç¨‹åºçš„å¹²æ‰°ã€‚ä½†ä¸æ˜¯æ‰€æœ‰çš„ç³»ç»Ÿèµ„æºéƒ½èƒ½éš”ç¦»ï¼Œæ—¶é—´å°±æ˜¯ä¸ªä¾‹å¤–ï¼Œæ²¡æœ‰å¯¹åº”çš„ Namespaceï¼Œå› æ­¤åŒä¸€å° Linux å¯åŠ¨çš„å®¹å™¨æ—¶é—´éƒ½æ˜¯ç›¸åŒçš„ã€‚ åç§° å®å®šä¹‰ éš”ç¦»çš„å†…å®¹ IPC CLONE_NEWIPC System V IPC, POSIX message queues (since Linux 2.6.19) Network CLONE_NEWNET network device interfaces, IPv4 and IPv6 protocol stacks, IP routing tables, firewall rules, the /proc/net and /sys/class/net directory trees, sockets, etc (since Linux 2.6.24) Mount CLONE_NEWNS Mount points (since Linux 2.4.19) PID CLONE_NEWPID Process IDs (since Linux 2.6.24) User CLONE_NEWUSER User and group IDs (started in Linux 2.6.23 and completed in Linux 3.8) UTS CLONE_NEWUTS Hostname and NIS domain name (since Linux 2.6.19) Cgroup CLONE_NEWCGROUP Cgroup root directory (since Linux 4.6) Linux CGroupæ˜¯Linuxå†…æ ¸ç”¨æ¥é™åˆ¶ï¼ŒæŽ§åˆ¶ä¸Žåˆ†ç¦»ä¸€ä¸ªè¿›ç¨‹ç»„ç¾¤çš„èµ„æºï¼ˆå¦‚CPUã€å†…å­˜ã€ç£ç›˜è¾“å…¥è¾“å‡ºç­‰ï¼‰ã€‚Linux CGroupCgroup å¯è®©æ‚¨ä¸ºç³»ç»Ÿä¸­æ‰€è¿è¡Œä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰çš„ç”¨æˆ·å®šä¹‰ç»„ç¾¤åˆ†é…èµ„æº â€” æ¯”å¦‚ CPU æ—¶é—´ã€ç³»ç»Ÿå†…å­˜ã€ç½‘ç»œå¸¦å®½æˆ–è€…è¿™äº›èµ„æºçš„ç»„åˆã€‚æ‚¨å¯ä»¥ç›‘æŽ§æ‚¨é…ç½®çš„ cgroupï¼Œæ‹’ç»cgroup è®¿é—®æŸäº›èµ„æºï¼Œç”šè‡³åœ¨è¿è¡Œçš„ç³»ç»Ÿä¸­åŠ¨æ€é…ç½®æ‚¨çš„ cgroupã€‚ä¸»è¦æä¾›äº†å¦‚ä¸‹åŠŸèƒ½ï¼š Resource limitation: é™åˆ¶è¿›ç¨‹ä½¿ç”¨çš„èµ„æºä¸Šé™ï¼Œæ¯”å¦‚æœ€å¤§å†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ä½¿ç”¨é™åˆ¶ã€‚ Prioritization: ä¼˜å…ˆçº§æŽ§åˆ¶ï¼Œæ¯”å¦‚ï¼šCPUåˆ©ç”¨å’Œç£ç›˜IOåžåã€‚ Accounting: ä¸€äº›å®¡è®¡æˆ–ä¸€äº›ç»Ÿè®¡ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®¡è´¹ã€‚ Control: æŒ‚èµ·ä¸€ç»„è¿›ç¨‹ï¼Œæˆ–è€…é‡å¯ä¸€ç»„è¿›ç¨‹ã€‚ å‰é¢è¯´è¿‡ï¼Œcgroups æ˜¯ç”¨æ¥å¯¹è¿›ç¨‹è¿›è¡Œèµ„æºç®¡ç†çš„ï¼Œå› æ­¤ cgroup éœ€è¦è€ƒè™‘å¦‚ä½•æŠ½è±¡è¿™ä¸¤ç§æ¦‚å¿µï¼šè¿›ç¨‹å’Œèµ„æºï¼ŒåŒæ—¶å¦‚ä½•ç»„ç»‡è‡ªå·±çš„ç»“æž„ã€‚cgroupsä¸­æœ‰å‡ ä¸ªéžå¸¸é‡è¦çš„æ¦‚å¿µï¼š taskï¼šä»»åŠ¡ï¼Œå¯¹åº”äºŽç³»ç»Ÿä¸­è¿è¡Œçš„ä¸€ä¸ªå®žä½“ï¼Œä¸€èˆ¬æ˜¯æŒ‡è¿›ç¨‹ subsystemï¼šå­ç³»ç»Ÿï¼Œå…·ä½“çš„èµ„æºæŽ§åˆ¶å™¨ï¼ˆresource class æˆ–è€… resource controllerï¼‰ï¼ŒæŽ§åˆ¶æŸä¸ªç‰¹å®šçš„èµ„æºä½¿ç”¨ã€‚æ¯”å¦‚ CPU å­ç³»ç»Ÿå¯ä»¥æŽ§åˆ¶ CPU æ—¶é—´ï¼Œmemory å­ç³»ç»Ÿå¯ä»¥æŽ§åˆ¶å†…å­˜ä½¿ç”¨é‡ cgroupï¼šæŽ§åˆ¶ç»„ï¼Œä¸€ç»„ä»»åŠ¡å’Œå­ç³»ç»Ÿçš„å…³è”å…³ç³»ï¼Œè¡¨ç¤ºå¯¹è¿™äº›ä»»åŠ¡è¿›è¡Œæ€Žæ ·çš„èµ„æºç®¡ç†ç­–ç•¥ hierarchyï¼šå±‚çº§æ ‘ï¼Œä¸€ç³»åˆ— cgroup ç»„æˆçš„æ ‘å½¢ç»“æž„ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª cgroupï¼Œcgroup å¯ä»¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹é»˜è®¤ä¼šç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„å±žæ€§ã€‚ç³»ç»Ÿä¸­å¯ä»¥æœ‰å¤šä¸ª hierarchy cgroupsä¸ºæ¯ç§å¯ä»¥æŽ§åˆ¶çš„èµ„æºå®šä¹‰äº†ä¸€ä¸ªå­ç³»ç»Ÿã€‚å…¸åž‹çš„å­ç³»ç»Ÿä»‹ç»å¦‚ä¸‹ï¼š Block IOï¼ˆblkio)ï¼šé™åˆ¶å—è®¾å¤‡ï¼ˆç£ç›˜ã€SSDã€USB ç­‰ï¼‰çš„ IO é€ŸçŽ‡ CPU Set(cpuset)ï¼šé™åˆ¶ä»»åŠ¡èƒ½è¿è¡Œåœ¨å“ªäº› CPU æ ¸ä¸Š CPU Accounting(cpuacct)ï¼šç”Ÿæˆ cgroup ä¸­ä»»åŠ¡ä½¿ç”¨ CPU çš„æŠ¥å‘Š CPU (CPU)ï¼šé™åˆ¶è°ƒåº¦å™¨åˆ†é…çš„ CPU æ—¶é—´ Devices (devices)ï¼šå…è®¸æˆ–è€…æ‹’ç» cgroup ä¸­ä»»åŠ¡å¯¹è®¾å¤‡çš„è®¿é—® Freezer (freezer)ï¼šæŒ‚èµ·æˆ–è€…é‡å¯ cgroup ä¸­çš„ä»»åŠ¡ Memory (memory)ï¼šé™åˆ¶ cgroup ä¸­ä»»åŠ¡ä½¿ç”¨å†…å­˜çš„é‡ï¼Œå¹¶ç”Ÿæˆä»»åŠ¡å½“å‰å†…å­˜çš„ä½¿ç”¨æƒ…å†µæŠ¥å‘Š Network Classifier(net_cls)ï¼šä¸º cgroup ä¸­çš„æŠ¥æ–‡è®¾ç½®ä¸Šç‰¹å®šçš„ classid æ ‡å¿—ï¼Œè¿™æ · tc ç­‰å·¥å…·å°±èƒ½æ ¹æ®æ ‡è®°å¯¹ç½‘ç»œè¿›è¡Œé…ç½® Network Priority (net_prio)ï¼šå¯¹æ¯ä¸ªç½‘ç»œæŽ¥å£è®¾ç½®æŠ¥æ–‡çš„ä¼˜å…ˆçº§ perf_eventï¼šè¯†åˆ«ä»»åŠ¡çš„ cgroup æˆå‘˜ï¼Œå¯ä»¥ç”¨æ¥åšæ€§èƒ½åˆ†æž ä½¿ç”¨ cgroups çš„æ–¹å¼æœ‰å‡ ç§ï¼š ä½¿ç”¨ cgroups æä¾›çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œç›´æŽ¥é€šè¿‡åˆ›å»ºã€è¯»å†™å’Œåˆ é™¤ç›®å½•ã€æ–‡ä»¶æ¥æŽ§åˆ¶ cgroups ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¯”å¦‚ libcgroupåŒ…æä¾›çš„ cgcreateã€cgexecã€cgclassify å‘½ä»¤ ä½¿ç”¨ rules engine daemon æä¾›çš„é…ç½®æ–‡ä»¶ å½“ç„¶ï¼Œsystemdã€lxcã€docker è¿™äº›å°è£…äº† cgroups çš„è½¯ä»¶ä¹Ÿèƒ½è®©ä½ é€šè¿‡å®ƒä»¬å®šä¹‰çš„æŽ¥å£æŽ§åˆ¶ cgroups çš„å†…å®¹ åœ¨å®žè·µä¸­ï¼Œç³»ç»Ÿç®¡ç†å‘˜ä¸€èˆ¬ä¼šåˆ©ç”¨CGroupåšä¸‹é¢è¿™äº›äº‹ï¼ˆæœ‰ç‚¹åƒä¸ºæŸä¸ªè™šæ‹Ÿæœºåˆ†é…èµ„æºä¼¼çš„ï¼‰ï¼š éš”ç¦»ä¸€ä¸ªè¿›ç¨‹é›†åˆï¼ˆæ¯”å¦‚ï¼šnginxçš„æ‰€æœ‰è¿›ç¨‹ï¼‰ï¼Œå¹¶é™åˆ¶ä»–ä»¬æ‰€æ¶ˆè´¹çš„èµ„æºï¼Œæ¯”å¦‚ç»‘å®šCPUçš„æ ¸ã€‚ ä¸ºè¿™ç»„è¿›ç¨‹ åˆ†é…å…¶è¶³å¤Ÿä½¿ç”¨çš„å†…å­˜ ä¸ºè¿™ç»„è¿›ç¨‹åˆ†é…ç›¸åº”çš„ç½‘ç»œå¸¦å®½å’Œç£ç›˜å­˜å‚¨é™åˆ¶ é™åˆ¶è®¿é—®æŸäº›è®¾å¤‡ï¼ˆé€šè¿‡è®¾ç½®è®¾å¤‡çš„ç™½åå•ï¼‰ UnionFSå°±æ˜¯æŠŠä¸åŒç‰©ç†ä½ç½®çš„ç›®å½•åˆå¹¶mountåˆ°åŒä¸€ä¸ªç›®å½•ä¸­UnionFSå…¶å®žæ˜¯ä¸€ç§ä¸º Linux æ“ä½œç³»ç»Ÿè®¾è®¡çš„ç”¨äºŽæŠŠå¤šä¸ªæ–‡ä»¶ç³»ç»Ÿã€Žè”åˆã€åˆ°åŒä¸€ä¸ªæŒ‚è½½ç‚¹çš„æ–‡ä»¶ç³»ç»ŸæœåŠ¡ã€‚ æ“ä½œç³»ç»Ÿä¸­ï¼Œè”åˆæŒ‚è½½ï¼ˆunion mountingï¼‰æ˜¯ä¸€ç§å°†å¤šä¸ªç›®å½•ç»“åˆæˆä¸€ä¸ªç›®å½•çš„æ–¹å¼ï¼Œè¿™ä¸ªç›®å½•çœ‹èµ·æ¥å°±åƒåŒ…å«äº†ä»–ä»¬ç»“åˆçš„å†…å®¹ä¸€æ ·ã€‚ è”åˆæ–‡ä»¶ç³»ç»Ÿçš„å®žçŽ°é€šå¸¸è¾…æœ‰â€œå†™æ—¶å¤åˆ¶ï¼ˆCoWï¼‰â€çš„å®žçŽ°æŠ€æœ¯ï¼Œè¿™æ ·ä»»ä½•å¯¹äºŽåº•å±‚æ–‡ä»¶ç³»ç»Ÿåˆ†å±‚çš„æ›´æ”¹éƒ½ä¼šè¢«â€œå‘ä¸Šæ‹·è´â€åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªä¸´æ—¶ã€å·¥ä½œã€æˆ–é«˜å±‚çš„åˆ†å±‚é‡Œé¢ã€‚è¿™ä¸ªå¯å†™çš„å±‚ç„¶åŽå¯ä»¥è¢«çœ‹åšæ˜¯ä¸€ä¸ªâ€œæ”¹åŠ¨ï¼ˆdiffï¼‰â€ï¼Œèƒ½å°†ä¹‹åº”ç”¨åˆ°ä¸‹å±‚åªè¯»çš„å±‚ï¼Œè€Œè¿™äº›å±‚å¾ˆå¯èƒ½ä½œä¸ºåº•å±‚è¢«å¾ˆå¤šå®¹å™¨çš„è¿›ç¨‹ä¸­å…±äº«ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹ã€‚ è€Œ AUFS å³ Advanced UnionFS å…¶å®žå°±æ˜¯ UnionFS çš„å‡çº§ç‰ˆï¼Œå®ƒèƒ½å¤Ÿæä¾›æ›´ä¼˜ç§€çš„æ€§èƒ½å’Œæ•ˆçŽ‡ã€‚AUFSæœ‰æ‰€æœ‰Union FSçš„ç‰¹æ€§ï¼ŒæŠŠå¤šä¸ªç›®å½•ï¼Œåˆå¹¶æˆåŒä¸€ä¸ªç›®å½•ï¼Œå¹¶å¯ä»¥ä¸ºæ¯ä¸ªéœ€è¦åˆå¹¶çš„ç›®å½•æŒ‡å®šç›¸åº”çš„æƒé™ï¼Œå®žæ—¶çš„æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å·²ç»è¢«mountå¥½çš„ç›®å½•ã€‚è€Œä¸”ï¼Œä»–è¿˜èƒ½åœ¨å¤šä¸ªå¯å†™çš„branch/diré—´è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚AUFS ä½œä¸ºè”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒèƒ½å¤Ÿå°†ä¸åŒæ–‡ä»¶å¤¹ä¸­çš„å±‚è”åˆï¼ˆUnionï¼‰åˆ°äº†åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œè¿™äº›æ–‡ä»¶å¤¹åœ¨ AUFS ä¸­ç§°ä½œåˆ†æ”¯ï¼Œæ•´ä¸ªã€Žè”åˆã€çš„è¿‡ç¨‹è¢«ç§°ä¸ºè”åˆæŒ‚è½½ï¼ˆUnion Mountï¼‰AUFS åªæ˜¯ Docker ä½¿ç”¨çš„å­˜å‚¨é©±åŠ¨çš„ä¸€ç§ï¼Œé™¤äº† AUFS ä¹‹å¤–ï¼ŒDocker è¿˜æ”¯æŒäº†ä¸åŒçš„å­˜å‚¨é©±åŠ¨ï¼ŒåŒ…æ‹¬ aufsã€devicemapperã€overlay2ã€zfs å’Œvfsç­‰ç­‰ï¼Œåœ¨æœ€æ–°çš„ Docker ä¸­ï¼Œoverlay2 å–ä»£äº† aufs æˆä¸ºäº†æŽ¨èçš„å­˜å‚¨é©±åŠ¨ï¼Œä½†æ˜¯åœ¨æ²¡æœ‰ overlay2 é©±åŠ¨çš„æœºå™¨ä¸Šä»ç„¶ä¼šä½¿ç”¨ aufsä½œä¸º Docker çš„é»˜è®¤é©±åŠ¨ã€‚ å®˜æ–¹å‚è€ƒæ–‡æ¡£ï¼š https://docs.docker.com/storage/storagedriver/select-storage-driver/#supported-backing-filesystems é—®ï¼šOCIã€runC ã€Containerd ã€Docker-shim æ˜¯ä»€ä¹ˆï¼Ÿä»–ä»¬ä¹‹é—´æœ‰æ€Žä¹ˆæ ·çš„å…³è”ï¼Ÿç­”ï¼šOpen Container Initiativeï¼ˆOCIï¼‰æ˜¯ï¼š OCIåœ¨2015å¹´6æœˆå®£å¸ƒæˆç«‹ï¼Œæ—¨åœ¨å›´ç»•å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶åˆ¶å®šä¸€ä¸ªå¼€æ”¾çš„å·¥ä¸šåŒ–æ ‡å‡†ã€‚OCIçš„ç›®æ ‡æ˜¯ä¸ºäº†é¿å…å®¹å™¨çš„ç”Ÿæ€åˆ†è£‚ä¸ºâ€œå°ç”Ÿæ€çŽ‹å›½â€ï¼Œç¡®ä¿ä¸€ä¸ªå¼•æ“Žä¸Šæž„å»ºçš„å®¹å™¨å¯ä»¥è¿è¡Œåœ¨å…¶ä»–å¼•æ“Žä¹‹ä¸Šã€‚è¿™æ˜¯å®žçŽ°å®¹å™¨å¯ç§»æ¤æ€§è‡³å…³é‡è¦çš„éƒ¨åˆ†ã€‚åªè¦Dockeræ˜¯å”¯ä¸€çš„è¿è¡Œæ—¶ï¼Œå®ƒå°±æ˜¯äº‹å®žä¸Šçš„è¡Œä¸šæ ‡å‡†ã€‚ä½†æ˜¯éšç€å¯ç”¨ï¼ˆå’Œé‡‡çº³ï¼‰å’Œå…¶ä»–å¼•æ“Žï¼Œæœ‰å¿…è¦ä»ŽæŠ€æœ¯çš„è§’åº¦ä¸Šå®šä¹‰â€œä»€ä¹ˆæ˜¯å®¹å™¨â€ï¼Œä»¥ä¾¿ä¸åŒå®žçŽ°ä¸Šå¯ä»¥è¾¾æˆæœ€ç»ˆçš„ä¸€è‡´ã€‚ runCæ˜¯ï¼š runCæ˜¯ä»ŽDockerçš„libcontainerä¸­è¿ç§»è€Œæ¥çš„ï¼Œå®žçŽ°äº†å®¹å™¨å¯åœã€èµ„æºéš”ç¦»ç­‰åŠŸèƒ½ã€‚runCæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å·¥å…·ï¼Œå®ƒæ˜¯ç”¨æ¥è¿è¡Œå®¹å™¨çš„ï¼Œåªç”¨æ¥åšè¿™ä¸€ä»¶äº‹ï¼Œå¹¶ä¸”è¿™ä¸€ä»¶äº‹è¦åšå¥½ã€‚å¦‚æžœä½ äº†è§£è¿‡Dockerå¼•æ“Žæ—©æœŸçš„åŽ†å²ï¼Œä½ åº”è¯¥çŸ¥é“å½“æ—¶å¯åŠ¨å’Œç®¡ç†ä¸€ä¸ªå®¹å™¨éœ€è¦ä½¿ç”¨LXCå·¥å…·é›†ï¼Œç„¶åŽåœ¨ä½¿ç”¨libcontainerã€‚libcontainerå°±æ˜¯ä½¿ç”¨ç±»ä¼¼cgroupå’Œnamespaceä¸€æ ·çš„Linuxå†…æ ¸è®¾å¤‡æŽ¥å£ç¼–å†™çš„ä¸€å°æ®µä»£ç ï¼Œå®ƒæ˜¯å®¹å™¨çš„åŸºæœ¬æž„å»ºæ¨¡å—ã€‚ä¸ºäº†æ˜¯è¿‡ç¨‹æ›´åŠ ç®€å•ï¼ŒrunCåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªå°å‘½ä»¤è¡Œå·¥å…·ä¸”å®ƒå¯ä»¥ä¸ç”¨é€šè¿‡Dockerå¼•æ“Žï¼Œç›´æŽ¥å°±å¯ä»¥ä½¿ç”¨å®¹å™¨ã€‚è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½¿ç”¨OCIå®¹å™¨å°±å¯ä»¥è¿è¡Œå®ƒã€‚ Containerdæ˜¯ï¼š Containerdæ˜¯ä¸€ä¸ªç®€å•çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ƒå¯ä»¥ä½¿ç”¨runCç®¡ç†å®¹å™¨ï¼Œä½¿ç”¨gRPCæš´éœ²å®¹å™¨çš„å…¶ä»–åŠŸèƒ½ã€‚ç›¸æ¯”è¾ƒDockerå¼•æ“Žï¼Œä½¿ç”¨gRPCï¼Œcontainerdæš´éœ²å‡ºé’ˆå¯¹å®¹å™¨çš„å¢žåˆ æ”¹æŸ¥çš„æŽ¥å£ï¼Œç„¶è€ŒDockerå¼•æ“Žåªæ˜¯ä½¿ç”¨full-blown HTTP APIæŽ¥å£å¯¹Imagesã€Volumesã€networkã€buildsç­‰æš´éœ²å‡ºè¿™äº›æ–¹æ³•ã€‚containerdå‘ä¸Šä¸ºDocker Daemonæä¾›äº†gRPCæŽ¥å£ï¼Œä½¿å¾—Docker Daemonå±è”½ä¸‹é¢çš„ç»“æž„å˜åŒ–ï¼Œç¡®ä¿åŽŸæœ‰æŽ¥å£å‘ä¸‹å…¼å®¹ã€‚å‘ä¸‹é€šè¿‡containerd-shimç»“åˆrunCï¼Œä½¿å¾—å¼•æ“Žå¯ä»¥ç‹¬ç«‹å‡çº§ï¼Œé¿å…ä¹‹å‰Docker Daemonå‡çº§ä¼šå¯¼è‡´æ‰€æœ‰å®¹å™¨ä¸å¯ç”¨çš„é—®é¢˜ã€‚ Docker-shim æ˜¯ï¼š docker-shimæ˜¯ä¸€ä¸ªçœŸå®žè¿è¡Œçš„å®¹å™¨çš„çœŸå®žåž«ç‰‡è½½ä½“ï¼Œæ¯å¯åŠ¨ä¸€ä¸ªå®¹å™¨éƒ½ä¼šèµ·ä¸€ä¸ªæ–°çš„docker-shimçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œä»–ç›´æŽ¥é€šè¿‡æŒ‡å®šçš„ä¸‰ä¸ªå‚æ•°ï¼šå®¹å™¨idï¼Œboundleç›®å½• ã€‚è¿è¡Œæ˜¯äºŒè¿›åˆ¶ï¼ˆé»˜è®¤ä¸ºruncï¼‰æ¥è°ƒç”¨runcçš„apiåˆ›å»ºä¸€ä¸ªå®¹å™¨ã€‚ å®ƒä»¬ä¹‹é—´çš„å…³è”å…³ç³»ï¼š æˆ‘ä»¬lsçœ‹ä¸‹ä¸»æœºä¸Šçš„DockeräºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¼šå‘çŽ°æœ‰docker,dockerd,docker-containerd,docker-containerd-shim,å’Œdocker-containerd-ctrï¼Œdocker-runcç­‰ã€‚ 1$ ls /usr/bin |grep dockerdockerdocker-containerddocker-containerd-ctrdocker-containerd-shimdockerddocker-initdocker-proxydocker-runc dockerdæ˜¯docker engineå®ˆæŠ¤è¿›ç¨‹ï¼Œdockerdå¯åŠ¨æ—¶ä¼šå¯åŠ¨docker-containerdå­è¿›ç¨‹ã€‚ dockerdä¸Ždocker-containerdé€šè¿‡grpcè¿›è¡Œé€šä¿¡ã€‚ docker-containerd-ctræ˜¯docker-containerdçš„cliã€‚ docker-containerdé€šè¿‡docker-containerd-shimæ“ä½œdocker-runcï¼Œdocker-runcçœŸæ­£æŽ§åˆ¶å®¹å™¨ç”Ÿå‘½å‘¨æœŸ ã€‚ å¯åŠ¨ä¸€ä¸ªå®¹å™¨å°±ä¼šå¯åŠ¨ä¸€ä¸ªdocker-containerd-shimè¿›ç¨‹ã€‚ docker-containerd-shimç›´æŽ¥è°ƒç”¨docker-runcçš„åŒ…å‡½æ•°ã€‚ çœŸæ­£ç”¨æˆ·æƒ³å¯åŠ¨çš„è¿›ç¨‹ç”±docker-runcçš„initè¿›ç¨‹å¯åŠ¨ï¼Œå³runc init [args ...] ã€‚ è¿›ç¨‹å…³ç³»æ¨¡åž‹ï¼š 1docker ctr | | V Vdockerd -&gt; containerd ---&gt; shim -&gt; runc -&gt; runc init -&gt; process |-- &gt; shim -&gt; runc -&gt; runc init -&gt; process +-- &gt; shim -&gt; runc -&gt; runc init -&gt; process Dockerå¼•æ“Žä»ç„¶ç®¡ç†è€…imagesï¼Œç„¶åŽç§»äº¤ç»™containerdè¿è¡Œï¼Œcontainerdå†ä½¿ç”¨runCè¿è¡Œå®¹å™¨ã€‚ Containerdåªå¤„ç†containersç®¡ç†å®¹å™¨çš„å¼€å§‹ï¼Œåœæ­¢ï¼Œæš‚åœå’Œé”€æ¯ã€‚ç”±äºŽå®¹å™¨è¿è¡Œæ—¶æ˜¯å­¤ç«‹çš„å¼•æ“Žï¼Œå¼•æ“Žæœ€ç»ˆèƒ½å¤Ÿå¯åŠ¨å’Œå‡çº§è€Œæ— éœ€é‡æ–°å¯åŠ¨å®¹å™¨ã€‚ é—®ï¼šDocker pull é•œåƒå¦‚ä½•åŠ é€Ÿï¼Ÿç­”ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Docker é•œåƒåŠ é€Ÿå™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒåŠ é€Ÿå™¨å°±æ˜¯é•œåƒã€ä»£ç†çš„æ¦‚å¿µã€‚å›½å†…æœ‰ä¸å°‘æœºæž„æä¾›äº†å…è´¹çš„åŠ é€Ÿå™¨ä»¥æ–¹ä¾¿å¤§å®¶ä½¿ç”¨ï¼Œè¿™é‡Œåˆ—å‡ºä¸€äº›å¸¸ç”¨çš„åŠ é€Ÿå™¨æœåŠ¡ï¼š Docker å®˜æ–¹çš„ä¸­å›½é•œåƒåŠ é€Ÿå™¨ï¼šä»Ž2017å¹´6æœˆ9æ—¥èµ·ï¼ŒDocker å®˜æ–¹æä¾›äº†åœ¨ä¸­å›½çš„åŠ é€Ÿå™¨ï¼Œä»¥è§£å†³å¢™çš„é—®é¢˜ã€‚ä¸ç”¨æ³¨å†Œï¼Œç›´æŽ¥ä½¿ç”¨åŠ é€Ÿå™¨åœ°å€ï¼šhttps://registry.docker-cn.com å³å¯ã€‚ ä¸­å›½ç§‘æŠ€å¤§å­¦çš„é•œåƒåŠ é€Ÿå™¨ï¼šä¸­ç§‘å¤§çš„åŠ é€Ÿå™¨ä¸ç”¨æ³¨å†Œï¼Œç›´æŽ¥ä½¿ç”¨åœ°å€https://docker.mirrors.ustc.edu.cn/é…ç½®åŠ é€Ÿå™¨å³å¯ã€‚è¿›ä¸€æ­¥çš„ä¿¡æ¯å¯ä»¥è®¿é—®ï¼š[http://mirrors.ustc.edu.cn/help/dockerhub.html?highlight=docker](https://mirrors.ustc.edu.cn/help/dockerhub.html?highlight=docker) é˜¿é‡Œäº‘åŠ é€Ÿå™¨ï¼šæ³¨å†Œé˜¿é‡Œäº‘å¼€å‘è´¦æˆ·(å…è´¹çš„)åŽï¼Œè®¿é—®è¿™ä¸ªé“¾æŽ¥å°±å¯ä»¥çœ‹åˆ°åŠ é€Ÿå™¨åœ°å€ï¼š https://cr.console.aliyun.com/#/accelerator DaoCloud åŠ é€Ÿå™¨ï¼šæ³¨å†Œ DaoCloud è´¦æˆ·(æ”¯æŒå¾®ä¿¡ç™»å½•)ï¼Œç„¶åŽè®¿é—®ï¼š https://www.daocloud.io/mirror#accelerator-docå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±æžä¸ªæ¢¯å­ã€‚ é—®ï¼šå¦‚æžœ Docker å‡çº§æˆ–è€…é‡å¯çš„è¯ï¼Œé‚£å®¹å™¨æ˜¯ä¸æ˜¯éƒ½ä¼šè¢«åœæŽ‰ç„¶åŽé‡å¯å•Šï¼Ÿç­”ï¼šåœ¨ 1.12 ä»¥å‰çš„ç‰ˆæœ¬ç¡®å®žå¦‚æ­¤ï¼Œä½†æ˜¯ä»Ž 1.12 å¼€å§‹ï¼ŒDocker å¼•æ“ŽåŠ å…¥äº† --live-restore å‚æ•°ï¼Œä½¿ç”¨è¯¥å‚æ•°å¯ä»¥é¿å…å¼•æ“Žå‡çº§ã€é‡å¯å¯¼è‡´å®¹å™¨åœæ­¢æœåŠ¡çš„æƒ…å†µã€‚é»˜è®¤æƒ…å†µè¯¥åŠŸèƒ½ä¸ä¼šè¢«å¯åŠ¨ï¼Œå¦‚éœ€å¯åŠ¨ï¼Œéœ€è¦é…ç½® docker æœåŠ¡é…ç½®æ–‡ä»¶ã€‚æ¯”å¦‚ Centos 7.3 è¿™ç±» systemd çš„ç³»ç»Ÿï¼Œå¯ä»¥ä¿®æ”¹ /usr/lib/systemd/system/docker.service æ–‡ä»¶ï¼Œåœ¨ ExecStart= åŽé¢é…ç½®ä¸Š --live-restoreï¼š 1ExecStart=/usr/bin/dockerd \ --registry-mirror=https://registry.docker-cn.com \ --live-restore ä¸Šé¢çš„æ ¼å¼ä¸­ä½¿ç”¨äº†è¡Œå°¾ \ çš„æ¢è¡Œå½¢å¼ï¼Œè¿™ç‚¹å’Œ bash è„šæœ¬ä¸€æ ·ï¼Œsystemd æ”¯æŒè¿™ç§æ¢è¡Œå½¢å¼ï¼Œå¦‚å¯¹æ­¤ä¸äº†è§£å¯ä»¥å…ˆåŽ»å­¦ä¹  bash ç¨‹åºè®¾è®¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ--live-restore å’Œ Swarm Mode ä¸å…¼å®¹ï¼Œæ‰€ä»¥åœ¨é›†ç¾¤çŽ¯å¢ƒä¸­ä¸è¦ä½¿ç”¨ã€‚å®žé™…ä¸Šé›†ç¾¤çŽ¯å¢ƒä¹Ÿä¸ç”¨æ‹…å¿ƒæŸä¸ªæœåŠ¡å™¨é‡å¯çš„é—®é¢˜ï¼Œå› ä¸ºå…¶ä¸Šçš„æœåŠ¡éƒ½ä¼šè¢«è°ƒåº¦åˆ°åˆ«çš„èŠ‚ç‚¹ä¸Šï¼Œå› æ­¤æœåŠ¡å¹¶ä¸ä¼šè¢«ä¸­æ–­ã€‚ å®˜æ–¹å‚è€ƒæ–‡æ¡£ï¼š https://docs.docker.com/config/containers/live-restore/#enable-live-restore é—®ï¼šæœåŠ¡å™¨ä¸Šçº¿åŽï¼Œæ€Žä¹ˆå‘çŽ°æ€»æœ‰ä¸ª xmrig çš„å®¹å™¨åœ¨è·‘ï¼Œåˆ äº†è¿˜å‡ºæ¥ï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿè­¦å‘Šï¼ï¼ä½ çš„æœåŠ¡å™¨å·²ç»è¢«å…¥ä¾µäº†ï¼ï¼ ç­”ï¼šæœ‰äº›äººæœåŠ¡å™¨ä¸Šçº¿åŽï¼Œå‘çŽ°çªç„¶å¤šäº†ä¸€äº›èŽ«åå¥‡å¦™çš„å®¹å™¨åœ¨è·‘ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š 1$ docker ps -aIMAGE COMMAND CREATED STATUS PORTS NAMESlinuxrun/cpu2 &quot;./xmrig --algo=cr....&quot; 4 hours ago Exited (137) 7 minutes ago linuxrun-cpu2... è¿™å°±æ˜¯æœ‰äººåœ¨ä½ çš„ Docker å®¿ä¸»ä¸Šè·‘äº†ä¸€ä¸ª xmrig æŒ–çŸ¿çš„è •è™«ï¼Œå› ä¸ºä½ çš„ç³»ç»Ÿè¢«å…¥ä¾µäº†â€¦â€¦ã€‚åœ¨ä½ å¤§å« Docker ä¸å®‰å…¨ä¹‹å‰ï¼Œå…ˆæ£€è®¨ä¸€ä¸‹è‡ªå·±æ˜¯ä¸æ˜¯åšé”™äº†ã€‚æ£€æŸ¥ä¸€ä¸‹ dockerd å¼•æ“Žæ˜¯å¦é…ç½®é”™è¯¯ï¼šps -ef | grep dockerdï¼Œå¦‚æžœä½ çœ‹åˆ°çš„æ˜¯è¿™æ ·å­çš„ï¼š 1$ ps -ef | grep dockerd123 root 12:34 /usr/bin/dockerd -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375 å¦‚æžœåœ¨å…¶ä¸­æ²¡æœ‰ --tlsverify ç±»çš„ TLS é…ç½®å‚æ•°ï¼Œé‚£å°±è¯´æ˜Žä½ å°†ä½ çš„ç³»ç»Ÿå¤§é—¨å½»åº•æ•žå¼€äº†ã€‚è¿™æ˜¯é…ç½®ä¸Šä¸¥é‡çš„å®‰å…¨äº‹æ•…ã€‚ -H tcp://0.0.0.0:2375 æ˜¯è¯´ä½ å¸Œæœ›é€šè¿‡ 2375/tcp æ¥æ“æŽ§ä½ çš„ Docker å¼•æ“Žï¼Œä½†æ˜¯å¦‚æžœä½ æ²¡æœ‰åŠ  --tlsverify ç±»çš„é…ç½®ï¼Œå°±è¡¨æ˜Žä½ çš„æ„å›¾æ˜¯å…è®¸ä»»ä½•äººæ¥æ“æŽ§ä½ çš„ Docker å¼•æ“Žï¼Œè€Œ Docker å¼•æ“Žæ˜¯ä»¥ root æƒé™è¿è¡Œçš„ï¼Œå› æ­¤ï¼Œä½ ç­‰äºŽç»™äº†åœ°çƒä¸Šæ‰€æœ‰äººä½ æœåŠ¡å™¨çš„ root æƒé™ï¼Œè€Œä¸”è¿˜æ²¡å¯†ç ã€‚ å¦‚æžœç»†å¿ƒä¸€äº›ï¼ŒåŽ»æŸ¥çœ‹ dockerd çš„æœåŠ¡æ—¥å¿—ï¼Œjournalctl -u dockerï¼Œæ—¥å¿—ä¸­æœ‰æ˜Žç¡®çš„è­¦å‘Šï¼Œè­¦å‘Šä½ è¿™ä¹ˆé…ç½®æ˜¯æžç«¯å±é™©çš„ï¼š 1$ journalctl -u docker...level=warning msg=&quot;[!] DON&apos;T BIND ON ANY IP ADDRESS WITHOUT setting --tlsverify IF YOU DON&apos;T KNOW WHAT YOU&apos;RE DOING [!]&quot;... å¦‚æžœè¿™äº›ä½ éƒ½å¿½ç•¥äº†ï¼Œé‚£ä¹ˆè¢«åˆ«äººå…¥ä¾µå°±å¤ªæ­£å¸¸äº†ï¼Œæ˜¯ä½ è‡ªå·±é‚€è¯·åˆ«äººæ¥çš„ã€‚æ‰€ä»¥ï¼ŒDocker æœåŠ¡ç»‘å®šç«¯å£ï¼Œå¿…é¡»é€šè¿‡ TLS ä¿æŠ¤èµ·æ¥ï¼Œä»¥åŽè§åˆ° -H tcp://....å°±è¦æ£€æŸ¥ï¼Œæ˜¯å¦åŒæ—¶é…ç½®äº† --tlsverifyï¼Œå¦‚æžœæ²¡çœ‹åˆ°ï¼Œé‚£å°±æ˜¯ä¸¥é‡é”™è¯¯äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŽ¨èä½¿ç”¨ docker-machine è¿›è¡Œ Docker å®¿ä¸»ç®¡ç†çš„åŽŸå› ï¼Œå› ä¸º docker-machine ä¼šå¸®ä½ åˆ›å»ºè¯ä¹¦ã€é…ç½® TLSï¼Œç¡®ä¿æœåŠ¡å™¨çš„å®‰å…¨ã€‚ è¿›ä¸€æ­¥å¦‚ä½•é…ç½® TLS çš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹å®˜ç½‘æ–‡æ¡£ï¼š https://docs.docker.com/engine/security/https/ å…³äºŽ docker-machine çš„ä»‹ç»ï¼Œå¯ä»¥çœ‹å®˜ç½‘æ–‡æ¡£ï¼š https://docs.docker.com/machine/overview/ é—®ï¼šæ€Žä¹ˆå›ºå®šå®¹å™¨ IP åœ°å€ï¼Ÿæ¯æ¬¡é‡å¯å®¹å™¨éƒ½è¦å˜åŒ– IP åœ°å€æ€Žä¹ˆåŠžï¼Ÿç­”ï¼šä¸€èˆ¬æƒ…å†µæ˜¯ä¸éœ€è¦æŒ‡å®šå®¹å™¨ IP åœ°å€çš„ã€‚è¿™ä¸æ˜¯è™šæ‹Ÿä¸»æœºï¼Œè€Œæ˜¯å®¹å™¨ã€‚å…¶åœ°å€æ˜¯ä¾›å®¹å™¨é—´é€šè®¯çš„ï¼Œå®¹å™¨é—´åˆ™ä¸ç”¨ IP ç›´æŽ¥é€šè®¯ï¼Œè€Œä½¿ç”¨å®¹å™¨åã€æœåŠ¡åã€ç½‘ç»œåˆ«åã€‚ ä¸ºäº†ä¿æŒå‘åŽå…¼å®¹ï¼Œdocker run åœ¨ä¸æŒ‡å®š --network æ—¶ï¼Œæ‰€åœ¨çš„ç½‘ç»œæ˜¯ default bridgeï¼Œåœ¨è¿™ä¸ªç½‘ç»œä¸‹ï¼Œéœ€è¦ä½¿ç”¨ --linkå‚æ•°æ‰å¯ä»¥è®©ä¸¤ä¸ªå®¹å™¨æ‰¾åˆ°å¯¹æ–¹ã€‚ è¿™æ˜¯æœ‰å±€é™æ€§çš„ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™ä½¿ç”¨çš„æ˜¯ /etc/hosts é™æ€æ–‡ä»¶æ¥è¿›è¡Œçš„è§£æžï¼Œæ¯”å¦‚ä¸€ä¸ªä¸»æœºæŒ‚äº†åŽï¼Œé‡æ–°å¯åŠ¨IPå¯èƒ½ä¼šæ”¹å˜ã€‚è™½ç„¶è¯´è¿™ç§æ”¹å˜Dockeræ˜¯å¯èƒ½æ›´æ–°/etc/hostsæ–‡ä»¶ï¼Œä½†æ˜¯è¿™æœ‰è¯¸å¤šé—®é¢˜ï¼Œå¯èƒ½ä¼šå› ä¸ºç«žäº‰å†’é™©å¯¼è‡´ /etc/hosts æ–‡ä»¶æŸæ¯ï¼Œä¹Ÿå¯èƒ½è¿˜åœ¨è¿è¡Œçš„å®¹å™¨åœ¨å–å¾— /etc/hosts çš„è§£æžç»“æžœåŽï¼Œä¸å†åŽ»ç›‘è§†è¯¥æ–‡ä»¶æ˜¯å¦å˜åŠ¨ã€‚ç§ç§åŽŸå› éƒ½å¯èƒ½ä¼šå¯¼è‡´æ—§çš„ä¸»æœºæ— æ³•é€šè¿‡å®¹å™¨åè®¿é—®åˆ°æ–°çš„ä¸»æœºã€‚ å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š https://docs.docker.com/engine/userguide/networking/default_network/dockerlinks/ å¦‚æžœå¯èƒ½ä¸è¦ä½¿ç”¨è¿™ç§è¿‡æ—¶çš„æ–¹å¼ï¼Œè€Œæ˜¯ç”¨ä¸‹é¢è¯´çš„è‡ªå®šä¹‰ç½‘ç»œçš„æ–¹å¼ã€‚ è€Œå¯¹äºŽæ–°çš„çŽ¯å¢ƒï¼ˆDocker 1.10ä»¥ä¸Šï¼‰ï¼Œåº”è¯¥ç»™å®¹å™¨å»ºç«‹è‡ªå®šä¹‰ç½‘ç»œï¼ŒåŒä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¯¹æ–¹å®¹å™¨çš„å®¹å™¨åã€æœåŠ¡åã€ç½‘ç»œåˆ«åæ¥æ‰¾åˆ°å¯¹æ–¹ã€‚è¿™ä¸ªæ—¶å€™å¸®åŠ©è¿›è¡ŒæœåŠ¡å‘çŽ°çš„æ˜¯Docker å†…ç½®çš„DNSã€‚æ‰€ä»¥ï¼Œæ— è®ºå®¹å™¨æ˜¯å¦é‡å¯ã€æ›´æ¢IPï¼Œå†…ç½®çš„DNSéƒ½èƒ½æ­£ç¡®æŒ‡å®šåˆ°å¯¹æ–¹çš„ä½ç½®ã€‚å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š https://docs.docker.com/engine/userguide/networking/work-with-networks/#linking-containers-in-user-defined-networks é—®ï¼šå¦‚ä½•ä¿®æ”¹å®¹å™¨çš„ /etc/hosts æ–‡ä»¶ï¼Ÿç­”ï¼šå®¹å™¨å†…çš„ /etc/hosts æ–‡ä»¶ä¸åº”è¯¥è¢«éšæ„ä¿®æ”¹ï¼Œå¦‚æžœå¿…é¡»æ·»åŠ ä¸»æœºåå’Œ IP åœ°å€æ˜ å°„å…³ç³»ï¼Œåº”è¯¥åœ¨ docker run æ—¶ä½¿ç”¨ --add-host å‚æ•°ï¼Œæˆ–è€…åœ¨ docker-compose.yml ä¸­æ·»åŠ  extra_hosts é¡¹ã€‚ ä¸è¿‡åœ¨ç”¨ä¹‹å‰ï¼Œåº”è¯¥å†è€ƒè™‘ä¸€ä¸‹çœŸçš„éœ€è¦ä¿®æ”¹ /etc/hosts ä¹ˆï¼Ÿå¦‚æžœåªæ˜¯ä¸ºäº†å®¹å™¨é—´äº’ç›¸è®¿é—®ï¼Œåº”è¯¥å»ºç«‹è‡ªå®šä¹‰ç½‘ç»œï¼Œå¹¶ä½¿ç”¨ Docker å†…ç½®çš„ DNS æœåŠ¡ã€‚ é—®ï¼šæ€Žä¹ˆæ˜ å°„å®¿ä¸»ç«¯å£ï¼ŸDockerfile ä¸­çš„EXPOSEå’Œ docker run -p æœ‰å•¥åŒºåˆ«ï¼Ÿç­”ï¼šDockerä¸­æœ‰ä¸¤ä¸ªæ¦‚å¿µï¼Œä¸€ä¸ªå«åš EXPOSE ï¼Œä¸€ä¸ªå«åš PUBLISH ã€‚ EXPOSE æ˜¯é•œåƒ/å®¹å™¨å£°æ˜Žè¦æš´éœ²è¯¥ç«¯å£ï¼Œå¯ä»¥ä¾›å…¶ä»–å®¹å™¨ä½¿ç”¨ã€‚è¿™ç§å£°æ˜Žï¼Œåœ¨æ²¡æœ‰è®¾å®š --icc=falseçš„æ—¶å€™ï¼Œå®žé™…ä¸Šåªæ˜¯ä¸€ç§æ ‡æ³¨ï¼Œå¹¶ä¸å¼ºåˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰å£°æ˜Ž EXPOSE çš„ç«¯å£ï¼Œå…¶å®ƒå®¹å™¨ä¹Ÿå¯ä»¥è®¿é—®ã€‚ä½†æ˜¯å½“å¼ºåˆ¶ --icc=false çš„æ—¶å€™ï¼Œé‚£ä¹ˆåªæœ‰ EXPOSE çš„ç«¯å£ï¼Œå…¶å®ƒå®¹å™¨æ‰å¯ä»¥è®¿é—®ã€‚ PUBLISH åˆ™æ˜¯é€šè¿‡æ˜ å°„å®¿ä¸»ç«¯å£ï¼Œå°†å®¹å™¨çš„ç«¯å£å…¬å¼€äºŽå¤–ç•Œï¼Œä¹Ÿå°±æ˜¯è¯´å®¿ä¸»ä¹‹å¤–çš„æœºå™¨ï¼Œå¯ä»¥é€šè¿‡è®¿é—®å®¿ä¸»IPåŠå¯¹åº”çš„è¯¥æ˜ å°„ç«¯å£ï¼Œè®¿é—®åˆ°å®¹å™¨å¯¹åº”ç«¯å£ï¼Œä»Žè€Œä½¿ç”¨å®¹å™¨æœåŠ¡ã€‚ EXPOSE çš„ç«¯å£å¯ä»¥ä¸ PUBLISHï¼Œè¿™æ ·åªæœ‰å®¹å™¨é—´å¯ä»¥è®¿é—®ï¼Œå®¿ä¸»ä¹‹å¤–æ— æ³•è®¿é—®ã€‚è€Œ PUBLISH çš„ç«¯å£ï¼Œå¯ä»¥ä¸äº‹å…ˆ EXPOSEï¼Œæ¢å¥è¯è¯´ PUBLISH ç­‰äºŽåŒæ—¶éšå¼å®šä¹‰äº†è¯¥ç«¯å£è¦ EXPOSEã€‚ docker run å‘½ä»¤ä¸­çš„ -p, -P å‚æ•°ï¼Œä»¥åŠ docker-compose.yml ä¸­çš„ ports éƒ¨åˆ†ï¼Œå®žé™…ä¸Šå‡æ˜¯æŒ‡ PUBLISHã€‚ å°å†™ -p æ˜¯ç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸º [å®¿ä¸»IP:]&lt;å®¿ä¸»ç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt;ï¼Œå…¶ä¸­å®¿ä¸»ç«¯å£å’Œå®¹å™¨ç«¯å£ï¼Œæ—¢å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªèŒƒå›´ï¼Œæ¯”å¦‚ï¼š1000-2000:1000-2000ã€‚å¯¹äºŽå¤šå®¿ä¸»çš„æœºå™¨ï¼Œå¯ä»¥æŒ‡å®šå®¿ä¸»IPï¼Œä¸æŒ‡å®šå®¿ä¸»IPæ—¶ï¼Œå®ˆæŠ¤æ‰€æœ‰æŽ¥å£ã€‚ å¤§å†™ -Påˆ™æ˜¯è‡ªåŠ¨æ˜ å°„ï¼Œå°†æ‰€æœ‰å®šä¹‰ EXPOSE çš„ç«¯å£ï¼Œéšæœºæ˜ å°„åˆ°å®¿ä¸»çš„æŸä¸ªç«¯å£ã€‚ é—®ï¼šæˆ‘è¦æ˜ å°„å¥½å‡ ç™¾ä¸ªç«¯å£ï¼Œéš¾é“è¦ä¸€ä¸ªä¸ª -p ä¹ˆï¼Ÿç­”ï¼š -p æ˜¯å¯ä»¥ç”¨èŒƒå›´çš„ï¼š 1-p 8001-8010:8001-8010 é—®ï¼šä¸ºä»€ä¹ˆ -p åŽè¿˜æ˜¯æ— æ³•é€šè¿‡æ˜ å°„ç«¯å£è®¿é—®å®¹å™¨é‡Œé¢çš„æœåŠ¡ï¼Ÿç­”ï¼š é¦–å…ˆï¼Œå½“ç„¶æ˜¯æ£€æŸ¥è¿™ä¸ª docker çš„å®¹å™¨æ˜¯å¦å¯åŠ¨æ­£å¸¸ï¼š docker psã€docker top &lt;å®¹å™¨ID&gt;ã€docker logs &lt;å®¹å™¨ID&gt;ã€docker exec -it &lt;å®¹å™¨ID&gt; bashç­‰ï¼Œè¿™æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æŽ’éšœçš„å‘½ä»¤ï¼›å¦‚æžœæ˜¯ docker-compose ä¹Ÿæœ‰å…¶å¯¹åº”çš„è¿™ä¸€ç»„å‘½ä»¤ï¼Œæ‰€ä»¥æŽ’éšœå¾ˆå®¹æ˜“ã€‚ å¦‚æžœç¡®ä¿æœåŠ¡ä¸€åˆ‡æ­£å¸¸ï¼Œç”šè‡³åœ¨å®¹å™¨é‡Œï¼Œå¯ä»¥è®¿é—®åˆ°è¿™äº›æœåŠ¡ï¼Œdocker ps ä¹Ÿæ˜¾ç¤ºå‡ºäº†ç«¯å£æ˜ å°„æˆåŠŸï¼Œé‚£ä¹ˆå°±éœ€è¦æ£€æŸ¥é˜²ç«å¢™äº†ã€‚ é—®ï¼šå¦‚ä½•è®©ä¸€ä¸ªå®¹å™¨è¿žæŽ¥ä¸¤ä¸ªç½‘ç»œï¼Ÿç­”ï¼šå¦‚æžœæ˜¯ä½¿ç”¨ docker runï¼Œé‚£å¾ˆä¸å¹¸ï¼Œä¸€æ¬¡åªå¯ä»¥è¿žæŽ¥ä¸€ä¸ªç½‘ç»œï¼Œå› ä¸º docker run çš„ --network å‚æ•°åªå¯ä»¥å‡ºçŽ°ä¸€æ¬¡ï¼ˆå¦‚æžœå‡ºçŽ°å¤šæ¬¡ï¼Œæœ€åŽçš„ä¼šè¦†ç›–ä¹‹å‰çš„ï¼‰ã€‚ä¸è¿‡å®¹å™¨è¿è¡ŒåŽï¼Œå¯ä»¥ç”¨å‘½ä»¤ docker network connect è¿žæŽ¥å¤šä¸ªç½‘ç»œã€‚å‡è®¾æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªç½‘ç»œï¼š 1$ docker network create mynet1$ docker network create mynet2 ç„¶åŽï¼Œæˆ‘ä»¬è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿žæŽ¥è¿™ä¸¤ä¸ªç½‘ç»œã€‚ 1$ docker run -d --name web --network mynet1 nginx$ docker network connect mynet2 web ä½†æ˜¯å¦‚æžœä½¿ç”¨ docker-compose é‚£å°±æ²¡è¿™ä¸ªé—®é¢˜äº†ã€‚å› ä¸ºå®žé™…ä¸Šï¼ŒDocker Remote API æ˜¯æ”¯æŒä¸€æ¬¡æ€§æŒ‡å®šå¤šä¸ªç½‘ç»œçš„ï¼Œä½†æ˜¯ä¼°è®¡æ˜¯å‘½ä»¤è¡Œä¸Šä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥ docker run é™å®šä¸ºåªå¯ä»¥ä¸€æ¬¡è¿žä¸€ä¸ªã€‚docker-compose ç›´æŽ¥å°±å¯ä»¥å°†æœåŠ¡çš„å®¹å™¨è¿žå…¥å¤šä¸ªç½‘ç»œï¼Œæ²¡æœ‰é—®é¢˜ã€‚ 1version: &apos;2&apos;services: web: image: nginx networks: - mynet1 - mynet2networks: mynet1: mynet2: é—®ï¼šDocker å¤šå®¿ä¸»ç½‘ç»œæ€Žä¹ˆé…ç½®ï¼Ÿç­”ï¼šDocker è·¨èŠ‚ç‚¹å®¹å™¨ç½‘ç»œäº’è”ï¼Œæœ€é€šç”¨çš„æ˜¯ä½¿ç”¨ overlay ç½‘ç»œã€‚ä¸€ä»£ Swarm å·²ç»ä¸å†ä½¿ç”¨ï¼Œå®ƒè¦æ±‚ä½¿ç”¨ overlayç½‘ç»œå‰å…ˆå‡†å¤‡å¥½åˆ†å¸ƒå¼é”®å€¼åº“ï¼Œæ¯”å¦‚ etcd, consul æˆ– zookeeperã€‚ç„¶åŽåœ¨æ¯ä¸ªèŠ‚ç‚¹çš„ Docker å¼•æ“Žä¸­ï¼Œé…ç½® --cluster-store å’Œ --cluster-advertise å‚æ•°ã€‚è¿™æ ·æ‰å¯ä»¥äº’è¿žã€‚çŽ°åœ¨éƒ½åœ¨ä½¿ç”¨äºŒä»£ Swarmï¼Œä¹Ÿå°±æ˜¯ Docker Swarm Modeï¼Œéžå¸¸ç®€å•ï¼Œåªè¦ docker swarm init å»ºç«‹é›†ç¾¤ï¼Œå…¶å®ƒèŠ‚ç‚¹ docker swarm joinåŠ å…¥é›†ç¾¤åŽï¼Œé›†ç¾¤å†…çš„æœåŠ¡å°±è‡ªåŠ¨å»ºç«‹äº† overlay ç½‘ç»œäº’è”èƒ½åŠ›ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœæ˜¯å¤šç½‘å¡çŽ¯å¢ƒï¼Œæ— è®ºæ˜¯ docker swarm init è¿˜æ˜¯ docker swarm joinï¼Œéƒ½ä¸è¦å¿˜è®°ä½¿ç”¨å‚æ•° --advertise-addr æŒ‡å®šå®£å‘Šåœ°å€ï¼Œå¦åˆ™è‡ªåŠ¨é€‰æ‹©çš„åœ°å€å¾ˆå¯èƒ½ä¸æ˜¯ä½ æœŸæœ›çš„ï¼Œä»Žè€Œå¯¼è‡´é›†ç¾¤äº’è”å¤±è´¥ã€‚æ ¼å¼ä¸º --advertise-addr &lt;åœ°å€&gt;:&lt;ç«¯å£&gt;ï¼Œåœ°å€å¯ä»¥æ˜¯ IPåœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘å¡æŽ¥å£ï¼Œæ¯”å¦‚ eth0ã€‚ç«¯å£é»˜è®¤ä¸º 2377ï¼Œå¦‚æžœä¸æ”¹åŠ¨å¯ä»¥å¿½ç•¥ã€‚ æ­¤å¤–ï¼Œè¿™æ˜¯ä¾›æœåŠ¡ä½¿ç”¨çš„ overlayï¼Œå› æ­¤æ‰€æœ‰ docker service create çš„æœåŠ¡å®¹å™¨å¯ä»¥ä½¿ç”¨è¯¥ç½‘ç»œï¼Œè€Œ docker run ä¸å¯ä»¥ä½¿ç”¨è¯¥ç½‘ç»œï¼Œé™¤éžæ˜Žç¡®è¯¥ç½‘ç»œä¸º --attachableã€‚ å…³äºŽoverlay ç½‘ç»œçš„è¿›ä¸€æ­¥ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š https://docs.docker.com/engine/userguide/networking/get-started-overlay/ è™½ç„¶é»˜è®¤ä½¿ç”¨çš„æ˜¯ overlay ç½‘ç»œï¼Œä½†è¿™å¹¶ä¸æ˜¯å”¯ä¸€çš„å¤šå®¿ä¸»äº’è”æ–¹æ¡ˆã€‚Docker å†…ç½®äº†ä¸€äº›å…¶å®ƒçš„äº’è”æ–¹æ¡ˆï¼Œæ¯”å¦‚æ•ˆçŽ‡æ¯”è¾ƒé«˜çš„ macvlanã€‚å¦‚æžœåœ¨å±€åŸŸç½‘ç»œçŽ¯å¢ƒä¸‹ï¼Œå¯¹ overlay çš„é¢å¤–å¼€é”€ä¸æ»¡æ„ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ macvlan ä»¥åŠ ipvlanï¼Œè¿™æ˜¯æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆã€‚ https://docs.docker.com/engine/userguide/networking/get-started-macvlan/ æ­¤å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„ç½‘ç»œå¯ä»¥ç”¨æ¥è¿›è¡Œè·¨å®¿ä¸»äº’è”ï¼Œå¯ä»¥è®¿é—®å®˜ç½‘å¯¹åº”æ–‡æ¡£è¿›ä¸€æ­¥æŸ¥çœ‹ï¼š https://docs.docker.com/engine/extend/legacy_plugins/#/network-plugins é—®ï¼šæ˜Žæ˜Ž docker network ls ä¸­çœ‹åˆ°äº†å»ºç«‹çš„ overlay ç½‘ç»œï¼Œæ€Žä¹ˆ docker run è¿˜è¯´ç½‘ç»œä¸å­˜åœ¨å•Šï¼Ÿç­”ï¼š å¦‚æžœåœ¨ docker network ls ä¸­çœ‹åˆ°äº†å¦‚ä¸‹çš„ overlay ç½‘ç»œï¼š 1NETWORK ID NAME DRIVER SCOPE...24pz359114y0 mynet overlay swarm... é‚£ä¹ˆè¿™ä¸ªåä¸º mynet çš„ç½‘ç»œæ˜¯ä¸å¯ä»¥è¿žæŽ¥åˆ° docker run çš„å®¹å™¨ã€‚å¦‚æžœè¯•å›¾è¿žæŽ¥åˆ™ä¼šå‡ºçŽ°æŠ¥é”™ã€‚å¦‚æžœæ˜¯ 1.12 çš„ç³»ç»Ÿï¼Œä¼šçœ‹åˆ°è¿™æ ·æŠ¥é”™ä¿¡æ¯ï¼š 1$ docker run --rm --network mynet busyboxdocker: Error response from daemon: network mynet not found.See &apos;docker run --help&apos;. æŠ¥é”™è¯´ mynet ç½‘ç»œæ‰¾ä¸åˆ°ã€‚å…¶å®žå¦‚æžœä»”ç»†è§‚å¯Ÿï¼Œä¼šçœ‹åˆ°è¿™ä¸ªåä¸º mynet çš„ç½‘ç»œï¼Œé©±åŠ¨æ˜¯ overlay æ²¡æœ‰é”™ï¼Œä½†å®ƒçš„ Scope æ˜¯ swarmã€‚è¿™ä¸ªæ„æ€æ˜¯è¯´è¿™ä¸ªç½‘ç»œæ˜¯åœ¨äºŒä»£ Swarm çŽ¯å¢ƒä¸­å»ºç«‹çš„ overlay ç½‘ç»œï¼Œå› æ­¤åªå¯ä»¥ç”± Swarm çŽ¯å¢ƒä¸‹çš„æœåŠ¡å®¹å™¨æ‰å¯ä»¥ä½¿ç”¨ã€‚è€Œ docker runæ‰€è¿è¡Œçš„åªæ˜¯é›¶æ•£çš„å®¹å™¨ï¼Œå¹¶éž Serviceï¼Œå› æ­¤è‡ªç„¶åœ¨é›¶æ•£å®¹å™¨æ‰€èƒ½ä½¿ç”¨çš„ç½‘ç»œä¸­ï¼Œä¸å­˜åœ¨å« mynet ç½‘ç»œã€‚ docker run å¯ä»¥ä½¿ç”¨çš„ overlay ç½‘ç»œæ˜¯ Scope ä¸º global çš„ overlay ç½‘ç»œï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨å¤–ç½®é”®å€¼åº“æ‰€å»ºç«‹çš„ overlay ç½‘ç»œï¼Œæ¯”å¦‚ä¸€ä»£ Swarm çš„ overlay ç½‘ç»œã€‚ è¿™ç‚¹åœ¨ 1.13 åŽç¨æœ‰å˜åŒ–ã€‚å¦‚æžœæ˜¯ 1.13 ä»¥åŽçš„ç³»ç»Ÿï¼Œä¼šçœ‹åˆ°è¿™æ ·çš„ä¿¡æ¯ï¼š 1$ docker run --rm --network mynet busyboxdocker: Error response from daemon: Could not attach to network mynet: rpc error: code = 7 desc = network mynet not manually attachable. æŠ¥é”™ä¿¡æ¯ä¸å†è¯´ç½‘ç»œæ‰¾ä¸åˆ°ï¼Œè€Œæ˜¯è¯´è¿™ä¸ª mynet ç½‘ç»œæ— æ³•è¿žæŽ¥ã€‚è¿™æ˜¯ç”±äºŽä»Ž 1.13 å¼€å§‹ï¼Œå…è®¸åœ¨å»ºç«‹ç½‘ç»œçš„æ—¶å€™å£°æ˜Žè¿™ä¸ªç½‘ç»œæ˜¯å¦å¯ä»¥è¢«é›¶æ•£çš„å®¹å™¨æ‰€è¿žæŽ¥ã€‚å¦‚æžœ docker network create åŠ äº† --attachable çš„å‚æ•°ï¼Œé‚£ä¹ˆåœ¨åŽæœŸï¼Œè¿™ä¸ªç½‘ç»œæ˜¯å¯ä»¥è¢«æ™®é€šå®¹å™¨æ‰€è¿žæŽ¥çš„ã€‚ ä½†æ˜¯è¿™æ˜¯åœ¨å®‰å…¨æ¨¡åž‹ä¸Šå¼€äº†ä¸€ä¸ªå£å­ï¼Œå› æ­¤ï¼Œé»˜è®¤ä¸å…è®¸æ™®é€šå®¹å™¨é“¾æŽ¥ï¼Œå¹¶ä¸”ä¸å»ºè®®ä½¿ç”¨ã€‚ é—®ï¼šä½¿ç”¨ Swarm Mode çš„æ—¶ï¼Œçœ‹åˆ°æœ‰ä¸ªå« ingress çš„ overlay ç½‘ç»œï¼Œå®ƒå’Œè‡ªå·±åˆ›å»ºçš„ç½‘ç»œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç­”ï¼š åœ¨å¯ç”¨äº†äºŒä»£ Swarm åŽï¼Œå¯èƒ½ä¼šåœ¨ç½‘ç»œåˆ—è¡¨æ—¶çœ‹åˆ°ä¸€ä¸ªåä¸º ingress çš„ overlay ç½‘ç»œã€‚ 1$ docker network lsNETWORK ID NAME DRIVER SCOPE6beb824623a4 bridge bridge localf3f636574c7a docker_gwbridge bridge localcfeb2513a4a3 host host local88smbt683r5p ingress overlay swarm24pz359114y0 mynet overlay swarmd35d69ece740 none null local è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ª overlay ç½‘ç»œï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯æˆ‘ä»¬åˆ›å»ºçš„ mynetï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯ Docker å¼•æ“Žè‡ªå·±åˆ›å»ºçš„ ingressï¼Œä»Žé©±åŠ¨å’Œ Scope å¯ä»¥çœ‹å‡ºä¸¤ä¸ªç½‘ç»œéƒ½æ˜¯ç»™ Swarm Mode ä½¿ç”¨çš„ overlay ç½‘ç»œã€‚ ingress æ˜¯ overlay ç½‘ç»œï¼Œä½†å¹¶ä¸æ˜¯æ™®é€šçš„ overlay networkï¼Œå®ƒæ˜¯ä¸ºè¾¹ç•Œè¿›å…¥æµé‡ç‰¹æ®Šå‡†å¤‡çš„ç½‘ç»œã€‚è¿™ä¸ªç½‘ç»œå­˜åœ¨äºŽé›†ç¾¤ä¸­æ¯ä¸€ä¸ªDockerå®¿ä¸»ä¸Šï¼Œä¸éœ€è¦é¢å¤–å»ºç«‹ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨ docker service create -p 80:80 è¿™ç§å½¢å¼åˆ›å»ºä¸€ä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ±‚æ˜ å°„é›†ç¾¤ç«¯å£ 80 åˆ°æœåŠ¡å®¹å™¨çš„ 80 ç«¯å£ä¸Šã€‚å…¶æ•ˆæžœæ˜¯è®¿é—®ä»»ä¸€èŠ‚ç‚¹çš„ 80 ç«¯å£ï¼Œå³ä½¿è¿™ä¸ªèŠ‚ç‚¹æ²¡æœ‰è¿è¡Œæˆ‘ä»¬æ‰€éœ€çš„å®¹å™¨ï¼Œä¾æ—§å¯ä»¥è¿žæŽ¥åˆ°å®¹å™¨æœåŠ¡ï¼Œå¹¶ä¸”å–å¾—ç»“æžœã€‚å®žçŽ°è¿™æ ·æ•ˆæžœçš„ä¸€ä¸ªåŽŸå› å°±æ˜¯å› ä¸º ingress ç½‘ç»œçš„å­˜åœ¨ã€‚ Swarm ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªéšè—çš„æ²™ç®±å®¹å™¨ç›‘å¬å®¿ä¸»çš„æœåŠ¡ç«¯å£ï¼Œç”¨äºŽæŽ¥æ”¶æ¥è‡ªé›†ç¾¤å¤–ç•Œçš„è®¿é—®ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ docker network inspect ingress æ¥çœ‹åˆ°è¿™ä¸ªæ²™ç®±å®¹å™¨ï¼š 1$ docker network inspect ingress[ &#123; &quot;Name&quot;: &quot;ingress&quot;, &quot;Id&quot;: &quot;88smbt683r5p7c0l7sd0dpniw&quot;, &quot;Scope&quot;: &quot;swarm&quot;, &quot;Driver&quot;: &quot;overlay&quot;, &quot;EnableIPv6&quot;: false, &quot;IPAM&quot;: &#123; &quot;Driver&quot;: &quot;default&quot;, &quot;Options&quot;: null, &quot;Config&quot;: [ &#123; &quot;Subnet&quot;: &quot;10.255.0.0/16&quot;, &quot;Gateway&quot;: &quot;10.255.0.1&quot; &#125; ] &#125;, &quot;Internal&quot;: false, &quot;Containers&quot;: &#123; &quot;faff08692b5f916fcb15aa7ac6bc8633a0fa714a52a1fb75e57525c94581c45a&quot;: &#123; &quot;Name&quot;: &quot;web.1.1jyunyva6picwsztzrj6t2cio&quot;, &quot;EndpointID&quot;: &quot;58240770eb25565b472384731b1b90e36141a633ce184a5163829cf96e9d1195&quot;, &quot;MacAddress&quot;: &quot;02:42:0a:ff:00:05&quot;, &quot;IPv4Address&quot;: &quot;10.255.0.5/16&quot;, &quot;IPv6Address&quot;: &quot;&quot; &#125;, &quot;ingress-sbox&quot;: &#123; &quot;Name&quot;: &quot;ingress-endpoint&quot;, &quot;EndpointID&quot;: &quot;fe8f89d4f99d7bacb14c5cb723682c180278d62e9edd10b523cdd81a45695c5d&quot;, &quot;MacAddress&quot;: &quot;02:42:0a:ff:00:03&quot;, &quot;IPv4Address&quot;: &quot;10.255.0.3/16&quot;, &quot;IPv6Address&quot;: &quot;&quot; &#125; &#125;, &quot;Options&quot;: &#123; &quot;com.docker.network.driver.overlay.vxlanid_list&quot;: &quot;256&quot; &#125;, &quot;Labels&quot;: &#123;&#125; &#125;] åœ¨ä¸Šé¢çš„å‘½ä»¤è¿”å›žä¿¡æ¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåä¸º ingress-endpoint çš„å®¹å™¨ï¼Œè¿™å°±æ˜¯è¾¹ç•Œæ²™ç®±å®¹å™¨ã€‚ å½“æˆ‘ä»¬åˆ›å»ºæœåŠ¡æ—¶ï¼Œä½¿ç”¨äº† -p å‚æ•°åŽï¼ŒæœåŠ¡å®¹å™¨å°±ä¼šè¢«è‡ªåŠ¨çš„åŠ å…¥åˆ° ingressç½‘ç»œä¸­ï¼ŒåŒæ—¶ä¼šåœ¨æ²™ç®±ä¸­æ³¨å†Œæ˜ å°„ä¿¡æ¯ï¼Œå‘ŠçŸ¥å“ªä¸ªæœåŠ¡è¦æ±‚å®ˆæŠ¤å“ªä¸ªç«¯å£ï¼Œå…·ä½“å¯¹åº”å®¹å™¨æ˜¯å“ªäº›ã€‚ å› æ­¤å½“æ²™ç®±æ”¶åˆ°å¤–éƒ¨è¿žæŽ¥åŽï¼Œé€šè¿‡è®¿é—®ç«¯å£å°±å¯ä»¥çŸ¥é“å…·ä½“æœåŠ¡åœ¨å®ˆæŠ¤ï¼Œç„¶åŽä¼šé€šè¿‡è¿™ä¸ª ingress ç½‘ç»œåŽ»å°†è¿žæŽ¥è¯·æ±‚è½¬å‘ç»™å¯¹åº”æœåŠ¡å®¹å™¨ã€‚è€Œç”±äºŽ ingress çš„æœ¬è´¨æ˜¯ overlay networkï¼Œå› æ­¤ï¼Œæ— è®ºæœåŠ¡å®¹å™¨è¿è¡ŒäºŽå“ªä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ²™ç®±éƒ½å¯ä»¥æˆåŠŸçš„å°†è¿žæŽ¥è½¬å‘ç»™æ­£ç¡®çš„æœåŠ¡å®¹å™¨ã€‚ æ‰€ä»¥ï¼Œingress æ˜¯ç‰¹æ®Šç”¨é€”çš„ç½‘ç»œï¼Œåªè¦æœåŠ¡æœ‰-pé€‰é¡¹ï¼Œé‚£ä¹ˆæœåŠ¡å®¹å™¨å°±ä¼šè‡ªåŠ¨è¢«åŠ å…¥è¯¥ç½‘ç»œã€‚å› æ­¤æŠŠ ingress ç½‘ç»œå½“åšæ™®é€šçš„ overlayç½‘ç»œä½¿ç”¨çš„è¯ï¼Œé™¤äº†ä¼šå¹²æ‰° Swarm æ­£å¸¸çš„è¾¹ç•Œè´Ÿè½½å‡è¡¡çš„èƒ½åŠ›ï¼Œä¹Ÿä¼šç ´åæœåŠ¡éš”ç¦»çš„å®‰å…¨æœºåˆ¶ã€‚æ‰€ä»¥ä¸è¦æŠŠè¿™ä¸ªç½‘ç»œå½“åšæ™®é€šçš„ overlayç½‘ç»œæ¥ä½¿ç”¨ï¼Œéœ€è¦æŽ§åˆ¶æœåŠ¡äº’è”å’Œéš”ç¦»æ—¶ï¼Œè¯·ç”¨è‡ªè¡Œåˆ›å»ºçš„ overlay ç½‘ç»œã€‚ é—®ï¼šå¬è¯´ â€“link è¿‡æ—¶ä¸å†ç”¨äº†ï¼Ÿé‚£å®¹å™¨äº’è”ã€æœåŠ¡å‘çŽ°æ€Žä¹ˆåŠžï¼Ÿç­”ï¼š åœ¨ 1-2 å¹´å‰ï¼ŒDocker æ‰€æœ‰å®¹å™¨éƒ½è¿žæŽ¥äºŽé»˜è®¤çš„æ¡¥æŽ¥ç½‘ç»œä¸Šï¼Œä¹Ÿå°±æ˜¯å¾ˆå¤šè€æ–‡ç« é¼“æ£çš„ docker0æ¡¥æŽ¥ç½‘å¡ã€‚å› æ­¤å®žé™…ä¸Šé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰å®¹å™¨éƒ½æ˜¯å¯ä»¥äº’è”çš„ï¼Œæ²¡æœ‰éš”ç¦»ï¼Œå½“ç„¶è¿™æ ·å®‰å…¨æ€§ä¸å¥½ã€‚è€ŒæœåŠ¡å‘çŽ°ï¼Œæ˜¯åœ¨è¿™ç§çŽ¯å¢ƒä¸‹å‘å±•å‡ºæ¥çš„ï¼Œé€šè¿‡ä¿®æ”¹å®¹å™¨å†…çš„ /etc/hostsæ–‡ä»¶æ¥å®Œæˆçš„ã€‚å‡¡æ˜¯ --link çš„ä¸»æœºçš„åˆ«åå°±ä¼šå‡ºçŽ°äºŽ /etc/hosts ä¸­ï¼Œå…¶åœ°å€ç”± Docker å¼•æ“Žç»´æŠ¤ã€‚å› æ­¤å®¹å™¨é—´æ‰å¯ä»¥é€šè¿‡åˆ«åäº’è®¿ã€‚ ä½†æ˜¯è¿™ç§åŠžæ³•å¹¶ä¸æ˜¯å¥½çš„è§£å†³æ–¹æ¡ˆï¼ŒDocker æ—©åœ¨ä¸€å¹´å¤šä»¥å‰å°±å·²ç»ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œäº†ã€‚åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥äº’è”ï¼Œå¹¶ä¸”ï¼ŒDocker å†…ç½®äº† DNSï¼Œå®¹å™¨å†…çš„åº”ç”¨å¯ä»¥ä½¿ç”¨æœåŠ¡åã€å®¹å™¨åã€åˆ«åæ¥è¿›è¡ŒæœåŠ¡å‘çŽ°ï¼Œåç§°ä¼šç»ç”±å†…ç½®çš„ DNS è¿›è¡Œè§£æžï¼Œå…¶ç»“æžœæ˜¯åŠ¨æ€çš„ï¼›è€Œä¸åœ¨åŒä¸€ç½‘ç»œä¸­çš„å®¹å™¨ï¼Œä¸å¯ä»¥äº’è”ã€‚ å› æ­¤ï¼ŒçŽ°åœ¨æ—©å°±ä¸ç”¨ --link äº†ï¼Œè€Œä¸”éžå¸¸ä¸å»ºè®®ä½¿ç”¨ã€‚ é¦–å…ˆæ˜¯å› ä¸ºä½¿ç”¨ --link å°±å¾ˆå¯èƒ½è¿˜åœ¨ç”¨é»˜è®¤æ¡¥æŽ¥ç½‘ç»œï¼Œè¿™å¾ˆä¸å®‰å…¨ï¼Œæ‰€æœ‰å®¹å™¨éƒ½æ²¡æœ‰é€‚åº¦éš”ç¦»ï¼Œç”¨è‡ªå®šä¹‰ç½‘ç»œæ‰æ¯”è¾ƒæ–¹ä¾¿äº’è”éš”ç¦»ã€‚ å…¶æ¬¡ï¼Œä¿®æ”¹ /etc/hosts æ–‡ä»¶æœ‰å¾ˆå¤šå¼Šç—…ã€‚æ¯”å¦‚ï¼Œé«˜é¢‘ç¹çš„å®¹å™¨å¯åœçŽ¯å¢ƒæ—¶ï¼Œå®¹æ˜“äº§ç”Ÿç«žäº‰å†’é™©ï¼Œå¯¼è‡´ /etc/hosts æ–‡ä»¶æŸåï¼Œå‡ºçŽ°è®¿é—®æ•…éšœï¼›æˆ–è€…æœ‰äº›åº”ç”¨å‘çŽ°æ˜¯æ¥è‡ªäºŽ /etc/hosts æ–‡ä»¶åŽï¼Œå°±å‡å®šå…¶ä¸ºé™æ€æ–‡ä»¶ï¼Œè€Œç¼“å­˜ç»“æžœä¸å†æŸ¥è¯¢ï¼Œä»Žè€Œå¯¼è‡´å®¹å™¨å¯åœ IP å˜æ›´åŽï¼Œä½¿ç”¨æ—§çš„æ¡ç›®è€Œæ— æ³•è¿žæŽ¥åˆ°æ­£ç¡®çš„å®¹å™¨ç­‰ç­‰ã€‚ å¦å¤–ï¼Œåœ¨ä¸€ä»£ Swarm çŽ¯å¢ƒä¸­ï¼Œåœ¨ docker-compose.yml ä¸­ä½¿ç”¨äº† linkså°±æ„å‘³ç€æœåŠ¡é—´çš„å¼ºä¾èµ–å…³ç³»ï¼Œå› æ­¤è°ƒåº¦æ—¶ä¸ä¼šå°†æœåŠ¡è¿è¡ŒäºŽä¸åŒèŠ‚ç‚¹ï¼Œè€Œæ˜¯å…¨éƒ¨è¿è¡ŒäºŽä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½¿å¾—æ¨ªå‘æ‰©å±•å¤±è´¥ã€‚ æ‰€ä»¥ä¸è¦å†ä½¿ç”¨ --link ä»¥åŠ docker-compose.yml ä¸­çš„ links äº†ã€‚åº”è¯¥ä½¿ç”¨ docker networkï¼Œå»ºç«‹ç½‘ç»œï¼Œè€Œ docker run --network æ¥è¿žæŽ¥ç‰¹å®šç½‘ç»œã€‚æˆ–è€…ä½¿ç”¨ version: &#39;2&#39; çš„ docker-compose.yml ç›´æŽ¥å®šä¹‰è‡ªå®šä¹‰ç½‘ç»œå¹¶ä½¿ç”¨ã€‚ é—®ï¼šCNMå’ŒCNIåˆ†åˆ«æ˜¯å•¥ä¸œä¸œï¼Ÿç­”ï¼š ç›®å‰å…³äºŽLinuxå®¹å™¨ç½‘ç»œæŽ¥å£çš„é…ç½®æœ‰ä¸¤ç§çš„å¯èƒ½çš„æ ‡å‡†ï¼šå®¹å™¨ç½‘ç»œæ¨¡åž‹ï¼ˆCNMï¼‰å’Œå®¹å™¨ç½‘ç»œæŽ¥å£ï¼ˆCNIï¼‰ã€‚ç½‘ç»œæ˜¯ç›¸å½“å¤æ‚çš„ï¼Œè€Œä¸”æä¾›æŸç§åŠŸèƒ½çš„æ–¹å¼ä¹Ÿå¤šç§å¤šæ ·ã€‚ CNMæ˜¯ä¸€ä¸ªè¢« Docker å…¬å¸æå‡ºçš„è§„èŒƒã€‚çŽ°åœ¨å·²ç»è¢«Cisco Contiv,Kuryr, Open Virtual Networking (OVN), Project Calico, VMware å’Œ Weaveè¿™äº›å…¬å¸å’Œé¡¹ç›®æ‰€é‡‡çº³ã€‚ CNIæ˜¯ç”±CoreOSæå‡ºçš„ä¸€ä¸ªå®¹å™¨ç½‘ç»œè§„èŒƒã€‚å·²é‡‡çº³æ”¹è§„èŒƒçš„åŒ…æ‹¬Apache Mesos, Cloud Foundry, Kubernetes, Kurma å’Œ rktã€‚å¦å¤– Contiv Networking, Project Calico å’Œ Weaveè¿™äº›é¡¹ç›®ä¹Ÿä¸ºCNIæä¾›æ’ä»¶ã€‚ è¿™ä¸¤ç§æ–¹æ¡ˆéƒ½ä½¿ç”¨äº†é©±åŠ¨æ¨¡åž‹æˆ–è€…æ’ä»¶æ¨¡åž‹æ¥ä¸ºå®¹å™¨åˆ›å»ºç½‘ç»œæ ˆã€‚è¿™æ ·çš„è®¾è®¡ä½¿å¾—ç”¨æˆ·å¯ä»¥è‡ªç”±é€‰æ‹©ã€‚ä¸¤è€…éƒ½æ”¯æŒå¤šä¸ªç½‘ç»œé©±åŠ¨è¢«åŒæ—¶ä½¿ç”¨ï¼Œä¹Ÿå…è®¸å®¹å™¨åŠ å…¥ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œã€‚ä¸¤è€…ä¹Ÿéƒ½å…è®¸å®¹å™¨runtimeåœ¨å®ƒè‡ªå·±çš„å‘½åç©ºé—´ä¸­å¯åŠ¨ç½‘ç»œã€‚ CNM æ¨¡å¼ä¸‹çš„ç½‘ç»œé©±åŠ¨ä¸èƒ½è®¿é—®å®¹å™¨çš„ç½‘ç»œå‘½åç©ºé—´ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯libnetworkå¯ä»¥ä¸ºå†²çªè§£å†³æä¾›ä»²è£ã€‚ä¸€ä¸ªä¾‹å­æ˜¯ï¼šä¸¤ä¸ªç‹¬ç«‹çš„ç½‘ç»œé©±åŠ¨æä¾›åŒæ ·çš„é™æ€è·¯ç”±é…ç½®ï¼Œä½†æ˜¯å´æŒ‡å‘ä¸åŒçš„ä¸‹ä¸€è·³IPåœ°å€ã€‚ä¸Žæ­¤ä¸åŒï¼ŒCNIå…è®¸é©±åŠ¨è®¿é—®å®¹å™¨çš„ç½‘ç»œå‘½åç©ºé—´ã€‚CNIæ­£åœ¨ç ”ç©¶åœ¨ç±»ä¼¼æƒ…å†µä¸‹å¦‚ä½•æä¾›ä»²è£ã€‚ CNIæ”¯æŒä¸Žç¬¬ä¸‰æ–¹IPAMçš„é›†æˆï¼Œå¯ä»¥ç”¨äºŽä»»ä½•å®¹å™¨runtimeã€‚CNMä»Žè®¾è®¡ä¸Šå°±ä»…ä»…æ”¯æŒDockerã€‚ç”±äºŽCNIç®€å•çš„è®¾è®¡ï¼Œè®¸å¤šäººè®¤ä¸ºç¼–å†™CNIæ’ä»¶ä¼šæ¯”ç¼–å†™CNMæ’ä»¶æ¥å¾—ç®€å•ã€‚ CNIå®˜æ–¹ç½‘ç»œæ’ä»¶ åœ°å€ï¼š https://github.com/containernetworking/cni æ‰€æœ‰çš„æ ‡å‡†å’Œåè®®éƒ½è¦æœ‰å…·ä½“çš„å®žçŽ°ï¼Œæ‰èƒ½å¤Ÿè¢«å¤§å®¶ä½¿ç”¨ã€‚CNI ä¹Ÿä¸ä¾‹å¤–ï¼Œç›®å‰å®˜æ–¹åœ¨ github ä¸Šç»´æŠ¤äº†åŒåçš„ CNIä»£ç åº“ï¼Œé‡Œé¢å·²ç»æœ‰å¾ˆå¤šå¯ä»¥ç›´æŽ¥æ‹¿æ¥ä½¿ç”¨çš„ CNIæ’ä»¶ã€‚ å®˜æ–¹æä¾›çš„æ’ä»¶ç›®å‰åˆ†æˆä¸‰ç±»ï¼šmainã€meta å’Œ ipamã€‚main æ˜¯ä¸»è¦çš„å®žçŽ°äº†æŸç§ç‰¹å®šç½‘ç»œåŠŸèƒ½çš„æ’ä»¶ï¼›meta æœ¬èº«å¹¶ä¸ä¼šæä¾›å…·ä½“çš„ç½‘ç»œåŠŸèƒ½ï¼Œå®ƒä¼šè°ƒç”¨å…¶ä»–æ’ä»¶ï¼Œæˆ–è€…å•çº¯æ˜¯ä¸ºäº†æµ‹è¯•ï¼›ipam æ˜¯åˆ†é… IP åœ°å€çš„æ’ä»¶ã€‚ipam å¹¶ä¸æä¾›æŸç§ç½‘ç»œåŠŸèƒ½ï¼Œåªæ˜¯ä¸ºäº†çµæ´»æ€§æŠŠå®ƒå•ç‹¬æŠ½è±¡å‡ºæ¥ï¼Œè¿™æ ·ä¸åŒçš„ç½‘ç»œæ’ä»¶å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹© ipamï¼Œæˆ–è€…å®žçŽ°è‡ªå·±çš„ ipamã€‚ è¿™äº›æ’ä»¶çš„åŠŸèƒ½è¯¦ç»†è¯´æ˜Žå¦‚ä¸‹ï¼š mainâ€“ loopbackï¼šè¿™ä¸ªæ’ä»¶å¾ˆç®€å•ï¼Œè´Ÿè´£ç”Ÿæˆ lo ç½‘å¡ï¼Œå¹¶é…ç½®ä¸Š 127.0.0.1/8 åœ°å€â€“ bridgeï¼šå’Œ docker é»˜è®¤çš„ç½‘ç»œæ¨¡åž‹å¾ˆåƒï¼ŒæŠŠæ‰€æœ‰çš„å®¹å™¨è¿žæŽ¥åˆ°è™šæ‹Ÿäº¤æ¢æœºä¸Šâ€“ macvlanï¼šä½¿ç”¨ macvlan æŠ€æœ¯ï¼Œä»ŽæŸä¸ªç‰©ç†ç½‘å¡è™šæ‹Ÿå‡ºå¤šä¸ªè™šæ‹Ÿç½‘å¡ï¼Œå®ƒä»¬æœ‰ç‹¬ç«‹çš„ ip å’Œ mac åœ°å€â€“ ipvlanï¼šå’Œ macvlan ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯è™šæ‹Ÿç½‘å¡æœ‰ç€ç›¸åŒçš„ mac åœ°å€â€“ ptpï¼šé€šè¿‡ veth pair åœ¨å®¹å™¨å’Œä¸»æœºä¹‹é—´å»ºç«‹é€šé“ metaâ€“ flannelï¼šç»“åˆ bridge æ’ä»¶ä½¿ç”¨ï¼Œæ ¹æ® flannel åˆ†é…çš„ç½‘æ®µä¿¡æ¯ï¼Œè°ƒç”¨ bridge æ’ä»¶ï¼Œä¿è¯å¤šä¸»æœºæƒ…å†µä¸‹å®¹å™¨ ipamâ€“ host-localï¼šåŸºäºŽæœ¬åœ°æ–‡ä»¶çš„ ip åˆ†é…å’Œç®¡ç†ï¼ŒæŠŠåˆ†é…çš„ IP åœ°å€ä¿å­˜åœ¨æ–‡ä»¶ä¸­â€“ dhcpï¼šä»Žå·²ç»è¿è¡Œçš„ DHCP æœåŠ¡å™¨ä¸­èŽ·å– ip åœ°å€ é—®ï¼šå®¹å™¨æ€Žä¹ˆå–å®¿ä¸»æœº IP å•Šï¼Ÿç­”ï¼š å•æœºçŽ¯å¢ƒ å¦‚æžœæ˜¯å•æœºçŽ¯å¢ƒï¼Œå¾ˆç®€å•ï¼Œä¸å¿…ç¢ç£¨æ€Žä¹ˆçªç ´å‘½åç©ºé—´é™åˆ¶ï¼Œç›´æŽ¥ç”¨çŽ¯å¢ƒå˜é‡é€è¿›åŽ»å³å¯ã€‚ 1docker run -d -e HOST_IP=&lt;å®¿ä¸»çš„IPåœ°å€&gt; nginx ç„¶åŽå®¹å™¨å†…ç›´æŽ¥è¯»å–HOST_IPçŽ¯å¢ƒå˜é‡å³å¯ã€‚ é›†ç¾¤çŽ¯å¢ƒ é›†ç¾¤çŽ¯å¢ƒç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œdocker service create ä¸­çš„ -e ä»¥åŠ --env-fileæ˜¯åœ¨æœåŠ¡åˆ›å»ºæ—¶æŒ‡å®šã€è¯»å–çŽ¯å¢ƒå˜é‡å†…å®¹ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ï¼Œå› æ­¤å¯¹äºŽæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€æ ·çš„ã€‚è€Œä¸”ç›®å‰ä¸å­˜åœ¨ dockerd -e é€‰é¡¹ï¼Œæ‰€ä»¥ç›´æŽ¥ä½¿ç”¨è¿™äº›é€‰é¡¹è¾¾ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæžœã€‚ ä¸è¿‡æœ‰å˜é€šçš„åŠžæ³•ï¼Œå¯ä»¥åœ¨å®¿ä¸»ä¸Šå»ºç«‹ä¸€ä¸ª /etc/variables æ–‡ä»¶ï¼ˆåå­—éšæ„ï¼Œè¿™é‡Œç”¨è¿™ä¸ªæ–‡ä»¶ä¸¾ä¾‹ï¼‰ã€‚å…¶å†…å®¹ä¸ºï¼š 1HOST_IP=1.2.3.4 å…¶ä¸­ 1.2.3.4 æ˜¯è¿™ä¸ªèŠ‚ç‚¹çš„å®¿ä¸» IPï¼Œå› æ­¤æ¯ä¸ªèŠ‚ç‚¹çš„ /etc/variables çš„å†…å®¹ä¸åŒã€‚ è€Œåœ¨å¯åŠ¨æœåŠ¡æ—¶ï¼ŒæŒ‡å®šæŒ‚è½½è¿™ä¸ªæœåŠ¡ç«¯æœ¬åœ°æ–‡ä»¶ï¼š 1docker service create --name app \ --mount type=bind,source=/etc/variables,target=/etc/variables:ro \ myapp ç”±äºŽ --mount æ˜¯å‘ç”ŸäºŽå®¹å™¨è¿è¡Œæ—¶ï¼Œå› æ­¤æ‰€åŠ è½½çš„æ˜¯æ‰€è¿è¡Œçš„æœåŠ¡å™¨çš„ /etc/variablesï¼Œé‡Œé¢æ‰€åŒ…å«çš„ä¹Ÿæ˜¯è¯¥æœåŠ¡å™¨çš„ IP åœ°å€ã€‚ åœ¨ myapp è¿™ä¸ªé•œåƒçš„å…¥å£è„šæœ¬åŠ å…¥åŠ è½½è¯¥çŽ¯å¢ƒå˜é‡æ–‡ä»¶çš„å‘½ä»¤ï¼š 1source /etc/variables è¿™æ · app è¿™ä¸ªæœåŠ¡å®¹å™¨å°±ä¼šæ‹¥æœ‰ HOST_IP çŽ¯å¢ƒå˜é‡ï¼Œå…¶å€¼ä¸ºæ‰€è¿è¡Œçš„å®¿ä¸» IPã€‚ é—®ï¼šå®¹å™¨ç£ç›˜å¯ä»¥é™åˆ¶é…é¢ä¹ˆï¼Ÿç­”ï¼š å¯¹äºŽ devicemapper, btrfs, zfs æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡ --storage-opt size=100Gè¿™ç§å½¢å¼é™åˆ¶ rootfs çš„å¤§å°ã€‚ 1docker create -it --storage-opt size=120G fedora /bin/bash å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š https://docs.docker.com/engine/reference/commandline/run/#/set-storage-driver-options-per-container é—®ï¼šæˆ‘åœ¨å®¹å™¨é‡Œé¢çœ‹åˆ°çš„å†…å­˜ä½¿ç”¨é‡æ˜¯çœŸå®žçš„è¯¥å®¹å™¨å†…å­˜ä½¿ç”¨æƒ…å†µï¼Ÿç­”ï¼š ä¸æ˜¯çš„ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼ŒDockerç›¸æ¯”äºŽè™šæ‹Ÿæœºï¼Œåœ¨éš”ç¦»æ€§ä¸Šç•¥æ˜¾ä¸è¶³ï¼Œè¿™ä¸ªDockeréš”ç¦»æ€§ä¸è¶³å¯¼è‡´èµ„æºæ˜¾ç¤ºé—®é¢˜ã€‚è¿›å…¥å®¹å™¨çœ‹åˆ°æ˜¯å®Œæ•´çš„ç‰©ç†æœºèµ„æºã€‚è™½ç„¶ DockeråŽŸç”Ÿçš„èµ„æºæŸ¥è¯¢æŽ¥å£å¯ä»¥æ­£ç¡®åœ°è¯†åˆ«åˆ†é…çš„èµ„æºï¼Œä½†æ˜¯ç”¨æˆ·å¸¸ç”¨çš„ topã€freeç­‰å‘½ä»¤å´æœªèƒ½æ­£ç¡®åœ°è¯†åˆ«æˆ‘ä»¬æ–½åŠ äºŽ Dockerçš„èµ„æºé™åˆ¶ï¼Œé‚£ä¹ˆåŽŸå› ç©¶ç«Ÿæ˜¯æ€Žæ ·ã€‚äº‹å®žä¸Šï¼Œç±»ä¼¼ topã€freeç­‰å‘½ä»¤ï¼Œå…¶å®žå¤šåŠéƒ½æ˜¯ä»Žä¸€äº›ç³»ç»Ÿæ–‡ä»¶ä¸­èŽ·å–èµ„æºä¿¡æ¯,/proc/cpuinfo,/proc/meminfoè€Œ Dockerçš„éš”ç¦»æ€§ä¸è¶³çš„é—®é¢˜é‡Œï¼Œå°±åŒ…æ‹¬è·Ÿå®¿ä¸»æœºå…±äº« sysã€procç­‰ç³»ç»Ÿæ–‡ä»¶ï¼Œå› æ­¤å¦‚æžœåœ¨å®¹å™¨ä¸­ä½¿ç”¨ä¾èµ–è¿™äº›æ–‡ä»¶çš„å‘½ä»¤ï¼Œå¦‚ uptimeç­‰ï¼Œå®žé™…ä¸Šéƒ½æ˜¾ç¤ºçš„æ˜¯å®¿ä¸»æœºä¿¡æ¯ã€‚ å®¹å™¨çš„æ˜¾ç¤ºé—®é¢˜ï¼Œåœ¨å¾ˆæ—©æœŸçš„ç‰ˆæœ¬ä¸­å°±æœ‰äººæå‡ºè¿‡ã€‚è€Œ Dockerå®˜æ–¹å¯èƒ½æ˜¯å‡ºäºŽæŸäº›åŽŸå› çš„è€ƒè™‘ï¼Œå¹¶æ²¡æœ‰è¯•å›¾ä¿®å¤è¿™äº›æ˜¾ç¤ºé—®é¢˜ã€‚ç›®å‰æ¥è¯´ï¼Œè§£å†³æ˜¾ç¤ºé—®é¢˜è¿˜æ²¡åŠžæ³•å¾ˆå¥½åœ°åœ¨ Dockerä¸­è¿›è¡Œé›†æˆï¼Œä»ç„¶éœ€è¦åœ¨ Dockerä¹‹å¤–åšä¸€äº›ä¿®æ”¹ã€‚ ç›®å‰ç¤¾åŒºä¸­å¸¸è§çš„åšæ³•æ˜¯åˆ©ç”¨ lxcfsæ¥æä¾›å®¹å™¨ä¸­çš„èµ„æºå¯è§æ€§ã€‚lxcfs æ˜¯ä¸€ä¸ªå¼€æºçš„FUSEï¼ˆç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿï¼‰å®žçŽ°æ¥æ”¯æŒLXCå®¹å™¨ï¼Œå®ƒä¹Ÿå¯ä»¥æ”¯æŒDockerå®¹å™¨ã€‚ LXCFSé€šè¿‡ç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨å®¹å™¨ä¸­æä¾›ä¸‹åˆ—procfs çš„æ–‡ä»¶ã€‚ 1/proc/cpuinfo/proc/diskstats/proc/meminfo/proc/stat/proc/swaps/proc/uptime å®¹å™¨ä¸­è¿›ç¨‹è¯»å–ç›¸åº”æ–‡ä»¶å†…å®¹æ—¶ï¼ŒLXCFSçš„FUSEå®žçŽ°ä¼šä»Žå®¹å™¨å¯¹åº”çš„Cgroupä¸­è¯»å–æ­£ç¡®çš„å†…å­˜é™åˆ¶ã€‚ä»Žè€Œä½¿å¾—åº”ç”¨èŽ·å¾—æ­£ç¡®çš„èµ„æºçº¦æŸè®¾å®šã€‚ ä½¿ç”¨æ–¹æ³•ï¼š å®‰è£… lxcfs çš„RPMåŒ… 1$ wget https://copr-be.cloud.fedoraproject.org/results/ganto/lxd/epel-7-x86_64/00486278-lxcfs/lxcfs-2.0.5-3.el7.centos.x86_64.rpm$ yum install lxcfs-2.0.5-3.el7.centos.x86_64.rpm å¯åŠ¨ lxcfs 1$ mkdir -p /var/lib/lxcfs$ lxcfs /var/lib/lxcfs &amp; è¿è¡ŒDockerå®¹å™¨æµ‹è¯• 1$ docker run -it -m 300m \ -v /var/lib/lxcfs/proc/cpuinfo:/proc/cpuinfo:rw \ -v /var/lib/lxcfs/proc/diskstats:/proc/diskstats:rw \ -v /var/lib/lxcfs/proc/meminfo:/proc/meminfo:rw \ -v /var/lib/lxcfs/proc/stat:/proc/stat:rw \ -v /var/lib/lxcfs/proc/swaps:/proc/swaps:rw \ -v /var/lib/lxcfs/proc/uptime:/proc/uptime:rw \ centos:7 /bin/bash[root@e851562db40d /]# free -m total used free shared buff/cache availableMem: 300 3 295 29 0 295Swap: 300 0 300[root@e851562db40d /]# cat /proc/meminfoMemTotal: 307200 kBMemFree: 302768 kBMemAvailable: 302768 kBBuffers: 0 kB....................... æˆ‘ä»¬å¯ä»¥çœ‹åˆ°MemTotalçš„å†…å­˜ä¸º300MBï¼Œé…ç½®å·²ç»ç”Ÿæ•ˆã€‚ å®˜æ–¹é¡¹ç›®åœ°å€ï¼š https://github.com/lxc/lxcfs é—®ï¼šæ•°æ®å®¹å™¨ã€æ•°æ®å·ã€å‘½åå·ã€åŒ¿åå·ã€æŒ‚è½½ç›®å½•è¿™äº›éƒ½æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç­”ï¼š é¦–å…ˆï¼ŒæŒ‚è½½åˆ†ä¸ºæŒ‚è½½æœ¬åœ°å®¿ä¸»ç›®å½• å’Œ æŒ‚è½½æ•°æ®å·(Volume)ã€‚è€Œæ•°æ®å·åˆåˆ†ä¸ºåŒ¿åæ•°æ®å·å’Œå‘½åæ•°æ®å·ã€‚ ç»‘å®šå®¿ä¸»ç›®å½•çš„æ¦‚å¿µå¾ˆå®¹æ˜“ç†è§£ï¼Œå°±æ˜¯å°†å®¿ä¸»ç›®å½•ç»‘å®šåˆ°å®¹å™¨ä¸­çš„æŸä¸ªç›®å½•ä½ç½®ã€‚è¿™æ ·å®¹å™¨å¯ä»¥ç›´æŽ¥è®¿é—®å®¿ä¸»ç›®å½•çš„æ–‡ä»¶ã€‚å…¶å½¢å¼æ˜¯ 1docker run -d -v /var/www:/app nginx è¿™é‡Œæ³¨æ„åˆ° -v çš„å‚æ•°ä¸­ï¼Œå‰åŠéƒ¨åˆ†æ˜¯ç»å¯¹è·¯å¾„ã€‚åœ¨ docker run ä¸­å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼Œè€Œåœ¨ docker-compose ä¸­ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå› ä¸º docker-composeä¼šå¸®ä½ è¡¥å…¨è·¯å¾„ã€‚ å¦ä¸€ç§å½¢å¼æ˜¯ä½¿ç”¨ Docker Volumeï¼Œä¹Ÿå°±æ˜¯æ•°æ®å·ã€‚è¿™æ˜¯å¾ˆå¤šçœ‹å¤è‘£ä¹¦çš„äººä¸äº†è§£çš„æ¦‚å¿µï¼Œä¸è¦è·Ÿæ•°æ®å®¹å™¨ï¼ˆData Containerï¼‰å¼„æ··ã€‚æ•°æ®å·æ˜¯ Docker å¼•æ“Žç»´æŠ¤çš„å­˜å‚¨æ–¹å¼ï¼Œä½¿ç”¨ docker volume create å‘½ä»¤åˆ›å»ºï¼Œå¯ä»¥åˆ©ç”¨å·é©±åŠ¨æ”¯æŒå¤šç§å­˜å‚¨æ–¹æ¡ˆã€‚å…¶é»˜è®¤çš„é©±åŠ¨ä¸º localï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°å·é©±åŠ¨ã€‚æœ¬åœ°é©±åŠ¨æ”¯æŒå‘½åå·å’ŒåŒ¿åå·ã€‚ é¡¾åæ€ä¹‰ï¼Œå‘½åå·å°±æ˜¯æœ‰åå­—çš„å·ï¼Œä½¿ç”¨ docker volume create --name xxx å½¢å¼åˆ›å»ºå¹¶å‘½åçš„å·ï¼›è€ŒåŒ¿åå·å°±æ˜¯æ²¡åå­—çš„å·ï¼Œä¸€èˆ¬æ˜¯ docker run -v /dataè¿™ç§ä¸æŒ‡å®šå·åçš„æ—¶å€™æ‰€äº§ç”Ÿï¼Œæˆ–è€… Dockerfile é‡Œé¢çš„å®šä¹‰ç›´æŽ¥ä½¿ç”¨çš„ã€‚ æœ‰åå­—çš„å·ï¼Œåœ¨ç”¨è¿‡ä¸€æ¬¡åŽï¼Œä»¥åŽæŒ‚è½½å®¹å™¨çš„æ—¶å€™è¿˜å¯ä»¥ä½¿ç”¨ï¼Œå› ä¸ºæœ‰åå­—å¯ä»¥æŒ‡å®šã€‚æ‰€ä»¥ä¸€èˆ¬éœ€è¦ä¿å­˜çš„æ•°æ®ä½¿ç”¨å‘½åå·ä¿å­˜ã€‚ è€ŒåŒ¿åå·åˆ™æ˜¯éšç€å®¹å™¨å»ºç«‹è€Œå»ºç«‹ï¼Œéšç€å®¹å™¨æ¶ˆäº¡è€Œæ·¹æ²¡äºŽå·åˆ—è¡¨ä¸­ï¼ˆå¯¹äºŽ docker run åŒ¿åå·ä¸ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼‰ã€‚å¯¹äºŽäºŒä»£ Swarm æœåŠ¡è€Œè¨€ï¼ŒåŒ¿åå·ä¼šéšç€æœåŠ¡åˆ é™¤è€Œè‡ªåŠ¨åˆ é™¤ã€‚ å› æ­¤åŒ¿åå·åªå­˜æ”¾æ— å…³ç´§è¦çš„ä¸´æ—¶æ•°æ®ï¼Œéšç€å®¹å™¨æ¶ˆäº¡ï¼Œè¿™äº›æ•°æ®å°†å¤±åŽ»å­˜åœ¨çš„æ„ä¹‰ã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå«æ•°æ®å®¹å™¨ (Data Container) çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨--volumes-fromçš„ä¸œè¥¿ã€‚è¿™æ—©å°±ä¸ç”¨äº†ï¼Œå¦‚æžœçœ‹äº†ä¹¦è¿˜åœ¨è¯´è¿™ç§æ–¹å¼ï¼Œé‚£è¯´æ˜Žä¹¦å·²ç»è¿‡æ—¶äº†ã€‚æŒ‰ç…§ä»Šå¤©çš„ç†è§£ï¼Œè¿™ç±»æ•°æ®å®¹å™¨ï¼Œæ— éžå°±æ˜¯æŒ‚äº†ä¸ªåŒ¿åå·çš„å®¹å™¨ç½¢äº†ã€‚ åœ¨ Dockerfile ä¸­å®šä¹‰çš„æŒ‚è½½ï¼Œæ˜¯æŒ‡ åŒ¿åæ•°æ®å·ã€‚Dockerfile ä¸­æŒ‡å®š VOLUME çš„ç›®çš„ï¼Œåªæ˜¯ä¸ºäº†å°†æŸä¸ªè·¯å¾„ç¡®å®šä¸ºå·ã€‚ æˆ‘ä»¬çŸ¥é“ï¼ŒæŒ‰ç…§æœ€ä½³å®žè·µçš„è¦æ±‚ï¼Œä¸åº”è¯¥åœ¨å®¹å™¨å­˜å‚¨å±‚å†…è¿›è¡Œæ•°æ®å†™å…¥æ“ä½œï¼Œæ‰€æœ‰å†™å…¥åº”è¯¥ä½¿ç”¨å·ã€‚å¦‚æžœå®šåˆ¶é•œåƒçš„æ—¶å€™ï¼Œå°±å¯ä»¥ç¡®å®šæŸäº›ç›®å½•ä¼šå‘ç”Ÿé¢‘ç¹å¤§é‡çš„è¯»å†™æ“ä½œï¼Œé‚£ä¹ˆä¸ºäº†é¿å…åœ¨è¿è¡Œæ—¶ç”±äºŽç”¨æˆ·ç–å¿½è€Œå¿˜è®°æŒ‡å®šå·ï¼Œå¯¼è‡´å®¹å™¨å‘ç”Ÿå­˜å‚¨å±‚å†™å…¥çš„é—®é¢˜ï¼Œå°±å¯ä»¥åœ¨ Dockerfile ä¸­ä½¿ç”¨VOLUMEæ¥æŒ‡å®šæŸäº›ç›®å½•ä¸ºåŒ¿åå·ã€‚è¿™æ ·å³ä½¿ç”¨æˆ·å¿˜è®°äº†æŒ‡å®šå·ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿä¸è‰¯çš„åŽæžœã€‚ è¿™ä¸ªè®¾ç½®å¯ä»¥åœ¨è¿è¡Œæ—¶è¦†ç›–ã€‚é€šè¿‡ docker run çš„ -vå‚æ•°æˆ–è€… docker-compose.yml çš„ volumes æŒ‡å®šã€‚ä½¿ç”¨å‘½åå·çš„å¥½å¤„æ˜¯å¯ä»¥å¤ç”¨ï¼Œå…¶å®ƒå®¹å™¨å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½åæ•°æ®å·çš„åå­—æ¥æŒ‡å®šæŒ‚è½½ï¼Œå…±äº«å…¶å†…å®¹ï¼ˆä¸è¿‡è¦æ³¨æ„å¹¶å‘è®¿é—®çš„ç«žäº‰é—®é¢˜ï¼‰ã€‚ æ¯”å¦‚ï¼ŒDockerfile ä¸­è¯´ VOLUME /dataï¼Œé‚£ä¹ˆå¦‚æžœç›´æŽ¥ docker runï¼Œå…¶ /data å°±ä¼šè¢«æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œå‘ /dataå†™å…¥çš„æ“ä½œä¸ä¼šå†™å…¥åˆ°å®¹å™¨å­˜å‚¨å±‚ï¼Œè€Œæ˜¯å†™å…¥åˆ°äº†åŒ¿åå·ä¸­ã€‚ä½†æ˜¯å¦‚æžœè¿è¡Œæ—¶ docker run -v mydata:/dataï¼Œè¿™å°±è¦†ç›–äº† /data çš„æŒ‚è½½è®¾ç½®ï¼Œè¦æ±‚å°† /data æŒ‚è½½åˆ°åä¸º mydata çš„å‘½åå·ä¸­ã€‚æ‰€ä»¥è¯´ Dockerfile ä¸­çš„ VOLUME å®žé™…ä¸Šæ˜¯ä¸€å±‚ä¿é™©ï¼Œç¡®ä¿é•œåƒè¿è¡Œå¯ä»¥æ›´å¥½çš„éµå¾ªæœ€ä½³å®žè·µï¼Œä¸å‘å®¹å™¨å­˜å‚¨å±‚å†…è¿›è¡Œå†™å…¥æ“ä½œã€‚ æ•°æ®å·é»˜è®¤å¯èƒ½ä¼šä¿å­˜äºŽ/var/lib/docker/volumesï¼Œä¸è¿‡ä¸€èˆ¬ä¸éœ€è¦ã€ä¹Ÿä¸åº”è¯¥è®¿é—®è¿™ä¸ªä½ç½®ã€‚ é—®ï¼šå·å’ŒæŒ‚è½½ç›®å½•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç­”ï¼š å· (Docker Volume) æ˜¯å—æŽ§å­˜å‚¨ï¼Œæ˜¯ç”± Docker å¼•æ“Žè¿›è¡Œç®¡ç†ç»´æŠ¤çš„ã€‚å› æ­¤ä½¿ç”¨å·ï¼Œä½ å¯ä»¥ä¸å¿…å¤„ç† uidã€SELinux ç­‰å„ç§æƒé™é—®é¢˜ï¼ŒDocker å¼•æ“Žåœ¨å»ºç«‹å·æ—¶ä¼šè‡ªåŠ¨æ·»åŠ å®‰å…¨è§„åˆ™ï¼Œä»¥åŠæ ¹æ®æŒ‚è½½ç‚¹è°ƒæ•´æƒé™ã€‚å¹¶ä¸”å¯ä»¥ç»Ÿä¸€åˆ—è¡¨ã€æ·»åŠ ã€åˆ é™¤ã€‚å¦å¤–ï¼Œé™¤äº†æœ¬åœ°å·å¤–ï¼Œè¿˜æ”¯æŒç½‘ç»œå·ã€åˆ†å¸ƒå¼å·ã€‚ è€ŒæŒ‚è½½ç›®å½•é‚£å°±æ²¡äººç®¡äº†ï¼Œå±žäºŽç”¨æˆ·è‡ªè¡Œç»´æŠ¤ã€‚ä½ å°±å¿…é¡»æ‰‹åŠ¨å¤„ç†æ‰€æœ‰æƒé™é—®é¢˜ã€‚ç‰¹åˆ«æ˜¯åœ¨ CentOS ä¸Šï¼Œå¾ˆå¤šäººç¢°åˆ° Permission Deniedï¼Œå°±æ˜¯å› ä¸ºæ²¡æœ‰ä½¿ç”¨å·ï¼Œè€Œæ˜¯æŒ‚è½½ç›®å½•ï¼Œè€Œä¸”è¿˜å¯¹ SELinux å®‰å…¨æƒé™ä¸€æ— æ‰€çŸ¥å¯¼è‡´ã€‚ é—®ï¼šä¸ºä»€ä¹ˆç»‘å®šäº†å®¿ä¸»çš„æ–‡ä»¶åˆ°å®¹å™¨ï¼Œå®¿ä¸»ä¿®æ”¹äº†æ–‡ä»¶ï¼Œå®¹å™¨å†…çœ‹åˆ°çš„è¿˜æ˜¯æ—§çš„å†…å®¹å•Šï¼Ÿç­”ï¼š åœ¨ç»‘å®šå®¿ä¸»å†…å®¹çš„å½¢å¼ä¸­ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šçš„å½¢å¼ï¼Œå°±æ˜¯ç»‘å®šå®¿ä¸»æ–‡ä»¶ï¼Œæ—¢ï¼š 1docker run -d -v $PWD/myapp.ini:/app/app.ini myapp åœ¨ myapp.ini æ–‡ä»¶ä¸å‘ç”Ÿæ”¹å˜çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„ç»‘å®šæ˜¯å’Œç»‘å®šå®¿ä¸»ç›®å½•æ€§è´¨ä¸€æ ·ï¼ŒåŒæ ·æ˜¯å°†å®¿ä¸»æ–‡ä»¶ç»‘å®šåˆ°å®¹å™¨å†…éƒ¨ï¼Œå®¹å™¨å†…å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œæƒ…å†µåˆ™æœ‰ä¸åŒã€‚ ç®€å•çš„æ–‡ä»¶ä¿®æ”¹ï¼Œæ¯”å¦‚ echo &quot;name = jessie&quot; &gt;&gt; myapp.iniï¼Œè¿™ç±»ä¿®æ”¹ä¾æ—§è¿˜æ˜¯åŽŸæ¥çš„æ–‡ä»¶ï¼Œå®¿ä¸»ï¼ˆæˆ–å®¹å™¨ï¼‰å¯¹æ–‡ä»¶è¿›è¡Œçš„æ”¹åŠ¨ï¼Œå¦ä¸€æ–¹æ˜¯å¯ä»¥çœ‹åˆ°çš„ã€‚ è€Œå¤æ‚çš„æ–‡ä»¶æ“ä½œï¼Œæ¯”å¦‚ä½¿ç”¨ vimï¼Œæˆ–è€…å…¶å®ƒç¼–è¾‘å™¨ç¼–è¾‘æ–‡ä»¶ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´ä¸€æ–¹çš„ä¿®æ”¹ï¼Œå¦ä¸€æ–¹çœ‹ä¸åˆ°ã€‚ å…¶åŽŸå› æ˜¯è¿™ç±»ç¼–è¾‘å™¨åœ¨ä¿å­˜æ–‡ä»¶çš„æ—¶å€™ï¼Œç»å¸¸ä¼šé‡‡ç”¨ä¸€ç§é¿å…å†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿæ•…éšœè€Œå¯¼è‡´æ–‡ä»¶ä¸¢å¤±çš„ç­–ç•¥ï¼Œæ—¢å…ˆæŠŠå†…å®¹å†™åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶ä¸­åŽ»ï¼Œå†™å¥½äº†åŽï¼Œå†åˆ é™¤æ—§çš„æ–‡ä»¶ï¼Œç„¶åŽæŠŠæ–°æ–‡ä»¶æ”¹åä¸ºæ—§çš„æ–‡ä»¶åï¼Œä»Žè€Œå®Œæˆä¿å­˜çš„æ“ä½œã€‚ä»Žè¿™ä¸ªæ“ä½œæµç¨‹å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶ä¿®æ”¹åŽçš„æ–‡ä»¶çš„åå­—å’Œè¿‡åŽ»ä¸€æ ·ï¼Œä½†å¯¹äºŽæ–‡ä»¶ç³»ç»Ÿè€Œè¨€æ˜¯ä¸€ä¸ªæ–°çš„æ–‡ä»¶äº†ã€‚æ¢å¥è¯è¯´ï¼Œè™½ç„¶æ˜¯åŒåæ–‡ä»¶ï¼Œä½†æ˜¯æ—§çš„æ–‡ä»¶çš„ inode å’Œä¿®æ”¹åŽçš„æ–‡ä»¶çš„ inode ä¸åŒã€‚ 1$ ls -i268541 hello.txt$ vi hello.txt$ ls -i268716 hello.txt å¦‚ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡ vim ç¼–è¾‘æ–‡ä»¶åŽï¼Œinode ä»Ž 268541 å˜ä¸ºäº† 268716ï¼Œè¿™å°±æ˜¯åˆšæ‰è¯´çš„ï¼Œåå­—è¿˜æ˜¯é‚£ä¸ªåå­—ï¼Œæ–‡ä»¶å·²ä¸æ˜¯åŽŸæ¥çš„æ–‡ä»¶äº†ã€‚ è€Œ Docker çš„ ç»‘å®šå®¿ä¸»æ–‡ä»¶ï¼Œå®žé™…ä¸Šåœ¨æ–‡ä»¶ç³»ç»Ÿçœ¼é‡Œï¼Œé’ˆå¯¹çš„æ˜¯ inodeï¼Œè€Œä¸æ˜¯æ–‡ä»¶åã€‚å› æ­¤å®¹å™¨å†…æ‰€çœ‹åˆ°çš„ï¼Œä¾æ—§æ˜¯ä¹‹å‰æ—§çš„ inode å¯¹åº”çš„é‚£ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ—§çš„å†…å®¹ã€‚ è¿™å°±å‡ºçŽ°äº†ä¹‹å‰çš„é‚£ä¸ªé—®é¢˜ï¼Œåœ¨å®¿ä¸»å†…ä¿®æ”¹ç»‘å®šæ–‡ä»¶çš„å†…å®¹ï¼Œç»“æžœå‘çŽ°å®¹å™¨å†…çœ‹ä¸åˆ°æ”¹å˜ï¼Œå…¶åŽŸå› å°±åœ¨äºŽå®¿ä¸»çš„é‚£ä¸ªæ–‡ä»¶å·²ä¸æ˜¯åŽŸæ¥çš„æ–‡ä»¶äº†ã€‚ è¿™ç±»é—®é¢˜è§£å†³åŠžæ³•å¾ˆç®€å•ï¼Œå¦‚æžœæ–‡ä»¶å¯èƒ½æ”¹å˜ï¼Œé‚£ä¹ˆå°±ä¸è¦ç»‘å®šå®¿ä¸»æ–‡ä»¶ï¼Œè€Œæ˜¯ç»‘å®šä¸€ä¸ªå®¿ä¸»ç›®å½•ï¼Œè¿™æ ·åªè¦ç›®å½•ä¸è·‘ï¼Œé‡Œé¢æ–‡ä»¶çˆ±å’‹æ”¹å°±å’‹æ”¹ã€‚ é—®ï¼šå¤šä¸ª Docker å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®æ€Žä¹ˆåŠžï¼Ÿç­”ï¼š å¦‚æžœæ˜¯ä¸åŒå®¿ä¸»ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼æ•°æ®å·é©±åŠ¨ï¼Œè®©åˆ†å¸ƒåœ¨ä¸åŒå®¿ä¸»çš„å®¹å™¨éƒ½å¯ä»¥è®¿é—®åˆ°çš„åˆ†å¸ƒå¼å­˜å‚¨çš„ä½ç½®ã€‚å¦‚S3ä¹‹ç±»ï¼š https://docs.docker.com/engine/extend/legacy_plugins/#authorization-plugins é—®ï¼šæ—¢ç„¶ä¸€ä¸ªå®¹å™¨ä¸€ä¸ªåº”ç”¨ï¼Œé‚£ä¹ˆæˆ‘æƒ³åœ¨è¯¥å®¹å™¨ä¸­ç”¨è®¡åˆ’ä»»åŠ¡ cron æ€Žä¹ˆåŠžï¼Ÿç­”ï¼š cron å…¶å®žæ˜¯å¦ä¸€ä¸ªæœåŠ¡äº†ï¼Œæ‰€ä»¥åº”è¯¥å¦èµ·ä¸€ä¸ªå®¹å™¨æ¥è¿›è¡Œï¼Œå¦‚éœ€è®¿é—®è¯¥åº”ç”¨çš„æ•°æ®æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥å…±äº«è¯¥åº”ç”¨çš„æ•°æ®å·å³å¯ã€‚è€Œ cron çš„å®¹å™¨ä¸­ï¼Œcron ä»¥å‰å°è¿è¡Œå³å¯ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ª python è„šæœ¬å¯ä»¥å®šæ—¶æ‰§è¡Œã€‚é‚£ä¹ˆå¯ä»¥è¿™æ ·æž„å»ºè¿™ä¸ªå®¹å™¨ã€‚ é¦–å…ˆåŸºäºŽ python çš„é•œåƒå®šåˆ¶ï¼š 1FROM python:3.5.2ENV TZ=Asia/ShanghaiRUN apt-get update \ &amp;&amp; apt-get install -y cron \ &amp;&amp; apt-get autoremove -yCOPY ./cronpy /etc/cron.d/cronpyCMD [&quot;cron&quot;, &quot;-f&quot;] ä¸­æ‰€æåŠçš„ cronpy å°±æ˜¯æˆ‘ä»¬éœ€è¦è®¡åˆ’æ‰§è¡Œçš„ cron è„šæœ¬ã€‚ 1* * * * * root /app/task.py &gt;&gt; /var/log/task.log 2&gt;&amp;1 åœ¨è¿™ä¸ªè®¡åˆ’ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å®šæ—¶æ‰§è¡Œ /app/task.py æ–‡ä»¶ï¼Œæ—¥å¿—è®°å½•åœ¨/var/log/task.log ä¸­ã€‚è¿™ä¸ª task.py æ˜¯ä¸€ä¸ªéžå¸¸ç®€å•çš„æ–‡ä»¶ï¼Œå…¶å†…å®¹åªæ˜¯è¾“å‡ºä¸ªæ—¶é—´è€Œå·²ã€‚ 1#!/usr/local/bin/pythonfrom datetime import datetimeprint (&quot;Cron job has run at &#123;0&#125; with environment variable &quot;.format(str(datetime.now()))) è¿™ task.py å¯ä»¥åœ¨æž„å»ºé•œåƒæ—¶æ”¾è¿›åŽ»ï¼Œä¹Ÿå¯ä»¥æŒ‚è½½å®¿ä¸»ç›®å½•ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¥æŒ‚è½½å®¿ä¸»ç›®å½•ä¸¾ä¾‹ã€‚ 1# æž„å»ºé•œåƒdocker build -t cronjob:latest .# è¿è¡Œé•œåƒdocker run \ --name cronjob \ -d \ -v $(pwd)/task.py:/app/task.py \ -v $(pwd)/log/:/var/log/ \ cronjob:latest éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåº”è¯¥åœ¨æž„å»ºä¸»æœºä¸Šèµ‹äºˆ task.py æ–‡ä»¶å¯æ‰§è¡Œæƒé™ã€‚ é—®ï¼šä¸ºä»€ä¹ˆè¯´æ•°æ®åº“ä¸é€‚åˆæ”¾åœ¨ Docker å®¹å™¨é‡Œè¿è¡Œï¼Ÿç­”ï¼š ä¸ä¸ºä»€ä¹ˆï¼Œå› ä¸ºè¿™ä¸ªè¯´æ³•ä¸å¯¹ï¼Œå¤§éƒ¨åˆ†è®¤ä¸ºæ•°æ®åº“å¿…é¡»æ”¾åˆ°å®¹å™¨å¤–è¿è¡Œçš„äººæ ¹æœ¬ä¸çŸ¥é“ Docker Volume ä¸ºä½•ç‰©ã€‚ åœ¨æ—©å¹´ Docker æ²¡æœ‰ Docker Volume çš„æ—¶å€™ï¼Œå…¶æ•°æ®æŒä¹…åŒ–æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™å·²ç»å¾ˆå¤šå¹´è¿‡åŽ»äº†ã€‚çŽ°åœ¨æœ‰ Docker Volumeè§£å†³æŒä¹…åŒ–é—®é¢˜ï¼Œä»Žæœ¬åœ°ç›®å½•ç»‘å®šã€å—æŽ§å­˜å‚¨ç©ºé—´ã€å—è®¾å¤‡ã€ç½‘ç»œå­˜å‚¨åˆ°åˆ†å¸ƒå¼å­˜å‚¨ï¼ŒDocker Volume éƒ½æ”¯æŒï¼Œä¸å­˜åœ¨æ•°æ®è¯»å†™ç±»çš„æœåŠ¡ä¸é€‚äºŽè¿è¡ŒäºŽå®¹å™¨å†…çš„è¯´æ³•ã€‚ Docker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œä½¿ç”¨æ•°æ®å·æ˜¯ç›´æŽ¥å‘å®¿ä¸»å†™å…¥æ–‡ä»¶ï¼Œä¸å­˜åœ¨æ€§èƒ½æŸè€—ã€‚è€Œä¸”å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºŽå®¹å™¨ï¼Œå®¹å™¨æ¶ˆäº¡å·ä¸æ¶ˆäº¡ï¼Œé‡æ–°è¿è¡Œå®¹å™¨å¯ä»¥æŒ‚è½½æŒ‡å®šå‘½åå·ï¼Œæ•°æ®ä¾ç„¶å­˜åœ¨ï¼Œä¹Ÿä¸å­˜åœ¨æ— æ³•æŒä¹…åŒ–çš„é—®é¢˜ã€‚ å»ºè®®åŽ»é˜…è¯»ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š https://docs.docker.com/engine/tutorials/dockervolumes/ https://docs.docker.com/engine/reference/commandline/volume_create/ https://docs.docker.com/engine/extend/legacy_plugins/#/volume-plugins é—®ï¼šå¦‚ä½•åˆ—å‡ºå®¹å™¨å’Œæ‰€ä½¿ç”¨çš„å·çš„å…³ç³»ï¼Ÿç­”ï¼š è¦æ„Ÿè°¢å¼ºå¤§çš„ Go Templateï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ˜¾ç¤ºï¼š 1docker inspect --format &apos;&#123;&#123;.Name&#125;&#125; =&gt; &#123;&#123;with .Mounts&#125;&#125;&#123;&#123;range .&#125;&#125; &#123;&#123;.Name&#125;&#125;,&#123;&#123;end&#125;&#125;&#123;&#123;end&#125;&#125;&apos; $(docker ps -aq) æ³¨æ„è¿™é‡Œçš„æ¢è¡Œå’Œç©ºæ ¼æ˜¯æœ‰æ„å¦‚æ­¤çš„ï¼Œè¿™æ ·å°±å¯ä»¥å†è¿”å›žç»“æžœæŽ§åˆ¶ç¼©è¿›æ ¼å¼ã€‚å…¶ç»“æžœå°†æ˜¯å¦‚ä¸‹å½¢å¼ï¼š 1$ docker inspect --format &apos;&#123;&#123;.Name&#125;&#125; =&gt; &#123;&#123;with .Mounts&#125;&#125;&#123;&#123;range .&#125;&#125; &#123;&#123;.Name&#125;&#125;&#123;&#123;end&#125;&#125;&#123;&#123;end&#125;&#125;&apos; $(docker ps -aq)/device_api_1 =&gt;/device_dashboard-debug_1 =&gt;/device_redis_1 =&gt; device_redis-data/device_mongo_1 =&gt; device_mongo-data 61453e46c3409f42e938324d7feffc6aeb6b7ce16d2080566e3b128c910c9570/prometheus_prometheus_1 =&gt; fc0185ed3fc637295de810efaff7333e8ff2f6050d7f9368a22e19fb2c1e3c3f é—®ï¼šdocker pull ä¸‹æ¥çš„é•œåƒæ–‡ä»¶éƒ½åœ¨å“ªï¼Ÿç­”ï¼š Dockerä¸æ˜¯è™šæ‹Ÿæœºï¼ŒDocker é•œåƒä¹Ÿä¸æ˜¯è™šæ‹Ÿæœºçš„ ISO æ–‡ä»¶ã€‚Docker çš„é•œåƒæ˜¯åˆ†å±‚å­˜å‚¨ï¼Œæ¯ä¸€ä¸ªé•œåƒéƒ½æ˜¯ç”±å¾ˆå¤šå±‚ï¼Œå¾ˆå¤šä¸ªæ–‡ä»¶ç»„æˆã€‚è€Œä¸åŒçš„é•œåƒæ˜¯å…±äº«ç›¸åŒçš„å±‚çš„ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æž„ï¼Œä¸å­˜åœ¨å…·ä½“å“ªä¸ªæ–‡ä»¶æ˜¯ pull ä¸‹æ¥çš„é•œåƒçš„é—®é¢˜ã€‚ é—®ï¼šdocker images å‘½ä»¤æ˜¾ç¤ºçš„é•œåƒå äº†å¥½å¤§çš„ç©ºé—´ï¼Œæ€Žä¹ˆåŠžï¼Ÿç­”ï¼š è¿™ä¸ªæ˜¾ç¤ºçš„å¤§å°æ˜¯è®¡ç®—åŽçš„å¤§å°ï¼Œè¦çŸ¥é“ docker image æ˜¯åˆ†å±‚å­˜å‚¨çš„ï¼Œåœ¨1.10ä¹‹å‰ï¼Œä¸åŒé•œåƒæ— æ³•å…±äº«åŒä¸€å±‚ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šç¡®å®žæ˜¯ä¸‹è½½å¤§å°ã€‚ä½†æ˜¯ä»Ž1.10ä¹‹åŽï¼Œå·²æœ‰çš„å±‚ï¼ˆé€šè¿‡SHA256æ¥åˆ¤æ–­ï¼‰ï¼Œä¸éœ€è¦å†ä¸‹è½½ã€‚åªéœ€è¦ä¸‹è½½å˜åŒ–çš„å±‚ã€‚æ‰€ä»¥å®žé™…ä¸‹è½½å¤§å°æ¯”è¿™ä¸ªæ•°å€¼è¦å°ã€‚è€Œä¸”æœ¬åœ°ç¡¬ç›˜ç©ºé—´å ç”¨ï¼Œä¹Ÿæ¯”docker imagesåˆ—å‡ºæ¥çš„ä¸œè¥¿åŠ èµ·æ¥å°å¾ˆå¤šï¼Œå¾ˆå¤šé‡å¤çš„éƒ¨åˆ†å…±äº«äº†ã€‚ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æ¸…ç†æ—§çš„å’Œæœªä½¿ç”¨çš„Dockeré•œåƒï¼š 12$ docker image prune [OPTIONS] #å‘½ä»¤ç”¨äºŽåˆ é™¤æœªä½¿ç”¨çš„æ˜ åƒã€‚ å¦‚æžœæŒ‡å®šäº†-aï¼Œè¿˜å°†åˆ é™¤ä»»ä½•å®¹å™¨æœªå¼•ç”¨çš„æ‰€æœ‰æ˜ åƒã€‚åç§°ï¼Œç®€å†™ é»˜è®¤ è¯´æ˜Ž--all, -a false æ˜¾ç¤ºæ‰€æœ‰æ˜ åƒ(é»˜è®¤éšè—ä¸­é—´æ˜ åƒ)--force, -f false ä¸è¦æç¤ºç¡®è®¤ é—®ï¼šdocker images -a åŽæ˜¾ç¤ºäº†å¥½å¤š çš„é•œåƒï¼Ÿéƒ½æ˜¯ä»€ä¹ˆå‘€ï¼Ÿèƒ½åˆ ä¹ˆï¼Ÿç­”ï¼š ç®€å•æ¥è¯´ï¼Œ`` å°±æ˜¯è¯´è¯¥é•œåƒæ²¡æœ‰æ‰“æ ‡ç­¾ã€‚è€Œæ²¡æœ‰æ‰“æ ‡ç­¾é•œåƒä¸€èˆ¬åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯ä¾èµ–é•œåƒï¼Œä¸€ç±»æ˜¯ä¸¢äº†æ ‡ç­¾çš„é•œåƒã€‚ ä¾èµ–é•œåƒ Dockerçš„é•œåƒã€å®¹å™¨çš„å­˜å‚¨å±‚æ˜¯Union FSï¼Œåˆ†å±‚å­˜å‚¨ç»“æž„ã€‚æ‰€ä»¥ä»»ä½•é•œåƒé™¤äº†æœ€ä¸Šé¢ä¸€å±‚æ‰“ä¸Šæ ‡ç­¾(tag)å¤–ï¼Œå…¶å®ƒä¸‹é¢ä¾èµ–çš„ä¸€å±‚å±‚å­˜å‚¨ä¹Ÿæ˜¯å­˜åœ¨çš„ã€‚è¿™äº›é•œåƒæ²¡æœ‰æ‰“ä¸Šä»»ä½•æ ‡ç­¾ï¼Œæ‰€ä»¥åœ¨ docker images -a çš„æ—¶å€™ä¼šä»¥ çš„å½¢å¼æ˜¾ç¤ºã€‚æ³¨æ„è§‚å¯Ÿä¸€ä¸‹ `docker pull`çš„æ¯ä¸€å±‚çš„`sha256`çš„æ ¡éªŒå€¼ï¼Œç„¶åŽå¯¹æ¯”ä¸€ä¸‹ ä¸­çš„ç›¸åŒæ ¡éªŒå€¼çš„é•œåƒï¼Œå®ƒä»¬å°±æ˜¯ä¾èµ–é•œåƒã€‚è¿™äº›é•œåƒä¸åº”å½“è¢«åˆ é™¤ï¼Œå› ä¸ºæœ‰æ ‡ç­¾é•œåƒåœ¨ä¾èµ–å®ƒä»¬ã€‚ ä¸¢äº†æ ‡ç­¾çš„é•œåƒ è¿™ç±»é•œåƒå¯èƒ½æœ¬æ¥æœ‰æ ‡ç­¾ï¼ŒåŽæ¥ä¸¢äº†ã€‚åŽŸå› å¯èƒ½å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š docker pull äº†ä¸€ä¸ªåŒæ ·æ ‡ç­¾ä½†æ˜¯æ–°ç‰ˆæœ¬çš„é•œåƒï¼ŒäºŽæ˜¯è¯¥æ ‡ç­¾ä»Žæ—§ç‰ˆæœ¬çš„é•œåƒè½¬ç§»åˆ°äº†æ–°ç‰ˆæœ¬é•œåƒä¸Šï¼Œé‚£ä¹ˆæ—§ç‰ˆæœ¬çš„é•œåƒä¸Šçš„æ ‡ç­¾å°±ä¸¢äº†ï¼› docker build æ—¶æŒ‡å®šçš„æ ‡ç­¾éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæ–°æž„å»ºçš„é•œåƒæ‹¥æœ‰è¯¥æ ‡ç­¾ï¼Œè€Œä¹‹å‰æž„å»ºçš„é•œåƒå°±ä¸¢å¤±äº†æ ‡ç­¾ã€‚ è¿™ç±»é•œåƒè¢«ç§°ä¸º dangling è™šæ‚¬é•œåƒã€‚è¿™äº›é•œåƒå¯ä»¥åˆ é™¤ï¼Œæ‰‹åŠ¨åˆ é™¤ dangling é•œåƒï¼š 1docker rmi $(docker images -aq -f &quot;dangling=true&quot;) é—®ï¼šä¸ºä»€ä¹ˆè¯´ä¸è¦ä½¿ç”¨ import, export, save, load, commit æ¥æž„å»ºé•œåƒï¼Ÿç­”ï¼š Docker æä¾›äº†å¾ˆå¥½çš„ Dockerfile çš„æœºåˆ¶æ¥å¸®åŠ©å®šåˆ¶é•œåƒï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨Shellå‘½ä»¤ï¼Œéžå¸¸æ–¹ä¾¿ã€‚è€Œä¸”ï¼Œè¿™æ ·åˆ¶ä½œçš„é•œåƒæ›´åŠ é€æ˜Žï¼Œä¹Ÿå®¹æ˜“ç»´æŠ¤ï¼Œåœ¨åŸºç¡€é•œåƒå‡çº§åŽï¼Œå¯ä»¥ç®€å•åœ°é‡æ–°æž„å»ºä¸€ä¸‹ï¼Œå°±å¯ä»¥ç»§æ‰¿åŸºç¡€é•œåƒçš„å®‰å…¨ç»´æŠ¤æ“ä½œã€‚ ä½¿ç”¨ docker commit åˆ¶ä½œçš„é•œåƒè¢«ç§°ä¸ºé»‘ç®±é•œåƒï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯é‡Œé¢è¿›è¡Œçš„æ˜¯é»‘ç®±æ“ä½œï¼Œé™¤æœ¬äººå¤–æ— äººçŸ¥æ™“ã€‚å³ä½¿è¿™ä¸ªåˆ¶ä½œé•œåƒçš„äººï¼Œè¿‡ä¸€æ®µæ—¶é—´åŽä¹Ÿä¸ä¼šå®Œæ•´çš„è®°èµ·é‡Œé¢çš„æ“ä½œã€‚é‚£ä¹ˆå½“æœ‰äº›ä¸œè¥¿éœ€è¦æ”¹å˜æ—¶ï¼Œæˆ–è€…å› åŸºç¡€é•œåƒæ›´æ–°è€Œéœ€è¦é‡æ–°åˆ¶ä½œé•œåƒæ—¶ï¼Œä¼šè®©ä¸€åˆ‡å˜å¾—å¼‚å¸¸å›°éš¾ï¼Œå°±å¦‚åŒé‡æ–°å®‰è£…è°ƒè¯•é…ç½®æœåŠ¡å™¨ä¸€æ ·ï¼Œå¤±åŽ»äº† Docker çš„ä¼˜åŠ¿äº†ã€‚ å¦å¤–ï¼ŒDocker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå…¶æ–‡ä»¶ç³»ç»Ÿæ˜¯ Union FSï¼Œåˆ†å±‚å¼å­˜å‚¨ï¼Œæ¯ä¸€æ¬¡ commit éƒ½ä¼šå»ºç«‹ä¸€å±‚ï¼Œä¸Šä¸€å±‚çš„æ–‡ä»¶å¹¶ä¸ä¼šå› ä¸º rmè€Œåˆ é™¤ï¼Œåªæ˜¯åœ¨å½“å‰å±‚æ ‡è®°ä¸ºåˆ é™¤è€Œçœ‹ä¸åˆ°äº†è€Œå·²ï¼Œæ¯æ¬¡ docker pull çš„æ—¶å€™ï¼Œé‚£äº›ä¸å¿…è¦çš„æ–‡ä»¶éƒ½ä¼šå¦‚å½±éšå½¢ï¼Œæ‰€å¾—åˆ°çš„é•œåƒä¹Ÿå¿…ç„¶è‡ƒè‚¿ä¸å ªã€‚è€Œä¸”ï¼Œéšç€æ–‡ä»¶å±‚æ•°çš„å¢žåŠ ï¼Œä¸ä»…ä»…é•œåƒæ›´è‡ƒè‚¿ï¼Œå…¶è¿è¡Œæ—¶æ€§èƒ½ä¹Ÿå¿…ç„¶ä¼šå—åˆ°å½±å“ã€‚è¿™ä¸€åˆ‡éƒ½è¿èƒŒäº† Docker çš„æœ€ä½³å®žè·µã€‚ ä½¿ç”¨ commit çš„åœºåˆæ˜¯ä¸€äº›ç‰¹æ®ŠçŽ¯å¢ƒï¼Œæ¯”å¦‚å…¥ä¾µåŽä¿å­˜çŽ°åœºç­‰ç­‰ï¼Œè¿™ä¸ªå‘½ä»¤ä¸åº”è¯¥æˆä¸ºå®šåˆ¶é•œåƒçš„æ ‡å‡†åšæ³•ã€‚æ‰€ä»¥ï¼Œè¯·ç”¨ Dockerfile å®šåˆ¶é•œåƒã€‚ import å’Œ export çš„åšæ³•ï¼Œå®žé™…ä¸Šæ˜¯å°†ä¸€ä¸ªå®¹å™¨æ¥ä¿å­˜ä¸º tar æ–‡ä»¶ï¼Œç„¶åŽåœ¨å¯¼å…¥ä¸ºé•œåƒã€‚è¿™æ ·åˆ¶ä½œçš„é•œåƒåŒæ ·æ˜¯é»‘ç®±é•œåƒï¼Œä¸åº”è¯¥ä½¿ç”¨ã€‚è€Œä¸”è¿™ç±»å¯¼å…¥å¯¼å‡ºä¼šå¯¼è‡´åŽŸæœ‰åˆ†å±‚ä¸¢å¤±ï¼Œåˆå¹¶ä¸ºä¸€å±‚ï¼Œè€Œä¸”ä¼šä¸¢å¤±å¾ˆå¤šç›¸å…³é•œåƒå…ƒæ•°æ®æˆ–è€…é…ç½®ï¼Œæ¯”å¦‚ CMD å‘½ä»¤å°±å¯èƒ½ä¸¢å¤±ï¼Œå¯¼è‡´é•œåƒæ— æ³•ç›´æŽ¥å¯åŠ¨ã€‚ save å’Œ load ç¡®å®žæ˜¯é•œåƒä¿å­˜å’ŒåŠ è½½ï¼Œä½†æ˜¯è¿™æ˜¯åœ¨æ²¡æœ‰ registry çš„æƒ…å†µä¸‹ï¼Œæ‰‹åŠ¨æŠŠé•œåƒè€ƒæ¥è€ƒåŽ»ï¼Œè¿™æ˜¯å›žåˆ°äº†åå¤šå¹´çš„ U ç›˜æ—¶ä»£ã€‚è¿™åŒæ ·æ˜¯ä¸æŽ¨èçš„ï¼Œé•œåƒçš„å‘å¸ƒã€æ›´æ–°ç»´æŠ¤åº”è¯¥ä½¿ç”¨ registryã€‚æ— è®ºæ˜¯è‡ªå·±æž¶è®¾ç§æœ‰ registry æœåŠ¡ï¼Œè¿˜æ˜¯ä½¿ç”¨å…¬æœ‰ registry æœåŠ¡ï¼Œå¦‚ Docker Hubã€‚ é—®ï¼šDockerfile æ€Žä¹ˆå†™ï¼Ÿç­”ï¼š æœ€ç›´æŽ¥ä¹Ÿæ˜¯æœ€ç®€å•çš„åŠžæ³•æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ è¿™ç¯‡æ–‡ç« è®²è¿°å…·ä½“ Dockerfile çš„å‘½ä»¤è¯­æ³•ï¼š https://docs.docker.com/engine/reference/builder/ ç„¶åŽï¼Œå­¦ä¹ ä¸€ä¸‹å®˜æ–¹çš„ Dockerfile æœ€ä½³å®žè·µï¼š https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/ æœ€åŽï¼ŒåŽ» Docker Hub å­¦ä¹ é‚£äº›å®˜æ–¹(Official)é•œåƒ Dockerfile å’‹å†™çš„ã€‚ Dockerfile ä¸ç­‰äºŽ .sh è„šæœ¬,Dockerfile ç¡®å®žæ˜¯æè¿°å¦‚ä½•æž„å»ºé•œåƒçš„ï¼Œå…¶ä¸­ä¹Ÿæä¾›äº†RUNè¿™æ ·çš„å‘½ä»¤ï¼Œå¯ä»¥è¿è¡Œ shellå‘½ä»¤ã€‚ä½†æ˜¯å’Œæ™®é€š shell è„šæœ¬è¿˜æœ‰å¾ˆå¤§çš„ä¸åŒã€‚ Dockerfile æè¿°çš„å®žé™…ä¸Šæ˜¯é•œåƒçš„æ¯ä¸€å±‚è¦å¦‚ä½•æž„å»ºï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªRUNæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¸€å±‚ã€‚æ‰€ä»¥ä¸€å®šè¦ç†è§£â€œåˆ†å±‚å­˜å‚¨â€çš„æ¦‚å¿µã€‚ä¸Šä¸€å±‚çš„ä¸œè¥¿ä¸ä¼šè¢«ç‰©ç†åˆ é™¤ï¼Œè€Œæ˜¯ä¼šä¿ç•™ç»™ä¸‹ä¸€å±‚ï¼Œä¸‹ä¸€å±‚ä¸­å¯ä»¥æŒ‡å®šåˆ é™¤è¿™éƒ¨åˆ†å†…å®¹ï¼Œä½†å®žé™…ä¸Šåªæ˜¯è¿™ä¸€å±‚åšçš„æŸä¸ªæ ‡è®°ï¼Œè¯´è¿™ä¸ªè·¯å¾„çš„ä¸œè¥¿åˆ äº†ã€‚ä½†å®žé™…ä¸Šå¹¶ä¸ä¼šåŽ»ä¿®æ”¹ä¸Šä¸€å±‚çš„ä¸œè¥¿ã€‚æ¯ä¸€å±‚éƒ½æ˜¯é™æ€çš„ï¼Œè¿™ä¹Ÿæ˜¯å®¹å™¨æœ¬èº«çš„immutable ç‰¹æ€§ï¼Œè¦ä¿æŒè‡ªèº«çš„é™æ€ç‰¹æ€§ã€‚ æ‰€ä»¥å¾ˆå¤šæ–°æ‰‹ä¼šå¸¸çŠ¯ä¸‹é¢è¿™æ ·çš„é”™è¯¯ï¼ŒæŠŠ Dockerfile å½“åš shell è„šæœ¬æ¥å†™äº†ï¼š 1RUN yum updateRUN yum -y install gccRUN yum -y install pythonADD jdk-xxxx.tar.gz /tmpRUN cd xxxx &amp;&amp; installRUN xxx &amp;&amp; configure &amp;&amp; make &amp;&amp; make install è¿™æ˜¯ç›¸å½“é”™è¯¯çš„ã€‚é™¤äº†æ— ç•çš„å¢žåŠ äº†å¾ˆå¤šå±‚ï¼Œè€Œä¸”å¾ˆå¤šè¿è¡Œæ—¶ä¸éœ€è¦çš„ä¸œè¥¿ï¼Œéƒ½è¢«è£…è¿›äº†é•œåƒé‡Œï¼Œæ¯”å¦‚ç¼–è¯‘çŽ¯å¢ƒã€æ›´æ–°çš„è½¯ä»¶åŒ…ç­‰ç­‰ã€‚ç»“æžœå°±æ˜¯äº§ç”Ÿéžå¸¸è‡ƒè‚¿ã€éžå¸¸å¤šå±‚çš„é•œåƒï¼Œä¸ä»…ä»…å¢žåŠ äº†æž„å»ºéƒ¨ç½²çš„æ—¶é—´ï¼Œä¹Ÿå¾ˆå®¹æ˜“å‡ºé”™ã€‚ æ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯æŠŠåŒä¸€ä¸ªä»»åŠ¡çš„å‘½ä»¤æ”¾åˆ°ä¸€ä¸ª RUN ä¸‹ï¼Œå¤šæ¡å‘½ä»¤åº”è¯¥ç”¨&amp;&amp; è¿žæŽ¥ï¼Œå¹¶ä¸”åœ¨æœ€åŽè¦æ‰“æ‰«å¹²å‡€æ‰€ä½¿ç”¨çš„çŽ¯å¢ƒã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µæ‘˜è‡ªå®˜æ–¹ redis é•œåƒ Dockerfileçš„éƒ¨åˆ†ï¼š 1RUN buildDeps=&apos;gcc libc6-dev make&apos; \ &amp;&amp; set -x \ &amp;&amp; apt-get update &amp;&amp; apt-get install -y $buildDeps --no-install-recommends \ &amp;&amp; rm -rf /var/lib/apt/lists/* \ &amp;&amp; wget -O redis.tar.gz &quot;$REDIS_DOWNLOAD_URL&quot; \ &amp;&amp; echo &quot;$REDIS_DOWNLOAD_SHA1 *redis.tar.gz&quot; | sha1sum -c - \ &amp;&amp; mkdir -p /usr/src/redis \ &amp;&amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \ &amp;&amp; rm redis.tar.gz \ &amp;&amp; make -C /usr/src/redis \ &amp;&amp; make -C /usr/src/redis install \ &amp;&amp; rm -r /usr/src/redis \ &amp;&amp; apt-get purge -y --auto-remove $buildDeps ä½†ä¹Ÿä¸èƒ½ç»å¯¹çš„è¯´æŠŠæ‰€æœ‰å‘½ä»¤éƒ½åˆå¹¶åˆ°ä¸€ä¸ª RUN å°±å¯¹ï¼Œä¸æ˜¯æŠŠæ‰€æœ‰å‘½ä»¤éƒ½åˆä¸ºä¸€ä¸ª RUNï¼Œè¦åˆç†åˆ†å±‚ï¼Œä»¥åŠ å¿«æž„å»ºå’Œéƒ¨ç½²ã€‚ åˆç†åˆ†å±‚å°±æ˜¯å°†å…·æœ‰ä¸åŒå˜æ›´é¢‘ç¹ç¨‹åº¦çš„å±‚ï¼Œè¿›è¡Œæ‹†åˆ†ï¼Œè®©ç¨³å®šçš„éƒ¨åˆ†åœ¨åŸºç¡€ï¼Œæ›´å®¹æ˜“å˜æ›´çš„éƒ¨åˆ†åœ¨è¡¨å±‚ï¼Œä½¿å¾—èµ„æºå¯ä»¥é‡å¤åˆ©ç”¨ï¼Œä»¥å¢žåŠ æž„å»ºå’Œéƒ¨ç½²çš„é€Ÿåº¦ã€‚ ä»¥ node.js çš„åº”ç”¨ç¤ºä¾‹é•œåƒä¸ºä¾‹ï¼Œå…¶ä¸­çš„å¤åˆ¶åº”ç”¨å’Œå®‰è£…ä¾èµ–çš„éƒ¨åˆ†ï¼Œå¦‚æžœéƒ½åˆå¹¶ä¸€èµ·ï¼Œä¼šå†™æˆè¿™æ ·ï¼š 1COPY . /usr/src/appRUN npm install ä½†æ˜¯ï¼Œåœ¨ node.js åº”ç”¨é•œåƒç¤ºä¾‹ä¸­ï¼Œåˆ™æ˜¯è¿™ä¹ˆå†™çš„ï¼š 1COPY package.json /usr/src/app/RUN npm installCOPY . /usr/src/app ä»Žå±‚æ•°ä¸Šçœ‹ï¼Œç¡®å®žå¤šäº†ä¸€å±‚ã€‚ä½†å®žé™…ä¸Šï¼Œè¿™ä¸‰è¡Œåˆ†å¼€æ˜¯æ•…æ„è¿™æ ·åšçš„ï¼Œå…¶ç›®çš„å°±æ˜¯åˆç†åˆ†å±‚ï¼Œå……åˆ†åˆ©ç”¨ Docker åˆ†å±‚å­˜å‚¨çš„æ¦‚å¿µï¼Œä»¥å¢žåŠ æž„å»ºã€éƒ¨ç½²çš„æ•ˆçŽ‡ã€‚ åœ¨ docker build çš„æž„å»ºè¿‡ç¨‹ä¸­ï¼Œå¦‚æžœæŸå±‚ä¹‹å‰æž„å»ºè¿‡ï¼Œè€Œä¸”è¯¥å±‚æœªå‘ç”Ÿæ”¹å˜çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆ docker å°±ä¼šç›´æŽ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸ä¼šé‡å¤æž„å»ºã€‚å› æ­¤ï¼Œåˆç†åˆ†å±‚ï¼Œå……åˆ†åˆ©ç”¨ç¼“å­˜ï¼Œä¼šæ˜¾è‘—åŠ é€Ÿæž„å»ºé€Ÿåº¦ã€‚ ç¬¬ä¸€è¡Œçš„ç›®çš„æ˜¯å°† package.json å¤åˆ¶åˆ°åº”ç”¨ç›®å½•ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåº”ç”¨ä»£ç ç›®å½•ã€‚è¿™æ ·åªæœ‰ pakcage.json å‘ç”Ÿæ”¹å˜åŽï¼Œæ‰ä¼šè§¦å‘ç¬¬äºŒè¡Œ RUN npm installã€‚è€Œåªè¦ package.jsonæ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆåº”ç”¨çš„ä»£ç æ”¹å˜å°±ä¸ä¼šå¼•å‘ npm installï¼Œåªä¼šå¼•å‘ç¬¬ä¸‰è¡Œçš„ COPY . /usr/src/appï¼Œä»Žè€ŒåŠ å¿«æž„å»ºé€Ÿåº¦ã€‚ è€Œå¦‚æžœæŒ‰ç…§å‰é¢æ‰€æåˆ°çš„ï¼Œåˆå¹¶ä¸ºä¸¤å±‚ï¼Œé‚£ä¹ˆä»»ä½•ä»£ç æ”¹å˜ï¼Œéƒ½ä¼šè§¦å‘ RUN npm installï¼Œä»Žè€Œæµªè´¹å¤§é‡çš„å¸¦å®½å’Œæ—¶é—´ã€‚ åˆç†åˆ†å±‚é™¤äº†å¯ä»¥åŠ å¿«æž„å»ºå¤–ï¼Œè¿˜å¯ä»¥åŠ å¿«éƒ¨ç½²ï¼Œè¦çŸ¥é“ï¼Œdocker pull çš„æ—¶å€™ï¼Œæ˜¯åˆ†å±‚ä¸‹è½½çš„ï¼Œå¹¶ä¸”å·²å­˜åœ¨çš„å±‚å°±ä¸ä¼šé‡å¤ä¸‹è½½ã€‚ æ¯”å¦‚ï¼Œè¿™é‡Œçš„ RUN npm install è¿™ä¸€å±‚ï¼Œå¾€å¾€ä¼šå‡ ç™¾ MB ç”šè‡³ä¸Š GBã€‚è€Œåœ¨ package.json æœªå‘ç”Ÿå˜æ›´çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆåªæœ‰ COPY . /usr/src/app è¿™ä¸€å±‚ä¼šè¢«é‡æ–°æž„å»ºï¼Œå¹¶ä¸”ä¹Ÿåªæœ‰è¿™ä¸€å±‚ä¼šåœ¨å„ä¸ªèŠ‚ç‚¹ docker pull çš„è¿‡ç¨‹ä¸­é‡æ–°ä¸‹è½½ï¼Œå¾€å¾€è¿™ä¸€å±‚çš„ä»£ç é‡åªæœ‰å‡ å MBï¼Œç”šè‡³æ›´å°ã€‚è¿™å¯¹äºŽå¤§è§„æ¨¡çš„å¹¶è¡Œéƒ¨ç½²ä¸­ï¼Œæ‰€èŠ‚çº¦çš„ä¸œè¥¿å‘æµé‡æ˜¯éžå¸¸æ˜¾è‘—çš„ã€‚ç‰¹åˆ«æ˜¯æ•æ·å¼€å‘çŽ¯å¢ƒä¸­ï¼Œä»£ç å˜æ›´çš„é¢‘ç¹åº¦è¦æ¯”ä¾èµ–å˜æ›´çš„é¢‘ç¹åº¦é«˜å¾ˆå¤šï¼Œæ¯æ¬¡é‡å¤ä¸‹è½½ä¾èµ–ï¼Œä¼šå¯¼è‡´ä¸å¿…è¦çš„æµé‡å’Œæ—¶é—´ä¸Šçš„æµªè´¹ã€‚ é—®ï¼šcontext åˆ°åº•æ˜¯ä¸€ä¸ªä»€ä¹ˆæ¦‚å¿µï¼Ÿç­”ï¼š contextï¼Œä¸Šä¸‹æ–‡ï¼Œæ˜¯ docker build ä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚æž„å»ºé•œåƒå¿…é¡»æŒ‡å®š contextï¼š 1docker build -t xxx &lt;contextè·¯å¾„&gt; æˆ–è€… docker-compose.yml ä¸­çš„ 1app: build: context: &lt;contextè·¯å¾„&gt; dockerfile: dockerfile è¿™é‡Œéƒ½éœ€è¦æŒ‡å®š contextã€‚context æ˜¯å·¥ä½œç›®å½•ï¼Œä½†ä¸è¦å’Œæž„å»ºé•œåƒçš„Dockerfile ä¸­çš„WORKDIRå¼„æ··ï¼Œcontext æ˜¯ docker buildå‘½ä»¤çš„å·¥ä½œç›®å½•ã€‚ docker build å‘½ä»¤å®žé™…ä¸Šæ˜¯å®¢æˆ·ç«¯ï¼ŒçœŸæ­£æž„å»ºé•œåƒå¹¶éžç”±è¯¥å‘½ä»¤ç›´æŽ¥å®Œæˆã€‚docker build å‘½ä»¤å°† context çš„ç›®å½•ä¸Šä¼ ç»™ Docker å¼•æ“Žï¼Œç”±å®ƒè´Ÿè´£åˆ¶ä½œé•œåƒã€‚ åœ¨ Dockerfile ä¸­å¦‚æžœå†™ COPY ./package.json /app/è¿™ç§å‘½ä»¤ï¼Œå®žé™…çš„æ„æ€å¹¶ä¸æ˜¯æŒ‡æ‰§è¡Œ docker build æ‰€åœ¨çš„ç›®å½•ä¸‹çš„ package.jsonï¼Œä¹Ÿä¸æ˜¯æŒ‡ Dockerfile æ‰€åœ¨ç›®å½•ä¸‹çš„package.jsonï¼Œè€Œæ˜¯æŒ‡ context ç›®å½•ä¸‹çš„ package.jsonã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰äººå‘çŽ° COPY ../package.json /app æˆ–è€… COPY /opt/xxxx /appæ— æ³•å·¥ä½œçš„åŽŸå› ï¼Œå› ä¸ºå®ƒä»¬éƒ½åœ¨ context ä¹‹å¤–ï¼Œå¦‚æžœçœŸæ­£éœ€è¦ï¼Œåº”è¯¥å°†å®ƒä»¬å¤åˆ¶åˆ° contextç›®å½•ä¸‹å†æ“ä½œã€‚ è¯è¯´ï¼Œæœ‰ä¸€äº›ç½‘æ–‡ç”šè‡³æžç¬‘çš„è¯´è¦æŠŠ Dockerfileæ”¾åˆ°ç£ç›˜æ ¹ç›®å½•ï¼Œæ‰èƒ½æž„å»ºå¦‚ä½•å¦‚ä½•ã€‚è¿™éƒ½æ˜¯å¯¹ context å®Œå…¨ä¸äº†è§£çš„è¡¨çŽ°ã€‚æƒ³è±¡ä¸€ä¸‹æŠŠæ•´ä¸ªç£ç›˜å‡ åä¸ª GBå½“åšä¸Šä¸‹æ–‡å‘é€ç»™ dockerd å¼•æ“Žçš„æƒ…å†µã€‚ docker build -t xxx . ä¸­çš„è¿™ä¸ª.ï¼Œå®žé™…ä¸Šå°±æ˜¯åœ¨æŒ‡å®š Context çš„ç›®å½•ï¼Œè€Œå¹¶éžæ˜¯æŒ‡å®š Dockerfile æ‰€åœ¨ç›®å½•ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æžœä¸é¢å¤–æŒ‡å®š Dockerfile çš„è¯ï¼Œä¼šå°† Context ä¸‹çš„åä¸º Dockerfile çš„æ–‡ä»¶ä½œä¸º Dockerfileã€‚æ‰€ä»¥å¾ˆå¤šäººä¼šæ··æ·†ï¼Œè®¤ä¸ºè¿™ä¸ª. æ˜¯åœ¨è¯´ Dockerfile çš„ä½ç½®ï¼Œå…¶å®žä¸ç„¶ã€‚ ä¸€èˆ¬é¡¹ç›®ä¸­ï¼ŒDockerfile å¯èƒ½è¢«æ”¾ç½®äºŽä¸¤ä¸ªä½ç½®ã€‚ ä¸€ä¸ªå¯èƒ½æ˜¯æ”¾ç½®äºŽé¡¹ç›®é¡¶çº§ç›®å½•ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯åœ¨é¡¶çº§ç›®å½•æž„å»ºæ—¶ï¼Œé¡¹ç›®æ‰€æœ‰å†…å®¹éƒ½åœ¨ä¸Šä¸‹æ–‡å†…ï¼Œæ–¹ä¾¿æž„å»ºï¼› å¦ä¸€ä¸ªåšæ³•æ˜¯ï¼Œå°†æ‰€æœ‰ Docker ç›¸å…³çš„å†…å®¹é›†ä¸­äºŽæŸä¸ªç›®å½•ï¼Œæ¯”å¦‚ docker ç›®å½•ï¼Œé‡Œé¢åŒ…å«æ‰€æœ‰ä¸åŒåˆ†æ”¯çš„Dockerfileï¼Œä»¥åŠ docker-compose.ymlç±»çš„æ–‡ä»¶ã€entrypointçš„è„šæœ¬ç­‰ç­‰ã€‚è¿™ç§æƒ…å†µçš„ä¸Šä¸‹æ–‡æ‰€åœ¨ç›®å½•ä¸å†æ˜¯ Dockerfile æ‰€åœ¨ç›®å½•äº†ï¼Œå› æ­¤éœ€è¦æ³¨æ„æŒ‡å®šä¸Šä¸‹æ–‡çš„ä½ç½®ã€‚ æ­¤å¤–ï¼Œé¡¹ç›®ä¸­å¯èƒ½ä¼šåŒ…å«ä¸€äº›æž„å»ºä¸éœ€è¦çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¸åº”è¯¥è¢«å‘é€ç»™ dockerd å¼•æ“Žï¼Œä½†æ˜¯å®ƒä»¬å¤„äºŽä¸Šä¸‹æ–‡ç›®å½•ä¸‹ï¼Œè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ .dockerignoreæ–‡ä»¶æ¥è¿‡æ»¤ä¸å¿…è¦çš„å†…å®¹ã€‚.dockerignore æ–‡ä»¶åº”è¯¥æ”¾ç½®äºŽä¸Šä¸‹æ–‡é¡¶çº§ç›®å½•ä¸‹ï¼Œå†…å®¹æ ¼å¼å’Œ .gitignore ä¸€æ ·ã€‚ 1tmpdb è¿™æ ·å°±è¿‡æ»¤äº† tmp å’Œdbç›®å½•ï¼Œå®ƒä»¬ä¸ä¼šè¢«ä½œä¸ºä¸Šä¸‹æ–‡çš„ä¸€éƒ¨åˆ†å‘ç»™ dockerdå¼•æ“Žã€‚ é—®ï¼šENTRYPOINT å’Œ CMD åˆ°åº•æœ‰ä»€ä¹ˆä¸åŒï¼Ÿç­”ï¼š Dockerfile çš„ç›®çš„æ˜¯åˆ¶ä½œé•œåƒï¼Œæ¢å¥è¯è¯´ï¼Œå®žé™…ä¸Šæ˜¯å‡†å¤‡çš„æ˜¯ä¸»è¿›ç¨‹è¿è¡ŒçŽ¯å¢ƒã€‚é‚£ä¹ˆå‡†å¤‡å¥½åŽï¼Œéœ€è¦æ‰§è¡Œä¸€ä¸ªç¨‹åºæ‰å¯ä»¥å¯åŠ¨ä¸»è¿›ç¨‹ï¼Œè€Œå¯åŠ¨çš„åŠžæ³•å°±æ˜¯è°ƒç”¨ ENTRYPOINTï¼Œå¹¶ä¸”æŠŠ CMD ä½œä¸ºå‚æ•°ä¼ è¿›åŽ»è¿è¡Œã€‚ä¹Ÿå°±æ˜¯ä¸‹é¢çš„æ¦‚å¿µï¼š 1ENTRYPOINT &quot;CMD&quot; å‡è®¾æœ‰ä¸ª myubuntu é•œåƒ ENTRYPOINT æ˜¯ sh -cï¼Œè€Œæˆ‘ä»¬ docker run -it myubuntu uname -aã€‚é‚£ä¹ˆ uname -aå°±æ˜¯è¿è¡Œæ—¶æŒ‡å®šçš„ CMDï¼Œé‚£ä¹ˆ Docker å®žé™…è¿è¡Œçš„å°±æ˜¯ç»“åˆèµ·æ¥çš„ç»“æžœï¼š 1sh -c &quot;uname -a&quot; å¦‚æžœæ²¡æœ‰æŒ‡å®š ENTRYPOINTï¼Œé‚£ä¹ˆå°±åªæ‰§è¡Œ CMDï¼› å¦‚æžœæŒ‡å®šäº† ENTRYPOINT è€Œæ²¡æœ‰æŒ‡å®š CMDï¼Œè‡ªç„¶æ‰§è¡Œ ENTRYPOINT; å¦‚æžœ ENTRYPOINT å’Œ CMD éƒ½æŒ‡å®šäº†ï¼Œé‚£ä¹ˆå°±å¦‚åŒä¸Šé¢æ‰€è¿°ï¼Œæ‰§è¡Œ ENTRYPOINT &quot;CMD&quot;ï¼› å¦‚æžœæ²¡æœ‰æŒ‡å®š ENTRYPOINTï¼Œè€Œ CMD ç”¨çš„æ˜¯ä¸Šè¿°é‚£ç§ shell å‘½ä»¤çš„å½¢å¼ï¼Œåˆ™è‡ªåŠ¨ä½¿ç”¨ sh -c ä½œä¸º ENTRYPOINTã€‚ æ³¨æ„æœ€åŽä¸€ç‚¹çš„åŒºåˆ«ï¼Œè¿™ä¸ªåŒºåˆ«å¯¼è‡´äº†åŒæ ·çš„å‘½ä»¤æ”¾åˆ° CMD å’Œ ENTRYPOINT ä¸‹æ•ˆæžœä¸åŒï¼Œå› æ­¤æœ‰å¯èƒ½æ”¾åœ¨ ENTRYPOINT ä¸‹çš„åŒæ ·çš„å‘½ä»¤ï¼Œç”±äºŽéœ€è¦ tty è€Œè¿è¡Œæ—¶å¿˜è®°äº†ç»™ï¼ˆæ¯”å¦‚å¿˜è®°äº†docker-compose.yml çš„ tty:trueï¼‰å¯¼è‡´è¿è¡Œå¤±è´¥ã€‚ è¿™ç§ç”¨æ³•å¯ä»¥å¾ˆçµæ´»ï¼Œæ¯”å¦‚æˆ‘ä»¬åšä¸ª git é•œåƒï¼Œå¯ä»¥æŠŠ git å‘½ä»¤æŒ‡å®šä¸º ENTRYPOINTï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ docker run çš„æ—¶å€™ï¼Œç›´æŽ¥è·Ÿå­å‘½ä»¤å³å¯ã€‚æ¯”å¦‚ docker run git logå°±æ˜¯æ˜¾ç¤ºæ—¥å¿—ã€‚ é—®ï¼šæ‹¿åˆ°ä¸€ä¸ªé•œåƒï¼Œå¦‚ä½•èŽ·å¾—é•œåƒçš„ Dockerfile ï¼Ÿç­”ï¼š ç›´æŽ¥åŽ» Docker Hub ä¸Šçœ‹ï¼šå¤§å¤šæ•° Docker Hubä¸Šçš„é•œåƒéƒ½ä¼šæœ‰ Dockerfileï¼Œç›´æŽ¥åœ¨ Docker Hub çš„é•œåƒé¡µé¢å°±å¯ä»¥çœ‹åˆ° Dockerfile çš„é“¾æŽ¥ï¼› å¦‚æžœæ²¡æœ‰ Dockerfileï¼Œä¸€èˆ¬è¿™ç±»é•œåƒå°±ä¸åº”è¯¥è€ƒè™‘ä½¿ç”¨äº†ï¼Œè¿™ç±»é»‘ç®±ä¼¼çš„é•œåƒå¾ˆå®¹æœ‰æœ‰é—®é¢˜ã€‚å¦‚æžœæ˜¯ä»€ä¹ˆç‰¹æ®ŠåŽŸå› ï¼Œé‚£ç»§ç»­å¾€ä¸‹çœ‹ï¼› docker history å¯ä»¥çœ‹åˆ°é•œåƒæ¯ä¸€å±‚çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‘½ä»¤ï¼Œå½“ç„¶é»‘ç®±é•œåƒçš„ commit çœ‹ä¸è§æ“ä½œï¼› docker inspect å¯ä»¥åˆ†æžé•œåƒå¾ˆå¤šç»†èŠ‚ã€‚ ç›´æŽ¥è¿è¡Œé•œåƒï¼Œè¿›å…¥shellï¼Œç„¶åŽæ ¹æ®ä¸Šé¢çš„åˆ†æžç»“æžœåŽ»è¿›ä¸€æ­¥åˆ†æžæ—¥å¿—ã€æ–‡ä»¶å†…å®¹åŠå˜åŒ–ã€‚ é—®ï¼šDocker æ—¥å¿—éƒ½åœ¨å“ªé‡Œï¼Ÿæ—¥å¿—åˆ†ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯ Docker å¼•æ“Žæ—¥å¿—ï¼›å¦ä¸€ç±»æ˜¯ å®¹å™¨æ—¥å¿—ã€‚ Docker å¼•æ“Žæ—¥å¿— Docker å¼•æ“Žæ—¥å¿— ä¸€èˆ¬æ˜¯äº¤ç»™äº† Upstart(Ubuntu 14.04)æˆ–è€… systemd (CentOS 7, Ubuntu 16.04)ã€‚å‰è€…ä¸€èˆ¬ä½äºŽ /var/log/upstart/docker.log ä¸‹ï¼ŒåŽè€…ä¸€èˆ¬é€šè¿‡ jounarlctl -u dockeræ¥è¯»å–æˆ–ç³»ç»Ÿæ—¥å¿—é‡Œé¢/var/log/messages ã€‚ å®¹å™¨æ—¥å¿— å®¹å™¨çš„æ—¥å¿— åˆ™å¯ä»¥é€šè¿‡ docker logs å‘½ä»¤æ¥è®¿é—®ï¼Œè€Œä¸”å¯ä»¥åƒ tail -f ä¸€æ ·ï¼Œä½¿ç”¨ docker logs -f æ¥å®žæ—¶æŸ¥çœ‹ã€‚å¦‚æžœä½¿ç”¨ Docker Composeï¼Œåˆ™å¯ä»¥é€šè¿‡ docker-compose logs &lt;æœåŠ¡å&gt;æ¥æŸ¥çœ‹ã€‚ å¦‚æžœæ·±ç©¶å…¶æ—¥å¿—ä½ç½®ï¼Œæ¯ä¸ªå®¹å™¨çš„æ—¥å¿—é»˜è®¤éƒ½ä¼šä»¥ json-file çš„æ ¼å¼å­˜å‚¨äºŽ/var/lib/docker/containers/&lt;å®¹å™¨id&gt;/&lt;å®¹å™¨id&gt;-json.logä¸‹ï¼Œä¸è¿‡å¹¶ä¸å»ºè®®åŽ»è¿™é‡Œç›´æŽ¥è¯»å–å†…å®¹ï¼Œå› ä¸º Docker æä¾›äº†æ›´å®Œå–„åœ°æ—¥å¿—æ”¶é›†æ–¹å¼ - Docker æ—¥å¿—æ”¶é›†é©±åŠ¨ã€‚ å…³äºŽæ—¥å¿—æ”¶é›†ï¼ŒDocker å†…ç½®äº†å¾ˆå¤šæ—¥å¿—é©±åŠ¨ï¼Œå¯ä»¥é€šè¿‡ç±»ä¼¼äºŽfluentd, syslog è¿™ç±»æœåŠ¡æ”¶é›†æ—¥å¿—ã€‚æ— è®ºæ˜¯ Docker å¼•æ“Žï¼Œè¿˜æ˜¯å®¹å™¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ—¥å¿—é©±åŠ¨ã€‚æ¯”å¦‚ï¼Œå¦‚æžœæ‰“ç®—ç”¨ fluentd æ”¶é›†æŸä¸ªå®¹å™¨æ—¥å¿—ï¼Œå¯ä»¥è¿™æ ·å¯åŠ¨å®¹å™¨ï¼š 1$ docker run -d \ --log-driver=fluentd \ --log-opt fluentd-address=10.2.3.4:24224 \ --log-opt tag=&quot;docker.&#123;&#123;.Name&#125;&#125;&quot; \ nginx å…¶ä¸­ 10.2.3.4:24224 æ˜¯ fluentd æœåŠ¡åœ°å€ï¼Œå®žé™…çŽ¯å¢ƒä¸­åº”è¯¥æ¢æˆçœŸå®žçš„åœ°å€ã€‚ é—®ï¼šä¸åŒå®¹å™¨çš„æ—¥å¿—æ±‡èšåˆ° fluentd åŽå¦‚ä½•åŒºåˆ†ï¼Ÿç­”ï¼š æœ‰ä¸¤ç§æ¦‚å¿µçš„åŒºåˆ†ï¼Œä¸€ç§æ˜¯åŒºåˆ†å¼€ä¸åŒå®¹å™¨çš„æ—¥å¿—ï¼Œå¦ä¸€ç§æ˜¯åŒºåˆ†å¼€æ¥ä¸åŒæœåŠ¡çš„æ—¥å¿—ã€‚ åŒºåˆ†ä¸åŒå®¹å™¨çš„æ—¥å¿—æ˜¯å¾ˆç›´è§‚çš„æƒ³æ³•ã€‚è¿è¡Œäº†å‡ ä¸ªä¸åŒçš„å®¹å™¨ï¼Œæ—¥å¿—éƒ½é€å‘æ—¥å¿—æ”¶é›†ï¼Œé‚£ä¹ˆæ˜¾ç„¶ä¸å¸Œæœ›nginxå®¹å™¨çš„æ—¥å¿—å’Œ MySQL å®¹å™¨çš„æ—¥å¿—æ··æ‚åœ¨ä¸€èµ·çœ‹ã€‚ ä½†æ˜¯åœ¨Swarm é›†ç¾¤çŽ¯å¢ƒä¸­ï¼ŒåŒºåˆ†å®¹å™¨å°±å·²ç»ä¸å†æ˜¯åˆç†çš„åšæ³•äº†ã€‚å› ä¸ºåŒä¸€ä¸ªæœåŠ¡å¯èƒ½æœ‰è®¸å¤šå‰¯æœ¬ï¼Œè€Œåˆæœ‰å¾ˆå¤šä¸ªæœåŠ¡ï¼Œå¦‚æžœä¸€ä¸ªä¸ªçš„å®¹å™¨åŒºåˆ†åŽ»åˆ†æžï¼Œå¾ˆéš¾çœ‹åˆ°ä¸€ä¸ªæ•´ä½“ä¸ŠæŸä¸ªæœåŠ¡çš„æœåŠ¡çŠ¶æ€æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚è€Œä¸”ï¼Œå®¹å™¨æ˜¯çŸ­ç”Ÿå­˜å‘¨æœŸçš„ï¼Œåœ¨ç»´æŠ¤æœŸé—´å®¹å™¨ç”Ÿå­˜æ­»äº¡æ˜¯å¾ˆå¸¸è§çš„äº‹æƒ…ã€‚å¦‚æžœæ˜¯åƒä¼ ç»Ÿè™šæ‹Ÿæœºé‚£æ ·å­ä»¥å®¹å™¨ä¸ºå•å…ƒåŽ»åˆ†æžæ—¥å¿—ï¼Œå…¶ç»“æžœå¾ˆéš¾å…·æœ‰ä»·å€¼ã€‚å› æ­¤æ›´å¤šçš„æ—¶å€™æ˜¯å¯¹æŸä¸€ä¸ªæœåŠ¡çš„æ—¥å¿—æ•´ä½“åˆ†æžï¼Œæ— éœ€åŒºåˆ«æ—¥å¿—å…·ä½“æ¥è‡ªäºŽå“ªä¸ªå®¹å™¨ï¼Œä¸éœ€è¦å…³å¿ƒå®¹å™¨æ˜¯ä»€ä¹ˆæ—¶é—´äº§ç”Ÿä»¥åŠæ˜¯å¦æ¶ˆäº¡ï¼Œåªéœ€è¦ä»¥æœåŠ¡ä¸ºå•å…ƒåŽ»åŒºåˆ†æ—¥å¿—å³å¯ã€‚ è¿™ä¸¤ç±»çš„åŒºåˆ†æ—¥å¿—çš„åŠžæ³•ï¼ŒDocker éƒ½å¯ä»¥åšåˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥ fluentd ä¸ºä¾‹è¯´æ˜Žã€‚ 1version: &apos;2&apos;services: web: image: nginx:1.11-alpine ports: - &quot;3000:80&quot; labels: section: frontend group: alpha service: web image: nginx base_os: alpine logging: driver: fluentd options: fluentd-address: &quot;localhost:24224&quot; tag: &quot;frontend.web.nginx.&#123;&#123;.Name&#125;&#125;&quot; labels: &quot;section,group,service,image,base_os&quot; è¿™é‡Œæˆ‘ä»¬è¿è¡Œäº†ä¸€ä¸ª nginx:alpine çš„å®¹å™¨ï¼ŒæœåŠ¡åä¸º webã€‚å®¹å™¨çš„æ—¥å¿—ä½¿ç”¨ fluentd è¿›è¡Œæ”¶é›†ï¼Œå¹¶ä¸”é™„ä¸Šæ ‡ç­¾ frontend.web.nginx.&lt;å®¹å™¨å&gt;ã€‚é™¤æ­¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸€ç»„ labelsï¼Œå¹¶ä¸”åœ¨ logging çš„ options ä¸­çš„ labelsä¸­æŒ‡æ˜Žå¸Œæœ›å“ªäº›æ ‡ç­¾éšæ—¥å¿—è®°å½•ã€‚è¿™äº›ä¿¡æ¯ä¸­å¾ˆå¤šä¸€éƒ¨åˆ†éƒ½ä¼šå‡ºçŽ°åœ¨æ‰€æ”¶é›†çš„æ—¥å¿—é‡Œã€‚ è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ fluentdæ”¶åˆ°çš„ä¿¡æ¯ä»€ä¹ˆæ ·å­çš„ã€‚ 1&#123; &quot;frontend.web.nginx.service_web_1&quot;: &#123; &quot;image&quot;: &quot;nginx&quot;, &quot;base_os&quot;: &quot;alpine&quot;, &quot;container_id&quot;: &quot;f7212f7108de033045ddc22858569d0ac50921b043b97a2c8bf83b1b1ee50e34&quot;, &quot;section&quot;: &quot;frontend&quot;, &quot;service&quot;: &quot;web&quot;, &quot;log&quot;: &quot;172.20.0.1 - - [09/Dec/2016:15:02:45 +0000] \&quot;GET / HTTP/1.1\&quot; 200 612 \&quot;-\&quot; \&quot;curl/7.49.1\&quot; \&quot;-\&quot;&quot;, &quot;group&quot;: &quot;alpha&quot;, &quot;container_name&quot;: &quot;/service_web_1&quot;, &quot;source&quot;: &quot;stdout&quot;, &quot;remote&quot;: &quot;172.20.0.1&quot;, &quot;host&quot;: &quot;-&quot;, &quot;user&quot;: &quot;-&quot;, &quot;method&quot;: &quot;GET&quot;, &quot;path&quot;: &quot;/&quot;, &quot;code&quot;: &quot;200&quot;, &quot;size&quot;: &quot;612&quot;, &quot;referer&quot;: &quot;-&quot;, &quot;agent&quot;: &quot;curl/7.49.1&quot;, &quot;forward&quot;: &quot;-&quot; &#125;&#125; å¦‚æžœåŽ»é™¤nginx æ­£å¸¸çš„è®¿é—®æ—¥å¿—é¡¹ç›®å¤–ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´æ¸…æ™°çš„çœ‹åˆ°æœ‰å“ªäº›å…ƒæ•°æ®ä¿¡æ¯å¯ä»¥åˆ©ç”¨äº†ã€‚ 1&quot;frontend.web.nginx.service_web_1&quot;: &#123; &quot;image&quot;: &quot;nginx&quot;, &quot;base_os&quot;: &quot;alpine&quot;, &quot;container_id&quot;: &quot;f7212f7108de033045ddc22858569d0ac50921b043b97a2c8bf83b1b1ee50e34&quot;, &quot;section&quot;: &quot;frontend&quot;, &quot;service&quot;: &quot;web&quot;, &quot;group&quot;: &quot;alpha&quot;, &quot;container_name&quot;: &quot;/service_web_1&quot;, &quot;source&quot;: &quot;stdout&quot;, &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨ logging ä¸‹æ‰€æœ‰æŒ‡å®šçš„ labels éƒ½åœ¨ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥å¯¹æ¯ä¸ªæœåŠ¡è®¾å®šä¸åŒçš„æ ‡ç­¾ï¼Œé€šè¿‡æ ‡ç­¾æ¥åŒºåˆ†æœåŠ¡ã€‚æ¯”å¦‚è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ web æœåŠ¡æŒ‡å®šäº† service=web çš„æ ‡ç­¾ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥å¯¹æ•°æ®åº“çš„æœåŠ¡è®¾å®šæ ‡ç­¾ä¸º service=mysqlï¼Œè¿™æ ·åœ¨æ±‡æ€»åŽï¼Œåªéœ€è¦å¯¹ service æ ‡ç­¾åˆ†ç»„è¿‡æ»¤å³å¯ï¼Œåˆ†ç¦»èšåˆä¸åŒæœåŠ¡çš„æ—¥å¿—ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸æ­¢ä¸€ä¸ªæ ‡ç­¾ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬è®¾ç½®äº†å¤šç»„ä¸åŒé¢—ç²’åº¦çš„æ ‡ç­¾ï¼Œåœ¨åŽæœŸåˆ†ç»„çš„æ—¶å€™ï¼Œå¯ä»¥å¾ˆçµæ´»çš„è¿›è¡Œç»„åˆï¼Œä»¥æ»¡è¶³ä¸åŒéœ€æ±‚ã€‚ æ­¤å¤–ï¼Œæ³¨æ„ frontend.web.nginx.service_web_1ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¹‹å‰åˆ©ç”¨ --log-opt tag=frontend.web.nginx.&lt;å®¹å™¨å&gt; è¿›è¡Œè®¾å®šçš„ï¼Œå…¶ä¸­&lt;å®¹å™¨å&gt; æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Go æ¨¡æ¿è¡¨è¾¾å¼ã€‚Go æ¨¡æ¿å¾ˆå¼ºå¤§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒå®žçŽ°éžå¸¸å¤æ‚çš„æ ‡ç­¾ã€‚åœ¨ fluentd ä¸­ï¼Œ``é¡¹å¯ä»¥æ ¹æ®æ ‡ç­¾æ¥è¿›è¡Œç­›é€‰ã€‚ è¿™é‡Œå¯ä»¥å”¯ä¸€è¡¨ç¤ºå®¹å™¨çš„ï¼Œæœ‰å®¹å™¨ ID container_idï¼Œè€Œå®¹å™¨åcontainer_name ä¹Ÿä»ŽæŸç§ç¨‹åº¦ä¸Šå¯ä»¥ç”¨æ¥åŒºåˆ†ä¸åŒå®¹å™¨ã€‚å› æ­¤è¿›è¡Œå®¹å™¨åŒºåˆ†æ—¥å¿—çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸¤é¡¹ã€‚ è¿˜æœ‰ä¸€ä¸ª sourceï¼Œè¿™è¡¨ç¤ºäº†æ—¥å¿—æ˜¯ä»Žæ ‡å‡†è¾“å‡ºè¿˜æ˜¯æ ‡å‡†é”™è¯¯è¾“å‡ºå¾—åˆ°çš„ï¼Œç”±æ­¤å¯ä»¥åŒºåˆ†æ­£å¸¸æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—ã€‚ çŽ°åœ¨æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œé™¤äº†å®¹å™¨è‡ªèº«è¾“å‡ºçš„ä¿¡æ¯å¤–ï¼ŒDocker è¿˜å¯ä»¥ä¸ºæ¯ä¸€ä¸ªå®¹å™¨çš„æ—¥å¿—æ·»åŠ å¾ˆå¤šå…ƒæ•°æ®ï¼Œä»¥å¸®åŠ©åŽæœŸçš„æ—¥å¿—å¤„ç†ä¸­åº”å¯¹ä¸åŒéœ€æ±‚çš„æœç´¢å’Œè¿‡æ»¤ã€‚ åœ¨åŽæœŸå¤„ç†ä¸­ï¼Œfluentdä¸­å¯ä»¥åˆ©ç”¨æˆ–è€… æ’ä»¶æ ¹æ® tag æˆ–è€…å…¶å®ƒå…ƒæ•°æ®è¿›è¡Œåˆ†åˆ«å¤„ç†ã€‚è€Œæ—¥å¿—åˆ°äº† ElasticSearchè¿™ç±»ç³»ç»ŸåŽï¼Œåˆ™å¯ä»¥ç”¨æ›´ä¸°å¯Œçš„æŸ¥è¯¢è¯­è¨€è¿›è¡Œè¿‡æ»¤ã€èšåˆã€‚ é—®ï¼šä¸ºä»€ä¹ˆå®¹å™¨ä¸€è¿è¡Œå°±é€€å‡ºå•Šï¼Ÿç­”ï¼š è¿™æ˜¯åˆå­¦ Docker å¸¸å¸¸ç¢°åˆ°çš„é—®é¢˜ï¼Œæ­¤æ—¶è¿˜ä»¥è™šæ‹Ÿæœºæ¥ç†è§£ Dockerï¼Œè®¤ä¸ºå¯åŠ¨ Docker å°±æ˜¯å¯åŠ¨è™šæ‹Ÿæœºï¼Œä¹Ÿæ²¡æœ‰æžæ˜Žç™½å‰å°å’ŒåŽå°çš„åŒºåˆ«ã€‚ é¦–å…ˆï¼Œç¢°åˆ°è¿™ç±»é—®é¢˜åº”è¯¥æŸ¥æ—¥å¿—å’Œå®¹å™¨ä¸»è¿›ç¨‹é€€å‡ºç ã€‚ æ£€æŸ¥å®¹å™¨æ—¥å¿—ï¼š 1docker logs &lt;å®¹å™¨ID&gt; æŸ¥çœ‹å®¹å™¨é€€å‡ºç ï¼š 1CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMEScc2aa3f4745f ubuntu &quot;/bin/bash&quot; 23 hours ago Exited (0) 22 hours ago clever_lewin25510a2cb171 twang2218/gitlab-ce-zh:8.15.3 &quot;/assets/wrapper&quot; 2 days ago Exited (127) 2 days ago åœ¨ STATUS ä¸€æ ä¸­ï¼Œå¯ä»¥çœ‹åˆ°é€€å‡ºç æ˜¯å¤šå°‘ã€‚ å¦‚æžœçœ‹åˆ°äº† Exited (127) é‚£å¾ˆå¯èƒ½æ˜¯ç”±äºŽå†…å­˜è¶…æ ‡å¯¼è‡´è§¦å‘ Out Of Memory ç„¶åŽè¢«å¼ºåˆ¶ç»ˆæ­¢äº†ã€‚ å¦‚æžœçœ‹åˆ°äº† Exited (0)ï¼Œè¿™è¯´æ˜Žå®¹å™¨ä¸»è¿›ç¨‹æ­£å¸¸é€€å‡ºäº†ã€‚ å¦‚æžœæ˜¯å…¶ä»–æƒ…å†µï¼Œåº”è¯¥æ£€æŸ¥å®¹å™¨æ—¥å¿—ã€‚ åˆå­¦ Docker çš„äººå¸¸å¸¸ä¼šä¸ç†è§£æ—¢ç„¶æ­£å¸¸æ€Žä¹ˆä¼šé€€å‡ºçš„æ„æ€ã€‚ä¸å¾—ä¸åœ¨å¼ºè°ƒä¸€éï¼ŒDocker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå®¹å™¨åªæ˜¯è¿›ç¨‹ã€‚å› æ­¤å½“æ‰§è¡Œ docker runçš„æ—¶å€™ï¼Œå®žé™…æ‰€åšçš„åªæ˜¯å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æžœè¿›ç¨‹é€€å‡ºäº†ï¼Œé‚£ä¹ˆå®¹å™¨è‡ªç„¶å°±ç»ˆæ­¢äº†ã€‚ é‚£ä¹ˆè¿›ç¨‹ä¸ºä»€ä¹ˆä¼šé€€å‡ºï¼Ÿ å¦‚æžœæ˜¯æ‰§è¡Œ service nginx start è¿™ç±»å¯åŠ¨åŽå°æœåŠ¡ç¨‹åºçš„å‘½ä»¤ï¼Œé‚£è¯´æ˜Žè¿˜æ˜¯æŠŠ Docker å½“åšè™šæ‹Ÿæœºäº†ã€‚Docker å¯åŠ¨çš„æ˜¯è¿›ç¨‹ï¼Œå› æ­¤æ‰€è°“çš„åŽå°æœåŠ¡åº”è¯¥æ”¾åˆ°å‰å°ï¼Œæ¯”å¦‚åº”è¯¥ nginx -g &#39;daemon off;&#39;è¿™æ ·ç›´æŽ¥å‰å°å¯åŠ¨åº”ç”¨æ‰å¯¹ã€‚ å¦‚æžœå‘çŽ° COMMAND ä¸€æ æ˜¯ /bin/bashï¼Œé‚£è¿˜æ˜¯è¯´æ˜ŽæŠŠ Docker å½“è™šæ‹Ÿæœºäº†ã€‚COMMANDåº”è¯¥æ˜¯åº”ç”¨ç¨‹åºï¼Œè€Œä¸äº¤äº’å¼æ“ä½œç•Œé¢ï¼Œå®¹å™¨ä¸éœ€è¦äº¤äº’å¼æ“ä½œç•Œé¢ã€‚æ­¤å¤–ï¼Œå¦‚æžœä½¿ç”¨ /bin/bash å¸Œæœ›èµ·ä¸€ä¸ªäº¤äº’å¼çš„ç•Œé¢ï¼Œé‚£ä¹ˆä¹Ÿå¿…é¡»æä¾›ç»™å…¶è¾“å…¥å’Œç»ˆç«¯ï¼Œå› æ­¤å¿…é¡»åŠ  -it é€‰é¡¹ï¼Œæ¯”å¦‚ docker run -it ubuntu /bin/bash é—®ï¼šæˆ‘æƒ³åœ¨dockerå®¹å™¨é‡Œé¢è¿è¡Œdockerå‘½ä»¤ï¼Œè¯¥å¦‚ä½•æ“ä½œï¼Ÿç­”ï¼š é¦–å…ˆï¼Œä¸è¦åœ¨ Docker å®¹å™¨ä¸­å®‰è£…ã€è¿è¡Œ Docker å¼•æ“Žï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ Docker In Docker (DIND) å› ä¸ºDocker-in-Dockeræœ‰å¾ˆå¤šé—®é¢˜å’Œç¼ºé™·ï¼Œå‚è€ƒæ–‡ç« ï¼š https://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/ ä¸ºäº†è®©å®¹å™¨å†…å¯ä»¥æž„å»ºé•œåƒï¼Œåº”è¯¥ä½¿ç”¨ Docker Remote API çš„å®¢æˆ·ç«¯æ¥ç›´æŽ¥è°ƒç”¨å®¿ä¸»çš„ Docker Engineã€‚å¯ä»¥æ˜¯åŽŸç”Ÿçš„ Docker CLI ï¼ˆdocker å‘½ä»¤ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒè¯­è¨€çš„åº“ã€‚ ä¸º Jenkins æ·»åŠ  Docker å‘½ä»¤è¡Œ 1FROM jenkins:alpine# ä¸‹è½½å®‰è£…Docker CLIUSER rootRUN curl -O https://get.docker.com/builds/Linux/x86_64/docker-latest.tgz \ &amp;&amp; tar zxvf docker-latest.tgz \ &amp;&amp; cp docker/docker /usr/local/bin/ \ &amp;&amp; rm -rf docker docker-latest.tgz# å°† `jenkins` ç”¨æˆ·çš„ç»„ ID æ”¹ä¸ºå®¿ä¸» `docker` ç»„çš„ç»„IDï¼Œä»Žè€Œå…·æœ‰æ‰§è¡Œ `docker` å‘½ä»¤çš„æƒé™ã€‚ARG DOCKER_GID=999USER jenkins:$&#123;DOCKER_GID&#125; åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ä¸‹è½½äº†é™æ€ç¼–è¯‘çš„ docker å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶æå–å‘½ä»¤è¡Œå®‰è£…åˆ°ç³»ç»Ÿç›®å½•ä¸‹ã€‚ç„¶åŽè°ƒæ•´äº† jenkins ç”¨æˆ·çš„ç»„ IDï¼Œè°ƒæ•´ä¸ºå®¿ä¸» dockerç»„IDï¼Œä»Žè€Œä½¿å…¶å…·æœ‰æ‰§è¡Œ docker å‘½ä»¤çš„æƒé™ã€‚ ç»„ ID ä½¿ç”¨äº† DOCKER_GID å‚æ•°æ¥å®šä¹‰ï¼Œä»¥æ–¹ä¾¿è¿›ä¸€æ­¥å®šåˆ¶ã€‚æž„å»ºæ—¶å¯ä»¥é€šè¿‡ --build-argæ¥æ”¹å˜ DOCKER_GID çš„é»˜è®¤å€¼ï¼Œè¿è¡Œæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ --user jenkins:1234 æ¥æ”¹å˜è¿è¡Œç”¨æˆ·çš„èº«ä»½ã€‚ ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æž„å»ºé•œåƒï¼ˆå‡è®¾é•œåƒåä¸º jenkins-dockerï¼‰ï¼š 1$ docker build -t jenkins-docker . å¦‚æžœéœ€è¦æž„å»ºæ—¶è°ƒæ•´ docker ç»„ IDï¼Œå¯ä»¥ä½¿ç”¨ --build-arg æ¥è¦†ç›–å‚æ•°é»˜è®¤å€¼ï¼š 1$ docker build -t jenkins-docker --build-arg DOCKER_GID=1234 . åœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™ï¼Œå°†å®¿ä¸»çš„ /var/run/docker.sock æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…çš„åŒæ ·ä½ç½®ï¼Œä»Žè€Œè®©å®¹å™¨å†…å¯ä»¥é€šè¿‡ unix socket è°ƒç”¨å®¿ä¸»çš„ Docker å¼•æ“Žã€‚ æ¯”å¦‚ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨ jenkinsï¼š 1$ docker run --name jenkins \ -d \ -p 8080:8080 \ -v /var/run/docker.sock:/var/run/docker.sock \ jenkins-docker åœ¨ jenkins å®¹å™¨ä¸­ï¼Œå°±å·²ç»å¯ä»¥æ‰§è¡Œ docker å‘½ä»¤äº†ï¼Œå¯ä»¥é€šè¿‡ docker execæ¥éªŒè¯è¿™ä¸ªç»“æžœï¼š 1$ docker exec -it jenkins sh/ $ iduid=1000(jenkins) gid=999(ping) groups=999(ping)/ $ docker versionClient: Version: 1.12.3 API version: 1.24 Go version: go1.6.3 Git commit: 6b644ec Built: Wed Oct 26 23:26:11 2016 OS/Arch: linux/amd64Server: Version: 1.13.0-rc2 API version: 1.25 Go version: go1.7.3 Git commit: 1f9b3ef Built: Wed Nov 23 06:32:39 2016 OS/Arch: linux/amd64/ $ é—®ï¼šéƒ½è¯´ä¸è¦ç”¨ root åŽ»è¿è¡ŒæœåŠ¡ï¼Œä½†æˆ‘çœ‹åˆ°çš„ Dockerfile éƒ½æ˜¯ç”¨ root åŽ»è¿è¡Œï¼Œè¿™ä¸å®‰å…¨å§ï¼Ÿç­”ï¼š å¹¶éžæ‰€æœ‰å®˜æ–¹é•œåƒçš„ Dockerfile éƒ½æ˜¯ç”¨ root ç”¨æˆ·åŽ»æ‰§è¡Œçš„ã€‚æ¯”å¦‚mysql é•œåƒçš„æ‰§è¡Œèº«ä»½å°±æ˜¯ mysql ç”¨æˆ·ï¼›redis é•œåƒçš„æœåŠ¡è¿è¡Œç”¨æˆ·å°±æ˜¯ redisï¼›mongoé•œåƒå†…çš„æœåŠ¡æ‰§è¡Œèº«ä»½æ˜¯ mongo ç”¨æˆ·ï¼›jenkins é•œåƒå†…æ˜¯ jenkins ç”¨æˆ·å¯åŠ¨æœåŠ¡ç­‰ç­‰ã€‚æ‰€ä»¥è¯´ â€œéƒ½æ˜¯ç”¨ root åŽ»è¿è¡Œâ€ æ˜¯ä¸å®¢è§‚çš„ã€‚ å½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯è¯´åœ¨å®¹å™¨å†…ä½¿ç”¨ root å°±éžå¸¸å±é™©ã€‚å®¹å™¨å†…çš„ root å’Œå®¿ä¸»ä¸Šçš„ root ä¸åŒï¼Œå®¹å™¨å†…çš„ root è™½ç„¶ uid ä¹Ÿé»˜è®¤ä¸º 0ï¼Œä½†æ˜¯å´å¤„äºŽä¸€ä¸ªéš”ç¦»çš„å‘½åç©ºé—´ï¼Œè€Œä¸”è¢«åŽ»æŽ‰äº†å¤§é‡çš„ç‰¹æƒã€‚å®¹å™¨å†…çš„ root æ˜¯ä¸€ä¸ªæ²¡æœ‰ä»€ä¹ˆç‰¹æƒçš„ç”¨æˆ·ï¼Œå±é™©çš„æ“ä½œåŸºæœ¬éƒ½æ— æ³•æ‰§è¡Œã€‚ ä¸è¿‡ï¼Œå¦‚æžœç”¨æˆ·å¯ä»¥æ‰“ç ´è¿™ä¸ªå®‰å…¨ä¿æŠ¤ï¼Œé‚£å°±æ˜¯å¦å¤–ä¸€å›žäº‹äº†ã€‚æ¯”å¦‚ï¼Œå¦‚æžœç”¨æˆ·æŒ‚è½½äº†å®¿ä¸»ç›®å½•ç»™å®¹å™¨ï¼Œè¿™å°±æ˜¯æ‰“é€šäº†ä¸€ä¸ªå®¹å™¨å†…çš„ rootæ“æŽ§å®¿ä¸»çš„ä¸€ä¸ªé€šé“ï¼Œä½¿å¾—å®¹å™¨å†…çš„ root å¯ä»¥ä¿®æ”¹æ‰€æŒ‚è½½çš„ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶ã€‚ å› ä¸ºå½“å‰ç‰ˆæœ¬çš„ Docker ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹å®¹å™¨çš„ user namespace å¹¶æœªå¼€å¯ï¼Œæ‰€ä»¥å®¹å™¨å†…çš„ç”¨æˆ·å’Œå®¿ä¸»ç”¨æˆ·å…±äº« uid ç©ºé—´ã€‚å®¹å™¨å†…çš„ uid ä¸º 0çš„ rootï¼Œå°±è¢«ç³»ç»Ÿè§†ä¸º uid=0 çš„å®¿ä¸» rootï¼Œå› æ­¤ç£ç›˜è¯»å†™æ—¶ï¼Œå…·æœ‰å®¿ä¸»root åŒç­‰è¯»å†™æƒé™ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸€èˆ¬ä¸æŽ¨èæŒ‚è½½å®¿ä¸»ç›®å½•ã€ç‰¹åˆ«æ˜¯æŒ‚è½½å®¿ä¸»ç³»ç»Ÿç›®å½•çš„åŽŸå› ä¹‹ä¸€ã€‚è¿™ä¸€åˆ‡åªè¦å®šåˆ¶é•œåƒçš„æ—¶å€™ï¼Œå®¹å™¨å†…ä¸ä½¿ç”¨root å¯åŠ¨æœåŠ¡å°±æ²¡è¿™ä¸ªé—®é¢˜äº†ã€‚ å½“ç„¶ï¼Œä¸Šé¢è¯´çš„é—®é¢˜åªæ˜¯é»˜è®¤æƒ…å†µä¸‹ user namespaceä¸ä¼šå¯ç”¨çš„é—®é¢˜ã€‚dockerd æœ‰ä¸€ä¸ª --userns-remap å‚æ•°ï¼Œåªè¦é…ç½®äº†è¿™ä¸ªå‚æ•°ï¼Œå°±å¯ä»¥ç¡®ä¿å®¹å™¨å†…çš„ uid æ˜¯ç‹¬ç«‹å‘½åç©ºé—´ï¼Œå®¹å™¨å†…çš„ uidå˜åˆ°å®¿ä¸»çš„æ—¶å€™ï¼Œä¼šè¢«remap åˆ°å¦ä¸€ä¸ªèŒƒå›´ã€‚å› æ­¤ï¼Œå®¹å™¨å†…çš„ uid=0 çš„ root å°†å®Œå…¨è·Ÿ rootæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä»…ä»…æ˜¯ä¸ªæ™®é€šç”¨æˆ·è€Œå·²ã€‚ ç›¸å…³ä¿¡æ¯è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š --userns-remap çš„ä»‹ç»ï¼šhttps://docs.docker.com/engine/reference/commandline/dockerd/#/daemon-user-namespace-options Docker å®‰å…¨ï¼šhttps://docs.docker.com/engine/security/security/ é—®ï¼šæˆ‘åœ¨å®¹å™¨é‡Œè¿è¡Œ systemctl start xxx æ€Žä¹ˆæŠ¥é”™å•Šï¼Ÿç­”ï¼š å¦‚æžœåœ¨å®¹å™¨å†…ä½¿ç”¨ systemctl å‘½ä»¤ï¼Œç»å¸¸ä¼šå‘çŽ°ç¢°åˆ°è¿™æ ·çš„é”™è¯¯ï¼š 1Failed to get D-Bus connection: Operation not permitted è¿™å¾ˆæ­£å¸¸ï¼Œå› ä¸º systemd æ˜¯å®Œæ•´ç³»ç»Ÿçš„æœåŠ¡å¯åŠ¨ã€ç»´æŠ¤çš„ç³»ç»ŸæœåŠ¡ç¨‹åºï¼Œè€Œä¸”éœ€è¦ç‰¹æƒåŽ»æ‰§è¡Œã€‚ä½†æ˜¯å®¹å™¨ä¸æ˜¯å®Œæ•´ç³»ç»Ÿï¼Œæ—¢æ²¡æœ‰é…åˆçš„æœåŠ¡ï¼Œä¹Ÿæ²¡æœ‰ç‰¹æƒï¼Œæ‰€ä»¥è‡ªç„¶ç”¨ä¸äº†ã€‚ å¦‚æžœä½ ç¢°åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œåªèƒ½å†æ¬¡æé†’ä½ ï¼ŒDocker ä¸æ˜¯è™šæ‹Ÿæœºã€‚è¯•å›¾åœ¨å®¹å™¨é‡Œæ‰§è¡Œ systemctl å‘½ä»¤çš„ï¼Œå¤§å¤šéƒ½æ˜¯è¿˜æ²¡æœ‰æžæ˜Žç™½å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Œå› ä¸ºçœ‹åˆ°äº†å¯ä»¥æœ‰ Shellï¼Œå°±ä»¥ä¸ºè¿™æ˜¯ä¸ªè™šæ‹Ÿæœºï¼Œè¯•å›¾é‡å¤è‡ªå·±åœ¨å®Œæ•´ç³»ç»Ÿä¸Šçš„ä½“éªŒã€‚è¿™æ˜¯ç”¨æ³•é”™è¯¯ï¼Œä¸è¦æŠŠ Docker å½“åšè™šæ‹ŸæœºåŽ»ç”¨ï¼Œå®¹å™¨æœ‰è‡ªå·±çš„ç”¨æ³•ã€‚ Docker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå®¹å™¨åªæ˜¯å—é™è¿›ç¨‹ã€‚ å®¹å™¨å†…æ ¹æœ¬ä¸éœ€è¦åŽå°æœåŠ¡ï¼Œä¹Ÿä¸éœ€è¦æœåŠ¡è°ƒåº¦å’Œç»´æŠ¤ï¼Œè‡ªç„¶ä¹Ÿä¸éœ€è¦ systemdã€‚å®¹å™¨åªæœ‰ä¸€ä¸ªä¸»è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨è¿›ç¨‹ã€‚å®¹å™¨çš„ç”Ÿå­˜å‘¨æœŸå°±æ˜¯å›´ç»•ç€è¿™ä¸ªä¸»è¿›ç¨‹è€Œå­˜åœ¨çš„ï¼Œæ‰€ä»¥æ‰€è¯•å›¾å¯åŠ¨çš„åŽå°æœåŠ¡ï¼Œåº”è¯¥æ”¹ä¸ºç›´æŽ¥åœ¨å‰å°è¿è¡Œï¼Œæ ¹æœ¬ä¸éœ€è¦ä¹Ÿä¸åº”è¯¥ä½¿ç”¨ systemctl å‘½ä»¤åŽ»åœ¨åŽå°åŠ è½½ã€‚æ—¥å¿—ä¹‹ç±»çš„ä¹Ÿæ˜¯ç›´æŽ¥ä»Ž stdout/stderr è¾“å‡ºï¼Œè€Œä¸æ˜¯èµ° journaldã€‚ é—®ï¼šå®¹å™¨å†…çš„æ—¶é—´å’Œå®¿ä¸»ä¸ä¸€è‡´ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿç­”ï¼š ä¸€èˆ¬æƒ…å†µç›´æŽ¥è®¾ç½®çŽ¯å¢ƒå˜é‡ TZ å°±å¤Ÿäº†ï¼Œæ¯”å¦‚ï¼š 1$ docker run -it -e TZ=Asia/Shanghai debian bashroot@8e6d6c588328:/# dateTue Dec 13 09:41:21 CST 2016 çœ‹åˆ°äº†ä¹ˆï¼Ÿæ—¶åŒºè°ƒæ•´åˆ°äº† CSTï¼Œä¹Ÿå°±æ˜¯ China Standard Time - ä¸­å›½æ ‡å‡†æ—¶é—´ ï¼Œå› æ­¤æ˜¾ç¤ºå°±æ­£å¸¸äº†ã€‚ è¿˜æœ‰ä¸€ç§æ–¹æ³•åœ¨æž„å»ºé•œåƒçš„æ—¶ä¾¯è°ƒæ•´ä¸‹æ—¶åŒºï¼š 1FROM centos:7RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime é—®ï¼šæˆ‘æƒ³è®©æˆ‘çš„ç¨‹åºå¹³æ»‘é€€å‡ºï¼Œä¸ºä»€ä¹ˆæˆªèŽ· SIGTERM ä¿¡å·ä¸ç®¡ç”¨å•Šï¼Ÿç­”ï¼š docker stop, docker service rm åœ¨åœæ­¢å®¹å™¨æ—¶ï¼Œéƒ½ä¼šå…ˆå‘ SIGTERM ä¿¡å·ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰åŽï¼Œå¦‚æžœç¨‹åºæ²¡å“åº”ï¼Œåˆ™å¼ºè¡Œ SIGKILLæ€æŽ‰è¿›ç¨‹ã€‚ è¿™æ ·åº”ç”¨è¿›ç¨‹å°±æœ‰æœºä¼šå¹³æ»‘é€€å‡ºï¼Œåœ¨æŽ¥æ”¶åˆ°SIGTERM åŽï¼Œå¯ä»¥åŽ» Flush ç¼“å­˜ã€å®Œæˆæ–‡ä»¶è¯»å†™ã€å…³é—­æ•°æ®åº“è¿žæŽ¥ã€é‡Šæ”¾æ–‡ä»¶èµ„æºã€é‡Šæ”¾é”ç­‰ç­‰ï¼Œç„¶åŽå†é€€å‡ºã€‚æ‰€ä»¥è¯•å›¾æˆªèŽ· SIGTERM ä¿¡å·çš„åšæ³•æ˜¯å¯¹çš„ã€‚ ä½†æ˜¯ï¼Œå¯èƒ½åœ¨æˆªèŽ· SIGTERM æ—¶å´å‘çŽ°ï¼Œå´å‘çŽ°åº”ç”¨å¹¶æ²¡æœ‰æ”¶åˆ° SIGTERMï¼ŒäºŽæ˜¯ç›²ç›®çš„è®¤ä¸º Docker ä¸æ”¯æŒå¹³æ»‘é€€å‡ºï¼Œå…¶å®žå¹¶éžå¦‚æ­¤ã€‚ è¿˜è®°å¾—æˆ‘ä»¬æåˆ°è¿‡ï¼ŒDocker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå®¹å™¨åªæ˜¯å—é™è¿›ç¨‹ï¼Œè€Œä¸€ä¸ªå®¹å™¨åªåº”è¯¥è·‘ä¸€ä¸ªä¸»è¿›ç¨‹çš„è¯´æ³•ä¹ˆï¼Ÿå¦‚æžœä½ å‘çŽ°ä½ çš„ç¨‹åºæ²¡æœ‰æˆªèŽ·åˆ° SIGTERMï¼Œé‚£å°±å¾ˆå¯èƒ½ä½ æ²¡æœ‰éµå¾ªè¿™ä¸ªæœ€ä½³å®žè·µçš„åšæ³•ã€‚å› ä¸ºSIGTERMåªä¼šå‘ç»™ä¸»è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯å®¹å™¨å†… PIDä¸º1 çš„è¿›ç¨‹ã€‚ è‡³äºŽè¯´ä¸»è¿›ç¨‹å¯åŠ¨çš„é‚£äº›å­è¿›ç¨‹ï¼Œå®Œå…¨çœ‹ä¸»è¿›ç¨‹æ˜¯å¦æ„¿æ„è½¬å‘ SIGTERM ç»™å­è¿›ç¨‹äº†ã€‚æ‰€ä»¥é‚£äº›æŠŠ Docker å½“åšè™šæ‹Ÿæœºç”¨çš„ï¼Œä¸»è¿›ç¨‹è·‘äº†ä¸ªbashï¼Œç„¶åŽ execè¿›åŽ»å¯åŠ¨ç¨‹åºçš„ï¼Œæˆ–è€…æ¥ä¸ª &amp; è®©ç¨‹åºè·‘åŽå°çš„æƒ…å†µï¼Œåº”ç”¨è¿›ç¨‹å¿…ç„¶æ— æ³•æ”¶åˆ° SIGTERMã€‚ è¿˜æœ‰ä¸€ç§å¯èƒ½æ˜¯åœ¨ Dockerfile ä¸­çš„ CMD é‚£è¡Œç”¨çš„æ˜¯ shell æ ¼å¼å†™çš„å‘½ä»¤ï¼Œè€Œä¸æ˜¯ execæ ¼å¼ã€‚è¿˜è®°å¾—å‰é¢æåˆ°è¿‡çš„ shell æ ¼å¼çš„å‘½ä»¤ï¼Œä¼šåŠ ä¸€ä¸ª sh -c æ¥åŽ»æ‰§è¡Œä¹ˆï¼Ÿå› æ­¤ä½¿ç”¨ shell æ ¼å¼å†™ CMD çš„æ—¶å€™ï¼ŒPID ä¸º 1 çš„è¿›ç¨‹æ˜¯ shï¼Œè€Œå®ƒä¸è½¬å‘ä¿¡å·ï¼Œæ‰€ä»¥ä¸»ç¨‹åºæ”¶ä¸åˆ°ã€‚ æ˜Žç™½äº†é“ç†ï¼Œè§£å†³æ–¹æ³•å°±å¾ˆç®€å•ï¼Œæ¢æˆ exec æ ¼å¼ï¼Œå¹¶ä¸”å°†ä¸»è¿›ç¨‹æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨ç¬¬ä¸€ä½å³å¯ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¹‹å‰æŽ¨è exec æ ¼å¼çš„åŽŸå› ä¹‹ä¸€ã€‚ è¿›ç¨‹ç®¡ç†åœ¨Dockerå®¹å™¨ä¸­å’Œåœ¨å®Œæ•´çš„æ“ä½œç³»ç»Ÿæœ‰ä¸€äº›ä¸åŒä¹‹å¤„ã€‚åœ¨æ¯ä¸ªå®¹å™¨çš„PID1è¿›ç¨‹ï¼Œéœ€è¦èƒ½å¤Ÿæ­£ç¡®çš„å¤„ç†SIGTERMä¿¡å·æ¥æ”¯æŒå®¹å™¨åº”ç”¨çš„ä¼˜é›…é€€å‡ºï¼ŒåŒæ—¶è¦èƒ½æ­£ç¡®çš„å¤„ç†å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹ã€‚å¿…è¦çš„æ—¶å€™ä½¿ç”¨Dockeræ–°æä¾›çš„ docker run --init å‚æ•°å¯ä»¥è§£å†³ç›¸åº”é—®é¢˜ã€‚ é—®ï¼šDocker Swarmï¼ˆä¸€ä»£swarmï¼‰ å’ŒSwarm modeï¼ˆäºŒä»£swarmï¼‰ä¸¤è€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿç­”ï¼š å› ä¸º docker run å’Œ docker service createæ˜¯ä¸¤ä¸ªä¸åŒç†å¿µçš„ä¸œè¥¿ã€‚ ä¸€ä»£ Swarm ä¸­ï¼Œå°† Swarm é›†ç¾¤è§†ä¸ºä¸€ä¸ªå·¨å¤§çš„ Docker ä¸»æœºï¼Œæœ¬è´¨ä¸Šå’Œå•æœºæ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯ç›´æŽ¥è°ƒåº¦è¿è¡Œå®¹å™¨ã€‚å› æ­¤ä¾æ—§ä½¿ç”¨å•æœºçš„ docker runçš„æ–¹å¼æ¥å¯åŠ¨ç‰¹å®šå®¹å™¨ã€‚ äºŒä»£ Swarm åˆ™æ”¹å˜äº†è¿™ä¸ªç†å¿µï¼Œå¢žåŠ äº†æœåŠ¡æ ˆ(Stack)ã€æœåŠ¡(Service)ã€ä»»åŠ¡(Task) çš„æ¦‚å¿µã€‚åœ¨äºŒä»£ Swarm ä¸­ï¼Œä¸€ç»„æœåŠ¡å¯ä»¥ç»„æˆä¸€ä¸ªæ•´ä½“è¿›è¡Œéƒ¨ç½²ï¼Œä¹Ÿå°±æ˜¯éƒ¨ç½²æœåŠ¡æ ˆï¼Œè¿™ç›¸å½“äºŽæ˜¯ä¹‹å‰çš„Docker Compose æ‰€å®Œæˆçš„ç›®çš„ã€‚ä½†æ˜¯è¿™æ¬¡ï¼Œæ˜¯çœŸæ­£çš„é’ˆå¯¹æœåŠ¡çš„ã€‚ ä¸€ä¸ªæœåŠ¡å¹¶éžä¸€ä¸ªå®¹å™¨ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥æœ‰å¤šä¸ªå‰¯æœ¬ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯¹åº”ä¸€ä¸ªå®¹å™¨ã€‚è¿™ä¸ªæ¦‚å¿µåœ¨ä¸€ä»£ Swarm å’Œå•æœºçŽ¯å¢ƒä¸­æ˜¯æ²¡æœ‰çš„ï¼Œå› æ­¤ Docker Composeä¸ºäº†å®žçŽ°æœåŠ¡çš„æ¦‚å¿µï¼Œç”¨äº†å„ç§åŠžæ³•åŽ»æ¨¡æ‹Ÿï¼ŒåŒ…æ‹¬ä½¿ç”¨ labelsï¼Œä½¿ç”¨ç½‘ç»œåˆ«åç­‰ç­‰ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šï¼Œä¾æ—§æ˜¯ä»¥å®¹å™¨ä¸ºå•ä½è¿›è¡Œè¿è¡Œï¼Œä¹Ÿå°±æ˜¯æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ç»„ docker runã€‚ æ­£æ˜¯ç”±äºŽäºŒä»£ Swarm ä¸­ç”¨æˆ·æ“ä½œçš„å•å…ƒæ˜¯æœåŠ¡ï¼Œæ‰€ä»¥ä¼ ç»Ÿçš„ä»¥å®¹å™¨ä¸ºä¸­å¿ƒçš„ docker run å°±ä¸å†é€‚ç”¨ï¼Œå› æ­¤æœ‰æ–°çš„ä¸€ç»„é’ˆå¯¹æœåŠ¡çš„å‘½ä»¤ï¼Œdocker serviceã€‚ é—®ï¼šæˆ‘è‡ªå»ºäº†ç§æœ‰é•œåƒä»“åº“Registryï¼Œæˆ‘å¦‚ä½•æœç´¢æŸ¥è¯¢ä»“åº“ä¸­çš„é•œåƒï¼Ÿç­”ï¼š å¦‚æžœåªä½¿ç”¨å¼€æºçš„ docker registry è‡ªå»ºä»“åº“çš„è¯ï¼Œç›®å‰åªèƒ½ç”¨ API è®¿é—®å…¶å†…å®¹ã€‚é™¤æ­¤ä»¥å¤–ï¼Œå®˜æ–¹è¿˜æœ‰å•†ä¸šç‰ˆçš„ Docker Trusted Registry é¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸€äº›å¢žå€¼çš„å†…å®¹åœ¨é‡Œé¢ï¼Œæä¾›äº†ç±»ä¼¼äºŽ Docker Hub ä¼¼å¾— UI ç­‰ï¼Œå¯ä»¥æœç´¢è¿‡æ»¤ã€‚ç›®å‰ Docker Trusted Registry å±žäºŽ Docker Datacenter çš„ä¸€éƒ¨åˆ†ã€‚ å¦å¤–ï¼Œç¬¬ä¸‰æ–¹ä¹Ÿæœ‰ä¸€äº›æä¾›äº†UIçš„ã€‚æ¯”å¦‚ VMWare Harborã€‚VMWare Harboræ˜¯ VMWare ä¸­å›½åŸºäºŽå¼€æº docker registryè¿›ä¸€æ­¥å¼€å‘çš„é¡¹ç›®ï¼Œæœ‰æ›´å¤æ‚çš„ä¸Šå±‚é€»è¾‘ã€‚åŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€é•œåƒç®¡ç†ã€Registryé›†ç¾¤ä¹‹ç±»çš„åŠŸèƒ½ã€‚Harbor æ˜¯å¼€æºçš„ï¼Œå…è´¹çš„ã€‚ ç¬¬ä¸‰æ–¹çš„ registry è¿˜æœ‰ Java ä¸–ç•Œé‡Œå¸¸è§çš„ Nexusï¼Œå…¶ç¬¬ä¸‰ä»£æ”¯æŒ Docker Registry APIã€‚ æˆ–è€…è‡ªå·±å¯ä»¥ç¼–å†™ä¸ªè„šæœ¬åŽ»æŸ¥è¯¢ï¼š 1#!/usr/bin/env pythonimport requests#import simplejson as jsonimport jsonimport sysdef main(): registry = &quot;http://127.0.0.1:5000&quot; ## è‡ªå·±é•œåƒä»“åº“åœ°å€ res = requests.get(registry + &quot;/v2/&quot;) #assert res.status_code == 200 res = requests.get(registry + &quot;/v2/_catalog?n=100000&quot;) assert res.status_code == 200 repositories = res.json().get(&quot;repositories&quot;, []) #print(&quot;registry reports &#123;&#125; repositories&quot;.format(len(repositories))) for repository in repositories: res = requests.get(registry + &quot;/v2/&#123;&#125;/tags/list&quot;.format(repository)) tags = res.json().get(&quot;tags&quot;, None) if tags: for tag in tags: image = format(repository) tag = format(tag) print image+&quot;:&quot;+tagif __name__ == &quot;__main__&quot;: main() é—®ï¼šå¦‚ä½•åˆ é™¤ç§æœ‰ registry ä¸­çš„é•œåƒï¼Ÿç­”ï¼š é¦–å…ˆï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œdocker registry æ˜¯ä¸å…è®¸åˆ é™¤é•œåƒçš„ï¼Œéœ€è¦åœ¨é…ç½®config.ymlä¸­å¯ç”¨ï¼š 1delete: enabled: true ç„¶åŽï¼Œä½¿ç”¨ API GET /v2/&lt;é•œåƒå&gt;/manifests/ æ¥å–å¾—è¦åˆ é™¤çš„ é•œåƒ:Tag æ‰€å¯¹åº”çš„ digest ã€‚ Registry 2.3 ä»¥åŽï¼Œå¿…é¡»åŠ å…¥å¤´ Accept: application/vnd.docker.distribution.manifest.v2+json ï¼Œå¦åˆ™å–åˆ°çš„ digest æ˜¯é”™è¯¯çš„ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢è¯¯åˆ é™¤ã€‚ æ¯”å¦‚ï¼Œè¦åˆ é™¤ myimage:latest é•œåƒï¼Œé‚£ä¹ˆå–å¾— digest çš„å‘½ä»¤æ˜¯ï¼š 1$ curl --header &quot;Accept: application/vnd.docker.distribution.manifest.v2+json&quot; \ -I -X HEAD http://192.168.99.100:5000/v2/myimage/manifests/latest \ | grep DigestDocker-Content-Digest: sha256:3a07b4e06c73b2e3924008270c7f3c3c6e3f70d4dbb814ad8bff2697123ca33c ç„¶åŽè°ƒç”¨ API DELETE /v2/&lt;é•œåƒå&gt;/manifests/ æ¥åˆ é™¤é•œåƒã€‚æ¯”å¦‚ï¼š 1curl -X DELETE http://192.168.99.100:5000/v2/myimage/manifests/sha256:3a07b4e06c73b2e3924008270c7f3c3c6e3f70d4dbb814ad8bff2697123ca33c è‡³æ­¤ï¼Œé•œåƒå·²ä»Ž registry ä¸­æ ‡è®°åˆ é™¤ï¼Œå¤–ç•Œè®¿é—® pull ä¸åˆ°äº†ã€‚ä½†æ˜¯ registry çš„æœ¬åœ°ç©ºé—´å¹¶æœªé‡Šæ”¾ï¼Œéœ€è¦ç­‰å¾…åžƒåœ¾æ”¶é›†æ‰ä¼šé‡Šæ”¾ã€‚è€Œåžƒåœ¾æ”¶é›†ä¸å¯ä»¥åœ¨çº¿è¿›è¡Œï¼Œå¿…é¡»åœæ­¢ registryï¼Œç„¶åŽæ‰§è¡Œã€‚æ¯”å¦‚ï¼Œå‡è®¾ registryæ˜¯ç”¨Compose è¿è¡Œçš„ï¼Œé‚£ä¹ˆä¸‹é¢å‘½ä»¤ç”¨æ¥åžƒåœ¾æ”¶é›†ï¼š 1docker-compose stopdocker run -it --name gc --rm --volumes-from registry_registry_1 registry:2 garbage-collect /etc/registry/config.ymldocker-compose start å…¶ä¸­ registry_registry_1 å¯ä»¥æ›¿æ¢ä¸ºå®žé™…çš„ registry çš„å®¹å™¨åï¼Œè€Œ /etc/registry/config.yml åˆ™æ›¿æ¢ä¸ºå®žé™…çš„ registry é…ç½®æ–‡ä»¶è·¯å¾„ã€‚ å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š https://docs.docker.com/registry/configuration/#/delete https://docs.docker.com/registry/spec/api/#/deleting-an-image é—®ï¼šè‡ªå·±æž¶çš„ registry æ€Žä¹ˆä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥å–åˆ°é•œåƒï¼Ÿè¿™ä¸å®‰å…¨å•Šï¼Ÿç­”ï¼š é‚£æ˜¯å› ä¸ºæ²¡æœ‰åŠ è®¤è¯ï¼Œä¸åŠ è®¤è¯çš„æ„æ€å°±æ˜¯å…è®¸ä»»ä½•äººè®¿é—®çš„ã€‚ æ·»åŠ è®¤è¯æœ‰ä¸¤ç§æ–¹å¼ï¼š Registry é…ç½®ä¸­åŠ å…¥è®¤è¯ï¼š https://docs.docker.com/registry/configuration/#/auth 1auth: token: realm: token-realm service: token-service issuer: registry-token-issuer rootcertbundle: /root/certs/bundle htpasswd: realm: basic-realm path: /path/to/htpasswd å‰ç«¯æž¶è®¾ nginx è¿›è¡Œè®¤è¯ï¼šhttps://docs.docker.com/registry/recipes/nginx/ 1location /v2/ &#123; ... auth_basic &quot;Registry realm&quot;; auth_basic_user_file /etc/nginx/conf.d/nginx.htpasswd; ...&#125; ä½¿ç”¨VMWare Harboréƒ¨ç½²é•œåƒä»“åº“ï¼ŒHarbor æä¾›äº†é«˜çº§çš„å®‰å…¨ç‰¹æ€§ï¼Œè¯¸å¦‚ç”¨æˆ·ç®¡ç†ï¼Œè®¿é—®æŽ§åˆ¶å’Œæ´»åŠ¨å®¡è®¡ç­‰ã€‚ é—®ï¼šCentOS 7 é»˜è®¤çš„å†…æ ¸å¤ªè€äº† 3.10ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¤š Docker åŠŸèƒ½ä¸æ”¯æŒï¼Ÿç­”ï¼š æ˜¯çš„ï¼Œæœ‰ä¸€äº›åŠŸèƒ½æ— æ³•æ”¯æŒï¼Œæ¯”å¦‚ overlay2 çš„å­˜å‚¨é©±åŠ¨å°±æ— æ³•åœ¨CentOS ä¸Šä½¿ç”¨ï¼Œä½†å¹¶éžæ‰€æœ‰éœ€è¦é«˜ç‰ˆæœ¬å†…æ ¸çš„åŠŸèƒ½éƒ½ä¸æ”¯æŒã€‚ æ¯”å¦‚ Overlay FS éœ€è¦ Linux 3.18ï¼Œè€ŒOverlay network éœ€è¦ Linux 3.16ã€‚è€Œ CentOS 7 å†…æ ¸ä¸º 3.10ï¼Œç¡®å®žä½ŽäºŽè¿™äº›ç‰ˆæœ¬éœ€æ±‚ã€‚ä½†å®žé™…ä¸Šï¼Œçº¢å¸½å›¢é˜Ÿä¼šæŠŠä¸€äº›æ–°å†…æ ¸çš„åŠŸèƒ½ backport å›žè€çš„å†…æ ¸ã€‚æ¯”å¦‚overlay fsç­‰ã€‚æ‰€ä»¥ä¸€äº›åŠŸèƒ½ä¾æ—§ä¼šæ”¯æŒã€‚å› æ­¤ CentOS 7çš„ Docker Engine åŒæ ·å¯ä»¥æ”¯æŒ overlay networkï¼Œä»¥åŠoverlay å­˜å‚¨é©±åŠ¨ï¼ˆä¸æ˜¯overlay2ï¼‰ã€‚å› æ­¤åœ¨æ–°çš„ Docker 1.12 ä¸­ï¼ŒCentOS/RHEL 7 æ‰æœ‰å¯èƒ½æ”¯æŒ Swarm Modeã€‚ å³ä½¿çº¢å¸½ä¼šæŠŠä¸€äº›é«˜ç‰ˆæœ¬å†…æ ¸çš„åŠŸèƒ½ backport å›ž 3.10å†…æ ¸ä¸­ï¼Œè¿™ç§ä¿®ä¿®è¡¥è¡¥å‡ºæ¥çš„åŠŸèƒ½ï¼Œå¹¶ä¸ä¸€å®šç¨³å®šã€‚å¦‚æžœè§‚å¯Ÿ Docker Issue åˆ—è¡¨ï¼Œä¼šå‘çŽ°å¤§é‡çš„ç”±äºŽ CentOS è€å†…æ ¸å¯¼è‡´çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨äº† 1.12 å†…ç½®çš„ Swarm Mode é›†ç¾¤åŠŸèƒ½åŽï¼Œå­˜å‚¨ã€ç½‘ç»œå‡ºçŽ°çš„é—®é¢˜å¾ˆå¤šã€‚ æ‰€ä»¥æƒ³è¦åœ¨Centos ç³»ç»Ÿä¸Šæ›´å¥½çš„ä½¿ç”¨Dockerï¼Œå»ºè®®æ£€æŸ¥å’Œå‡çº§ä¸‹ç³»ç»Ÿå†…æ ¸ï¼š 1wget http://mirror.rc.usf.edu/compute_lock/elrepo/kernel/el7/x86_64/RPMS/kernel-ml-4.11.1-1.el7.elrepo.x86_64.rpmyum -y install linux-firmwarerpm -ivh kernel-ml-4.11.1-1.el7.elrepo.x86_64.rpmgrub2-set-default 0grub2-mkconfig -o /boot/grub2/grub.cfgpackage-cleanup --oldkernels --count=1 -y ç„¶åŽéœ€è¦é‡å¯ä¸‹æœºå™¨ä»¥å¯ç”¨æ–°çš„å†…æ ¸ã€‚ å¬è¯´ Windows 10ã€Windows Server 2016 å†…ç½® Docker äº†ï¼Ÿå’Œ Docker å®˜ç½‘ä¸‹è½½çš„ Docker for Windows æœ‰ä»€ä¹ˆåŒºåˆ«å•Šï¼ŸäºŒè€…å®Œå…¨ä¸åŒã€‚ Windows 10 æˆ–è€… Windows Server 2016 è‡ªå¸¦çš„ Dockerï¼Œè¢«ç§°ä¸º Docker on Windowsï¼Œå…¶è¿è¡ŒäºŽ Windows NTå†…æ ¸è‡³ä¸Šï¼Œä»¥ Docker ç±»ä¼¼çš„æ–¹å¼æä¾› Windows å®¹å™¨æœåŠ¡ï¼Œå› æ­¤åªå¯ä»¥è¿è¡Œ Windows ç¨‹åºã€‚ è€Œ Docker å®˜ç½‘ä¸‹è½½çš„ï¼Œè¢«ç§°ä¸º Docker for Windowsã€‚è¿™æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ Dockerï¼Œå®ƒæ˜¯è¿è¡ŒäºŽ Linux å†…æ ¸ä¸Šçš„ Dockerã€‚åœ¨ Windows ä¸Šè¿è¡Œæ—¶å®žé™…ä¸Šæ˜¯åœ¨Hyper-V ä¸Šçš„ä¸€ä¸ª Alpine Linux è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ Dockerã€‚å®ƒåªå¯ä»¥è¿è¡Œ Linux ç¨‹åºã€‚ Docker on Windows æžä¸ºè‡ƒè‚¿ï¼Œæœ€å°é•œåƒä¹Ÿè¿‘ GBï¼Œå¯åŠ¨æ—¶é—´å¹¶ä¸å¿«ï¼›è€Œ Docker for Windows åˆ™æ˜¯æ­£å¸¸çš„ Dockerï¼Œæœ€å°é•œåƒä¹Ÿå°±å‡ å KBï¼Œä¸€èˆ¬çš„é•œåƒéƒ½åœ¨å‡ ç™¾å…†ä»¥å†…ï¼Œè€Œä¸”å¯åŠ¨æ—¶é—´åŸºæœ¬æ˜¯æ¯«ç§’çº§ã€‚]]></content>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockeré¢è¯•å¸¸è§50é—®ç­”]]></title>
    <url>%2F2019%2F12%2F17%2FDocker%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%8150%E9%97%AE%E7%AD%94%2F</url>
    <content type="text"><![CDATA[Introduced in 2013, Docker hit the IT industry. Soon it turned out to be a big hit by the end of 2017 with 8 billion container image downloads. Increasing demand for docker showed an exponential increase in job openings. Go ahead and take advantage of all the new job openings with this article which lists down 50 most important Docker Interview Questions. 2013å¹´æŽ¨å‡ºçš„ Docker æ‰“å‡»äº† IT è¡Œä¸šã€‚ å¾ˆå¿«ï¼Œåˆ°2017å¹´åº•ï¼Œå®ƒæˆä¸ºäº†ä¸€ä¸ªå·¨å¤§çš„å†²å‡»ï¼Œä¸‹è½½äº†80äº¿é›†è£…ç®±å›¾åƒã€‚ å¯¹ç å¤´å·¥äººéœ€æ±‚çš„å¢žé•¿è¡¨æ˜ŽèŒä½ç©ºç¼ºå‘ˆæŒ‡æ•°å¢žé•¿ã€‚ ç»§ç»­å‰è¿›ï¼Œåˆ©ç”¨æ‰€æœ‰çš„æ–°çš„èŒä½ç©ºç¼ºä¸Žè¿™ç¯‡æ–‡ç« åˆ—å‡ºäº†50ä¸ªæœ€é‡è¦çš„ Docker é¢è¯•é—®é¢˜ã€‚ Docker Basic QuestionsåŸºæœ¬é—®é¢˜This category of Docker Interview Questions consists of questions that youâ€™re expected to know. These are the most basic questions. An interviewer will start with these and eventually increase the difficulty level. Letâ€™s have a look at them. è¿™ç±»é¢è¯•é—®é¢˜åŒ…æ‹¬ä½ åº”è¯¥çŸ¥é“çš„é—®é¢˜ã€‚ è¿™äº›æ˜¯æœ€åŸºæœ¬çš„é—®é¢˜ã€‚ é¢è¯•å®˜ä¼šä»Žè¿™äº›å¼€å§‹ï¼Œæœ€ç»ˆå¢žåŠ éš¾åº¦çº§åˆ«ã€‚ è®©æˆ‘ä»¬æ¥çœ‹çœ‹ã€‚ 1. What is Hypervisor? \1. ä»€ä¹ˆæ˜¯ Hypervisorï¼Ÿ A hypervisor is a software that makes virtualization possible. It is also called Virtual Machine Monitor. It divides the host system and allocates the resources to each divided virtual environment. You can basically have multiple OS on a single host system. There are two types of Hypervisors: è™šæ‹Ÿæœºç›‘æŽ§ç¨‹åºæ˜¯ä¸€ç§ä½¿è™šæ‹ŸåŒ–æˆä¸ºå¯èƒ½çš„è½¯ä»¶ã€‚ å®ƒä¹Ÿè¢«ç§°ä¸ºè™šæ‹Ÿæœºç›‘è§†å™¨ã€‚ å®ƒå¯¹ä¸»æœºç³»ç»Ÿè¿›è¡Œåˆ’åˆ†ï¼Œå¹¶å°†èµ„æºåˆ†é…åˆ°å„ä¸ªåˆ’åˆ†çš„è™šæ‹ŸçŽ¯å¢ƒä¸­ã€‚ æ‚¨åŸºæœ¬ä¸Šå¯ä»¥åœ¨ä¸€ä¸ªä¸»æœºç³»ç»Ÿä¸Šæ‹¥æœ‰å¤šä¸ªæ“ä½œç³»ç»Ÿã€‚ æœ‰ä¸¤ç§ç±»åž‹çš„ç®¡ç†ç¨‹åº: Type 1: Itâ€™s also called Native Hypervisor or Bare metal Hypervisor. It runs directly on the underlying host system. It has direct access to your hostâ€™s system hardware and hence does not require a base server operating system. ç±»åž‹1: å®ƒä¹Ÿè¢«ç§°ä¸ºæœ¬åœ° Hypervisor æˆ–è£¸é‡‘å±ž Hypervisorã€‚ å®ƒç›´æŽ¥åœ¨åº•å±‚ä¸»æœºç³»ç»Ÿä¸Šè¿è¡Œã€‚ å®ƒå¯ä»¥ç›´æŽ¥è®¿é—®ä¸»æœºçš„ç³»ç»Ÿç¡¬ä»¶ï¼Œå› æ­¤ä¸éœ€è¦åŸºæœ¬æœåŠ¡å™¨æ“ä½œç³»ç»Ÿ Type 2: This kind of hypervisor makes use of the underlying host operating system. Itâ€™s also called Hosted Hypervisor. ç±»åž‹2: è¿™ç§ç³»ç»Ÿç®¡ç†ç¨‹åºä½¿ç”¨åº•å±‚ä¸»æœºæ“ä½œç³»ç»Ÿã€‚ å®ƒä¹Ÿè¢«ç§°ä¸ºæ‰˜ç®¡ç®¡ç†ç¨‹åº 2. What is virtualization?2. ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–ï¼ŸVirtualization is the process of creating a software-based, virtual version of something(compute storage, servers, application, etc.). These virtual versions or environments are created from a single physical hardware system. Virtualization lets you split one system into many different sections which act like separate, distinct individual systems. A software called Hypervisor makes this kind of splitting possible. The virtual environment created by the hypervisor is called Virtual Machine. è™šæ‹ŸåŒ–æ˜¯åˆ›å»ºåŸºäºŽè½¯ä»¶çš„è™šæ‹Ÿç‰ˆæœ¬(è®¡ç®—æœºå­˜å‚¨ã€æœåŠ¡å™¨ã€åº”ç”¨ç¨‹åºç­‰)çš„è¿‡ç¨‹ã€‚ è¿™äº›è™šæ‹Ÿç‰ˆæœ¬æˆ–çŽ¯å¢ƒæ˜¯ä»Žå•ä¸ªç‰©ç†ç¡¬ä»¶ç³»ç»Ÿåˆ›å»ºçš„ã€‚ è™šæ‹ŸåŒ–å…è®¸æ‚¨å°†ä¸€ä¸ªç³»ç»Ÿåˆ†å‰²æˆè®¸å¤šä¸åŒçš„éƒ¨åˆ†ï¼Œè¿™äº›éƒ¨åˆ†å°±åƒç‹¬ç«‹çš„ã€ä¸åŒçš„ä¸ªäººç³»ç»Ÿã€‚ ä¸€ä¸ªå« Hypervisor çš„è½¯ä»¶ä½¿è¿™ç§åˆ†å‰²æˆä¸ºå¯èƒ½ã€‚ ç”±ç®¡ç†ç¨‹åºåˆ›å»ºçš„è™šæ‹ŸçŽ¯å¢ƒç§°ä¸º Virtual Machineã€‚ 3. What is containerization?3. é›†è£…ç®±åŒ–æ˜¯ä»€ä¹ˆï¼ŸLet me explain this is with an example. Usually, in the software development process, code developed on one machine might not work perfectly fine on any other machine because of the dependencies. This problem was solved by the containerization concept. So basically, an application that is being developed and deployed is bundled and wrapped together with all its configuration files and dependencies. This bundle is called a container. Now when you wish to run the application on another system, the container is deployed which will give a bug-free environment as all the dependencies and libraries are wrapped together. Most famous containerization environments are Docker and Kubernetes. è®©æˆ‘ç”¨ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šè¿™ä¸€ç‚¹ã€‚ é€šå¸¸ï¼Œåœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç”±äºŽä¾èµ–å…³ç³»ï¼Œåœ¨ä¸€å°æœºå™¨ä¸Šå¼€å‘çš„ä»£ç å¯èƒ½æ— æ³•åœ¨å…¶ä»–æœºå™¨ä¸Šå®Œç¾Žåœ°å·¥ä½œã€‚ è¿™ä¸ªé—®é¢˜é€šè¿‡é›†è£…ç®±åŒ–çš„æ¦‚å¿µå¾—åˆ°äº†è§£å†³ã€‚ å› æ­¤ï¼ŒåŸºæœ¬ä¸Šï¼Œæ­£åœ¨å¼€å‘å’Œéƒ¨ç½²çš„åº”ç”¨ç¨‹åºä¸Žå…¶æ‰€æœ‰çš„é…ç½®æ–‡ä»¶å’Œä¾èµ–å…³ç³»æ†ç»‘åœ¨ä¸€èµ·ã€‚ è¿™ä¸ªåŒ…ç§°ä¸ºå®¹å™¨ã€‚ çŽ°åœ¨ï¼Œå½“æ‚¨å¸Œæœ›åœ¨å¦ä¸€ä¸ªç³»ç»Ÿä¸Šè¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œå°†éƒ¨ç½²å®¹å™¨ï¼Œè¿™å°†æä¾›ä¸€ä¸ªæ—  bug çš„çŽ¯å¢ƒï¼Œå› ä¸ºæ‰€æœ‰ä¾èµ–é¡¹å’Œåº“éƒ½åŒ…è£…åœ¨ä¸€èµ·ã€‚ æœ€è‘—åçš„é›†è£…ç®±åŒ–çŽ¯å¢ƒæ˜¯ Docker å’Œ Kubernetesã€‚ 4. Difference between virtualization and containerization \4. è™šæ‹ŸåŒ–å’Œé›†è£…ç®±åŒ–çš„åŒºåˆ« Once youâ€™ve explained containerization and virtualization, the next expected question would be differences. The question could either be differences between virtualization and containerization or differences between virtual machines and containers. Either way, this is how you respond. ä¸€æ—¦ä½ è§£é‡Šäº†é›†è£…ç®±åŒ–å’Œè™šæ‹ŸåŒ–ï¼Œä¸‹ä¸€ä¸ªé¢„æœŸçš„é—®é¢˜å°†æ˜¯å·®å¼‚ã€‚ é—®é¢˜å¯èƒ½æ˜¯è™šæ‹ŸåŒ–å’Œé›†è£…ç®±åŒ– / å®¹å™¨ä¹‹é—´çš„åŒºåˆ«ï¼Œä¹Ÿå¯èƒ½æ˜¯è™šæ‹Ÿæœºå’Œå®¹å™¨ä¹‹é—´çš„åŒºåˆ«ã€‚ ä¸ç®¡æ€Žæ ·ï¼Œè¿™å°±æ˜¯ä½ çš„ååº”ã€‚ Containers provide an isolated environment for running the application. The entire user space is explicitly dedicated to the application. Any changes made inside the container is never reflected on the host or even other containers running on the same host. Containers are an abstraction of the application layer. Each container is a different application. å®¹å™¨ä¸ºè¿è¡Œåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªéš”ç¦»çš„çŽ¯å¢ƒã€‚ æ•´ä¸ªç”¨æˆ·ç©ºé—´æ˜¾å¼åœ°ä¸“ç”¨äºŽåº”ç”¨ç¨‹åºã€‚ å®¹å™¨å†…éƒ¨æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¸ä¼šåæ˜ åœ¨è¿è¡Œåœ¨åŒä¸€ä¸»æœºä¸Šçš„ä¸»æœºæˆ–å…¶ä»–å®¹å™¨ä¸Šã€‚ å®¹å™¨æ˜¯åº”ç”¨ç¨‹åºå±‚çš„æŠ½è±¡ã€‚ æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ä¸åŒçš„åº”ç”¨ç¨‹åºã€‚ Whereas in Virtualization, hypervisors provide an entire virtual machine to the guest(including Kernal). Virtual machines are an abstraction of the hardware layer. Each VM is a physical machine. è€Œåœ¨è™šæ‹ŸåŒ–ä¸­ï¼Œè™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¸ºå®¢æˆ·æœºæä¾›æ•´ä¸ªè™šæ‹Ÿæœº(åŒ…æ‹¬ Kernal)ã€‚ è™šæ‹Ÿæœºæ˜¯ç¡¬ä»¶å±‚çš„æŠ½è±¡ã€‚ æ¯ä¸ª VM éƒ½æ˜¯ä¸€ä¸ªç‰©ç†æœºå™¨ã€‚ 5. What is Docker?5. ä»€ä¹ˆæ˜¯ Dockerï¼ŸSince its a Docker interview, there will be an obvious question about what is Docker. Start with a small definition. ç”±äºŽè¿™æ˜¯ä¸€ä¸ªDockerçš„é‡‡è®¿ï¼Œæœ‰ä¸€ä¸ªæ˜Žæ˜¾çš„é—®é¢˜ï¼Œä»€ä¹ˆæ˜¯Dockerã€‚ ä»Žä¸€ä¸ªå°çš„å®šä¹‰å¼€å§‹ã€‚ Docker is a containerization platform which packages your application and all its dependencies together in the form of containers so as to ensure that your application works seamlessly in any environment, be it development, test or production. Docker containers, wrap a piece of software in a complete filesystem that contains everything needed to run: code, runtime, system tools, system libraries, etc. It wraps basically anything that can be installed on a server. This guarantees that the software will always run the same, regardless of its environment. æ˜¯ä¸€ä¸ªé›†è£…ç®±åŒ–å¹³å°ï¼Œå®ƒä»¥å®¹å™¨çš„å½¢å¼å°†ä½ çš„åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–å…³ç³»æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œä»¥ç¡®ä¿ä½ çš„åº”ç”¨ç¨‹åºåœ¨ä»»ä½•çŽ¯å¢ƒä¸‹æ— ç¼å·¥ä½œï¼Œæ— è®ºæ˜¯å¼€å‘ã€æµ‹è¯•è¿˜æ˜¯ç”Ÿäº§çŽ¯å¢ƒã€‚ åœ¨ Docker å®¹å™¨ä¸­ï¼Œå°†ä¸€ä¸ªè½¯ä»¶åŒ…è£…åœ¨ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè¯¥æ–‡ä»¶ç³»ç»ŸåŒ…å«è¿è¡Œæ‰€éœ€çš„ä¸€åˆ‡: ä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“ç­‰ã€‚ å®ƒåŸºæœ¬ä¸ŠåŒ…è£…äº†æ‰€æœ‰å¯ä»¥å®‰è£…åœ¨æœåŠ¡å™¨ä¸Šçš„ä¸œè¥¿ã€‚ è¿™ä¿è¯äº†è½¯ä»¶å°†å§‹ç»ˆè¿è¡Œç›¸åŒçš„ï¼Œä¸ç®¡å®ƒçš„çŽ¯å¢ƒã€‚ 6. What is a Docker Container?6. ä»€ä¹ˆæ˜¯ Docker å®¹å™¨ï¼ŸDocker containers include the application and all of its dependencies. It shares the kernel with other containers, running as isolated processes in user space on the host operating system. Docker containers are not tied to any specific infrastructure: they run on any computer, on any infrastructure, and in any cloud. Docker containers are basically runtime instances of Docker images. Docker å®¹å™¨åŒ…æ‹¬åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹ã€‚ å®ƒä¸Žå…¶ä»–å®¹å™¨å…±äº«å†…æ ¸ï¼Œä½œä¸ºç‹¬ç«‹è¿›ç¨‹åœ¨ä¸»æœºæ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç©ºé—´ä¸­è¿è¡Œã€‚ Docker å®¹å™¨ä¸ç»‘å®šåˆ°ä»»ä½•ç‰¹å®šçš„åŸºç¡€ç»“æž„: å®ƒä»¬è¿è¡Œåœ¨ä»»ä½•è®¡ç®—æœºä¸Šã€ä»»ä½•åŸºç¡€ç»“æž„ä¸Šä»¥åŠä»»ä½•äº‘ä¸­ã€‚ Docker å®¹å™¨åŸºæœ¬ä¸Šæ˜¯ Docker æ˜ åƒçš„è¿è¡Œæ—¶å®žä¾‹ã€‚ 7. What are Docker Images?7. ä»€ä¹ˆæ˜¯ Docker å›¾ç‰‡ï¼ŸWhen you mention Docker images, your very next question will be â€œwhat are Docker imagesâ€. å½“æ‚¨æåˆ° Docker å›¾åƒæ—¶ï¼Œæ‚¨çš„ä¸‹ä¸€ä¸ªé—®é¢˜å°†æ˜¯â€œ Docker å›¾åƒæ˜¯ä»€ä¹ˆâ€ã€‚ Docker image is the source of Docker container. In other words, Docker images are used to create containers. When a user runs a Docker image, an instance of a container is created. These docker images can be deployed to any Docker environment. Docker æ˜ åƒæ˜¯ Docker å®¹å™¨çš„æºä»£ç ã€‚ æ¢å¥è¯è¯´ï¼ŒDocker å›¾åƒç”¨äºŽåˆ›å»ºå®¹å™¨ã€‚ å½“ç”¨æˆ·è¿è¡Œ Docker æ˜ åƒæ—¶ï¼Œå°†åˆ›å»ºå®¹å™¨çš„å®žä¾‹ã€‚ è¿™äº› Docker æ˜ åƒå¯ä»¥éƒ¨ç½²åˆ°ä»»ä½• Docker çŽ¯å¢ƒä¸­ã€‚ 8. What is Docker Hub?8. ä»€ä¹ˆæ˜¯ Docker Hubï¼ŸDocker images create docker containers. There has to be a registry where these docker images live. This registry is Docker Hub. Users can pick up images from Docker Hub and use them to create customized images and containers. Currently, the Docker Hub is the worldâ€™s largest public repository of image containers. Docker æ˜ åƒåˆ›å»º Docker å®¹å™¨ã€‚ å¿…é¡»æœ‰ä¸€ä¸ªæ³¨å†Œè¡¨ï¼Œè¿™äº›ç å¤´å·¥ç¨‹å¸ˆå›¾åƒç”Ÿæ´»ã€‚ è¿™ä¸ªæ³¨å†Œè¡¨æ˜¯ dockerhubã€‚ ç”¨æˆ·å¯ä»¥ä»Ž Docker Hub èŽ·å–å›¾åƒï¼Œå¹¶ç”¨å®ƒä»¬åˆ›å»ºå®šåˆ¶çš„å›¾åƒå’Œé›†è£…ç®±ã€‚ ç›®å‰ï¼Œdockerhub æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„å›¾åƒå®¹å™¨å…¬å…±å­˜å‚¨åº“ã€‚ 9. Explain Docker Architecture?9. è§£é‡Š Docker æž¶æž„ï¼ŸDocker Architecture consists of a Docker Engine which is a client-server application with three major components: Docker æž¶æž„ç”±ä¸€ä¸ª Docker å¼•æ“Žç»„æˆï¼Œå®ƒæ˜¯ä¸€ä¸ªå®¢æˆ·æœº-æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œæœ‰ä¸‰ä¸ªä¸»è¦ç»„ä»¶: A server which is a type of long-running program called a daemon process (the docker command). æœåŠ¡å™¨æ˜¯ä¸€ç§é•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºï¼Œç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹(docker å‘½ä»¤) A REST API which specifies interfaces that programs can use to talk to the daemon and instruct it what to do. ä¸€ä¸ª REST APIï¼Œå®ƒæŒ‡å®šç¨‹åºå¯ä»¥ç”¨æ¥ä¸Žå®ˆæŠ¤è¿›ç¨‹é€šä¿¡å¹¶æŒ‡ç¤ºå®ƒåšä»€ä¹ˆçš„æŽ¥å£ A command line interface (CLI) client (the docker command). å‘½ä»¤è¡ŒæŽ¥å£(CLI)å®¢æˆ·æœº(docker å‘½ä»¤) The CLI uses the Docker REST API to control or interact with the Docker daemon through scripting or direct CLI commands. Many other Docker applications use the underlying API and CLI. Cli ä½¿ç”¨ dockerrestapi é€šè¿‡è„šæœ¬æˆ–ç›´æŽ¥çš„ CLI å‘½ä»¤æŽ§åˆ¶ dockerdaemon æˆ–ä¸Žå…¶äº¤äº’ã€‚ è®¸å¤šå…¶ä»– Docker åº”ç”¨ç¨‹åºä½¿ç”¨åº•å±‚çš„ API å’Œ CLI Refer to this blog, to read more about Docker Architecture. è¯·å‚è€ƒæœ¬åšå®¢ï¼Œäº†è§£æ›´å¤šå…³äºŽ Docker æž¶æž„çš„ä¿¡æ¯ã€‚ 10. What is a Dockerfile?10. ä»€ä¹ˆæ˜¯ Dockerfileï¼ŸLetâ€™s start by giving a small explanation of Dockerfile and proceed by giving examples and commands to support your arguments. è®©æˆ‘ä»¬ä»Žå¯¹ Dockerfile çš„ä¸€ä¸ªå°å°çš„è§£é‡Šå¼€å§‹ï¼Œç„¶åŽé€šè¿‡ä¸¾ä¾‹å’Œå‘½ä»¤æ¥æ”¯æŒä½ çš„è®ºç‚¹ã€‚ Docker can build images automatically by reading the instructions from a file called Dockerfile. A Dockerfile is a text document that contains all the commands a user could call on the command line to assemble an image. Using docker build, users can create an automated build that executes several command-line instructions in succession. å¯ä»¥é€šè¿‡è¯»å–ä¸€ä¸ªåä¸º Dockerfile çš„æ–‡ä»¶ä¸­çš„æŒ‡ä»¤æ¥è‡ªåŠ¨ç”Ÿæˆå›¾åƒã€‚ Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«ç”¨æˆ·å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè°ƒç”¨çš„æ‰€æœ‰å‘½ä»¤æ¥ç»„è£…å›¾åƒã€‚ ä½¿ç”¨ docker æž„å»ºï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºè¿žç»­æ‰§è¡Œå¤šä¸ªå‘½ä»¤è¡ŒæŒ‡ä»¤çš„è‡ªåŠ¨æž„å»ºã€‚ The interviewer does not just expect definitions, hence explain how to use a Dockerfile which comes with experience. Have a look at this tutorial to understand how Dockerfile works. è®¿é—®è€…ä¸åªæ˜¯æœŸæœ›å®šä¹‰ï¼Œå› æ­¤è§£é‡Šå¦‚ä½•ä½¿ç”¨ä¸€ä¸ª Dockerfile éšç€ç»éªŒã€‚ çœ‹ä¸€ä¸‹è¿™ä¸ªæ•™ç¨‹æ¥ç†è§£ Dockerfile æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ 11. Tell us something about Docker Compose.11. ç»™æˆ‘ä»¬è®²è®² Docker ComposeDocker Compose is a YAML file which contains details about the services, networks, and volumes for setting up the Docker application. So, you can use Docker Compose to create separate containers, host them and get them to communicate with each other. Each container will expose a port for communicating with other containers. Docker Compose æ˜¯ä¸€ä¸ª YAML æ–‡ä»¶ï¼Œå®ƒåŒ…å«æœ‰å…³è®¾ç½® Docker åº”ç”¨ç¨‹åºçš„æœåŠ¡ã€ç½‘ç»œå’Œå·çš„è¯¦ç»†ä¿¡æ¯ã€‚ å› æ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ dockercompose åˆ›å»ºå•ç‹¬çš„å®¹å™¨ï¼Œæ‰˜ç®¡å®ƒä»¬å¹¶ä½¿å®ƒä»¬å½¼æ­¤é€šä¿¡ã€‚ æ¯ä¸ªå®¹å™¨å°†å…¬å¼€ä¸€ä¸ªç”¨äºŽä¸Žå…¶ä»–å®¹å™¨é€šä¿¡çš„ç«¯å£ã€‚ 12. What is Docker Swarm?12. ä»€ä¹ˆæ˜¯ Docker Swarmï¼ŸYou are expected to have worked with Docker Swarm as itâ€™s an important concept of Docker. ä½ åº”è¯¥å’Œ Docker Swarm ä¸€èµ·å·¥ä½œï¼Œå› ä¸ºå®ƒæ˜¯ Docker çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚ Docker Swarm is native clustering for Docker. It turns a pool of Docker hosts into a single, virtual Docker host. Docker Swarm serves the standard Docker API, any tool that already communicates with a Docker daemon can use Swarm to transparently scale to multiple hosts. Docker Swarm æ˜¯ Docker çš„æœ¬åœ°é›†ç¾¤ã€‚ å®ƒå°†ä¸€ä¸ª Docker ä¸»æœºæ± è½¬æ¢ä¸ºä¸€ä¸ªå•ä¸€çš„è™šæ‹Ÿ Docker ä¸»æœºã€‚ æœåŠ¡äºŽæ ‡å‡†çš„ Docker APIï¼Œä»»ä½•å·²ç»ä¸Ž Docker å®ˆæŠ¤è¿›ç¨‹é€šä¿¡çš„å·¥å…·éƒ½å¯ä»¥ä½¿ç”¨ Swarm é€æ˜Žåœ°æ‰©å±•åˆ°å¤šä¸ªä¸»æœºã€‚ 13. What is a Docker Namespace?13. ä»€ä¹ˆæ˜¯ Docker åç§°ç©ºé—´ï¼ŸA namespace is one of the Linux features and an important concept of containers. Namespace adds a layer of isolation in containers. Docker provides various namespaces in order to stay portable and not affect the underlying host system. Few namespace types supported by Docker â€“ PID, Mount, IPC, User, Network åç§°ç©ºé—´æ˜¯ Linux çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯å®¹å™¨çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚ å‘½åç©ºé—´åœ¨å®¹å™¨ä¸­æ·»åŠ éš”ç¦»å±‚ã€‚ Docker æä¾›äº†å„ç§åç§°ç©ºé—´ï¼Œä»¥ä¿æŒå¯ç§»æ¤æ€§å¹¶ä¸”ä¸å½±å“åº•å±‚ä¸»æœºç³»ç»Ÿã€‚ Docker-PIDã€ Mountã€ IPCã€ Userã€ Network æ”¯æŒçš„å‘½åç©ºé—´ç±»åž‹å¾ˆå°‘ 14. What is the lifecycle of a Docker Container?14. Docker å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼ŸThis is one of the most popular questions asked in Docker interviews. Docker containers have the following lifecycle: è¿™æ˜¯Dockerè®¿è°ˆä¸­æœ€å—æ¬¢è¿Žçš„é—®é¢˜ä¹‹ä¸€ã€‚ Docker å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹: Create a container åˆ›å»ºä¸€ä¸ªå®¹å™¨ Run the container è¿è¡Œå®¹å™¨ Pause the container(optional) æš‚åœå®¹å™¨(å¯é€‰) Un-pause the container(optional) å–æ¶ˆå®¹å™¨çš„æš‚åœ(å¯é€‰) Start the container å¯åŠ¨å®¹å™¨ Stop the container åœä¸‹é›†è£…ç®± Restart the container é‡æ–°å¯åŠ¨å®¹å™¨ Kill the container å…³é—­é›†è£…ç®± Destroy the container é”€æ¯é›†è£…ç®± 15. What is Docker Machine?15. ä»€ä¹ˆæ˜¯ Docker Machineï¼ŸDocker machine is a tool that lets you install Docker Engine on virtual hosts. These hosts can now be managed using the docker-machine commands. Docker machine also lets you provision Docker Swarm Clusters. Docker æœºå™¨æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥è®©æ‚¨åœ¨è™šæ‹Ÿä¸»æœºä¸Šå®‰è£… Docker Engineã€‚ çŽ°åœ¨å¯ä»¥ä½¿ç”¨ docker-machine å‘½ä»¤ç®¡ç†è¿™äº›ä¸»æœºã€‚ Docker æœºå™¨è¿˜å¯ä»¥è®©ä½ æä¾› Docker ç¾¤é›†ã€‚ Docker Basic CommandsåŸºæœ¬å‘½ä»¤Once youâ€™ve aced the basic conceptual questions, the interviewer will increase the difficulty level. So letâ€™s move on to the next section of this Docker Interview Questions article. This section talks about the commands that are very common amongst docker users. ä¸€æ—¦ä½ é€šè¿‡äº†åŸºæœ¬çš„æ¦‚å¿µæ€§é—®é¢˜ï¼Œé¢è¯•å®˜å°±ä¼šå¢žåŠ éš¾åº¦ã€‚ é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬è¿›å…¥è¿™ç¯‡æ–‡ç« çš„ä¸‹ä¸€éƒ¨åˆ†ã€‚ æœ¬èŠ‚å°†è®¨è®ºåœ¨ docker ç”¨æˆ·ä¸­éžå¸¸å¸¸è§çš„å‘½ä»¤ã€‚ 16. How to check for Docker Client and Docker Server version?16. å¦‚ä½•æ£€æŸ¥ Docker å®¢æˆ·ç«¯å’Œ Docker æœåŠ¡å™¨ç‰ˆæœ¬ï¼ŸThe following command gives you information about Docker Client and Server versions: ä¸‹é¢çš„å‘½ä»¤æä¾›å…³äºŽ Docker å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç‰ˆæœ¬çš„ä¿¡æ¯: 1$ docker version $docker ç‰ˆæœ¬ 17. How do you get the number of containers running, paused and stopped?17. å¦‚ä½•è®©è¿è¡Œã€æš‚åœå’Œåœæ­¢çš„å®¹å™¨æ•°é‡ï¼ŸYou can use the following command to get detailed information about the docker installed on your system. æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥èŽ·å–æœ‰å…³ç³»ç»Ÿä¸Šå®‰è£…çš„ docker çš„è¯¦ç»†ä¿¡æ¯ã€‚ 1$ docker info Docker ä¿¡æ¯ You can get the number of containers running, paused, stopped, the number of images and a lot more. æ‚¨å¯ä»¥èŽ·å¾—è¿è¡Œã€æš‚åœã€åœæ­¢çš„å®¹å™¨æ•°é‡ã€æ˜ åƒæ•°é‡ç­‰ç­‰ã€‚ 18. If you vaguely remember the command and youâ€™d like to confirm it, how will you get help on that particular command?å›¾18ã€‚ å¦‚æžœæ‚¨ä¾ç¨€è®°å¾—è¿™ä¸ªå‘½ä»¤ï¼Œå¹¶ä¸”æƒ³è¦ç¡®è®¤å®ƒï¼Œé‚£ä¹ˆæ‚¨å°†å¦‚ä½•èŽ·å¾—å…³äºŽè¿™ä¸ªç‰¹å®šå‘½ä»¤çš„å¸®åŠ©å‘¢ï¼ŸThe following command is very useful as it gives you help on how to use a command, the syntax, etc. ä¸‹é¢çš„å‘½ä»¤éžå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸ºæ‚¨æä¾›äº†å¦‚ä½•ä½¿ç”¨å‘½ä»¤ã€è¯­æ³•ç­‰æ–¹é¢çš„å¸®åŠ©ã€‚ 1$ docker --help Dockerï¼Œæ•‘å‘½ The above command lists all Docker commands. If you need help with one specific command, you can use the following syntax: ä¸Šé¢çš„å‘½ä»¤åˆ—å‡ºäº†æ‰€æœ‰çš„ Docker å‘½ä»¤ã€‚ å¦‚æžœæ‚¨éœ€è¦æŸä¸ªç‰¹å®šå‘½ä»¤çš„å¸®åŠ©ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•: 1$ docker --help Docker å‘½ä»¤ â€” æ•‘å‘½ 19. How to login into docker repository?19. å¦‚ä½•ç™»å½•åˆ° docker ä»“åº“ï¼ŸYou can use the following command to login into hub.docker.com: ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç™»å½•åˆ° hub.docker. com: 1$ docker login $docker ç™»å½• Youâ€™ll be prompted for your username and password, insert those and congratulations, youâ€™re logged in. ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åŽæ’å…¥è¿™äº›å†…å®¹ï¼Œæ­å–œæ‚¨ï¼Œæ‚¨å·²ç»ç™»å½•ã€‚ 20. If you wish to use a base image and make modifications or personalize it, how do you do that?å›¾20ã€‚ å¦‚æžœæ‚¨å¸Œæœ›ä½¿ç”¨åŸºç¡€å›¾åƒå¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹æˆ–ä¸ªæ€§åŒ–ï¼Œæ‚¨å°†å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ï¼ŸYou pull an image from docker hub onto your local system å°†ä¸€ä¸ªå›¾åƒä»Ž dockerhub æ‹‰åˆ°æœ¬åœ°ç³»ç»Ÿä¸Š Itâ€™s one simple command to pull an image from docker hub: è¿™æ˜¯ä¸€ä¸ªä»Ž docker hub ä¸­æå–å›¾åƒçš„ç®€å•å‘½ä»¤: 1$ docker pull â€œ docker pull image nameâ€ 21. How do you create a docker container from an image?21. å¦‚ä½•ä»Žå›¾åƒåˆ›å»ºä¸€ä¸ª docker å®¹å™¨ï¼ŸPull an image from docker repository with the above command and run it to create a container. Use the following command: ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤ä»Ž docker å­˜å‚¨åº“ä¸­æ‹‰å‡ºä¸€ä¸ªæ˜ åƒï¼Œå¹¶è¿è¡Œå®ƒæ¥åˆ›å»ºä¸€ä¸ªå®¹å™¨ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: 1$ docker run -it -d Docker run-it-d image name Most probably the next question would be, what does the â€˜-dâ€™ flag mean in the command? ä¸‹ä¸€ä¸ªé—®é¢˜å¾ˆå¯èƒ½æ˜¯ï¼Œå‘½ä»¤ä¸­çš„â€œ-dâ€æ ‡å¿—æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ -d means the container needs to start in the detached mode. Explain a little about the detach mode. Have a look at this blog to get a better understanding of different docker commands. D è¡¨ç¤ºå®¹å™¨éœ€è¦ä»¥åˆ†ç¦»æ¨¡å¼å¯åŠ¨ã€‚ è§£é‡Šä¸€ä¸‹åˆ†ç¦»æ¨¡å¼ã€‚ çœ‹çœ‹è¿™ä¸ªåšå®¢ï¼Œå¯ä»¥æ›´å¥½åœ°ç†è§£ä¸åŒçš„ docker å‘½ä»¤ã€‚ 22. How do you list all the running containers?22. ä½ å¦‚ä½•åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„é›†è£…ç®±ï¼ŸThe following command lists down all the running containers: ä¸‹é¢çš„å‘½ä»¤åˆ—å‡ºäº†æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨: 1$ docker ps ç å¤´å·¥äºº 23. Suppose you have 3 containers running and out of these, you wish to access one of them. How do you access a running container?å›¾23ã€‚ å‡è®¾æ‚¨æœ‰3ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œæ‚¨å¸Œæœ›è®¿é—®å…¶ä¸­çš„ä¸€ä¸ªã€‚ å¦‚ä½•è®¿é—®æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼ŸThe following command lets us access a running container: ä¸‹é¢çš„å‘½ä»¤å…è®¸æˆ‘ä»¬è®¿é—®ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨: 1$ docker exec -it bash $docker exec-it å®¹å™¨ id bash The exec command lets you get inside a container and work with it. Exec å‘½ä»¤å…è®¸æ‚¨è¿›å…¥å®¹å™¨å¹¶ä½¿ç”¨å®ƒã€‚ 24. How to start, stop and kill a container? \24. å¦‚ä½•å¯åŠ¨ã€åœæ­¢å’Œæ€æ­»ä¸€ä¸ªå®¹å™¨ï¼Ÿ The following command is used to start a docker container: ä¸‹é¢çš„å‘½ä»¤ç”¨äºŽå¯åŠ¨ä¸€ä¸ª docker å®¹å™¨: 1$ docker start $docker start container id and the following for stopping a running container: ä»¥åŠä»¥ä¸‹ç”¨äºŽé˜»æ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨: 1$ docker stop Docker stop container id kill a container with the following command: ç”¨ä»¥ä¸‹å‘½ä»¤æ€æ­»ä¸€ä¸ªå®¹å™¨: 1$ docker kill Docker æ€æ­»é›†è£…ç®± id 25. Can you use a container, edit it, and update it? Also, how do you make it a new and store it on the local system?å›¾25ã€‚ ä½ èƒ½ä½¿ç”¨ä¸€ä¸ªå®¹å™¨ï¼Œç¼–è¾‘å®ƒï¼Œå¹¶æ›´æ–°å®ƒå—ï¼Ÿ å¦å¤–ï¼Œå¦‚ä½•ä½¿å®ƒæˆä¸ºä¸€ä¸ªæ–°çš„å¹¶å°†å…¶å­˜å‚¨åœ¨æœ¬åœ°ç³»ç»Ÿä¸­ï¼ŸOf course, you can use a container, edit it and update it. This sounds complicated but its actually just one command. å½“ç„¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå®¹å™¨ï¼Œç¼–è¾‘å®ƒå¹¶æ›´æ–°å®ƒã€‚ è¿™å¬èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†å®žé™…ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªå‘½ä»¤ã€‚ 1$ docker commit $docker commit conatainer id username / imageename 26. Once youâ€™ve worked with an image, how do you push it to docker hub?å›¾26ã€‚ ä¸€æ—¦æ‚¨ä½¿ç”¨äº†ä¸€ä¸ªæ˜ åƒï¼Œæ‚¨å¦‚ä½•å°†å®ƒæŽ¨é€åˆ° dockerhubï¼Ÿ1$ docker push $docker push ç”¨æˆ·å / å›¾åƒåç§° 27. How to delete a stopped container?27. å¦‚ä½•åˆ é™¤å·²åœæ­¢çš„å®¹å™¨ï¼ŸUse the following command to delete a stopped container: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤å·²åœæ­¢çš„å®¹å™¨: 1$ docker rm $docker rm å®¹å™¨ id 28. How to delete an image from the local storage system?28. å¦‚ä½•ä»Žæœ¬åœ°å­˜å‚¨ç³»ç»Ÿä¸­åˆ é™¤æ˜ åƒï¼ŸThe following command lets you delete an image from the local system: ä¸‹é¢çš„å‘½ä»¤å…è®¸æ‚¨ä»Žæœ¬åœ°ç³»ç»Ÿä¸­åˆ é™¤å›¾åƒ: 1$ docker rmi $docker rmi image-id 29. How to build a Dockerfile?29. å¦‚ä½•å»ºç«‹ä¸€ä¸ª Dockerfileï¼ŸOnce youâ€™ve written a Dockerfile, you need to build it to create an image with those specifications. Use the following command to build a Dockerfile: ä¸€æ—¦ç¼–å†™äº† Dockerfileï¼Œå°±éœ€è¦æž„å»ºå®ƒæ¥ä½¿ç”¨è¿™äº›è§„èŒƒåˆ›å»ºä¸€ä¸ªæ˜ åƒã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æž„å»ºä¸€ä¸ª Dockerfile: 1$ docker build $docker build path to docker file The next question would be when do you use â€œ.dockerfile_nameâ€ and when to use the entire path? ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯ä½ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨â€œã€‚ â€œ dockerfile åç§°â€å’Œä½•æ—¶ä½¿ç”¨æ•´ä¸ªè·¯å¾„ï¼Ÿ Use â€œ.dockerfile_nameâ€ when the dockerfile exits in the same file directory and you use the entire path if it lives somewhere else. ä½¿ç”¨â€œã€‚ å¦‚æžœ dockerfile å­˜åœ¨äºŽåŒä¸€ä¸ªæ–‡ä»¶ç›®å½•ä¸­ï¼Œå¹¶ä¸”å¦‚æžœå®ƒå­˜åœ¨äºŽå…¶ä»–åœ°æ–¹ï¼Œåˆ™ä½¿ç”¨æ•´ä¸ªè·¯å¾„ï¼Œåˆ™ä½¿ç”¨â€œ dockerfile nameâ€ã€‚ 30. Do you know why docker system prune is used? What does it do?å›¾30ã€‚ æ‚¨çŸ¥é“ä¸ºä»€ä¹ˆä½¿ç”¨ docker system prune å—ï¼Ÿ å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ1$ docker system prune $docker system prune The above command is used to remove all the stopped containers, all the networks that are not used, all dangling images and all build caches. Itâ€™s one of the most useful docker commands. ä¸Šé¢çš„å‘½ä»¤ç”¨äºŽåˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨ã€æ‰€æœ‰æœªä½¿ç”¨çš„ç½‘ç»œã€æ‰€æœ‰æ‚¬ç©ºçš„å›¾åƒå’Œæ‰€æœ‰æž„å»ºç¼“å­˜ã€‚ è¿™æ˜¯æœ€æœ‰ç”¨çš„ docker å‘½ä»¤ä¹‹ä¸€ã€‚ Docker Advanced QuestionsDockeré«˜çº§é—®é¢˜Once the interviewer knows that youâ€™re familiar with the Docker commands, he/she will start asking about practical applications This section of Docker Interview Questions consists of questions that youâ€™ll only be able to answer when youâ€™ve gained some experience working with Docker. ä¸€æ—¦é¢è¯•å®˜çŸ¥é“ä½ ç†Ÿæ‚‰ Docker å‘½ä»¤ï¼Œä»– / å¥¹å°±ä¼šå¼€å§‹è¯¢é—®å…³äºŽå®žé™…åº”ç”¨çš„é—®é¢˜ã€‚ 31. Will you lose your data, when a docker container exists?31. å½“å­˜åœ¨ä¸€ä¸ª docker å®¹å™¨æ—¶ï¼Œæ‚¨ä¼šä¸¢å¤±æ•°æ®å—ï¼ŸNo, you wonâ€™t lose any data when Docker container exits. Any data that your application writes to the container gets preserved on the disk until you explicitly delete the container. The file system for the container persists even after the container halts. ä¸ï¼Œå½“ Docker å®¹å™¨é€€å‡ºæ—¶ï¼Œæ‚¨ä¸ä¼šä¸¢å¤±ä»»ä½•æ•°æ®ã€‚ åœ¨æ˜¾å¼åˆ é™¤å®¹å™¨ä¹‹å‰ï¼Œåº”ç”¨ç¨‹åºå†™å…¥å®¹å™¨çš„ä»»ä½•æ•°æ®éƒ½ä¼šä¿å­˜åœ¨ç£ç›˜ä¸Šã€‚ å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿç”šè‡³åœ¨å®¹å™¨åœæ­¢ä¹‹åŽä»ç„¶å­˜åœ¨ã€‚ 32. Where all do you think Docker is being used?32. ä½ è®¤ä¸ºDockeråœ¨å“ªé‡Œå·¥ä½œï¼ŸWhen asked such a question, respond by talking about applications of Docker. Docker is being used in the following areas: å½“è¢«é—®åˆ°è¿™æ ·çš„é—®é¢˜æ—¶ï¼Œå›žç­”è¯´è¯´ Docker çš„åº”ç”¨ã€‚ Dockerè¢«ç”¨äºŽä»¥ä¸‹é¢†åŸŸ: Simplifying configuration: Docker lets you put your environment and configuration into code and deploy it. ç®€åŒ–é…ç½®: Docker å…è®¸æ‚¨å°†çŽ¯å¢ƒå’Œé…ç½®æ”¾å…¥ä»£ç ä¸­å¹¶éƒ¨ç½²å®ƒ Code Pipeline Management: There are different systems used for development and production. As the code travels from development to testing to production, it goes through a difference in the environment. Docker helps in maintaining the code pipeline consistency. ä»£ç ç®¡é“ç®¡ç†: æœ‰ä¸åŒçš„ç³»ç»Ÿç”¨äºŽå¼€å‘å’Œç”Ÿäº§ã€‚ éšç€ä»£ç ä»Žå¼€å‘åˆ°æµ‹è¯•å†åˆ°ç”Ÿäº§ï¼Œå®ƒç»åŽ†äº†çŽ¯å¢ƒçš„ä¸åŒã€‚ Docker å¸®åŠ©ç»´æŠ¤ä»£ç ç®¡é“çš„ä¸€è‡´æ€§ Developer Productivity: Using Docker for development gives us two things â€“ Weâ€™re closer to production and development environment is built faster. å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›: ä½¿ç”¨ Docker è¿›è¡Œå¼€å‘å¯ä»¥å¸¦ç»™æˆ‘ä»¬ä¸¤ä»¶äº‹æƒ…â€”â€”æˆ‘ä»¬ç¦»ç”Ÿäº§çŽ¯å¢ƒæ›´è¿‘äº†ï¼Œå¼€å‘çŽ¯å¢ƒæž„å»ºå¾—æ›´å¿«äº† Application Isolation: As containers are applications wrapped together with all dependencies, your apps are isolated. They can work by themselves on any hardware that supports Docker. åº”ç”¨ç¨‹åºéš”ç¦»: ç”±äºŽå®¹å™¨æ˜¯åŒ…è£…åœ¨æ‰€æœ‰ä¾èµ–é¡¹ä¸­çš„åº”ç”¨ç¨‹åºï¼Œå› æ­¤åº”ç”¨ç¨‹åºæ˜¯éš”ç¦»çš„ã€‚ å®ƒä»¬å¯ä»¥åœ¨ä»»ä½•æ”¯æŒ Docker çš„ç¡¬ä»¶ä¸Šç‹¬ç«‹å·¥ä½œ Debugging Capabilities: Docker supports various debugging tools that are not specific to containers but work well with containers. è°ƒè¯•èƒ½åŠ›: Docker æ”¯æŒå„ç§è°ƒè¯•å·¥å…·ï¼Œè¿™äº›å·¥å…·å¹¶ä¸ç‰¹å®šäºŽå®¹å™¨ï¼Œä½†å¯ä»¥å¾ˆå¥½åœ°ä¸Žå®¹å™¨ä¸€èµ·å·¥ä½œ Multi-tenancy: Docker lets you have multi-tenant applications avoiding redundancy in your codes and deployments. å¤šç§Ÿæˆ·: Docker å…è®¸æ‚¨æ‹¥æœ‰å¤šç§Ÿæˆ·åº”ç”¨ç¨‹åºï¼Œä»Žè€Œé¿å…ä»£ç å’Œéƒ¨ç½²ä¸­çš„å†—ä½™ Rapid Deployment: Docker eliminates the need to boost an entire OS from scratch, reducing the deployment time. å¿«é€Ÿéƒ¨ç½²: Docker æ— éœ€ä»Žå¤´å¼€å§‹å¢žå¼ºæ•´ä¸ªæ“ä½œç³»ç»Ÿï¼Œå‡å°‘äº†éƒ¨ç½²æ—¶é—´ 33. How is Docker different from other containerization methods?33. Docker ä¸Žå…¶ä»–é›†è£…ç®±åŒ– / æœåŠ¡å™¨æ–¹æ³•æœ‰ä»€ä¹ˆä¸åŒï¼ŸDocker containers are very easy to deploy in any cloud platform. It can get more applications running on the same hardware when compared to other technologies, it makes it easy for developers to quickly create, ready-to-run containerized applications and it makes managing and deploying applications much easier. You can even share containers with your applications. Docker å®¹å™¨éžå¸¸å®¹æ˜“éƒ¨ç½²åœ¨ä»»ä½•äº‘å¹³å°ä¸Šã€‚ ä¸Žå…¶ä»–æŠ€æœ¯ç›¸æ¯”ï¼Œå®ƒå¯ä»¥è®©æ›´å¤šçš„åº”ç”¨ç¨‹åºåœ¨åŒä¸€ç¡¬ä»¶ä¸Šè¿è¡Œï¼Œå®ƒä½¿å¼€å‘äººå‘˜æ›´å®¹æ˜“å¿«é€Ÿåˆ›å»ºå³æ—¶å¯è¿è¡Œçš„é›†è£…ç®±åŒ–åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç®¡ç†å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºæ›´åŠ å®¹æ˜“ã€‚ æ‚¨ç”šè‡³å¯ä»¥ä¸Žåº”ç”¨ç¨‹åºå…±äº«å®¹å™¨ã€‚ If you have some more points to add you can do that but make sure the above explanation is there in your answer. å¦‚æžœä½ è¿˜æœ‰æ›´å¤šçš„è¦ç‚¹è¦è¡¥å……ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼Œä½†æ˜¯è¦ç¡®ä¿ä¸Šé¢çš„è§£é‡Šåœ¨ä½ çš„ç­”æ¡ˆé‡Œã€‚ 34. Can I use JSON instead of YAML for my compose file in Docker?å›¾34ã€‚ æˆ‘æ˜¯å¦å¯ä»¥åœ¨ Docker ä¸­ä½¿ç”¨ JSON è€Œä¸æ˜¯ YAML ä½œä¸ºæ’°å†™æ–‡ä»¶ï¼ŸYou can use JSON instead of YAML for your compose file, to use JSON file with compose, specify the JSON filename to use, for eg: ä½ å¯ä»¥ä½¿ç”¨ JSON ä»£æ›¿ YAML ä½œä¸ºæ’°å†™æ–‡ä»¶ï¼Œä½¿ç”¨ JSON æ–‡ä»¶ä½œä¸ºæ’°å†™æ–‡ä»¶ï¼ŒæŒ‡å®š JSON æ–‡ä»¶åï¼Œä¾‹å¦‚: 1$ docker-compose -f docker-compose.json up $docker-compose-f docker-compose. json up 35. How have you used Docker in your previous position?35. ä½ ä¹‹å‰çš„å·¥ä½œæ˜¯æ€Žä¹ˆåˆ©ç”¨ Docker çš„ï¼ŸExplain how you have used Docker to help rapid deployment. Explain how you have scripted Docker and used it with other tools like Puppet, Chef or Jenkins. If you have no past practical experience in Docker and instead have experience with other tools in a similar space, be honest and explain the same. In this case, it makes sense if you can compare other tools to Docker in terms of functionality. è§£é‡Šæ‚¨å¦‚ä½•ä½¿ç”¨ Docker æ¥å¸®åŠ©å¿«é€Ÿéƒ¨ç½²ã€‚ è§£é‡Šä¸€ä¸‹ä½ æ˜¯å¦‚ä½•ç¼–å†™ Docker çš„è„šæœ¬å¹¶ä¸Ž Puppetã€ Chef æˆ– Jenkins ç­‰å…¶ä»–å·¥å…·ä¸€èµ·ä½¿ç”¨çš„ã€‚ å¦‚æžœä½ å¯¹ Docker æ²¡æœ‰è¿‡åŽ»çš„å®žè·µç»éªŒï¼Œè€Œæ˜¯åœ¨ç±»ä¼¼é¢†åŸŸæœ‰è¿‡å…¶ä»–å·¥å…·çš„ç»éªŒï¼Œè¯·è¯šå®žåœ°è§£é‡Šã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æžœæ‚¨å¯ä»¥å°†å…¶ä»–å·¥å…·ä¸Ž Docker åœ¨åŠŸèƒ½æ–¹é¢è¿›è¡Œæ¯”è¾ƒï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚ 36. How far do Docker containers scale? Are there any requirements for the same?å›¾36ã€‚ Dockeré›†è£…ç®±çš„è§„æ¨¡æœ‰å¤šå¤§ï¼Ÿ æ˜¯å¦æœ‰ç›¸åŒçš„è¦æ±‚ï¼ŸLarge web deployments like Google and Twitter and platform providers such as Heroku and dotCloud, all run on container technology. Containers can be scaled to hundreds of thousands or even millions of them running in parallel. Talking about requirements, containers require the memory and the OS at all the times and a way to use this memory efficiently when scaled. åƒ Google å’Œ Twitter è¿™æ ·çš„å¤§åž‹ web éƒ¨ç½²ï¼Œä»¥åŠ Heroku å’Œ dotCloud è¿™æ ·çš„å¹³å°æä¾›å•†ï¼Œéƒ½è¿è¡Œåœ¨å®¹å™¨æŠ€æœ¯ä¸Šã€‚ å®¹å™¨å¯ä»¥å¹¶è¡Œæ‰©å±•åˆ°æ•°åä¸‡ç”šè‡³æ•°ç™¾ä¸‡ä¸ªã€‚ è¯´åˆ°éœ€æ±‚ï¼Œå®¹å™¨åœ¨ä»»ä½•æ—¶å€™éƒ½éœ€è¦å†…å­˜å’Œæ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨ç¼©æ”¾æ—¶èƒ½å¤Ÿæœ‰æ•ˆåœ°ä½¿ç”¨è¿™äº›å†…å­˜ã€‚ 37. What platforms does docker run on?37. docker åœ¨ä»€ä¹ˆå¹³å°ä¸Šè¿è¡Œï¼ŸThis is a very straightforward question but can get tricky. Do some company research before going for the interview and find out how the company is using Docker. Make sure you mention the platform company is using in this answer. è¿™æ˜¯ä¸€ä¸ªéžå¸¸ç›´æŽ¥çš„é—®é¢˜ï¼Œä½†å¯èƒ½ä¼šå˜å¾—æ£˜æ‰‹ã€‚ åœ¨å‚åŠ é¢è¯•ä¹‹å‰åšä¸€äº›å…¬å¸è°ƒæŸ¥ï¼Œçœ‹çœ‹å…¬å¸æ˜¯å¦‚ä½•ä½¿ç”¨ Docker çš„ã€‚ ç¡®ä¿ä½ åœ¨è¿™ä¸ªç­”æ¡ˆä¸­æåˆ°äº†å¹³å°å…¬å¸æ­£åœ¨ä½¿ç”¨çš„å¹³å°ã€‚ Docker runs on various Linux administration: è¿è¡Œåœ¨ä¸åŒçš„ Linux ç®¡ç†ç³»ç»Ÿä¸Š: Ubuntu 12.04, 13.04 et al 12.04,13.04 et al Fedora 19/20+ Fedora 19 / 20 + RHEL 6.5+ 6.5 + CentOS 6+ 6 + Gentoo ArchLinux openSUSE 12.3+ 12.3 + CRUX 3.0+ Crux 3.0 + It can also be used in production with Cloud platforms with the following services: å®ƒä¹Ÿå¯ä»¥åœ¨äº‘å¹³å°ä¸Šä½¿ç”¨ï¼Œæä¾›ä»¥ä¸‹æœåŠ¡: Amazon EC2 äºšé©¬é€Š EC2 Amazon ECS äºšé©¬é€Š ECS Google Compute Engine è°·æ­Œè®¡ç®—å¼•æ“Ž Microsoft Azure å¾®è½¯ Azure Rackspace 38. Is there a way to identify the status of a Docker container?38. æ˜¯å¦æœ‰åŠžæ³•è¯†åˆ« Docker å®¹å™¨çš„çŠ¶æ€ï¼ŸThere are six possible states a container can be at any given point â€“ Created, Running, Paused, Restarting, Exited, Dead. æœ‰å…­ç§å¯èƒ½çš„çŠ¶æ€ï¼Œå®¹å™¨å¯ä»¥åœ¨ä»»ä½•ç»™å®šçš„ç‚¹-åˆ›å»ºï¼Œè¿è¡Œï¼Œæš‚åœï¼Œé‡æ–°å¯åŠ¨ï¼Œé€€å‡ºï¼Œæ­»äº¡ã€‚ Use the following command to check for docker state at any given point: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ä»»ä½•ç»™å®šç‚¹çš„ docker çŠ¶æ€: 1$ docker ps ç å¤´å·¥äºº The above command lists down only running containers by default. To look for all containers, use the following command: ä¸Šé¢çš„å‘½ä»¤é»˜è®¤åªåˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚ è¦æŸ¥æ‰¾æ‰€æœ‰å®¹å™¨ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: 1$ docker ps -a ç å¤´å·¥äºº a 39. Can you remove a paused container from Docker?39. ä½ èƒ½ä»Ž Docker ä¸­ç§»é™¤æš‚åœçš„å®¹å™¨å—ï¼ŸThe answer is no. You cannot remove a paused container. The container has to be in the stopped state before it can be removed. ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚ æ— æ³•ç§»é™¤å·²æš‚åœçš„å®¹å™¨ã€‚ å®¹å™¨å¿…é¡»å¤„äºŽåœæ­¢çŠ¶æ€æ‰èƒ½è¢«åˆ é™¤ã€‚ 40. Can a container restart by itself?40. å®¹å™¨å¯ä»¥è‡ªåŠ¨é‡å¯å—ï¼ŸNo, itâ€™s not possible for a container to restart by itself. By default the flag -restart is set to false. ä¸ï¼Œå®¹å™¨ä¸å¯èƒ½è‡ªå·±é‡æ–°å¯åŠ¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œflag-restart è®¾ç½®ä¸º falseã€‚ 41. Is it better to directly remove the container using the rm command or stop the container followed by remove container?41. ä½¿ç”¨ rm å‘½ä»¤ç›´æŽ¥ç§»é™¤å®¹å™¨ï¼Œè¿˜æ˜¯å…ˆåœæ­¢å®¹å™¨ï¼Œç„¶åŽç§»é™¤å®¹å™¨ï¼ŸIts always better to stop the container and then remove it using the remove command. æœ€å¥½åœæ­¢å®¹å™¨ï¼Œç„¶åŽä½¿ç”¨ remove å‘½ä»¤ç§»é™¤å®ƒã€‚ 12$ docker stop ``$ docker rm -f $docker stop coontainer id $docker rm-f container id Stopping the container and then removing it will allow sending SIG_HUP signal to recipients. This will ensure that all the containers have enough time to clean up their tasks. This method is considered a good practice, avoiding unwanted errors. åœæ­¢å®¹å™¨ï¼Œç„¶åŽåˆ é™¤å®ƒå°†å…è®¸å‘é€ SIG hup ä¿¡å·ç»™æ”¶ä»¶äººã€‚ è¿™å°†ç¡®ä¿æ‰€æœ‰å®¹å™¨æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¸…ç†å®ƒä»¬çš„ä»»åŠ¡ã€‚ è¿™ç§æ–¹æ³•è¢«è®¤ä¸ºæ˜¯ä¸€ç§å¾ˆå¥½çš„å®žè·µï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„é”™è¯¯ã€‚ 42. Will cloud overtake the use of Containerization?42. äº‘è®¡ç®—ä¼šå–ä»£é›†è£…ç®±åŒ–è®¡ç®—å—ï¼ŸDocker containers are gaining popularity but at the same time, Cloud services are giving a good fight. In my personal opinion, Docker will never be replaced by Cloud. Using cloud services with containerization will definitely hype the game. Organizations need to take their requirements and dependencies into consideration into the picture and decide whatâ€™s best for them. Most of the companies have integrated Docker with the cloud. This way they can make the best out of both the technologies. ç å¤´å®¹å™¨æ­£åœ¨èŽ·å¾—æ™®åŠï¼Œä½†ä¸Žæ­¤åŒæ—¶ï¼Œäº‘æœåŠ¡æ­£åœ¨è¿›è¡Œä¸€åœºæ¿€çƒˆçš„æˆ˜æ–—ã€‚ åœ¨æˆ‘ä¸ªäººçœ‹æ¥ï¼ŒDockeræ°¸è¿œä¸ä¼šè¢«äº‘è®¡ç®—å–ä»£ã€‚ ä½¿ç”¨é›†è£…ç®±åŒ–äº‘æœåŠ¡è‚¯å®šä¼šå¤§è‚†å®£ä¼ è¿™ä¸ªæ¸¸æˆã€‚ ç»„ç»‡éœ€è¦è€ƒè™‘ä»–ä»¬çš„éœ€æ±‚å’Œä¾èµ–æ€§ï¼Œå¹¶å†³å®šä»€ä¹ˆå¯¹ä»–ä»¬æœ€å¥½ã€‚ å¤§å¤šæ•°å…¬å¸å·²ç»å°† Docker æ•´åˆåˆ°äº†äº‘ä¸­ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä»–ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨è¿™ä¸¤ç§æŠ€æœ¯ã€‚ 43. How many containers can run per host?43. æ¯å°ä¸»æœºå¯ä»¥è¿è¡Œå¤šå°‘ä¸ªå®¹å™¨ï¼ŸThere can be as many containers as you wish per host. Docker does not put any restrictions on it. But you need to consider every container needs storage space, CPU and memory which the hardware needs to support. You also need to consider the application size. Containers are considered to be lightweight but very dependant on the host OS. æ¯ä¸ªä¸»æœºå¯ä»¥æœ‰ä»»æ„å¤šçš„å®¹å™¨ã€‚ Dockerå¯¹æ­¤æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚ ä½†æ˜¯æ‚¨éœ€è¦è€ƒè™‘åˆ°æ¯ä¸ªå®¹å™¨éƒ½éœ€è¦ç¡¬ä»¶æ”¯æŒçš„å­˜å‚¨ç©ºé—´ã€ CPU å’Œå†…å­˜ã€‚ æ‚¨è¿˜éœ€è¦è€ƒè™‘åº”ç”¨ç¨‹åºçš„å¤§å°ã€‚ å®¹å™¨è¢«è®¤ä¸ºæ˜¯è½»é‡çº§çš„ï¼Œä½†æ˜¯éžå¸¸ä¾èµ–äºŽä¸»æœºæ“ä½œç³»ç»Ÿã€‚ 44. Is it a good practice to run stateful applications on Docker?44. åœ¨ Docker ä¸Šè¿è¡Œæœ‰çŠ¶æ€åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªå¥½çš„å®žè·µå—ï¼ŸThe concept behind stateful applications is that they store their data onto the local file system. You need to decide to move the application to another machine, retrieving data becomes painful. I honestly would not prefer running stateful applications on Docker. æœ‰çŠ¶æ€åº”ç”¨ç¨‹åºèƒŒåŽçš„æ¦‚å¿µæ˜¯å®ƒä»¬å°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ æ‚¨éœ€è¦å†³å®šå°†åº”ç”¨ç¨‹åºç§»åŠ¨åˆ°å¦ä¸€å°è®¡ç®—æœºï¼Œæ£€ç´¢æ•°æ®å°†å˜å¾—éžå¸¸ç—›è‹¦ã€‚ è€å®žè¯´ï¼Œæˆ‘ä¸å–œæ¬¢åœ¨ Docker ä¸Šè¿è¡Œæœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºã€‚ 45. Suppose you have an application that has many dependant services. Will docker compose wait for the current container to be ready to move to the running of the next service?45. å‡è®¾æ‚¨æœ‰ä¸€ä¸ªå…·æœ‰è®¸å¤šä¾èµ–æœåŠ¡çš„åº”ç”¨ç¨‹åºã€‚ Docker compose æ˜¯å¦ä¼šç­‰å¾…å½“å‰å®¹å™¨å‡†å¤‡å¥½è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªæœåŠ¡çš„è¿è¡Œï¼ŸThe answer is yes. Docker compose always runs in the dependency order. These dependencies are specifications like depends_on, links, volumes_from, etc. ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ Docker ç¼–å†™æ€»æ˜¯æŒ‰ç…§ä¾èµ–å…³ç³»é¡ºåºè¿è¡Œã€‚ è¿™äº›ä¾èµ–å…³ç³»æ˜¯è¯¸å¦‚ä¾èµ–ã€é“¾æŽ¥ã€å·ä¹‹ç±»çš„è§„èŒƒã€‚ 46. How will you monitor Docker in production?46. ä½ å°†å¦‚ä½•ç›‘æŽ§ç”Ÿäº§ä¸­çš„ Dockerï¼ŸDocker provides functionalities like docker stats and docker events to monitor docker in production. Docker stats provides CPU and memory usage of the container. Docker events provide information about the activities taking place in the docker daemon. Docker æä¾›äº†ç±»ä¼¼ Docker ç»Ÿè®¡å’Œ Docker äº‹ä»¶çš„åŠŸèƒ½ï¼Œä»¥ç›‘è§†ç”Ÿäº§ä¸­çš„ Dockerã€‚ Docker ç»Ÿè®¡æ•°æ®æä¾›äº†å®¹å™¨çš„ CPU å’Œå†…å­˜ä½¿ç”¨çŽ‡ã€‚ Docker äº‹ä»¶æä¾›å…³äºŽ Docker å®ˆæŠ¤è¿›ç¨‹ä¸­å‘ç”Ÿçš„æ´»åŠ¨çš„ä¿¡æ¯ã€‚ 47. Is it a good practice to run Docker compose in production?47. åœ¨ç”Ÿäº§ä¸­è¿è¡Œ Docker æ’°ç¨¿æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•å—ï¼ŸYes, using docker compose in production is the best practical application of docker compose. When you define applications with compose, you can use this compose definition in various production stages like CI, staging, testing, etc. æ˜¯çš„ï¼Œåœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ docker åˆæˆç‰©æ˜¯ docker åˆæˆç‰©æœ€å¥½çš„å®žé™…åº”ç”¨ã€‚ åœ¨ç”¨ compose å®šä¹‰åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ç”Ÿäº§é˜¶æ®µ(å¦‚ CIã€ stagingã€æµ‹è¯•ç­‰)ä¸­ä½¿ç”¨æ­¤ compose å®šä¹‰ã€‚ 48. What changes are expected in your docker compose file while moving it to production?48. åœ¨å°† docker ç»„åˆæ–‡ä»¶ç§»åŠ¨åˆ°ç”Ÿäº§çŽ¯å¢ƒä¸­æ—¶ï¼Œæ‚¨å¸Œæœ›å¯¹å…¶è¿›è¡Œå“ªäº›æ›´æ”¹ï¼ŸThese are the following changes you need make to your compose file before migrating your application to the production environment: åœ¨å°†åº”ç”¨ç¨‹åºè¿ç§»åˆ°ç”Ÿäº§çŽ¯å¢ƒä¹‹å‰ï¼Œéœ€è¦å¯¹æ’°å†™æ–‡ä»¶è¿›è¡Œä»¥ä¸‹æ›´æ”¹: Remove volume bindings, so the code stays inside the container and cannot be changed from outside the container. åˆ é™¤å·ç»‘å®šï¼Œè¿™æ ·ä»£ç å°±ä¼šç•™åœ¨å®¹å™¨å†…éƒ¨ï¼Œä¸èƒ½ä»Žå®¹å™¨å¤–éƒ¨è¿›è¡Œæ›´æ”¹ Binding to different ports on the host. ç»‘å®šåˆ°ä¸»æœºä¸Šçš„ä¸åŒç«¯å£ Specify a restart policy æŒ‡å®šé‡æ–°å¯åŠ¨ç­–ç•¥ Add extra services like log aggregator æ·»åŠ é¢å¤–çš„æœåŠ¡ï¼Œå¦‚æ—¥å¿—èšåˆå™¨ 49. Have you used Kubernetes? If you have, which one would you prefer amongst Docker and Kubernetes?å›¾49ã€‚ ä½ ç”¨è¿‡Kuberneteså—ï¼Ÿ å¦‚æžœä½ æœ‰ï¼Œä½ å¸Œæœ›åœ¨Dockerå’ŒKubernetesä¹‹é—´é€‰æ‹©å“ªä¸€ä¸ªï¼ŸBe very honest in such questions. If you have used Kubernetes, talk about your experience with Kubernetes and Docker Swarm. Point out the key areas where you thought docker swarm was more efficient and vice versa. Have a look at this blog for understanding differences between Docker and Kubernetes. åœ¨è¿™äº›é—®é¢˜ä¸Šè¦éžå¸¸è¯šå®žã€‚ å¦‚æžœä½ ä½¿ç”¨è¿‡Kubernetesï¼Œè°ˆè°ˆä½ ä½¿ç”¨Kuberneteså’ŒDockerç¾¤çš„ç»éªŒã€‚ æŒ‡å‡ºä½ è®¤ä¸º docker swarm æ›´æœ‰æ•ˆçŽ‡çš„å…³é”®é¢†åŸŸï¼Œåä¹‹äº¦ç„¶ã€‚ çœ‹çœ‹è¿™ä¸ªåšå®¢ï¼Œäº†è§£ä¸€ä¸‹ Docker å’Œ Kubernetes ä¹‹é—´çš„å·®å¼‚ã€‚ You Docker interview questions are not just limited to the workarounds of docker but also other similar tools. Hence be prepared with tools/technologies that give Docker competition. One such example is Kubernetes. You Docker é¢è¯•é—®é¢˜ä¸ä»…ä»…å±€é™äºŽ Docker çš„å˜é€šæ–¹æ³•ï¼Œè¿˜æœ‰å…¶ä»–ç±»ä¼¼çš„å·¥å…·ã€‚ å› æ­¤ï¼Œå‡†å¤‡å¥½ä¸Ž Docker ç«žäº‰çš„å·¥å…· / æŠ€æœ¯ã€‚ Kubernetesæ–¯å°±æ˜¯è¿™æ ·ä¸€ä¸ªä¾‹å­ã€‚ 50. Are you aware of load balancing across containers and hosts? How does it work?50. æ‚¨æ˜¯å¦çŸ¥é“è·¨å®¹å™¨å’Œä¸»æœºçš„è´Ÿè½½å¹³è¡¡ï¼Ÿ å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼ŸWhile using docker service with multiple containers across different hosts, you come across the need to load balance the incoming traffic. Load balancing and HAProxy is basically used to balance the incoming traffic across different available(healthy) containers. If one container crashes, another container should automatically start running and the traffic should be re-routed to this new running container. Load balancing and HAProxy works around this concept. åœ¨è·¨ä¸åŒä¸»æœºä½¿ç”¨å¤šä¸ªå®¹å™¨çš„ docker æœåŠ¡æ—¶ï¼Œæ‚¨ä¼šé‡åˆ°éœ€è¦è´Ÿè½½å‡è¡¡ä¼ å…¥æµé‡çš„é—®é¢˜ã€‚ è´Ÿè½½å¹³è¡¡å’Œ HAProxy åŸºæœ¬ä¸Šç”¨äºŽå¹³è¡¡ä¸åŒå¯ç”¨(å¥åº·)å®¹å™¨ä¹‹é—´çš„ä¼ å…¥é€šä¿¡é‡ã€‚ å¦‚æžœä¸€ä¸ªå®¹å™¨å´©æºƒï¼Œå¦ä¸€ä¸ªå®¹å™¨åº”è¯¥è‡ªåŠ¨å¼€å§‹è¿è¡Œï¼Œé€šä¿¡é‡åº”è¯¥è¢«é‡æ–°è·¯ç”±åˆ°è¿™ä¸ªæ–°è¿è¡Œçš„å®¹å™¨ã€‚ è´Ÿè½½å¹³è¡¡å’Œ HAProxy å›´ç»•è¿™ä¸ªæ¦‚å¿µå·¥ä½œã€‚ This brings us to the end of the Docker Interview Questions article. With increasing business competition, companies have realized the importance of adapting and taking advantage of the changing market. Few things that kept them in the game were faster scaling of systems, better software delivery, adapting to new technologies, etc. Thatâ€™s when docker swung into the picture and gave these companies boosting support to continue the race. è¿™å°±æŠŠæˆ‘ä»¬å¸¦åˆ°äº†Dockeré¢è¯•é—®é¢˜æ–‡ç« çš„ç»“å°¾ã€‚ éšç€å•†ä¸šç«žäº‰çš„åŠ å‰§ï¼Œä¼ä¸šå·²ç»æ„è¯†åˆ°é€‚åº”å’Œåˆ©ç”¨å˜åŒ–ä¸­çš„å¸‚åœºçš„é‡è¦æ€§ã€‚ å¾ˆå°‘æœ‰ä»€ä¹ˆèƒ½è®©ä»–ä»¬ç•™åœ¨æ¸¸æˆä¸­ï¼Œæ¯”å¦‚æ›´å¿«çš„ç³»ç»Ÿæ‰©å±•ï¼Œæ›´å¥½çš„è½¯ä»¶äº¤ä»˜ï¼Œé€‚åº”æ–°æŠ€æœ¯ç­‰ç­‰ã€‚ å°±åœ¨è¿™æ—¶ï¼Œç å¤´å·¥äººå¼€å§‹ä»‹å…¥ï¼Œç»™è¿™äº›å…¬å¸æä¾›æ”¯æŒï¼Œä»¥ç»§ç»­è¿™åœºç«žèµ›ã€‚ If you want to learn more about DevOps, check out the DevOps training by Edureka, a trusted online learning company with a network of more than 250,000 satisfied learners spread across the globe. The Edureka DevOps Certification Training course helps learners gain expertise in various DevOps processes and tools such as Puppet, Jenkins, Nagios and GIT for automating multiple steps in SDLC. å¦‚æžœä½ æƒ³äº†è§£æ›´å¤šå…³äºŽ DevOps çš„ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒ Edureka æä¾›çš„ DevOps åŸ¹è®­ï¼Œè¿™æ˜¯ä¸€å®¶å€¼å¾—ä¿¡èµ–çš„åœ¨çº¿å­¦ä¹ å…¬å¸ï¼Œæ‹¥æœ‰éå¸ƒå…¨çƒçš„è¶…è¿‡250,000ä¸ªæ»¡æ„çš„å­¦ä¹ è€…ç½‘ç»œã€‚ Edureka DevOps è®¤è¯åŸ¹è®­è¯¾ç¨‹å¸®åŠ©å­¦ä¹ è€…èŽ·å¾—å„ç§ DevOps æµç¨‹å’Œå·¥å…·çš„ä¸“ä¸šçŸ¥è¯†ï¼Œæ¯”å¦‚ Puppetã€ Jenkinsã€ Nagios å’Œ GITï¼Œç”¨äºŽè‡ªåŠ¨åŒ– SDLC ä¸­çš„å¤šä¸ªæ­¥éª¤ã€‚ åŽŸæ–‡ï¼šhttps://www.edureka.co/blog/interview-questions/docker-interview-questions/]]></content>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerå®¹å™¨åŸºç¡€]]></title>
    <url>%2F2019%2F08%2F02%2FDocker%E5%AE%B9%E5%99%A8%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[å¿«é€Ÿæ¸…ç†æ¸…ç†å…¨éƒ¨å®¹å™¨docker rm -f $(docker ls -aq) åœæ­¢å…¨éƒ¨å®¹å™¨docker stop $(docker ls -aq) å‘½ä»¤å¸®åŠ©1234567891011121314151617181920212223242526272829303132333435Usage: docker container COMMANDManage containersOptions:Commands: attach Attach local standard input, output, and error streams to a running container commit Create a new image from a container&apos;s changes cp Copy files/folders between a container and the local filesystem create Create a new container diff Inspect changes to files or directories on a container&apos;s filesystem exec Run a command in a running container export Export a container&apos;s filesystem as a tar archive inspect Display detailed information on one or more containers kill Kill one or more running containers logs Fetch the logs of a container ls List containers pause Pause all processes within one or more containers port List port mappings or a specific mapping for the container prune Remove all stopped containers rename Rename a container restart Restart one or more containers rm Remove one or more containers run Run a command in a new container start Start one or more stopped containers stats Display a live stream of container(s) resource usage statistics stop Stop one or more running containers top Display the running processes of a container unpause Unpause all processes within one or more containers update Update configuration of one or more containers wait Block until one or more containers stop, then print their exit codesRun &apos;docker container COMMAND --help&apos; for more information on a command. é‡ç‚¹ docker container run å¯åŠ¨æ–°å®¹å™¨ã€‚ä¾‹å¦‚ docker container run -it ubuntu /bin/bashä¼šåœ¨å‰å°å¯åŠ¨ä¸€ä¸ªUbuntuå®¹å™¨ï¼Œå¹¶è¿è¡Œbash Ctrl-PQæ–­å¼€shellä¸Žå®¹å™¨çš„é“¾æŽ¥ï¼Œå¹¶ä¿æŒå®¹å™¨åŽå°å¤„äºŽè¿è¡ŒUPçŠ¶ docker container ls åˆ—å‡ºæ‰€æœ‰åœ¨è¿è¡ŒUPçŠ¶å®¹å™¨ï¼Œ-aå¯ä»¥çœ‹åˆ°åœæ­¢Exitedå®¹å™¨ docker container exec åœ¨è¿è¡ŒçŠ¶æ€å®¹å™¨å¯åŠ¨æ–°è¿›ç¨‹ï¼Œä¾‹å¦‚ï¼š docker container exec -it &lt;name or id&gt; bashå®¹å™¨å†…éƒ¨å¯åŠ¨ä¸€ä¸ªbash shell docker container stop åœæ­¢è¿è¡Œçš„å®¹å™¨ï¼ŒçŠ¶æ€ç½®Exited(0) ã€‚è¯¥å‘½ä»¤é€šè¿‡å‘é€SIGTERMä¿¡å·ç»™å®¹å™¨PIDä¸º1çš„è¿›ç¨‹è¾¾åˆ°ç›®çš„ã€‚å¦‚æžœ10så†…æ²¡æœ‰åœæ­¢ï¼Œå°†ä¼šå‘é€SIGKILLå¼ºè¡Œåœæ­¢ã€‚ docker container start å¯åŠ¨åœæ­¢exitedå®¹å™¨ docker container rm åˆ é™¤åœæ­¢å®¹å™¨ã€‚æŽ¨èstopåœæ­¢ï¼Œåœ¨ä½¿ç”¨rmã€‚ docker container inspect æ˜¾ç¤ºå®¹å™¨é…ç½®ç»†èŠ‚å’Œè¿è¡Œæ—¶ä¿¡æ¯ ä»¥ä¸Šå‘½ä»¤æŽ¥æ”¶å®¹å™¨åç§°å’Œå®¹å™¨IDä½œä¸ºå‚æ•°ã€‚]]></content>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linuxè¦†ç›–å¤åˆ¶]]></title>
    <url>%2F2019%2F08%2F02%2Flinux%E8%A6%86%E7%9B%96%E5%A4%8D%E5%88%B6%2F</url>
    <content type="text"><![CDATA[æŠŠAç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°Bç›®å½• \cp -rf A B]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockeré•œåƒåŸºç¡€]]></title>
    <url>%2F2019%2F07%2F26%2FDocker%E9%95%9C%E5%83%8F%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[Docker é•œåƒå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæž„å»ºæ—¶ï¼ˆbuild-timeï¼‰ç»“æž„ Docker å®¹å™¨å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè¿è¡Œæ—¶ï¼ˆrun-timeï¼‰ç»“æž„ é•œåƒå‡ ç‚¹ç‰¹æ€§ï¼š Dockeré•œåƒåˆ†å±‚ï¼šç”±ä¸€äº›æ¾è€¦åˆçš„åªè¯»é•œåƒå±‚ç»„æˆ Dockeré•œåƒå±‚å…±äº«ï¼šå¤šä¸ªé•œåƒä¹‹é—´å…±äº«é•œåƒå±‚ Dockeré•œåƒä»“åº“ï¼šå¤šæž¶æž„é•œåƒmanifeståˆ—è¡¨å’Œmanifestç»„æˆ ç›´æŽ¥çœ‹å‘½ä»¤ï¼Œæ¥å­¦ä¹ Dockeré•œåƒç›¸å…³çŸ¥è¯† 123456789101112131415161718192021222324[root@centos7 archive_server]# docker image --helpUsage: docker image COMMANDManage imagesOptions:Commands: build Build an image from a Dockerfile history Show the history of an image import Import the contents from a tarball to create a filesystem image inspect Display detailed information on one or more images load Load an image from a tar archive or STDIN ls List images prune Remove unused images pull Pull an image or a repository from a registry push Push an image or a repository to a registry rm Remove one or more images save Save one or more images to a tar archive (streamed to STDOUT by default) tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGERun &apos;docker image COMMAND --help&apos; for more information on a command. é‡ç‚¹ docker image pull ä¸‹è½½é•œåƒã€‚ä¾‹å¦‚ image pull alpine:latest```1234567- docker image ls åˆ—å‡ºæœ¬æœºé•œåƒã€‚ --digests æŸ¥çœ‹sha256ç­¾å- docker image inspect !!!! é‡è¦ å±•ç¤ºç»†èŠ‚ï¼ŒåŒ…å«é•œåƒå±‚å’Œå…ƒæ•°æ®- docker image rm åˆ é™¤é•œåƒã€‚ä¾‹å¦‚ ```docker image rm alpine:latest å½“é•œåƒå­˜åœ¨å…³è”å®¹å™¨ï¼Œå¹¶å®¹å™¨å¤„äºŽUpæˆ–Exited, ä¸å…è®¸ã€‚]]></content>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[supervisoråŸºç¡€]]></title>
    <url>%2F2019%2F07%2F25%2Fsupervisor%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹supervisoræ˜¯ç”¨Pythonå¼€å‘çš„ä¸€ä¸ªclient/serveræœåŠ¡ï¼Œæ˜¯Linux/Unixç³»ç»Ÿä¸‹çš„ä¸€ä¸ªè¿›ç¨‹ç®¡ç†å·¥å…·ã€‚å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›‘å¬ã€å¯åŠ¨ã€åœæ­¢ã€é‡å¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ã€‚ç”¨supervisorç®¡ç†çš„è¿›ç¨‹ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹æ„å¤–è¢«æ€æ­»ï¼Œsupervisorç›‘å¬åˆ°è¿›ç¨‹æ­»åŽï¼Œä¼šè‡ªåŠ¨å°†å®ƒé‡å¯ï¼Œå¾ˆæ–¹ä¾¿çš„åšåˆ°è¿›ç¨‹è‡ªåŠ¨æ¢å¤çš„åŠŸèƒ½ï¼Œä¸å†éœ€è¦è‡ªå·±å†™shellè„šæœ¬æ¥æŽ§åˆ¶ã€‚ å®‰è£…é…ç½®å¥½yumæºåŽï¼Œå¯ä»¥ç›´æŽ¥å®‰è£…yum install supervisor é…ç½®å®‰è£…å¥½åŽåœ¨/etc/ä¼šç”Ÿæˆä¸€ä¸ªsupervisord.confæ–‡ä»¶åŠä¸€ä¸ªsupervisord.dæ–‡ä»¶ç›®å½• supervisord.confæ˜¯ä¸€äº›é»˜è®¤é…ç½®ï¼Œå¯è‡ªè¡Œä¿®æ”¹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475[unix_http_server]file=/tmp/supervisor.sock ;UNIX socket æ–‡ä»¶ï¼Œsupervisorctl ä¼šä½¿ç”¨;chmod=0700 ;socketæ–‡ä»¶çš„modeï¼Œé»˜è®¤æ˜¯0700;chown=nobody:nogroup ;socketæ–‡ä»¶çš„ownerï¼Œæ ¼å¼ï¼šuid:gid;[inet_http_server] ;HTTPæœåŠ¡å™¨ï¼Œæä¾›webç®¡ç†ç•Œé¢;port=127.0.0.1:9001 ;Webç®¡ç†åŽå°è¿è¡Œçš„IPå’Œç«¯å£ï¼Œå¦‚æžœå¼€æ”¾åˆ°å…¬ç½‘ï¼Œéœ€è¦æ³¨æ„å®‰å…¨æ€§;username=user ;ç™»å½•ç®¡ç†åŽå°çš„ç”¨æˆ·å;password=123 ;ç™»å½•ç®¡ç†åŽå°çš„å¯†ç [supervisord]logfile=/tmp/supervisord.log ;æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ $CWD/supervisord.loglogfile_maxbytes=50MB ;æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œè¶…å‡ºä¼šrotateï¼Œé»˜è®¤ 50MBï¼Œå¦‚æžœè®¾æˆ0ï¼Œè¡¨ç¤ºä¸é™åˆ¶å¤§å°logfile_backups=10 ;æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤‡ä»½æ•°é‡é»˜è®¤10ï¼Œè®¾ä¸º0è¡¨ç¤ºä¸å¤‡ä»½loglevel=info ;æ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤infoï¼Œå…¶å®ƒ: debug,warn,tracepidfile=/tmp/supervisord.pid ;pid æ–‡ä»¶nodaemon=false ;æ˜¯å¦åœ¨å‰å°å¯åŠ¨ï¼Œé»˜è®¤æ˜¯falseï¼Œå³ä»¥ daemon çš„æ–¹å¼å¯åŠ¨minfds=1024 ;å¯ä»¥æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦çš„æœ€å°å€¼ï¼Œé»˜è®¤ 1024minprocs=200 ;å¯ä»¥æ‰“å¼€çš„è¿›ç¨‹æ•°çš„æœ€å°å€¼ï¼Œé»˜è®¤ 200[supervisorctl]serverurl=unix:///tmp/supervisor.sock ;é€šè¿‡UNIX socketè¿žæŽ¥supervisordï¼Œè·¯å¾„ä¸Žunix_http_serveréƒ¨åˆ†çš„fileä¸€è‡´;serverurl=http://127.0.0.1:9001 ; é€šè¿‡HTTPçš„æ–¹å¼è¿žæŽ¥supervisord; [program:xx]æ˜¯è¢«ç®¡ç†çš„è¿›ç¨‹é…ç½®å‚æ•°ï¼Œxxæ˜¯è¿›ç¨‹çš„åç§°[program:xx]command=/opt/apache-tomcat-8.0.35/bin/catalina.sh run ; ç¨‹åºå¯åŠ¨å‘½ä»¤autostart=true ; åœ¨supervisordå¯åŠ¨çš„æ—¶å€™ä¹Ÿè‡ªåŠ¨å¯åŠ¨startsecs=10 ; å¯åŠ¨10ç§’åŽæ²¡æœ‰å¼‚å¸¸é€€å‡ºï¼Œå°±è¡¨ç¤ºè¿›ç¨‹æ­£å¸¸å¯åŠ¨äº†ï¼Œé»˜è®¤ä¸º1ç§’autorestart=true ; ç¨‹åºé€€å‡ºåŽè‡ªåŠ¨é‡å¯,å¯é€‰å€¼ï¼š[unexpected,true,false]ï¼Œé»˜è®¤ä¸ºunexpectedï¼Œè¡¨ç¤ºè¿›ç¨‹æ„å¤–æ€æ­»åŽæ‰é‡å¯startretries=3 ; å¯åŠ¨å¤±è´¥è‡ªåŠ¨é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯3user=tomcat ; ç”¨å“ªä¸ªç”¨æˆ·å¯åŠ¨è¿›ç¨‹ï¼Œé»˜è®¤æ˜¯rootpriority=999 ; è¿›ç¨‹å¯åŠ¨ä¼˜å…ˆçº§ï¼Œé»˜è®¤999ï¼Œå€¼å°çš„ä¼˜å…ˆå¯åŠ¨redirect_stderr=true ; æŠŠstderré‡å®šå‘åˆ°stdoutï¼Œé»˜è®¤falsestdout_logfile_maxbytes=20MB ; stdout æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤50MBstdout_logfile_backups = 20 ; stdout æ—¥å¿—æ–‡ä»¶å¤‡ä»½æ•°ï¼Œé»˜è®¤æ˜¯10; stdout æ—¥å¿—æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„å½“æŒ‡å®šç›®å½•ä¸å­˜åœ¨æ—¶æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ›å»ºç›®å½•ï¼ˆsupervisord ä¼šè‡ªåŠ¨åˆ›å»ºæ—¥å¿—æ–‡ä»¶ï¼‰stdout_logfile=/opt/apache-tomcat-8.0.35/logs/catalina.outstopasgroup=false ;é»˜è®¤ä¸ºfalse,è¿›ç¨‹è¢«æ€æ­»æ—¶ï¼Œæ˜¯å¦å‘è¿™ä¸ªè¿›ç¨‹ç»„å‘é€stopä¿¡å·ï¼ŒåŒ…æ‹¬å­è¿›ç¨‹killasgroup=false ;é»˜è®¤ä¸ºfalseï¼Œå‘è¿›ç¨‹ç»„å‘é€killä¿¡å·ï¼ŒåŒ…æ‹¬å­è¿›ç¨‹;åŒ…å«å…¶å®ƒé…ç½®æ–‡ä»¶[include]files = relative/directory/*.ini ;å¯ä»¥æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªä»¥.iniç»“æŸçš„é…ç½®æ–‡ä»¶æ³¨æ„ï¼š[include]é»˜è®¤é…ç½®æ˜¯åˆ¶å®š*.iniï¼Œå› ä¸ªäººä¹ æƒ¯å‘½åä¸º*.confæ–‡ä»¶ï¼Œå› æ­¤ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š[include]files = relative/directory/*.confsupervisord.dç›®å½•ç”¨æ¥å­˜æ”¾ç”¨æˆ·è‡ªå®šä¹‰çš„è¿›ç¨‹é…ç½®ï¼Œå‚è€ƒï¼š[program:es]command=/opt/software/elasticsearch/bin/elasticsearchuser=esstdout_logfile=/opt/supervisor_test/run.logautostart=trueautorestart=truestartsecs=60stopasgroup=trueikillasgroup=truestartretries=1redirect_stderr=trueæ³¨æ„: supervisorä¸èƒ½ç›‘æŽ§åŽå°è¿›ç¨‹ï¼Œcommand ä¸èƒ½ä¸ºåŽå°è¿è¡Œå‘½ä»¤Â·Â·Â·æœåŠ¡æ®µå¯åŠ¨supervisord -c /etc/supervisord.conf å¸¸ç”¨å‘½ä»¤ä»‹ç»supervisorctl æ˜¯ supervisordçš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯å·¥å…·supervisorctl statusï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„çŠ¶æ€supervisorctl stop esï¼šåœæ­¢essupervisorctl start esï¼šå¯åŠ¨essupervisorctl restart es: é‡å¯essupervisorctl update ï¼šé…ç½®æ–‡ä»¶ä¿®æ”¹åŽå¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤åŠ è½½æ–°çš„é…ç½®supervisorctl reload: é‡æ–°å¯åŠ¨é…ç½®ä¸­çš„æ‰€æœ‰ç¨‹åº æŠŠes æ¢æˆall å¯ä»¥ç®¡ç†é…ç½®ä¸­çš„æ‰€æœ‰è¿›ç¨‹ ç›´æŽ¥è¾“å…¥ï¼šsupervisorctl è¿›å…¥supervisorctl çš„shelläº¤äº’ç•Œé¢ï¼Œä¸Šé¢çš„å‘½ä»¤ä¸å¸¦supervisorctl å¯ç›´æŽ¥ä½¿ç”¨]]></content>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Apache-HBase-â„¢-ä¸­æ–‡æŒ‡å—-æœ€æ–°ç‰ˆHBase-3-0-0-ch16-Thrift API å’Œè¿‡æ»¤å™¨è¯­è¨€]]></title>
    <url>%2F2019%2F05%2F19%2Fch16%2F</url>
    <content type="text"><![CDATA[Thrift API å’Œè¿‡æ»¤å™¨è¯­è¨€ è¯‘è€…ï¼šxixici Apache Thrift æ˜¯è·¨å¹³å°è·¨è¯­è¨€çš„å¼€å‘æ¡†æž¶ã€‚HBaseåŒ…å«äº† Thrift APIå’Œè¿‡æ»¤è¯­è¨€ã€‚Thrift API ä¾èµ–äºŽå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›ç¨‹ã€‚ ä½ å¯ä»¥åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç»´Thriftè®¾ç½®å®‰å…¨èº«ä»½éªŒè¯ï¼Œå‚ç…§ Client-side Configuration for Secure Operation - Thrift Gateway å’Œ Configure the Thrift Gateway to Authenticate on Behalf of the Client. æŽ¥ä¸‹æ¥ï¼Œè®¨è®ºThrift APIæ‰€æä¾›çš„è¿‡æ»¤å™¨è¯­è¨€ã€‚ 103. è¿‡æ»¤å™¨è¯­è¨€Thrift è¿‡æ»¤è¯­è¨€åœ¨ HBase 0.92ç‰ˆæœ¬å¼•å…¥. æä¾›äº†é€šè¿‡åœ¨HBaseä¸Šä½¿ç”¨Thrift æˆ–ä½¿ç”¨HBase Shell æ¥è¿›è¡ŒæœåŠ¡ç«¯è¿‡æ»¤. ä½ å¯ä»¥åœ¨Shellä¸­ï¼Œä½¿ç”¨scan helpæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯. å°†è¿‡æ»¤å™¨å†™æˆå­—ç¬¦ä¸²ï¼Œåœ¨æœåŠ¡ç«¯è§£æžæˆè¿‡æ»¤å™¨ã€‚ 103.1. å¸¸è§„è¿‡æ»¤å­—ç¬¦ä¸²è¯­æ³•å­—ç¬¦ä¸²å½¢å¼è¿‡æ»¤å™¨: 1â€œFilterName (argument, argument,... , argument)â€ è®°ä½ä»¥ä¸‹è¯­æ³•è§„åˆ™ï¼š æŒ‡å®šè¿‡æ»¤å™¨çš„åç§°ï¼ŒåŽè·Ÿæ‹¬å·ä¸­ä»¥é€—å·åˆ†éš”çš„å‚æ•°åˆ—è¡¨ã€‚ å¦‚æžœå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåº”è¯¥ç”¨å•å¼•å·&#39;åŒ…æ‹¬ã€‚ å¸ƒå°”å€¼, æ•´å½¢, æ¯”è¾ƒç¬¦ ( &lt;, &gt;, !=)ä¸éœ€è¦ç”¨å¼•å·åŒ…æ‹¬ã€‚ è¿‡æ»¤å™¨åç§°å¿…é¡»æ˜¯å•ä¸ªå•è¯ã€‚é™¤ç©ºæ ¼ï¼Œå•å¼•å·å’Œæ‹¬å·å¤–ï¼Œå…è®¸ä½¿ç”¨æ‰€æœ‰ASCIIå­—ç¬¦ã€‚ è¿‡æ»¤å™¨çš„å‚æ•°å¯ä»¥åŒ…å«ä»»ä½•ASCIIå­—ç¬¦ã€‚å¦‚æžœå‚æ•°ä¸­å­˜åœ¨å•å¼•å·ï¼Œåˆ™å¿…é¡»é€šè¿‡é™„åŠ çš„å‰ä¸€ä¸ªå•å¼•å·å¯¹å…¶è¿›è¡Œè½¬ä¹‰ã€‚ 103.2. å¤åˆè¿‡æ»¤å™¨å’Œè¿ç®—ç¬¦äºŒå…ƒè¿ç®—ç¬¦ AND ä½¿ç”¨ AND ï¼Œé”®å€¼å¯¹å¿…é¡»æ»¡è¶³ä¸¤ç«¯è¿‡æ»¤å™¨ OR ä½¿ç”¨ ORï¼Œé”®å€¼å¯¹è‡³å°‘æ»¡è¶³ä¸€ç«¯è¿‡æ»¤å™¨ ä¸€å…ƒè¿ç®—ç¬¦ SKIP å¯¹ç‰¹å®šè¡Œï¼Œå¦‚æžœé”®å€¼å¯¹ä¸æ»¡è¶³è¿‡æ»¤ï¼Œåˆ™è·³è¿‡æ­¤è¡Œ WHILE å¯¹ç‰¹å®šè¡Œ, é”®å€¼å°†é€šè¿‡ï¼Œç›´è‡³è¿‡æ»¤æ¡ä»¶ä¸æ»¡è¶³ä¸ºæ­¢ã€‚ Example 29. å¤åˆè¿ç®—ç¬¦ ä½ å¯ä»¥ç»„åˆè¿ç®—ç¬¦æ¥åˆ›å»ºå±‚æ¬¡ç»“æž„çš„è¿‡æ»¤å™¨å¦‚ï¼š 1(Filter1 AND Filter2) OR (Filter3 AND Filter4) 103.3. è¿ç®—æ¬¡åº æ‹¬å·æœ‰ç€æœ€é«˜ä¼˜å…ˆçº§ ç„¶åŽæ˜¯ä¸€å…ƒè¿ç®—ç¬¦ SKIP å’Œ WHILE ï¼Œä¼˜å…ˆçº§ç›¸åŒ äºŒå…ƒè¿ç®—ç¬¦ AND æœ€é«˜, å…¶æ¬¡ OR Example 30. ä¼˜å…ˆçº§ç¤ºä¾‹ 123Filter1 AND Filter2 OR Filteris evaluated as(Filter1 AND Filter2) OR Filter3 123Filter1 AND SKIP Filter2 OR Filter3is evaluated as(Filter1 AND (SKIP Filter2)) OR Filter3 ä½ å¯ä»¥ä½¿ç”¨æ‹¬å·ç²¾ç¡®æŽ§åˆ¶è¿ç®—é¡ºåº 103.4. æ¯”è¾ƒè¿ç®—ç¬¦ä»¥ä¸‹æ¯”è¾ƒè¿ç®—ç¬¦ï¼š LESS (&lt;) LESS_OR_EQUAL (â‡) EQUAL (=) NOT_EQUAL (!=) GREATER_OR_EQUAL (&gt;=) GREATER (&gt;) NO_OP (no operation) å®¢æˆ·ç«¯åº”é‡‡ç”¨(&lt;, â‡, =, !=, &gt;, &gt;=) è¡¨ç¤ºæ¯”è¾ƒ 103.5. æ¯”è¾ƒå™¨æ¯”è¾ƒå™¨å¯ä»¥å¦‚ä¸‹ä»»ä¸€ç§ï¼š _BinaryComparator_ - æŒ‰å­—å…¸é¡ºåºæ¯”è¾ƒç‰¹å®šå­—èŠ‚æ•°ç»„ï¼Œä½¿ç”¨Bytes.compareTo(byte[], byte[]) _BinaryPrefixComparator_ - æŒ‰å­—å…¸é¡ºåºæ¯”è¾ƒç‰¹å®šå­—èŠ‚æ•°ç»„ï¼Œåªæ¯”è¾ƒå­—èŠ‚æ•°ç»„é•¿åº¦. _RegexStringComparator_ - ä½¿ç”¨ç»™å®šæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯”è¾ƒç‰¹å®šå­—èŠ‚ç»„ã€‚åœ¨è¿™ç§æ¯”è¾ƒå™¨ä¸­ï¼Œåªæœ‰EQUAL å’Œ NOT_EQUALæœ‰æ•ˆ _SubStringComparator_ - ç»™å®šå­—ç¬¦å­ä¸²æ˜¯å¦å‡ºçŽ°åœ¨ç‰¹å®šå­—èŠ‚ç»„ä¸­ã€‚ä¸åŒºåˆ†å¤§å°å†™ã€‚åœ¨è¿™ç§æ¯”è¾ƒå™¨ä¸­ï¼Œåªæœ‰EQUAL å’Œ NOT_EQUALæœ‰æ•ˆ æ¯”è¾ƒå™¨ä¸€èˆ¬è¯­æ³•è§„åˆ™: ComparatorType:ComparatorValue ä¸åŒæ¯”è¾ƒå™¨çš„ä¸åŒæ¯”è¾ƒç±»åž‹ï¼š _BinaryComparator_ - binary äºŒè¿›åˆ¶ _BinaryPrefixComparator_ - binaryprefix äºŒè¿›åˆ¶é•¿åº¦ _RegexStringComparator_ - regexstring æ­£åˆ™è¡¨è¾¾å¼ _SubStringComparator_ - substring å­å­—ç¬¦ä¸² ComparatorValue å¯ä»¥ä»»æ„å€¼ æ¯”è¾ƒç¤ºä¾‹ï¼š binary:abc åŒ¹é…å­—å…¸é¡ºåºå¤§äºŽâ€abcâ€ binaryprefix:abc åŒ¹é…å­—å…¸ä¹¦åºå‰3å­—ç¬¦ç­‰äºŽ â€œabcâ€ regexstring:ab*yz åŒ¹é…ä»¥abå¼€å¤´ï¼Œå·²yzç»“å°¾çš„å†…å®¹ substring:abc123 åŒ¹é…æ‰€æœ‰ä»¥â€abc123â€å¼€å¤´çš„å†…å®¹ 103.6. PHPå®¢æˆ·ç«¯ä½¿ç”¨ç¤ºä¾‹12345678910111213141516&lt;? $_SERVER[&apos;PHP_ROOT&apos;] = realpath(dirname(__FILE__).&apos;/..&apos;); require_once $_SERVER[&apos;PHP_ROOT&apos;].&apos;/flib/__flib.php&apos;; flib_init(FLIB_CONTEXT_SCRIPT); require_module(&apos;storage/hbase&apos;); $hbase = new HBase(&apos;&lt;server_name_running_thrift_server&gt;&apos;, &lt;port on which thrift server is running&gt;); $hbase-&gt;open(); $client = $hbase-&gt;getClient(); $result = $client-&gt;scannerOpenWithFilterString(&apos;table_name&apos;, &quot;(PrefixFilter (&apos;row2&apos;) AND (QualifierFilter (&gt;=, &apos;binary:xyz&apos;))) AND (TimestampsFilter ( 123, 456))&quot;); $to_print = $client-&gt;scannerGetList($result,1); while ($to_print) &#123; print_r($to_print); $to_print = $client-&gt;scannerGetList($result,1); &#125; $client-&gt;scannerClose($result);?&gt; 103.7. è¿‡æ»¤å™¨ç¤ºä¾‹ &quot;PrefixFilter (&#39;Row&#39;) AND PageFilter (1) AND FirstKeyOnlyFilter ()&quot; ä¼šè¿”å›žç¬¦åˆä¸‹åˆ—æ¡ä»¶çš„æ‰€æœ‰é”®å€¼å¯¹ é”®å€¼å¯¹æ‰€åœ¨è¡Œæœ‰å‰ç¼€ _Row_ é”®å€¼å¯¹å¿…é¡»å¤„äºŽç¬¬ä¸€è¡Œ é”®å€¼å¯¹å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªé”®å€¼ &quot;(RowFilter (=, &#39;binary:Row 1&#39;) AND TimeStampsFilter (74689, 89734)) OR ColumnRangeFilter (&#39;abc&#39;, true, &#39;xyz&#39;, false))&quot; ä¼šè¿”å›žç¬¦åˆä¸‹åˆ—æ¡ä»¶çš„æ‰€æœ‰é”®å€¼å¯¹ é”®å€¼å¯¹æ‰€åœ¨è¡Œæœ‰å‰ç¼€ _Row 1_ é”®å€¼å¿…é¡»å…·æœ‰æ—¶é—´æˆ³ 74689 æˆ–è€… 89734. æˆ–è€…æ»¡è¶³ä¸€ä¸‹æ¡ä»¶: é”®å€¼å¯¹å¿…é¡»ä½äºŽå­—å…¸åº &gt;= abc å’Œ &lt; xyzä¹‹é—´ &quot;SKIP ValueFilter (0)&quot; å¦‚æžœè¡Œä¸­ä»»ä½•å€¼éƒ¨ä½0, åˆ™è·³è¿‡ 103.8. å•ä¸ªè¿‡æ»¤å™¨è¯­æ³•KeyOnlyFilter æ­¤è¿‡æ»¤å™¨ä¸å¸¦ä»»ä½•å‚æ•°ã€‚å®ƒä»…è¿”å›žæ¯ä¸ªé”®å€¼çš„å…³é”®ç»„ä»¶ã€‚ FirstKeyOnlyFilter æ­¤è¿‡æ»¤å™¨ä¸å¸¦ä»»ä½•å‚æ•°ã€‚å®ƒä»…è¿”å›žæ¯è¡Œçš„ç¬¬ä¸€ä¸ªé”®å€¼ã€‚ PrefixFilter æ­¤è¿‡æ»¤å™¨é‡‡ç”¨ä¸€ä¸ªå‚æ•° - è¡Œé”®çš„å‰ç¼€ã€‚å®ƒä»…è¿”å›žä»¥æŒ‡å®šè¡Œå‰ç¼€å¼€å¤´çš„è¡Œä¸­å­˜åœ¨çš„é”®å€¼ ColumnPrefixFilter æ­¤è¿‡æ»¤å™¨é‡‡ç”¨ä¸€ä¸ªå‚æ•° - åˆ—å‰ç¼€ã€‚å®ƒä»…è¿”å›žä»¥æŒ‡å®šåˆ—å‰ç¼€å¼€å¤´çš„åˆ—ä¸­å­˜åœ¨çš„é”®å€¼ã€‚åˆ—å‰ç¼€çš„æ ¼å¼å¿…é¡»ä¸ºï¼š â€œqualifierâ€. MultipleColumnPrefixFilter æ­¤è¿‡æ»¤å™¨é‡‡ç”¨åˆ—å‰ç¼€åˆ—è¡¨ã€‚å®ƒè¿”å›žä»¥ä»»ä½•æŒ‡å®šåˆ—å‰ç¼€å¼€å¤´çš„åˆ—ä¸­å­˜åœ¨çš„é”®å€¼ã€‚æ¯ä¸ªåˆ—å‰ç¼€å¿…é¡»é‡‡ç”¨ä»¥ä¸‹å½¢å¼ï¼šâ€œqualifierâ€. ColumnCountGetFilter æ­¤è¿‡æ»¤å™¨é‡‡ç”¨ä¸€ä¸ªå‚æ•° - ä¸€ä¸ªé™åˆ¶ã€‚å®ƒè¿”å›žè¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé™åˆ¶åˆ—æ•°ã€‚ PageFilter æ­¤è¿‡æ»¤å™¨é‡‡ç”¨ä¸€ä¸ªå‚æ•° - é¡µé¢å¤§å°ã€‚å®ƒè¿”å›žè¡¨ä¸­çš„é¡µé¢å¤§å°è¡Œæ•°ã€‚ ColumnPaginationFilter æ­¤è¿‡æ»¤å™¨æœ‰ä¸¤ä¸ªå‚æ•° - é™åˆ¶å’Œåç§»ã€‚å®ƒè¿”å›žåç§»åˆ—æ•°åŽçš„åˆ—æ•°é™åˆ¶ã€‚å®ƒä¸ºæ‰€æœ‰è¡Œæ‰§è¡Œæ­¤æ“ä½œã€‚ InclusiveStopFilter æ­¤è¿‡æ»¤å™¨ä½¿ç”¨ä¸€ä¸ªå‚æ•° - è¦åœæ­¢æ‰«æçš„è¡Œé”®ã€‚å®ƒè¿”å›žè¡Œä¸­å­˜åœ¨çš„æ‰€æœ‰é”®å€¼ï¼ŒåŒ…æ‹¬æŒ‡å®šçš„è¡Œã€‚ TimeStampsFilter æ­¤è¿‡æ»¤å™¨é‡‡ç”¨æ—¶é—´æˆ³åˆ—è¡¨ã€‚å®ƒè¿”å›žæ—¶é—´æˆ³ä¸Žä»»ä½•æŒ‡å®šæ—¶é—´æˆ³åŒ¹é…çš„é”®å€¼ã€‚ RowFilter è¯¥è¿‡æ»¤å™¨é‡‡ç”¨æ¯”è¾ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒå™¨ã€‚å®ƒä½¿ç”¨compareè¿ç®—ç¬¦å°†æ¯ä¸ªè¡Œé”®ä¸Žæ¯”è¾ƒå™¨è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœæ¯”è¾ƒè¿”å›žtrueï¼Œåˆ™è¿”å›žè¯¥è¡Œä¸­çš„æ‰€æœ‰é”®å€¼ã€‚ Family Filter è¯¥è¿‡æ»¤å™¨é‡‡ç”¨æ¯”è¾ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒå™¨ã€‚å®ƒä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦å°†æ¯ä¸ªåˆ—æ—åç§°ä¸Žæ¯”è¾ƒå™¨è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœæ¯”è¾ƒè¿”å›žtrueï¼Œåˆ™è¿”å›žè¯¥åˆ—æ—ä¸­çš„æ‰€æœ‰å•å…ƒæ ¼ã€‚ QualifierFilter è¯¥è¿‡æ»¤å™¨é‡‡ç”¨æ¯”è¾ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒå™¨ã€‚å®ƒä½¿ç”¨compareè¿ç®—ç¬¦å°†æ¯ä¸ªé™å®šç¬¦åç§°ä¸Žæ¯”è¾ƒå™¨è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœæ¯”è¾ƒè¿”å›žtrueï¼Œåˆ™è¿”å›žè¯¥åˆ—ä¸­çš„æ‰€æœ‰é”®å€¼ã€‚ ValueFilter è¯¥è¿‡æ»¤å™¨é‡‡ç”¨æ¯”è¾ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒå™¨ã€‚å®ƒä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦å°†æ¯ä¸ªå€¼ä¸Žæ¯”è¾ƒå™¨è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœæ¯”è¾ƒè¿”å›žtrueï¼Œåˆ™è¿”å›žè¯¥é”®å€¼ã€‚ DependentColumnFilter æ­¤è¿‡æ»¤å™¨æœ‰ä¸¤ä¸ªå‚æ•° - æ—å’Œé™å®šç¬¦ã€‚å®ƒå°è¯•åœ¨æ¯ä¸€è¡Œä¸­æ‰¾åˆ°æ­¤åˆ—ï¼Œå¹¶è¿”å›žè¯¥è¡Œä¸­å…·æœ‰ç›¸åŒæ—¶é—´æˆ³çš„æ‰€æœ‰é”®å€¼ã€‚å¦‚æžœè¯¥è¡Œä¸åŒ…å«æŒ‡å®šçš„åˆ— - å°†è¿”å›žè¯¥è¡Œä¸­çš„ä»»ä½•é”®å€¼ã€‚ SingleColumnValueFilter è¯¥è¿‡æ»¤å™¨é‡‡ç”¨åˆ—æ—ï¼Œé™å®šç¬¦ï¼Œæ¯”è¾ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒå™¨ã€‚å¦‚æžœæœªæ‰¾åˆ°æŒ‡å®šçš„åˆ— - å°†å‘å‡ºè¯¥è¡Œçš„æ‰€æœ‰åˆ—ã€‚å¦‚æžœæ‰¾åˆ°è¯¥åˆ—å¹¶ä¸”ä¸Žæ¯”è¾ƒå™¨çš„æ¯”è¾ƒè¿”å›žtrueï¼Œåˆ™å°†å‘å‡ºè¯¥è¡Œçš„æ‰€æœ‰åˆ—ã€‚å¦‚æžœæ¡ä»¶å¤±è´¥ï¼Œåˆ™ä¸ä¼šå‘å‡ºè¯¥è¡Œã€‚ SingleColumnValueExcludeFilter æ­¤è¿‡æ»¤å™¨é‡‡ç”¨ç›¸åŒçš„å‚æ•°ï¼Œå…¶è¡Œä¸ºä¸ŽSingleColumnValueFilterç›¸åŒ - ä½†æ˜¯ï¼Œå¦‚æžœæ‰¾åˆ°è¯¥åˆ—å¹¶ä¸”æ¡ä»¶é€šè¿‡ï¼Œåˆ™é™¤äº†æµ‹è¯•çš„åˆ—å€¼ä¹‹å¤–ï¼Œå°†å‘å‡ºè¯¥è¡Œçš„æ‰€æœ‰åˆ—ã€‚ ColumnRangeFilter æ­¤è¿‡æ»¤å™¨ä»…ç”¨äºŽé€‰æ‹©åˆ—åœ¨minColumnå’ŒmaxColumnä¹‹é—´çš„é”®ã€‚å®ƒè¿˜éœ€è¦ä¸¤ä¸ªå¸ƒå°”å˜é‡æ¥æŒ‡ç¤ºæ˜¯å¦åŒ…å«minColumnå’ŒmaxColumnã€‚]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>Coding</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Apache-HBase-â„¢-ä¸­æ–‡æŒ‡å—-æœ€æ–°ç‰ˆHBase-3-0-0-ch14-Apache HBase å¤–éƒ¨ APIs]]></title>
    <url>%2F2019%2F05%2F19%2Fch15%2F</url>
    <content type="text"><![CDATA[Apache HBase å¤–éƒ¨ APIs è¯‘è€…ï¼šxixici æœ¬ç« å°†ä»‹ç»é€šè¿‡éžJavaè¯­è¨€å’Œè‡ªå®šä¹‰åè®®è®¿é—®Apache HBaseã€‚ æœ‰å…³ä½¿ç”¨æœ¬æœºHBase APIçš„ä¿¡æ¯ï¼Œè¯·å‚é˜…User API Reference HBase APIs 97. RESTè¡¨è¿°æ€§çŠ¶æ€è½¬ç§»Representational State Transfer (REST)äºŽ2000å¹´åœ¨HTTPè§„èŒƒçš„ä¸»è¦ä½œè€…ä¹‹ä¸€Roy Fieldingçš„åšå£«è®ºæ–‡ä¸­å¼•å…¥ã€‚ RESTæœ¬èº«è¶…å‡ºäº†æœ¬æ–‡æ¡£çš„èŒƒå›´ï¼Œä½†é€šå¸¸ï¼ŒRESTå…è®¸é€šè¿‡ä¸ŽURLæœ¬èº«ç»‘å®šçš„APIè¿›è¡Œå®¢æˆ·ç«¯ - æœåŠ¡å™¨äº¤äº’ã€‚ æœ¬èŠ‚è®¨è®ºå¦‚ä½•é…ç½®å’Œè¿è¡ŒHBaseé™„å¸¦çš„RESTæœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨å°†HBaseè¡¨ï¼Œè¡Œï¼Œå•å…ƒå’Œå…ƒæ•°æ®å…¬å¼€ä¸ºURLæŒ‡å®šçš„èµ„æºã€‚ è¿˜æœ‰ä¸€ç³»åˆ—å…³äºŽå¦‚ä½•ä½¿ç”¨Jesse Andersonçš„Apache HBase RESTæŽ¥å£çš„åšå®¢ How-to: Use the Apache HBase REST Interface 97.1. å¯åŠ¨å’Œåœæ­¢RESTæœåŠ¡åŒ…å«çš„RESTæœåŠ¡å™¨å¯ä»¥ä½œä¸ºå®ˆæŠ¤ç¨‹åºè¿è¡Œï¼Œè¯¥å®ˆæŠ¤ç¨‹åºå¯åŠ¨åµŒå…¥å¼Jetty servletå®¹å™¨å¹¶å°†servletéƒ¨ç½²åˆ°å…¶ä¸­ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€åœ¨å‰å°æˆ–åŽå°å¯åŠ¨RESTæœåŠ¡å™¨ã€‚ ç«¯å£æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤ä¸º8080ã€‚ 12345# Foreground$ bin/hbase rest start -p &lt;port&gt;# Background, logging to a file in $HBASE_LOGS_DIR$ bin/hbase-daemon.sh start rest -p &lt;port&gt; è¦åœæ­¢RESTæœåŠ¡å™¨ï¼Œè¯·åœ¨å‰å°è¿è¡Œæ—¶ä½¿ç”¨Ctrl-Cï¼Œå¦‚æžœåœ¨åŽå°è¿è¡Œåˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ã€‚ 1$ bin/hbase-daemon.sh stop rest 97.2. é…ç½®RESTæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æœ‰å…³ä¸ºSSLé…ç½®RESTæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä»¥åŠä¸ºRESTæœåŠ¡å™¨é…ç½®doAs æ¨¡æ‹Ÿçš„ä¿¡æ¯ï¼Œè¯·å‚é˜…é…ç½®Thriftç½‘å…³ä»¥ä»£è¡¨å®¢æˆ·ç«¯è¿›è¡Œèº«ä»½éªŒè¯ä»¥åŠ Securing Apache HBase ã€‚ 97.3. ä½¿ç”¨RESTä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨å ä½ç¬¦æœåŠ¡å™¨http://example.com:8000ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨`curl`æˆ–`wget`å‘½ä»¤è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¸ä¸ºçº¯æ–‡æœ¬æ·»åŠ å¤´ä¿¡æ¯æ¥è¯·æ±‚çº¯æ–‡æœ¬(é»˜è®¤)ï¼ŒXMLæˆ–JSONè¾“å‡ºï¼Œæˆ–è€…ä¸ºXMLæ·»åŠ å¤´ä¿¡æ¯â€œAcceptï¼štext / xmlâ€ï¼Œä¸ºJSONæ·»åŠ â€œAcceptï¼šapplication / jsonâ€æˆ–ä¸ºåè®®ç¼“å†²åŒºæ·»åŠ â€œAccept: application/x-protobufâ€ã€‚ é™¤éžæŒ‡å®šï¼Œå¦åˆ™ä½¿ç”¨GETè¯·æ±‚è¿›è¡ŒæŸ¥è¯¢ï¼ŒPUTæˆ–POSTè¯·æ±‚è¿›è¡Œåˆ›å»ºæˆ–ä¿®æ”¹ï¼ŒDELETEç”¨äºŽåˆ é™¤ã€‚ ç«¯å£ HTTP åè¯ æè¿° ç¤ºä¾‹ /version/cluster GET é›†ç¾¤ä¸Šè¿è¡ŒHBaseç‰ˆæœ¬ -vi -X GET \ -H "Accept: text/xml" \ "http://example.com:8000/version/cluster"``` |123456789101112131415161718192021222324252627282930313233343536373839| `/status/cluster` | `GET` | é›†ç¾¤çŠ¶æ€ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/status/cluster&quot;``` || `/` | `GET` | åˆ—å‡ºæ‰€æœ‰éžç³»ç»Ÿè¡¨æ ¼ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/&quot;``` || ç«¯å£ | HTTP åè¯ | æè¿° | ç¤ºä¾‹ || -------------------------------- | --------- | ------------------------ | ------------------------------------------------------------ || `/namespaces` | `GET` | åˆ—å‡ºæ‰€æœ‰å‘½åç©ºé—´ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/namespaces/&quot;``` || `/namespaces/_namespace_` | `GET` | æè¿°æŒ‡å®šå‘½åç©ºé—´ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/namespaces/special_ns&quot;``` || `/namespaces/_namespace_` | `POST` | åˆ›å»ºå‘½åç©ºé—´ | ```curl -vi -X POST \ -H &quot;Accept: text/xml&quot; \ &quot;example.com:8000/namespaces/special_ns&quot;``` || `/namespaces/_namespace_/tables` | `GET` | åˆ—å‡ºæŒ‡å®šå‘½åç©ºé—´å†…æ‰€æœ‰è¡¨ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/namespaces/special_ns/tables&quot;``` || `/namespaces/_namespace_` | `PUT` | æ›´æ”¹çŽ°æœ‰å‘½åç©ºé—´,æœªä½¿ç”¨ | ```curl -vi -X PUT \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/namespaces/special_ns``` || `/namespaces/_namespace_` | `DELETE` | åˆ é™¤å‘½åç©ºé—´.å¿…é¡»ä¸ºç©º | ```curl -vi -X DELETE \ -H &quot;Accept: text/xml&quot; \ &quot;example.com:8000/namespaces/special_ns&quot;``` || ç«¯å£ | HTTP åè¯ | æè¿° | ç¤ºä¾‹ || ------------------ | --------- | ----------------------------------------------------- | ------------------------------------------------------------ || `/_table_/schema` | `GET` | æè¿°æŒ‡å®šè¡¨ç»“æž„ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/schema&quot;``` || `/_table_/schema` | `POST` | æ›´æ–°è¡¨ç»“æž„ | ```curl -vi -X POST \ -H &quot;Accept: text/xml&quot; \ -H &quot;Content-Type: text/xml&quot; \ -d &apos;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;TableSchema name=&quot;users&quot;&gt;&lt;ColumnSchema name=&quot;cf&quot; KEEP_DELETED_CELLS=&quot;true&quot; /&gt;&lt;/TableSchema&gt;&apos; \ &quot;http://example.com:8000/users/schema&quot;``` || `/_table_/schema` | `PUT` | æ–°å»ºè¡¨, æ›´æ–°å·²æœ‰è¡¨ç»“æž„ | ```curl -vi -X PUT \ -H &quot;Accept: text/xml&quot; \ -H &quot;Content-Type: text/xml&quot; \ -d &apos;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;TableSchema name=&quot;users&quot;&gt;&lt;ColumnSchema name=&quot;cf&quot; /&gt;&lt;/TableSchema&gt;&apos; \ &quot;http://example.com:8000/users/schema&quot;``` || `/_table_/schema` | `DELETE` | åˆ é™¤è¡¨. å¿…é¡»ä½¿ç”¨`/_table_/schema` ä¸ä»…ä»… `/_table_/`. | ```curl -vi -X DELETE \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/schema&quot;``` || `/_table_/regions` | `GET` | åˆ—å‡ºè¡¨åŒºåŸŸ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/regions``` || ç«¯å£ | HTTP åè¯ | æè¿° | ç¤ºä¾‹ || ----------------------------------------------------------- | --------- | ------------------------------------------------------------ | ------------------------------------------------------------ || `/_table_/_row_` | `GET` | èŽ·å–å•è¡Œçš„æ‰€æœ‰åˆ—ã€‚å€¼ä¸ºBase-64ç¼–ç ã€‚è¿™éœ€è¦â€œAcceptâ€è¯·æ±‚æ ‡å¤´ï¼Œå…¶ç±»åž‹å¯ä»¥åŒ…å«å¤šä¸ªåˆ— (like xml, json or protobuf). | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/row1&quot;``` || `/_table_/_row_/_column:qualifier_/_timestamp_` | `GET` | èŽ·å–å•ä¸ªåˆ—çš„å€¼ã€‚å€¼ä¸ºBase-64ç¼–ç ã€‚ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/row1/cf:a/1458586888395&quot;``` || `/_table_/_row_/_column:qualifier_` | `GET` | èŽ·å–å•ä¸ªåˆ—çš„å€¼ã€‚å€¼ä¸ºBase-64ç¼–ç ã€‚ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/row1/cf:a&quot; æˆ–è€… curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/row1/cf:a/&quot;``` || `/_table_/_row_/_column:qualifier_/?v=_number_of_versions_` | `GET` | èŽ·å–æŒ‡å®šå•å…ƒæ ¼çš„æŒ‡å®šç‰ˆæœ¬æ•°. èŽ·å–å•ä¸ªåˆ—çš„å€¼ã€‚å€¼ä¸ºBase-64ç¼–ç ã€‚ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/row1/cf:a?v=2&quot;``` || ç«¯å£ | HTTP åè¯ | æè¿° | ç¤ºä¾‹ || ------------------------------- | --------- | ------------------------------------------------------------ | ------------------------------------------------------------ || `/_table_/scanner/` | `PUT` | èŽ·å–Scannerå¯¹è±¡ã€‚ æ‰€æœ‰å…¶ä»–æ‰«ææ“ä½œéƒ½éœ€è¦ã€‚ å°†æ‰¹å¤„ç†å‚æ•°è°ƒæ•´ä¸ºæ‰«æåº”åœ¨æ‰¹å¤„ç†ä¸­è¿”å›žçš„è¡Œæ•°ã€‚ è¯·å‚é˜…ä¸‹ä¸€ä¸ªå‘æ‰«æä»ªæ·»åŠ è¿‡æ»¤å™¨çš„ç¤ºä¾‹ã€‚ æ‰«æç¨‹åºç«¯ç‚¹URLä½œä¸ºHTTPå“åº”ä¸­çš„ `Location`è¿”å›žã€‚ æ­¤è¡¨ä¸­çš„å…¶ä»–ç¤ºä¾‹å‡å®šæ‰«æä»ªç«¯ç‚¹ä¸º`http://example.com:8000/users/scanner/145869072824375522207`ã€‚ | ```curl -vi -X PUT \ -H &quot;Accept: text/xml&quot; \ -H &quot;Content-Type: text/xml&quot; \ -d &apos;&lt;Scanner batch=&quot;1&quot;/&gt;&apos; \ &quot;http://example.com:8000/users/scanner/&quot;``` || `/_table_/scanner/` | `PUT` | è¦å‘æ‰«æç¨‹åºå¯¹è±¡æä¾›è¿‡æ»¤å™¨æˆ–ä»¥ä»»ä½•å…¶ä»–æ–¹å¼é…ç½®æ‰«æç¨‹åºï¼Œæ‚¨å¯ä»¥åˆ›å»ºæ–‡æœ¬æ–‡ä»¶å¹¶å°†è¿‡æ»¤å™¨æ·»åŠ åˆ°æ–‡ä»¶ä¸­ã€‚ ä¾‹å¦‚ï¼Œè¦ä»…è¿”å›žä»¥&lt;codeph&gt;u123&lt;/codeph&gt;å¼€å¤´çš„è¡Œå¹¶ä½¿ç”¨æ‰¹é‡å¤§å°ä¸º100çš„è¡Œï¼Œè¿‡æ»¤å™¨æ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºï¼š[source,xml] ---- &lt;Scanner batch=&quot;100&quot;&gt; &lt;filter&gt; &#123; &quot;type&quot;: &quot;PrefixFilter&quot;, &quot;value&quot;: &quot;u123&quot; &#125; &lt;/filter&gt; &lt;/Scanner&gt;----å°†æ–‡ä»¶ä¼ é€’ç»™`curl`çš„`-d`å‚æ•° è¯·æ±‚ã€‚ | ```curl -vi -X PUT \ -H &quot;Accept: text/xml&quot; \ -H &quot;Content-Type:text/xml&quot; \ -d @filter.txt \ &quot;http://example.com:8000/users/scanner/&quot;``` || `/_table_/scanner/_scanner-id_` | `GET` | ä»Žæ‰«æä»ªèŽ·å–ä¸‹ä¸€æ‰¹ã€‚ å•å…ƒæ ¼å€¼æ˜¯å­—èŠ‚ç¼–ç çš„ã€‚ å¦‚æžœæ‰«æä»ªå·²è€—å°½ï¼Œåˆ™è¿”å›žHTTPçŠ¶æ€`204`ã€‚ | ```curl -vi -X GET \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/scanner/145869072824375522207&quot;``` || `_table_/scanner/_scanner-id_` | `DELETE` | åˆ é™¤æ‰€æœ‰æ‰«æå¹¶é‡Šæ”¾èµ„æº | ```curl -vi -X DELETE \ -H &quot;Accept: text/xml&quot; \ &quot;http://example.com:8000/users/scanner/145869072824375522207&quot;``` || ç«¯å£ | HTTP åè¯ | æè¿° | ç¤ºä¾‹ || -------------------- | --------- | ------------------------------------------------------------ | ------------------------------------------------------------ || `/_table_/_row_key_` | `PUT` | åœ¨è¡¨ä¸­å†™ä¸€è¡Œã€‚ è¡Œï¼Œåˆ—é™å®šç¬¦å’Œå€¼å¿…é¡»å‡ä¸ºBase-64ç¼–ç ã€‚ è¦ç¼–ç å­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨`base64`å‘½ä»¤è¡Œå®žç”¨ç¨‹åºã€‚ è¦è§£ç å­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨`base64 -d`ã€‚ æœ‰æ•ˆè´Ÿè½½ä½äºŽ`--data`å‚æ•°ä¸­ï¼Œ`/ users / fakerow`å€¼æ˜¯å ä½ç¬¦ã€‚ é€šè¿‡å°†å¤šè¡Œæ·»åŠ åˆ°`&lt;CellSet&gt;`å…ƒç´ æ¥æ’å…¥å¤šè¡Œã€‚ æ‚¨è¿˜å¯ä»¥å°†è¦æ’å…¥çš„æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶ä½¿ç”¨`-d @ filename.txt`ç­‰è¯­æ³•å°†å…¶ä¼ é€’ç»™`-d`å‚æ•°ã€‚ | ```curl -vi -X PUT \ -H &quot;Accept: text/xml&quot; \ -H &quot;Content-Type: text/xml&quot; \ -d &apos;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;CellSet&gt;&lt;Row key=&quot;cm93NQo=&quot;&gt;&lt;Cell column=&quot;Y2Y6ZQo=&quot;&gt;dmFsdWU1Cg==&lt;/Cell&gt;&lt;/Row&gt;&lt;/CellSet&gt;&apos; \ &quot;http://example.com:8000/users/fakerow&quot; æˆ–è€… curl -vi -X PUT \ -H &quot;Accept: text/json&quot; \ -H &quot;Content-Type: text/json&quot; \ -d &apos;&#123;&quot;Row&quot;:[&#123;&quot;key&quot;:&quot;cm93NQo=&quot;, &quot;Cell&quot;: [&#123;&quot;column&quot;:&quot;Y2Y6ZQo=&quot;, &quot;$&quot;:&quot;dmFsdWU1Cg==&quot;&#125;]&#125;]&#125;&apos;&apos; \ &quot;example.com:8000/users/fakerow&quot;``` |### 97.4\. REST XML ç»“æž„ &lt;/schema&gt;12### 97.5\. REST Protobufs ç»“æž„ message Version { optional string restVersion = 1; optional string jvmVersion = 2; optional string osVersion = 3; optional string serverVersion = 4; optional string jerseyVersion = 5;} message StorageClusterStatus { message Region { required bytes name = 1; optional int32 stores = 2; optional int32 storefiles = 3; optional int32 storefileSizeMB = 4; optional int32 memstoreSizeMB = 5; optional int32 storefileIndexSizeMB = 6; } message Node { required string name = 1; // name:port optional int64 startCode = 2; optional int32 requests = 3; optional int32 heapSizeMB = 4; optional int32 maxHeapSizeMB = 5; repeated Region regions = 6; } // node status repeated Node liveNodes = 1; repeated string deadNodes = 2; // summary statistics optional int32 regions = 3; optional int32 requests = 4; optional double averageLoad = 5;} message TableList { repeated string name = 1;} message TableInfo { required string name = 1; message Region { required string name = 1; optional bytes startKey = 2; optional bytes endKey = 3; optional int64 id = 4; optional string location = 5; } repeated Region regions = 2;} message TableSchema { optional string name = 1; message Attribute { required string name = 1; required string value = 2; } repeated Attribute attrs = 2; repeated ColumnSchema columns = 3; // optional helpful encodings of commonly used attributes optional bool inMemory = 4; optional bool readOnly = 5;} message ColumnSchema { optional string name = 1; message Attribute { required string name = 1; required string value = 2; } repeated Attribute attrs = 2; // optional helpful encodings of commonly used attributes optional int32 ttl = 3; optional int32 maxVersions = 4; optional string compression = 5;} message Cell { optional bytes row = 1; // unused if Cell is in a CellSet optional bytes column = 2; optional int64 timestamp = 3; optional bytes data = 4;} message CellSet { message Row { required bytes key = 1; repeated Cell values = 2; } repeated Row rows = 1;} message Scanner { optional bytes startRow = 1; optional bytes endRow = 2; repeated bytes columns = 3; optional int32 batch = 4; optional int64 startTime = 5; optional int64 endTime = 6;}12345678910111213141516171819202122232425262728293031## 98\. Thriftç›¸å…³æ–‡æ¡£å·²è½¬ç§»åˆ° [Thrift API and Filter Language](#thrift).## 99\. C/C++ Apache HBase å®¢æˆ·ç«¯FBâ€™s Chip Turnerç¼–å†™äº†çº¯æ­£ C/C++ å®¢æˆ·ç«¯. [Check it out](https://github.com/hinaria/native-cpp-hbase-client).C++ client å®žçŽ°. è¯¦è§: [HBASE-14850](https://issues.apache.org/jira/browse/HBASE-14850).## 100\. å°† Java Data Objects (JDO) å’Œ HBaseä¸€èµ·ä½¿ç”¨[Javaæ•°æ®å¯¹è±¡Java Data Objects (JDO)](https://db.apache.org/jdo/) æ˜¯ä¸€ç§è®¿é—®æ•°æ®åº“ä¸­æŒä¹…æ•°æ®çš„æ ‡å‡†æ–¹æ³•ï¼Œä½¿ç”¨æ™®é€šçš„æ—§Javaå¯¹è±¡ï¼ˆPOJOï¼‰æ¥è¡¨ç¤ºæŒä¹…æ•°æ®ã€‚ä¾èµ–æ­¤ä»£ç ç¤ºä¾‹å…·æœ‰ä»¥ä¸‹ä¾èµ–é¡¹ï¼š1. HBase 0.90.x æˆ–æ›´é«˜ç‰ˆæœ¬2. commons-beanutils.jar ([https://commons.apache.org/](https://commons.apache.org/))3. commons-pool-1.5.5.jar ([https://commons.apache.org/](https://commons.apache.org/))4. transactional-tableindexed for HBase 0.90 ([https://github.com/hbase-trx/hbase-transactional-tableindexed](https://github.com/hbase-trx/hbase-transactional-tableindexed))ä¸‹è½½ `hbase-jdo`ä¸‹è½½æºç  [http://code.google.com/p/hbase-jdo/](http://code.google.com/p/hbase-jdo/).Example 26\. JDO ç¤ºä¾‹æ­¤ç¤ºä¾‹ä½¿ç”¨JDOåˆ›å»ºä¸€ä¸ªè¡¨å’Œä¸€ä¸ªç´¢å¼•ï¼Œåœ¨è¡¨ä¸­æ’å…¥è¡Œï¼ŒèŽ·å–è¡Œï¼ŒèŽ·å–åˆ—å€¼ï¼Œæ‰§è¡ŒæŸ¥è¯¢ä»¥åŠæ‰§è¡Œä¸€äº›å…¶ä»–HBaseæ“ä½œã€‚ package com.apache.hadoop.hbase.client.jdo.examples; import java.io.File;import java.io.FileInputStream;import java.io.InputStream;import java.util.Hashtable; import org.apache.hadoop.fs.Path;import org.apache.hadoop.hbase.client.tableindexed.IndexedTable; import com.apache.hadoop.hbase.client.jdo.AbstractHBaseDBO;import com.apache.hadoop.hbase.client.jdo.HBaseBigFile;import com.apache.hadoop.hbase.client.jdo.HBaseDBOImpl;import com.apache.hadoop.hbase.client.jdo.query.DeleteQuery;import com.apache.hadoop.hbase.client.jdo.query.HBaseOrder;import com.apache.hadoop.hbase.client.jdo.query.HBaseParam;import com.apache.hadoop.hbase.client.jdo.query.InsertQuery;import com.apache.hadoop.hbase.client.jdo.query.QSearch;import com.apache.hadoop.hbase.client.jdo.query.SelectQuery;import com.apache.hadoop.hbase.client.jdo.query.UpdateQuery; /** Hbase JDO Example.* dependency library. commons-beanutils.jar commons-pool-1.5.5.jar hbase0.90.0-transactionl.jar* you can expand Delete,Select,Update,Insert Query classes. /public class HBaseExample {public static void main(String[] args) throws Exception { AbstractHBaseDBO dbo = new HBaseDBOImpl(); //drop if table is already exist. if(dbo.isTableExist(â€œuserâ€)){ dbo.deleteTable(â€œuserâ€); } //create table dbo.createTableIfNotExist(â€œuserâ€,HBaseOrder.DESC,â€accountâ€); //dbo.createTableIfNotExist(â€œuserâ€,HBaseOrder.ASC,â€accountâ€); //create index. String[] cols={â€œidâ€,â€nameâ€}; dbo.addIndexExistingTable(â€œuserâ€,â€accountâ€,cols); //insert InsertQuery insert = dbo.createInsertQuery(â€œuserâ€); UserBean bean = new UserBean(); bean.setFamily(â€œaccountâ€); bean.setAge(20); bean.setEmail(â€œncanis@gmail.comâ€); bean.setId(â€œncanisâ€); bean.setName(â€œncanisâ€); bean.setPassword(â€œ1111â€); insert.insert(bean); //select 1 row SelectQuery select = dbo.createSelectQuery(â€œuserâ€); UserBean resultBean = (UserBean)select.select(bean.getRow(),UserBean.class); // select column value. String value = (String)select.selectColumn(bean.getRow(),â€accountâ€,â€idâ€,String.class); // search with option (QSearch has EQUAL, NOT_EQUAL, LIKE) // select id,password,name,email from account where id=â€™ncanisâ€™ limit startRow,20 HBaseParam param = new HBaseParam(); param.setPage(bean.getRow(),20); param.addColumn(â€œidâ€,â€passwordâ€,â€nameâ€,â€emailâ€); param.addSearchOption(â€œidâ€,â€ncanisâ€,QSearch.EQUAL); select.search(â€œaccountâ€, param, UserBean.class); // search column value is existing. boolean isExist = select.existColumnValue(â€œaccountâ€,â€idâ€,â€ncanisâ€.getBytes()); // update password. UpdateQuery update = dbo.createUpdateQuery(â€œuserâ€); Hashtable colsTable = new Hashtable(); colsTable.put(â€œpasswordâ€,â€2222â€.getBytes()); update.update(bean.getRow(),â€accountâ€,colsTable); //delete DeleteQuery delete = dbo.createDeleteQuery(â€œuserâ€); delete.deleteRow(resultBean.getRow()); //////////////////////////////////// // etc // HTable pool with apache commons pool // borrow and release. HBasePoolManager(maxActive, minIdle etc..) IndexedTable table = dbo.getPool().borrow(â€œuserâ€); dbo.getPool().release(table); // upload bigFile by hadoop directly. HBaseBigFile bigFile = new HBaseBigFile(); File file = new File(â€œdoc/movie.aviâ€); FileInputStream fis = new FileInputStream(file); Path rootPath = new Path(â€œ/files/â€œ); String filename = â€œmovie.aviâ€; bigFile.uploadFile(rootPath,filename,fis,true); // receive file stream from hadoop. Path p = new Path(rootPath,filename); InputStream is = bigFile.path2Stream(p,4096); }} 123456## 101\. Scala### 101.1\. è®¾ç½®ç±»è·¯å¾„è¦å°†Scalaä¸ŽHBaseä¸€èµ·ä½¿ç”¨ï¼Œæ‚¨çš„CLASSPATHå¿…é¡»åŒ…å«HBaseçš„ç±»è·¯å¾„ä»¥åŠä»£ç æ‰€éœ€çš„Scala JARã€‚é¦–å…ˆï¼Œåœ¨è¿è¡ŒHBase RegionServerè¿›ç¨‹çš„æœåŠ¡å™¨ä¸Šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œä»¥èŽ·å–HBaseçš„ç±»è·¯å¾„ã€‚ $ ps aux |grep regionserver| awk -F â€˜java.library.path=â€™ {â€˜print $2â€™} | awk {â€˜print $1â€™} /usr/lib/hadoop/lib/native:/usr/lib/hbase/lib/native/Linux-amd64-6412è®¾ç½®`$CLASSPATH`çŽ¯å¢ƒå˜é‡ä»¥åŒ…æ‹¬æ‚¨åœ¨ä¸Šä¸€æ­¥ä¸­æ‰¾åˆ°çš„è·¯å¾„ï¼Œä»¥åŠé¡¹ç›®æ‰€éœ€çš„`scala-library.jar`è·¯å¾„å’Œæ¯ä¸ªä¸ŽScalaç›¸å…³çš„å…¶ä»–JARã€‚ $ export CLASSPATH=$CLASSPATH:/usr/lib/hadoop/lib/native:/usr/lib/hbase/lib/native/Linux-amd64-64:/path/to/scala-library.jar1234### 101.2\. Scala SBT æ–‡ä»¶ `build.sbt` éœ€è¦ä½¿ç”¨ `resolvers` å’Œ `libraryDependencies` . resolvers += â€œApache HBaseâ€ at â€œhttps://repository.apache.org/content/repositories/releasesâ€œ resolvers += â€œThriftâ€ at â€œhttps://people.apache.org/~rawson/repo/â€œ libraryDependencies ++= Seq( â€œorg.apache.hadoopâ€ % â€œhadoop-coreâ€ % â€œ0.20.2â€, â€œorg.apache.hbaseâ€ % â€œhbaseâ€ % â€œ0.90.4â€)1234### 101.3\. Scala ç¤ºä¾‹æ­¤ç¤ºä¾‹åˆ—å‡ºHBaseè¡¨ï¼Œåˆ›å»ºæ–°è¡¨å¹¶å‘å…¶æ·»åŠ è¡Œï¼š import org.apache.hadoop.hbase.HBaseConfigurationimport org.apache.hadoop.hbase.client.{Connection,ConnectionFactory,HBaseAdmin,HTable,Put,Get}import org.apache.hadoop.hbase.util.Bytes val conf = new HBaseConfiguration()val connection = ConnectionFactory.createConnection(conf);val admin = connection.getAdmin(); // list the tablesval listtables=admin.listTables()listtables.foreach(println) // letâ€™s insert some data in â€˜mytableâ€™ and get the row val table = new HTable(conf, â€œmytableâ€) val theput= new Put(Bytes.toBytes(â€œrowkey1â€)) theput.add(Bytes.toBytes(â€œidsâ€),Bytes.toBytes(â€œid1â€),Bytes.toBytes(â€œoneâ€))table.put(theput) val theget= new Get(Bytes.toBytes(â€œrowkey1â€))val result=table.get(theget)val value=result.value()println(Bytes.toString(value))12345678## 102\. Jython### 102.1\. è®¾ç½®ç±»è·¯å¾„è¦å°†Jythonä¸ŽHBaseä¸€èµ·ä½¿ç”¨ï¼Œæ‚¨çš„CLASSPATHå¿…é¡»åŒ…å«HBaseçš„ç±»è·¯å¾„ä»¥åŠä»£ç æ‰€éœ€çš„Jython JARã€‚å°†è·¯å¾„è®¾ç½®ä¸ºåŒ…å«`Jython.jar`çš„ç›®å½•ï¼Œä»¥åŠæ¯ä¸ªé¡¹ç›®éœ€è¦çš„é™„åŠ çš„Jythonç›¸å…³JARã€‚ç„¶åŽå°†çš„HBASE_CLASSPATHæŒ‡å‘$JYTHON_HOME ã€‚ $ export HBASE_CLASSPATH=/directory/jython.jar12345678åœ¨ç±»è·¯å¾„ä¸­ä½¿ç”¨HBaseå’ŒHadoop JARå¯åŠ¨Jython shell: $ bin/hbase org.python.util.jython### 102.2\. Jython ç¤ºä¾‹Example 27\. ä½¿ç”¨Jythonåˆ›å»ºè¡¨ï¼Œå¡«å……ï¼ŒèŽ·å–å’Œåˆ é™¤è¡¨ä»¥ä¸‹Jythonä»£ç ç¤ºä¾‹æ£€æŸ¥è¡¨ï¼Œå¦‚æžœå­˜åœ¨ï¼Œåˆ™åˆ é™¤å®ƒç„¶åŽåˆ›å»ºå®ƒã€‚ç„¶åŽï¼Œå®ƒä½¿ç”¨æ•°æ®å¡«å……è¡¨å¹¶èŽ·å–æ•°æ®ã€‚ import java.langfrom org.apache.hadoop.hbase import HBaseConfiguration, HTableDescriptor, HColumnDescriptor, TableNamefrom org.apache.hadoop.hbase.client import Admin, Connection, ConnectionFactory, Get, Put, Result, Tablefrom org.apache.hadoop.conf import Configuration First get a conf object. This will read in the configurationthat is out in your hbase-*.xml files such as location of thehbase master node.conf = HBaseConfiguration.create()connection = ConnectionFactory.createConnection(conf)admin = connection.getAdmin() Create a table named â€˜testâ€™ that has a column familynamed â€˜contentâ€™.tableName = TableName.valueOf(â€œtestâ€)table = connection.getTable(tableName) desc = HTableDescriptor(tableName)desc.addFamily(HColumnDescriptor(â€œcontentâ€)) Drop and recreate if it existsif admin.tableExists(tableName): admin.disableTable(tableName) admin.deleteTable(tableName) admin.createTable(desc) Add content to â€˜column:â€™ on a row named â€˜row_xâ€™row = â€˜row_xâ€™put = Put(row)put.addColumn(â€œcontentâ€, â€œqualâ€, â€œsome contentâ€)table.put(put) Now fetch the content just added, returns a byte[]get = Get(row) result = table.get(get)data = java.lang.String(result.getValue(â€œcontentâ€, â€œqualâ€), â€œUTF8â€) print â€œThe fetched row contains the value â€˜%sâ€™â€ % data1234Example 28\. ä½¿ç”¨Jythonè¿›è¡Œè¡¨æ‰«ææ­¤ç¤ºä¾‹æ‰«æè¡¨å¹¶è¿”å›žä¸Žç»™å®šæ—é™å®šç¬¦åŒ¹é…çš„ç»“æžœã€‚ import java.langfrom org.apache.hadoop.hbase import TableName, HBaseConfigurationfrom org.apache.hadoop.hbase.client import Connection, ConnectionFactory, Result, ResultScanner, Table, Adminfrom org.apache.hadoop.conf import Configurationconf = HBaseConfiguration.create()connection = ConnectionFactory.createConnection(conf)admin = connection.getAdmin()tableName = TableName.valueOf(â€˜wikiâ€™)table = connection.getTable(tableName) cf = â€œtitleâ€attr = â€œattrâ€scanner = table.getScanner(cf)while 1: result = scanner.next() if not result: break print java.lang.String(result.row), java.lang.String(result.getValue(cf, attr))```]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>Coding</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Apache-HBase-â„¢-ä¸­æ–‡æŒ‡å—-æœ€æ–°ç‰ˆHBase-3-0-0-ch14-Apache HBase APIs]]></title>
    <url>%2F2019%2F05%2F19%2Fch13%2F</url>
    <content type="text"><![CDATA[Apache HBase APIs è¯‘è€…ï¼šxixici æœ¬ç« èŠ‚æä¾›æœ‰å…³ä½¿ç”¨åŸºç¡€HBase APIæ‰§è¡Œæ“ä½œçš„æ–¹æ³•ã€‚ æ­¤æ–¹æ³•å¹¶éžè¯¦å°½æ— é—ï¼Œå¿«é€Ÿå‚è€ƒ User API Referenceã€‚ æ­¤å¤„çš„ç¤ºä¾‹ä¸å…¨é¢ï¼Œä»…ç”¨äºŽè¯´æ˜Žç›®çš„ã€‚ Apache HBase ä¹Ÿæ‹¥æœ‰å¤šç§å¤–éƒ¨ APIs. è¯¦è§:Apache HBase External APIs 96. ä¾‹å­Example 25. ä½¿ç”¨Javaåˆ›å»º.ä¿®æ”¹å’Œåˆ é™¤è¡¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788package com.example.hbase.admin;import java.io.IOException;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.hbase.HBaseConfiguration;import org.apache.hadoop.hbase.HColumnDescriptor;import org.apache.hadoop.hbase.HConstants;import org.apache.hadoop.hbase.HTableDescriptor;import org.apache.hadoop.hbase.TableName;import org.apache.hadoop.hbase.client.Admin;import org.apache.hadoop.hbase.client.Connection;import org.apache.hadoop.hbase.client.ConnectionFactory;import org.apache.hadoop.hbase.io.compress.Compression.Algorithm;public class Example &#123; private static final String TABLE_NAME = &quot;MY_TABLE_NAME_TOO&quot;; private static final String CF_DEFAULT = &quot;DEFAULT_COLUMN_FAMILY&quot;; public static void createOrOverwrite(Admin admin, HTableDescriptor table) throws IOException &#123; if (admin.tableExists(table.getTableName())) &#123; admin.disableTable(table.getTableName()); admin.deleteTable(table.getTableName()); &#125; admin.createTable(table); &#125; public static void createSchemaTables(Configuration config) throws IOException &#123; try (Connection connection = ConnectionFactory.createConnection(config); Admin admin = connection.getAdmin()) &#123; HTableDescriptor table = new HTableDescriptor(TableName.valueOf(TABLE_NAME)); table.addFamily(new HColumnDescriptor(CF_DEFAULT).setCompressionType(Algorithm.NONE)); System.out.print(&quot;Creating table. &quot;); createOrOverwrite(admin, table); System.out.println(&quot; Done.&quot;); &#125; &#125; public static void modifySchema (Configuration config) throws IOException &#123; try (Connection connection = ConnectionFactory.createConnection(config); Admin admin = connection.getAdmin()) &#123; TableName tableName = TableName.valueOf(TABLE_NAME); if (!admin.tableExists(tableName)) &#123; System.out.println(&quot;Table does not exist.&quot;); System.exit(-1); &#125; HTableDescriptor table = admin.getTableDescriptor(tableName); // æ›´æ–°è¡¨æ ¼ HColumnDescriptor newColumn = new HColumnDescriptor(&quot;NEWCF&quot;); newColumn.setCompactionCompressionType(Algorithm.GZ); newColumn.setMaxVersions(HConstants.ALL_VERSIONS); admin.addColumn(tableName, newColumn); // æ›´æ–°åˆ—æ— HColumnDescriptor existingColumn = new HColumnDescriptor(CF_DEFAULT); existingColumn.setCompactionCompressionType(Algorithm.GZ); existingColumn.setMaxVersions(HConstants.ALL_VERSIONS); table.modifyFamily(existingColumn); admin.modifyTable(tableName, table); // ç¦ç”¨è¡¨æ ¼ admin.disableTable(tableName); // åˆ é™¤åˆ—æ— admin.deleteColumn(tableName, CF_DEFAULT.getBytes(&quot;UTF-8&quot;)); // åˆ é™¤è¡¨æ ¼(éœ€æå‰ç¦ç”¨) admin.deleteTable(tableName); &#125; &#125; public static void main(String... args) throws IOException &#123; Configuration config = HBaseConfiguration.create(); //æ·»åŠ å¿…è¦é…ç½®æ–‡ä»¶(hbase-site.xml, core-site.xml) config.addResource(new Path(System.getenv(&quot;HBASE_CONF_DIR&quot;), &quot;hbase-site.xml&quot;)); config.addResource(new Path(System.getenv(&quot;HADOOP_CONF_DIR&quot;), &quot;core-site.xml&quot;)); createSchemaTables(config); modifySchema(config); &#125;&#125;]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>Coding</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitä¸€é”®æäº¤è„šæœ¬,commitä¿¡æ¯å¢žåŠ éšæœºemojiå’Œæ—¶é—´æˆ³]]></title>
    <url>%2F2019%2F03%2F18%2Fgit-shell%2F</url>
    <content type="text"><![CDATA[1234567891011emoji=( â™ˆï¸ â™‰ â™Šï¸ â™‹ï¸ â™Œï¸ â™ï¸ â™Žï¸ â™ï¸ â™ï¸ â™‘ï¸ â™’ï¸ â™“ï¸ â›Ž ðŸ”¯ )git add -Aecho "Add Finish"git commit -am "$&#123;emoji[$(($RANDOM % $&#123;#emoji[@]&#125; + 1 ))]&#125; xixici push at $(date "+%Y-%m-%d %H:%M:%S")"echo "Commit Finish"git pullecho "Pull Finish"git statusecho "Status Finish"git pushecho "push Finish"]]></content>
      <categories>
        <category>shell</category>
      </categories>
      <tags>
        <tag>Coding</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Scala å­¦ä¹ æ‰‹å†Œ - è¯¾åŽé¢˜]]></title>
    <url>%2F2019%2F03%2F12%2Fscala-learning-exercises%2F</url>
    <content type="text"><![CDATA[ç« èŠ‚1l. println (ï¼‰æ˜¯ä¸€ ç§å¾ˆå¥½çš„æ‰“å°å­—ç¬¦ä¸²çš„æ–¹æ€¯ï¼Œ ä¸è¿‡ä½ èƒ½æ‰¾åˆ°å¦å¤–ä¸€ ç§ä¸ä½¿ç”¨ printlnæ‰“å°å­—ç¬¦ä¸²çš„æ–¹èƒ½å—ï¼Ÿå¦å¤–ï¼Œ REPLæ”¯æŒå“ªäº›ç±»åž‹çš„æ•°å­—ã€ å­—ç¬¦ä¸²å’Œå…¶ä»–æ•°æ®ï¼Ÿ \2. åœ¨Scala REPLä¸­ï¼Œ å°†æ¸©åº¦å€¼22.5ä»Žæ‘„æ°åº¦è½¬æ¢ä¸ºåŽæ°åº¦ã€‚ è½¬æ¢å…¬å¼æ˜¯cToF(x) = (x *9/5) + 32ã€‚ \3. å°†ç»ƒä¹ 2çš„ç»“æžœé™¤ä»¥2ï¼Œ å†å°†å®ƒè½¬æ¢ä¸ºæ‘„æ°åº¦ã€‚ ä¸ç”¨è‡ªå·±å¤åˆ¶ç²˜è´´è¿™ä¸ªå€¼ï¼Œ å¯ä»¥ä½¿ ç”¨ä¹‹å‰ç”Ÿæˆçš„å¸¸é‡å˜é‡ï¼ˆä¾‹å¦‚ï¼Œ â€œ resã€‚ â€œ ï¼‰ã€‚ \4. REPLå¯ä»¥ç”¨ï¼šload &lt;f ileï¼žå‘½ä»¤ä»Žä¸€ä¸ªå¤–éƒ¨æ–‡ä»¶åŠ è½½å’Œè§£é‡Š Scalaä»£ç ã€‚åˆ›å»ºä¸€ä¸ªæ–° æ–‡ä»¶ ï¼Œåä¸ºHello.scala ï¼Œäº•å¢žåŠ ä¸€ä¸ªå‘½ä»¤æ¥æ‰“å° ä¸€æ¡æ¬¢è¿Žè¾ž ï¼Œç„¶åŽä»ŽR EPLæ‰§è¡Œè¿™ ä¸ªå‘½ä»¤ã€‚ \5. è¿˜å¯ä»¥ç”¨å¦ä¸€ç§æ–¹æ³•åŠ è½½å¤–éƒ¨ Scalaä»£ç  ï¼šç”¨â€ra w â€œ ï¼ˆåŽŸå§‹ï¼‰ æ¨¡å¼æŠŠä»£ç ç²˜è´´ åˆ°R EP L ï¼Œä»£ç å°†åœ¨ R EPL ä¸­ç¼–è¯‘ï¼Œå°±å¥½åƒå®ƒä»¬æ¥è‡ªä¸€ä¸ªæ®æ–‡ä»¶ä¸€æ ·ã€‚ä¸ºæ­¤ï¼Œè¾“ å…¥ï¼šp a ste -ra wï¼ŒæŒ‰å›žè½¦é”® ï¼Œç„¶åŽç²˜è´´ç»ƒä¹ 4ä¸­æƒŠæ–‡ä»¶çš„å†…å®¹ã€‚é€€å‡ºâ€ç²˜è´´â€ æ¨¡å¼ åŽï¼Œåº”è¯¥èƒ½çœ‹åˆ°æ¬¢è¿Žè¾ž ã€‚ ç« èŠ‚2l. ç¼–å†™ä¸€ä¸ªæ–°çš„æ‘„æ°åº¦åˆ°åŽæ°åº¦è½¬æ¢çš„ç¨‹åº ï¼ˆä½¿ç”¨å…¬å¼ï¼ˆx * 9/5) + 32ï¼‰ï¼ŒæŠŠæ¯ä¸€æ­¥è½¬ æ¢çš„ç»“æžœä¿å­˜åœ¨å•ç‹¬çš„å€¼ä¸­ã€‚ä½ è®¤ä¸ºè¿™äº›å€¼çš„ç±»åž‹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ \2. ä¿®æ”¹æ‘„æ°åº¦åˆ°åŽæ°åº¦è½¬æ¢çš„å…¬å¼ ï¼Œè¿”å›žä¸€ä¸ªæ•´æ•°è€Œä¸æ˜¯æµ®ç‚¹æ•°ã€‚ \3. ä½¿ç”¨è¾“å…¥å€¼2.7255 ï¼Œç”Ÿæˆå­—ç¬¦ä¸² â€œYou owe $2.73â€ã€‚å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å†…æ’æ¥å®žçŽ° å—ï¼Ÿ \4. æœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹æ³•é‡å†™ä»¥ä¸‹ä»£ç ï¼Ÿ val flag: Boolean = false val result: Boolean = (flag == f alse) \5. å°†æ•°å­— 128è½¬æ¢ä¸ºä¸€ä¸ªCha r ã€Stringå’ŒDou ble ï¼Œç„¶åŽå†è½¬æ¢å›ž Int ã€‚ä½ è®¤ä¸ºè¿˜èƒ½å¾—åˆ° åŽŸæ¥çš„å€¼å—ï¼Ÿéœ€è¦ç‰¹æ®Šçš„è½¬æ¢å‡½æ•°å— ï¼Ÿ \6. ä½¿ç”¨è¾“å…¥å­—ç¬¦ä¸² â€œFrank, 123 Main,925-555-1943,95122 â€œ å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¥èŽ·å– ç”µè¯å·ç ã€‚å¯ä»¥æŠŠç”µè¯å·ç çš„æ¯ ä¸€éƒ¨åˆ†è½¬æ¢ä¸ºå•ç‹¬çš„æ•´æ•°å€¼å—ï¼Ÿå¦‚ä½•æŠŠå®ƒå­˜å‚¨åœ¨ ä¸€ä¸ªå…ƒç»„ä¸­ï¼Ÿ ç« èŠ‚3å°½ç®¡Scala REPLæä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„é€”å¾„æ¥å°è¯•è¿™ä¸ªè¯­è¨€ çš„ç‰¹æ€§ï¼Œä¸è¿‡åœ¨REPL ä¸­ä¸åªæ˜¯ ç¼–å†™ä¸€ä¸¤è¡Œä»£ç  ï¼Œè€Œéœ€è¦ç¼–å†™å¤šè¡Œä»£ç  ï¼Œå°±å¯èƒ½å¾ˆå›°éš¾ ã€‚ç”±äºŽæŽ¥ä¸‹æ¥éœ€è¦ä½¿ç”¨å¤šè¡Œä»£ ç  ï¼Œæ‰€ä»¥çŽ°åœ¨å¼€å§‹ä½¿ç”¨å•ç‹¬çš„ ScalaiåŽŸæ–‡ä»¶ã€‚ sealaå‘½ä»¤å¯ä»¥å¯åŠ¨Scala é˜»PL ï¼Œè¿˜å¯ä»¥ç”¨æ¥è®¡ç®—å’Œæ‰§è¡ŒScalaæŽ˜æ–‡ä»¶ ï¼š $ scala å¯ä»¥è¯•è¯•çœ‹ ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºHello.scala çš„æ–°æ–‡ä»¶ ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š println(â€œHello, World â€œï¼‰ ç„¶åŽç”¨sealaå‘½ä»¤æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ ï¼š $ scala Hello.scala Hellå£ World $ åº”è¯¥å¯ä»¥çœ‹åˆ°ä¸‹ä¸€è¡Œä¼šæ‰“å°ç»“æžœ ï¼ˆâ€Hello, World â€œï¼‰ ã€‚ è¦æ‰§è¡Œå¤–éƒ¨Scalaæ–‡ä»¶ ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ¯¡ ï¼šå¯ä»¥åœ¨Sca la REPLä¸­ä½¿ç”¨ï¼šloa då‘½ä»¤ã€‚å¦‚æžœä½  å¸Œæœ›ä½¿ç”¨Scala REPLçš„åŒæ—¶è¿˜èƒ½ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æˆ–IDEç¼–è¾‘ä»£ç  ï¼Œè¿™ä¼šå¾ˆæœ‰ç”¨ã€‚ ä¸‹é¢æ¥è¯•è¯•çœ‹ ï¼Œåœ¨åˆ›å»ºHello .scala æ–‡ä»¶æ‰€åœ¨çš„åŒä¸€ä¸ªç›®å½•ä¸­ ï¼Œå¯åŠ¨Sca l a R EPLäº•è¿ è¡Œ ï¼šload Hello.scala : seala&gt; :load Hello. scala Loading Hello.scala. Hello, World scala&gt; æ³¨æ„ ï¼š:loadå‘½ä»¤æ˜¯ä¸€ä¸ªScala REPLç‰¹æ€§ ï¼Œå®žé™…ä¸Šè¿™ä¸æ˜¯Scalatå£è¨€çš„ä¸€éƒ¨åˆ†ã€‚Scala é˜»PLå‘½ä»¤ä¸Žå¸¸ è§„Scalaiå›æ³Œçš„åŒºåˆ«åœ¨äºŽå®ƒä»¬æœ‰ä¸€ä¸ª â€œï¼šâ€ å‰ç¼€ï¼Ž çŽ°åœ¨ä½ å¯ä»¥åœ¨Scala REPLä¸­å¼€å‘ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡æœ¬ç¼–è¾‘å™¨æˆ–IDEä¸­å¼€å‘ï¼Œ ä¸‹é¢å°±å¯ä»¥å¼€å§‹å®Œæˆè¿™ä¸€ç« çš„ç»ƒä¹ äº†ã€‚ l. ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²å ï¼Œå†™ä¸€ä¸ªåŒ¹é…è¡¨è¾¾å¼ ï¼Œå¦‚æžœéžç©ºåˆ™è¿”å›žç›¸åŒçš„å­—ç¬¦ä¸² ï¼Œå¦‚æžœä¸º ç©ºå°±è¿”å›žå­—ç¬¦ä¸²â€n/aâ€ ã€‚ \2. ç»™å®šä¸€ä¸ªåŒç²¾åº¦æ•° ï¼Œå†™ä¸€ä¸ªè¡¨è¾¾å¼ ï¼Œå¦‚æžœè¿™ä¸ªæ•°å¤§äºŽO)illï¼½è¿”å›žâ€greaterâ€ ï¼Œå¦‚æžœç­‰äºŽ0 è¿”å›žâ€sameâ€ ï¼Œå¦‚æžœå°äºŽ0åˆ™è¿”å›žå®essé£ž ä½ èƒ½ç”¨ifâ€¦elseå—æ¥å†™è¿™ä¸ªè¡¨è¾¾å¼ å—ï¼Ÿä½¿ç”¨åŒ¹ é…è¡¨è¾¾å¼å‘¢ï¼Ÿ \3. å†™ä¸€ä¸ªè¡¨è¾¾å¼ ï¼Œå°†è¾“å…¥å€¼cyan, magentaæˆ–yellowè½¬æ¢ä¸ºç›¸åº”çš„6å­—ç¬¦åå…­è¿›åˆ¶å­—ç¬¦ ä¸²è¡¨ç¤ºã€‚å¦‚ä½•å¤„ç†é”™è¯¯æ¡ä»¶ï¼Ÿ \4. æ‰“å°æ•°å­— 1åˆ° 100ï¼Œæ¯è¡ŒåŒ…å«ä¸€ç»„5ä¸ªæ•° ã€‚ä¾‹å¦‚ï¼šï¼š 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 \5. å†™ä¸€ä¸ªè¡¨è¾¾å¼ ï¼Œæ‰“å°æ•°å­—låˆ° 100ï¼Œä¸è¿‡3çš„å€æ•°é™¤å¤–ï¼Œ3çš„å€æ•°è¦æ‰“å°ä¸ºæ°”y peâ€ ï¼Œå¦ å¤–è¦æŠŠ5çš„å€æ•°æ‰“å°ä¸ºâ€safeâ€ ï¼Œå¯¹äºŽ3ä»¥åŠ5çš„å€æ•° ï¼ˆå¦‚15ï¼‰ ï¼Œè´ljæ‰“fP â€œtypesafeâ€ã€‚ \6. èƒ½ä¸èƒ½é‡å†™ç»ƒä¹ 5ï¼ŒæŠŠä»£ç å†™åœ¨ä¸€è¡Œä¸Šï¼Ÿè¿™æ ·åšå¯èƒ½å¯è¯»æ€§ä¸å¥½ ï¼Œä¸è¿‡æŠŠä»£ç ç¼©å‡ ä¸ºæœ€ç®€å½¢å¼æ˜¯ä¸€é—¨è‰ºæœ¯ ï¼Œè¿™ä¹Ÿæ˜¯å­¦ä¹ è¯­è¨€çš„ä¸€ä¸ªå¾ˆå¥½çš„ç»ƒä¹ ã€‚ ç« èŠ‚4\1. å†™ä¸€ä¸ªå‡½æ•°ï¼Œç»™å®šä¸€ä¸ªåœ†çš„åŠå¾„ï¼Œè®¡ç®—è¿™ä¸ªåœ†çš„é¢ç§¯ã€‚ \2. å¯¹ç»ƒä¹ lä¸­çš„å‡½æ•°æä¾›ä¸€ä¸ªæ›¿ä»£å½¢å¼ ï¼Œå°†åŠå¾„ä½œä¸ºä¸€ä¸ªSt r in gã€‚å¦‚æžœè°ƒç”¨è¿™ä¸ªå‡½æ•° æ—¶æä¾›äº†ä¸€ä¸ªç©ºStringä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ \3. å†™ä¸€ä¸ªé€’å½’å‡½æ•° ï¼Œ å¯ä»¥5, 10ã€15 åœ°æ‰“å°ä»Ž5åˆ°50çš„å€¼ ï¼Œä½†ä¸è¦ä½¿ç”¨ f o zæˆ– whileå¾ªçŽ¯ã€‚å¯ä»¥å®žçŽ°å°¾é€’å½’å—ï¼Ÿ \4. å†™ä¸€ä¸ªå‡½æ•° ï¼Œå–ä¸€ä¸ªæ¯«ç§’å€¼ ï¼Œè¿”å›ž ä¸€ä¸ªå­—ç¬¦ä¸² ï¼ŒæŒ‰å¤©ã€å°æ—¶ã€åˆ†å’Œç§’æè¿°è¿™ä¸ª å€¼ã€‚è¾“å…¥å€¼çš„æœ€ä½³ç±»åž‹æ˜¯ä»€ä¹ˆï¼Ÿ \5. å†™ä¸€ä¸ªå‡½æ•° ï¼Œè®¡ç®—ç¬¬ä¸€ä¸ªå€¼ä»¥ç¬¬äºŒä¸ªå€¼ä¸ºæŒ‡æ•°çš„å¹• ã€‚é¦–å…ˆè¯•ç€ç”¨m a t h.p owæ¥å†™è¿™ ä¸ªå‡½æ•° ï¼Œç„¶åŽç”¨ä½ è‡ªå·±çš„ç®—å¼æ¥å®žçŽ°ã€‚ä½ ä½¿ç”¨å˜é‡äº†å—ï¼Ÿæœ‰æ²¡æœ‰æ–¹èƒ½åªä½¿ç”¨ä¸å¯ å˜çš„æ•°æ®ï¼Ÿä½ é€‰æ‹©ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ æ•°å€¼ç±»åž‹äº†å—ï¼Ÿ \6. å†™ä¸€ä¸ªå‡½æ•° ï¼Œè®¡ç®—ä¸€å¯¹2Dç‚¹ ï¼ˆ xå’Œy ï¼‰ ä¹‹å·® ï¼Œå¹¶æŠŠç»“æžœè¿”å›žä¸ºä¸€ä¸ªç‚¹ã€‚æç¤ºï¼šè¿™é‡Œ å¾ˆé€‚åˆä½¿ç”¨å…ƒç»„ ï¼ˆ è§ç¬¬2ç«  â€œå…ƒç»„â€ ä¸€èŠ‚ï¼‰ã€‚ \7. å†™ä¸€ä¸ªå‡½æ•° ï¼Œå–ä¸€ä¸ªå¤§å°ä¸º2çš„å…ƒç»„ ï¼Œè¿”å›žç¬¬ä¸€ä¸ªä½ç½®ä¸Šçš„ I n tå€¼ ï¼ˆå¦‚æžœæœ‰ï¼‰ã€‚æ ç¤ºï¼Œè¿™é‡Œå¾ˆé€‚åˆä½¿ç”¨ç±»åž‹å‚æ•°å’Œ islnstanceOf ç±»åž‹æ“ä½œã€‚ \8. å†™ä¸€ä¸ªå‡½æ•° ï¼Œå–ä¸€ä¸ªå¤§å°ä¸º 3çš„å…ƒç»„ ï¼Œè¿”å›žä¸€ä¸ªå¤§å°ä¸º6çš„å…ƒç»„ ï¼ŒåŽŸæ¥çš„å„ä¸ªå‚æ•° åŽé¢è·Ÿç€ç›¸åº”çš„Stringè¡¨ç¤º ã€‚ä¾‹å¦‚ï¼Œç”¨ï¼ˆ true, 22.25ï¼Œâ€yes â€œ ï¼‰ è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šè¿” å›ž ï¼ˆ trueï¼Œâ€trueâ€ ï¼Œ22.5ï¼Œé£ž2.5â€ï¼Œâ€yes ï¼‚ï¼Œâ€yes ï¼‡â€™ ï¼‰ã€‚èƒ½ä¸èƒ½ä¿è¯æ‰€æœ‰å¯èƒ½ç±»åž‹çš„ å…ƒç»„éƒ½ä¸Žä½ çš„å‡½æ•°å…¼å®¹ ï¼Ÿè°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ ï¼Œèƒ½ä¸èƒ½ä½¿ç”¨æ˜¾å¼ç±»åž‹åšåˆ°è¿™ä¸€ç‚¹ ï¼ˆé™¤ äº†å¯¹å‡½æ•°ç»“æžœä½¿ç”¨æ˜¾å¼ç±»åž‹ï¼Œç”¨æ¥å­˜å‚¨ç»“æžœçš„å€¼ä¹Ÿä½¿ç”¨æ˜¾å¼ç±»åž‹ï¼‰ ï¼Ÿ ç« èŠ‚5I. å†™ä¸€ä¸ªå‡½æ•°å­—é¢é‡ ï¼Œå–ä¸¤ä¸ªæ•´æ•° ï¼Œäº•è¿”å›žè¾ƒå¤§çš„ä¸€ä¸ªæ•° ã€‚ç„¶åŽå†™ä¸€ä¸ªé«˜é˜¶å‡½æ•° ï¼Œ å–ä¸€ä¸ªå¤§å°ä¸º3çš„æ•´æ•°å…ƒç»„äº•ç»“åˆè¿™ä¸ªå‡½æ•°å­—é¢ é‡ ï¼Œç”¨å®ƒè¿”å›žè¿™ä¸ªå…ƒç»„ä¸­çš„æœ€å¤§ å€¼ã€‚ \2. åº“å‡½æ•°u til.R a ndom. nextln tä¼šè¿”å›žä¸€ä¸ªéšæœºæ•´æ•° ã€‚ç”¨å®ƒè°ƒç”¨ â€œmaxâ€ å‡½æ•°ï¼Œæä¾› ä¸¤ä¸ªéšæœºæ•´æ•°å’Œä¸€ä¸ªå‡½æ•° ï¼ˆè¿™ä¸ªå‡½æ•°è¿”å›žä¸¤ä¸ªç»™å®šæ•´æ•°ä¸­è¾ƒå¤§çš„ ä¸€ä¸ªï¼‰ã€‚åˆ©ç”¨å¦ ä¸€ä¸ªå‡½æ•° ï¼ˆè¿”å›žä¸¤ä¸ªç»™å®šæ•´æ•°ä¸­è¾ƒå° çš„ä¸€ä¸ªï¼‰ åšåŒæ ·çš„å¤„ç† ï¼Œç„¶åŽå†æä¾›å¦ä¸€ä¸ª å‡½æ•°æ¯æ¬¡éƒ½è¿”å›žç¬¬äºŒä¸ªæ•´æ•°ã€‚ \3. å†™ä¸€ä¸ªé«˜é˜¶å‡½æ•° ï¼Œå®ƒå–ä¸€ä¸ªæ•´æ•°äº•è¿”å›ž ä¸€ä¸ªå‡½æ•° ã€‚è¿”å›žçš„å‡½æ•°æœ‰ ä¸€ä¸ªæ•´æ•°å‚æ•° ï¼ˆå¦‚ â€œxâ€ ï¼‰ï¼Œå¹¶è¿”å›žxä¸Žä¼ å…¥è¿™ä¸ªé«˜é˜¶å‡½æ•°çš„æ•´æ•°çš„ä¹˜ç§¯ã€‚ \4. å‡è®¾é˜…è¯»å¦ä¸€ä¸ªå¼€å‘äººå‘˜çš„ä»£ç æ—¶çœ‹åˆ°ä¸‹é¢è¿™ä¸ªå‡½æ•° ï¼š é¦–ç±»å‡½æ•° I ss def f zeroA(f : A =&gt; Unit): A = { f (x); x } è¿™ä¸ªå‡½æ•°ä¼šå®Œæˆä»€ä¹ˆå·¥ä½œ ï¼Ÿèƒ½ä¸èƒ½ç»™å‡ºä¸€ä¸ªä¾‹å­æ¥å±•ç¤ºå¦‚ä½•è°ƒç”¨è¿™ä¸ªå‡½æ•° ï¼Ÿ \5. æœ‰ä¸€ä¸ªåä¸º â€œsquareâ€ çš„å‡½æ•° ï¼Œå¸Œæœ›æŠŠå®ƒå­˜å‚¨åœ¨ä¸€ä¸ªå‡½æ•°å€¼ä¸­ ã€‚è¿™æ ·åšåˆé€‚å—ï¼Ÿè¿˜ æœ‰ä»€ä¹ˆåŠžèƒ½å¯ä»¥æŠŠä¸€ä¸ªå‡½æ•°å­˜å‚¨åœ¨ä¸€ä¸ªå€¼ä¸­ ï¼Ÿ def sqæ—§reï¼ˆã€Žã€Ž1: Double) = m * m val sq = square \6. ç¼–å†™ä¸€ä¸ªåä¸º â€œcondi tional â€œ çš„å‡½æ•°ï¼Œå®ƒå–ä¸€ä¸ªå€¼xå’Œä¸¤ä¸ªå‡½æ•°åŒç”ºï¼Œè¿”å›žä¸Žxç±»åž‹ ç›¸åŒçš„ä¸€ä¸ªå€¼ ã€‚p å‡½æ•°æ˜¯ä¸€ä¸ªè°“è¯ ï¼Œå–å€¼x ï¼Œå¹¶è¿”å›žä¸€ä¸ªå¸ƒå°”å€¼bã€‚få‡½æ•°ä¹Ÿå–å€¼X , å¹¶è¿”å›žç›¸åŒç±»åž‹çš„ä¸€ä¸ªæ–°å€¼ ã€‚è¿™ä¸ªâ€conditional â€œ å‡½æ•°åªåœ¨p(x ï¼‰ä¸ºtrueæ—¶æ‰è°ƒç”¨å‡½ æ•°f(xï¼‰ï¼Œå¦åˆ™å°±è¿”å›žxã€‚â€conditional â€œ å‡½æ•°éœ€è¦å¤šå°‘ä¸ªç±»åž‹å‚æ•°ï¼Ÿ \7. è¿˜è®°å¾—ç¬¬3ç« ä¸­çš„ ï¼‡ï¼‡.ty pesafeâ€ ç»ƒä¹ å—ï¼Ÿé¢è¯•å¼€å‘äººå‘˜æ—¶æœ‰ä¸€ä¸ªå¸¸è§çš„ é—®é¢˜ ï¼Œæˆ‘æŠŠ å®ƒç§°ä¸º â€œt y pe saf eâ€ï¼Œ ä¹Ÿå°±æ˜¯è¦æ‰“å°æ•°å­— 1åˆ°100ï¼Œæ¯è¡Œä¸€ä¸ªæ•° ã€‚å…³é”®æ˜¯3çš„å€æ•°å¿… é¡»æ›¿æ¢ä¸º â€œt ypeâ€ï¼Œ 5çš„å€æ•°å¿…é¡»æ›¿æ¢ä¸º â€œsafeâ€ã€‚å½“ç„¶ ï¼Œå¦‚æžœæ˜¯å‡¹çš„å€æ•°ï¼Œåˆ™å¿… é¡»æ‰“å° â€œtypesafeâ€ã€‚ ä½¿ç”¨ç»ƒä¹ 6ä¸­çš„ â€œconditional â€œ å‡½æ•°æ¥å®Œæˆè¿™ä¸ªæŒ‘æˆ˜ã€‚ å¦‚æžœ â€œconditional â€œ çš„è¿”å›žç±»åž‹ä¸Žå‚æ•°xçš„ç±»åž‹ä¸åŒ¹é…ï¼Œä½ çš„ç­”æ¡ˆèƒ½ä¸èƒ½æ›´ç®€çŸ­ï¼Ÿ ä¿®æ”¹ â€œconditional â€œ å‡½æ•°ï¼Œä½¿å®ƒæ›´é€‚åˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ç« èŠ‚6è¿˜è®°å¾—æˆ‘å‰é¢ç»™å‡ºçš„å»ºè®® ï¼ˆ è§ç¬¬3ç«  â€œç»ƒä¹ â€ ï¼‰ å—ï¼Ÿæˆ‘å»ºè®®æŠŠå¼€å‘çŽ¯å¢ƒä»Ž R EPLè½¬æ¢ä¸º ä¸€ä¸ªå¤–éƒ¨Scalaæºæ–‡ä»¶ ã€‚å¦‚æžœä½ è¿˜æ²¡æœ‰å®Œæˆè¿™ä¸ªè½¬æ¢ï¼Œä½ ä¼šå‘çŽ°ï¼Œç”±äºŽè§„æ¨¡å’Œå¤æ‚æ€§çš„ åŽŸå›  ï¼Œåœ¨REPL ä¸­åšè¿™äº›ç»ƒä¹ å‡ å¹³æ˜¯ä¸å¯èƒ½ çš„ã€‚ æˆ‘è¿˜å»ºè®®ä½¿ç”¨ä¸€ä¸ªä¸“ä¸šçš„IDE ï¼ˆ å¦‚IntelliJ IDEA CEæˆ–åŸºäºŽEclipseçš„Scala IDE ï¼‰ å®Œæˆè¿™ äº›ç»ƒä¹ ã€‚ä½ ä¼šç«‹å³å¾—åˆ°åé¦ˆï¼ŒçŸ¥é“ä»£ç æ˜¯å¦å¯ä»¥æˆåŠŸç¼–è¯‘ ï¼Œè€Œä¸”å¯ä»¥å¾—åˆ°J Scalaåº“å‡½ æ•°çš„ä»£ç å®Œæˆæç¤ºå’Œæ–‡æ¡£ ã€‚å¦å¤–æœ‰ä¸€äº›é¢å‘ç®€å•ç¼–è¾‘çŽ¯å¢ƒ ï¼ˆå¦‚Sublime Text ã€VIMå’Œ Emacs ï¼‰ çš„æ’ä»¶ï¼Œå®ƒä»¬ä¹Ÿæ”¯æŒè¿™ä¸ªåŠŸèƒ½ ï¼Œä¸è¿‡å¦‚æžœå¼€å§‹ä½¿ç”¨ Scalaï¼Œæœ€å¥½ä½¿ç”¨ä¸€ä¸ªå®Œå¤‡ æˆç†Ÿçš„IDE ï¼Œè¿™å¯èƒ½æ›´å®¹æ˜“ã€æ›´å¿«æ· ã€‚ è¿™ä¸€èŠ‚ä¸­çš„ç»ƒä¹ å°†å¸®åŠ©ä½ è¿› ä¸€æ­¥ç†Ÿæ‚‰è¿™ä¸€ç« ä»‹ç»çš„é›†åˆå’Œæ“ä½œã€‚å»ºè®®ä½ é™¤äº†å†™æœ€åŸºæœ¬ çš„è§£å†³æ–¹æ¡ˆå¤– ï¼Œå†èŠ±äº›æ—¶é—´ä¸ºå„ä¸ªå®žçŽ°å¯»æ‰¾ä¸€äº›æ›¿ä»£æ–¹æ¡ˆã€‚è¿™ä¼šå¸®åŠ©ä½ æ›´åŠ äº†è§£ç±»ä¼¼ å‡½æ•°ä¹‹é—´çš„ç»†å¾®å·®åˆ« ï¼Œå¦‚foldå’Œred uce ï¼Œæˆ–headå’Œslice ï¼Œå¦å¤–è¿˜å¯ä»¥æä¾›ä¸€äº›å·¥å…· ï¼Œ ä½¿ä½ èƒ½ç»•è¿‡è¿™äº›å‡½æ•° ï¼Œå¼€å‘ä½ è‡ªå·±çš„è§£å†³æ–¹æ¡ˆ ã€‚ \1. åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ ï¼ŒåŒ…å«å‰20ä¸ªLongå¥‡æ•°ã€‚ä½ èƒ½ç”¨ä¸€ä¸ªfodç›¾çŽ¯ã€f ilteræ“ä½œä»¥åŠma pæ“ ä½œåˆ›å»ºè¿™ä¸ªåˆ—è¡¨å— ï¼Ÿç¼–å†™è¿™ä¸ªä»£ç çš„æœ€é«˜æ•ˆã€è¡¨è¿°æ€§æœ€å¥½çš„æ–¹æ€¯æ˜¯ä»€ä¹ˆï¼Ÿ \2. å†™ä¸€ä¸ªåä¸ºâ€factorsâ€çš„å‡½æ•° ï¼Œå®ƒå–ä¸€ä¸ªæ•° ï¼Œè¿”å›žè¿™ä¸ªæ•°çš„å› æ•°æž„æˆçš„ä¸€ä¸ªåˆ—è¡¨ ï¼ˆé™¤ äº†lå’Œå®ƒæœ¬èº«ï¼‰ã€‚ä¾‹å¦‚ ï¼Œfactors(15ï¼‰åº”å½“è¿”å›ž List (3, 5ï¼‰ã€‚ ç„¶åŽå†™ä¸€ä¸ªæ–°å‡½æ•° ï¼Œå°†â€factorsâ€åº”ç”¨åˆ°ä¸€ä¸ªæ•°å­—åˆ—è¡¨ ã€‚è¯•ç€ä½¿ç”¨ç»ƒä¹ 1ç”Ÿæˆçš„Long æ•°åˆ—è¡¨ ã€‚ä¾‹å¦‚ ï¼Œç”¨List ä¾£ï¼Œ11, 13, 15ï¼‰æ‰§è¡Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›žï¼ˆ 3, 3, 5ï¼‰ ï¼Œå› ä¸º9çš„ å› æ•°æ˜¯3ï¼Œè€Œ15çš„å› æ•°æ˜¯3 ï¼ˆåˆæ˜¯3ï¼‰ å’Œ5ã€‚è¿™é‡Œç”¨mapå’Œflattenåˆé€‚å—ï¼Ÿæˆ–è€…forå¾ªçŽ¯ æ˜¯ä¸æ˜¯æ›´åˆé€‚ï¼Ÿ \3. å†™ä¸€ä¸ªå‡½æ•°å¹² ir stA : Li st[Aï¼½ ï¼Œè¿™ä¼šè¿”å›žä¸€ ä¸ªç»™å®šåˆ—è¡¨ä¸­çš„å‰xä¸ªé¡¹ ã€‚ä¾‹å¦‚ ï¼Œf i r s t ( L i s t (â€˜ a ï¼‡ â€™ t â€™ â€™ 0 â€™ ï¼‰ , 2 ï¼‰ åº”å½“è¿”å›ž L ist ï¼ˆ â€™ a â€™ å¨â€™ ï¼‰ã€‚å¯ä»¥æŠŠå®ƒå†™ä¸ºä¸€ä¸ªå•è¡Œå‡½æ•° ï¼Œç›´æŽ¥è°ƒç”¨ä¸€ä¸ªå®Œæˆè¿™ä¸ªä»»åŠ¡çš„ å†…ç½® åˆ—è¡¨æ“ä½œ ï¼Œæˆ–è€…æ›´å¥½çš„åšèƒ½æ˜¯å®žçŽ°ä½ è‡ªå·±çš„è§£å†³æ–¹æ¡ˆ ã€‚ä½ èƒ½ç”¨ä¸€ä¸ªforå¾ªçŽ¯æ¥å®žçŽ° å—ï¼Ÿfold lef tå‘¢ï¼Ÿèƒ½ä¸èƒ½ä½¿ç”¨ä¸€ä¸ªåªè®¿é—®headå’Œtailçš„é€’å½’å‡½æ•°ï¼Ÿ \4. å†™ä¸€ä¸ªå‡½æ•° ï¼Œå–ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ ï¼Œäº•è¿”å›žè¿™ä¸ªåˆ—è¡¨ä¸­æœ€é•¿çš„å­—ç¬¦ä¸² ã€‚å¯ä»¥ä¸ä½¿ç”¨ å¯å˜çš„å˜é‡å—ï¼Ÿè¿™é‡Œéžå¸¸é€‚åˆä½¿ç”¨æˆ‘ä»¬ä»‹ç»è¿‡çš„åˆ—è¡¨æŠ˜å æ“ä½œ ï¼ˆè§è¡¨6-5 ï¼‰ ã€‚ä½ èƒ½ ç”¨fol då’Œr e d u ceå®žçŽ°è¿™ä¸ªå‡½æ•°å— ï¼Ÿå¦‚æžœå–ä¸€ä¸ªå‡½æ•°å‚æ•° ï¼ˆ å®ƒå°†æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸² ï¼Œ å¹¶è¿”å›žä¼˜å…ˆçš„é‚£ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼Œ ä½ çš„å‡½æ•°æ˜¯ä¸æ˜¯æ›´æœ‰ç”¨ ï¼Ÿå¦‚æžœè¿™ä¸ªå‡½æ•°å¯ä»¥åº”ç”¨åˆ° é€šç”¨åˆ—è¡¨ ï¼Œä¹Ÿå°±æ˜¯ä»»ä½•ç±»åž‹çš„åˆ—è¡¨ ï¼Œè¯¥æ€Žä¹ˆåšå‘¢ï¼Ÿ \5. å†™ä¸€ä¸ªå‡½æ•°å°†ä¸€ä¸ªåˆ—è¡¨é€†ç½® ã€‚å¯ä»¥æŠŠå®ƒå†™ä¸ºä¸€ä¸ªé€’å½’å‡½æ•°å— ï¼Ÿè¿™é‡Œå¾ˆé€‚åˆä½¿ç”¨åŒ¹ é…è¡¨è¾¾å¼ã€‚ \6. å†™ä¸€ä¸ªå‡½æ•° ï¼Œå®ƒå–ä¸€ä¸ª List[String ï¼½ ï¼Œäº•è¿”å›žä¸€ä¸ª ï¼ˆ List [String], List[String]), è¿™æ˜¯å­—ç¬¦ä¸²åˆ—è¡¨çš„ ä¸€ä¸ªå…ƒç»„ ã€‚ç¬¬ä¸€ä¸ªåˆ—è¡¨åº”å½“æ˜¯åŽŸåˆ—è¡¨ä¸­çš„å›žæ–‡é¡¹ ï¼ˆå‰å‘å’ŒåŽå‘ å†™è¶Šéƒ½ç›¸åŒ ï¼Œå¦‚â€racecarâ€ï¼‰ã€‚å…ƒç»„ä¸­çš„ç¬¬äºŒä¸ªåˆ—è¡¨åº”å½“æ˜¯åŽŸ åˆ—è¡¨ä¸­æ‰€æœ‰å…¶ä½™çš„é¡¹ã€‚ å¯ä»¥ä½¿ç”¨partitionå¾ˆå®¹æ˜“åœ°å®žçŽ°è¿™ä¸ªå‡½æ•° ï¼Œä¸è¿‡èƒ½ä¸èƒ½ç”¨å…¶ä»–æ“ä½œæ¥å®žçŽ° ï¼Ÿ \7. è¿™ä¸€ç« ä¸­æœ€åŽä¸€ä¸ªç»ƒä¹ æ˜¯ä¸€ä¸ªå¤šéƒ¨åˆ†é—®é¢˜ã€‚æˆ‘ä»¬å°†ä»Žå¼ºå¤§çš„OpenWeatherMap API ï¼ˆè€Œä¸”å…è´¹ï¼‰ è¯»å–å’Œå¤„ç†å¤©æ°”é¢„æŠ¥ ã€‚ è¦ä»ŽURLè¯»å–å†…å®¹ ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨Scalaåº“æ“ä½œio.Source.fromUR L(u rl: String) , å®ƒä¼šè¿”å›žä¸€ä¸ªio.Sourceå®žä¾‹ã€‚ç„¶åŽæŠŠæŽ æ–‡æœ¬ä½¿ç”¨getlines.tolist æ“ä½œå½’çº¦ä¸ºå•ä¸ª è¡Œçš„é›†åˆã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œè¿™é‡Œä½¿ç”¨ io.Sou r ceä»Žä¸€ä¸ªURLè¯»å–å†…å®¹ ï¼Œå°†å®ƒåˆ†è§£ ä¸ºå•è¡Œæ–‡æœ¬ ï¼Œç„¶åŽå°†ç»“æžœè¿”å›žä¸º ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ ï¼š scala&gt; val 1: List[String] = io.Source.fromUR L(url) .getlines.tolist æˆ‘ä»¬å°†ä»Žä»¥ä¸‹URLèŽ·å–å¤©æ°”é¢„æŠ¥ ï¼Œå®ƒé‡‡ç”¨XMLæ ¼å¼ ï¼š scala&gt; val url = â€œhttp://api.openweathermap.org/data/2.5/forecast?mode=xml&amp;lat=55&amp;lon ï¼â€ å°†è¿™ä¸ª U R Lè¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ ã€‚å®ŒæˆåŽ ï¼Œæ‰“å°ç¬¬ä¸€è¡Œ ï¼ŒéªŒè¯ç¡®å®žå¾—åˆ°äº†ä¸€ä¸ª XMLæ–‡ä»¶ã€‚ç»“æžœåº”å½“ä¸Žä¸‹é¢ç±»ä¼¼ ï¼š scala&gt; println ( l(o) ) &lt;?xã€Žã€Ž11 version=â€l. â€œ encoding=â€utf -8â€ï¼Ÿã€‰ å¦‚æžœæ²¡æœ‰çœ‹åˆ°XMLé¦–éƒ¨ ï¼Œè¦ç¡®ä¿ä½ çš„URLæ˜¯æ­£ç¡®çš„ï¼Œè€Œä¸”å·²ç»è¿žäººäº’è”ç½‘ ã€‚ ä¸‹é¢æ¥å¤„ç†è¿™ä¸ªåŒ…å« XMLæ–‡æ¡£çš„List [Stringï¼½ ã€‚ a. æ£€æŸ¥ç¡®è®¤æœ‰æ­£ç¡®çš„å†…å®¹ï¼Œæ‰“å°è¿™ä¸ªæ–‡ä»¶çš„å‰10è¡Œï¼Œè¿™åº”å½“åªéœ€è¦ä¸€è¡Œä»£ç ã€‚ b. å¤©æ°”é¢„æŠ¥ä¸­çš„åŸŽå¸‚åå‡ºçŽ°åœ¨å‰ 10è¡Œã€‚ä»Žç›¸åº”çš„è¡Œä¸­æŠ½å–ï¼Œäº•æ‰“å°å…¶X MLå…ƒ ç´ ã€‚ç„¶åŽä»ŽX M Lå…ƒç´ ä¸­æŠ½å–åŸŽå¸‚åå’Œå›½å®¶ä»£ç  ï¼ŒæŠŠå®ƒä»¬æ‰“å°åœ¨ ä¸€èµ· ï¼ˆ ä¾‹å¦‚ â€œParis, FRâ€ ï¼‰ã€‚è¿™é‡Œå¾ˆé€‚åˆä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä»Ž X MLæ ‡è®°ä¸­æŠ½å–æ–‡æœ¬ ï¼ˆ è§ç¬¬2ç«  â€œæ­£åˆ™è¡¨è¾¾å¼â€ ä¸€èŠ‚ï¼‰ã€‚ c. å¦‚æžœä½ ä¸æƒ³ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ•èŽ·ç»„ ï¼Œå¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸Šä½¿ç”¨replaceAll ï¼ˆï¼‰ æ“ä½œï¼Œ åˆ é™¤åŸŽå¸‚åå’Œå›½å®¶åä¸¤è¾¹çš„æ–‡æœ¬ ã€‚ d. è¿™é‡Œæœ‰å¤šå°‘ä¸ªé¢„æŠ¥æ®µ ï¼Ÿå†™å‡ºæœ€çŸ­çš„è¡¨è¾¾å¼æ¥ç»Ÿè®¡æ®µæ•° ã€‚ e. æ¯ä¸ªå¤©æ°”é¢„æŠ¥æ®µä¸­çš„â€symbol â€œ XMLå…ƒç´ åŒ…æ‹¬ä¸€ä¸ªå¤©æ°”é¢„æŠ¥çš„æè¿° ã€‚ä¸ŽæŠ½å–åŸŽ å¸¸ç”¨é›†åˆ I 101 å¸‚åå’Œå›½å®¶ä»£ç ç±»ä¼¼ ï¼Œç”¨åŒæ ·çš„æ–¹å¼æŠ½å–è¿™ä¸ªå…ƒç´  ã€‚è¯•ç€è¿­ä»£å¤„ç†å¤©æ°”é¢„æŠ¥ï¼Œ æ‰“å°è¿™ä¸ªæè¿° ã€‚ ç„¶åŽæ‰“å°æŽ¥ä¸‹æ¥ 12ä¸ªå°æ—¶çš„å¤©æ°”æè¿° ï¼ˆä¸åŒ…æ‹¬XMLå…ƒç´ ï¼‰ï¼Œ åˆ›å»ºä¸€ä¸ªéžæ­£å¼ çš„å¤©æ°”é¢„æŠ¥ã€‚ f. ä¸‹é¢æ‰¾å‡ºè¿™ä¸ªé¢„æŠ¥ä¸­ä½¿ç”¨äº†å“ªäº›æè¿°ã€‚æ‰“å°ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…æ‹¬å¤©æ°”é¢„æŠ¥ ä¸­çš„æ‰€æœ‰è¿™äº›æè¿° ï¼Œäº•åŽ»é™¤é‡å¤çš„é¡¹ã€‚ g. è¿™äº›æè¿°å¯èƒ½å¾ˆæœ‰ç”¨ ã€‚â€sym bol â€œ X MLå…ƒç´ ä¸­åŒ…å«ä¸€ä¸ªå±žæ€§ ï¼Œå…¶ä¸­åŒ…å«ç¬¦å·ç¼– å·ã€‚n;1J å»ºä¸€ä¸ªä»Žç¬¦å·ç¼–å·åˆ°æè¿°çš„ Mapã€‚ä»Žé¢„æŠ¥è®¿é—®ç¬¦å·å€¼ ï¼Œäº•æ£€æŸ¥æè¿°æ˜¯å¦ ä¸ŽXMLæ–‡æ¡£åŒ¹é… ï¼Œä»Žè€ŒéªŒè¯è¿™ä¸ªMapæ˜¯æ­£ç¡®çš„ã€‚ h. æŽ¥ä¸‹æ¥24å°æ—¶çš„æœ€é«˜æ¸©åº¦å’Œæœ€ä½Žæ¸©åº¦æ˜¯ä»€ä¹ˆ ï¼Ÿ \1. è¿™ä¸ªå¤©æ°”é¢„æŠ¥ä¸­çš„å¹³å‡æ¸©åº¦æ˜¯ä»€ä¹ˆ ï¼Ÿå¯ä»¥ä½¿ç”¨æ¸©åº¦å…ƒç´ ä¸­çš„ â€œvalueâ€å±žæ€§æ¥è®¡ç®— è¿™ä¸ªå€¼ã€‚ å®Œæˆè¿™äº›ç»ƒä¹ åŽ ï¼Œé™¤äº†ä½ é€‰æ‹©çš„æ–¹æ³•ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•æˆ–è€…æ›´ç®€çŸ­çš„æ–¹æ€¯ ï¼Ÿä½ å–œæ¬¢ä¸­ ç¼€ç‚¹è®°ä½è¿˜æ˜¯ä¸­ç¼€æ“ä½œç¬¦è®°ä½ ï¼Ÿä½¿ç”¨for ..yieldæ˜¯ä¸æ˜¯æ¯”ma på’Œf ilterç­‰é«˜é˜¶æ“ä½œæ›´å®¹ æ˜“ï¼Ÿ å¯ä»¥åœ¨è¿™é‡Œè°ƒæ•´ä½ çš„ç­”æ¡ˆ ï¼Œæ‰¾å‡ºä½ å–œæ¬¢çš„ç¼–ç é£Žæ ¼ï¼Œé€šå¸¸éœ€è¦ç»“åˆæ˜“å†™ã€æ˜“è¯»å’Œè¡¨è¿° æ€§ã€‚ ç« èŠ‚7ç»ƒä¹  \1. æ–æ³¢çº³å¥‘æ•°åˆ—é˜Ÿæ•°å­—â€™ã€Ž 1 l â€œ å¼€å§‹ ï¼ŒåŽé¢çš„å„ä¸ªå…ƒç´ åˆ†åˆ«æ˜¯å‰é¢ä¸¤ä¸ªå…ƒç´ ä¹‹å’Œ ã€‚æˆ‘ä»¬ å°†ä½¿ç”¨è¿™ä¸ªæ•°åˆ—æ¥ç†Ÿæ‚‰è¿™ ä¸€ç« ä»‹ç»çš„é›†åˆ ã€‚ a. ç¼–å†™ä¸€ä¸ªå‡½æ•° ï¼Œè¿”å›žæ–æŠ«çº³å¥‘æ•°åˆ—ä¸­å‰X ä¸ªå…ƒç´ çš„ä¸€ä¸ªåˆ—è¡¨ ã€‚ä½ èƒ½ç”¨ä¸€ä¸ª Buff eræ¥å®žçŽ°å—ï¼Ÿè¿™é‡Œé€‚åˆä½¿ç”¨ Builderå—ï¼Ÿ b. ç¼–å†™ä¸€ä¸ªæ–°çš„æ–æ³¢çº³å¥‘å‡½æ•° ï¼Œå°†æ–°çš„æ–æ³¢çº³å¥‘æ•°å¢žåŠ åˆ°ä¸€ä¸ªå·²æœ‰çš„æ•°å­—åˆ—è¡¨ã€‚ å®ƒå–ä¸€ä¸ªæ•°å­—åˆ—è¡¨ï¼ˆL ist [I n t ï¼½ï¼‰ å’Œè¦å¢žåŠ çš„æ–°å…ƒç´ ä¸ªæ•° ï¼Œäº•è¿”å›žä¸€ä¸ªæ–°çš„åˆ—è¡¨ (List[Int ï¼½ï¼‰ ã€‚å°½ç®¡è¾“å…¥åˆ—è¡¨å’Œè¿”å›žçš„åˆ—è¡¨æ˜¯ä¸å¯å˜çš„ ï¼Œä¸è¿‡åº”è¯¥å¯ä»¥åœ¨å‡½æ•°å†… éƒ¨ä½¿ç”¨ä¸€ä¸ªå¯å˜çš„åˆ—è¡¨ ã€‚ä½ èƒ½åªç”¨ä¸å¯å˜åˆ—è¡¨å†™è¿™ä¸ªå‡½æ•°å— ï¼Ÿå“ªä¸€ä¸ªç‰ˆæœ¬ ï¼ˆä½¿ ç”¨å¯å˜é›†åˆå’Œä¸å¯å˜é›†åˆï¼‰ æ›´åˆé€‚ï¼Œæ›´å¯è¯»ï¼Ÿ c. St r e a mé›†åˆæ˜¯åˆ›å»ºä¸€ä¸ªæ–æ³¢çº³å¥‘æ•°åˆ—çš„å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆ ã€‚åˆ›å»ºä¸€ä¸ªæµ ï¼Œç”Ÿæˆ ä¸€ä¸ªæ–æ³¢çº³å¥‘æ•°åˆ— ã€‚ç”¨å®ƒæ‰“å°è¿™ä¸ªæ•°åˆ—ä¸­çš„å‰100ä¸ªå…ƒç´  ï¼Œç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–æŠ¥ å‘Šï¼Œæ¯è¡Œ 10ä¸ªå…ƒç´  ï¼Œäº•ç”¨é€—å·åˆ†éš”ã€‚ d. ç¼–å†™ä¸€ä¸ªå‡½æ•° ï¼Œå–æ–è¢«çº³å¥‘æ•°åˆ—ä¸­çš„ ä¸€ä¸ªå…ƒç´  ï¼Œè¿”å›žè¿™ä¸ªæ•°åˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒ ç´ ã€‚ä¾‹å¦‚ï¼Œä½†bNext(8 ï¼‰åº”å½“è¿”å›ž13ã€‚å¦‚ä½•å¤„ç†ä¸åˆæ€¯çš„è¾“å…¥ ï¼Œå¦‚fixNext (9ï¼‰ ï¼Ÿè¦ å¦‚ä½•å‘è°ƒç”¨è€…ä¼ è¾¾ç¼ºå°‘ä¸€ä¸ªè¿”å›žå€¼ï¼Ÿ \2. åœ¨A r r a y é›†åˆçš„ä¾‹å­ ä¸­ ï¼ˆ è§æœ¬ ç« å‰é¢ â€œ æ•°ç»„â€ ä¸€èŠ‚ï¼‰ ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† j a v a . io.F ile( ) .list F ilesæ“ä½œæ¥è¿”å›ž å½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶æ•°ç»„ã€‚å†™ä¸€ä¸ªå‡½æ•°å¯¹ ä¸€ä¸ªç›®å½•å®ŒæˆåŒæ ·çš„å·¥ä½œ ï¼Œå¹¶æŠŠå„é¡¹è½¬æ¢ä¸ºç›¸åº”çš„St rin gè¡¨ç¤º ï¼ˆä½¿ç”¨toSt r in gæ–¹ æ³•ï¼‰ ã€‚è¿‡æ»¤æŽ‰æ‰€æœ‰ç‚¹æ–‡ä»¶ ï¼ˆä»¥ï¼¼â€™å­—ç¬¦å¼€å¤´çš„æ–‡ä»¶ï¼‰ï¼Œæ‰“å°å…¶ä½™çš„æ–‡ä»¶æ—¶ä»¥åˆ†å·åˆ†éš” ï¼ˆï¼›ï¼‰ã€‚å¦‚æžœä½ çš„è®¡ç®—æœºä¸Šæœ‰ä¸€ä¸ªåŒ…å«å¤§é‡æ–‡ä»¶çš„ç›®å½• ï¼Œé’ˆå¯¹è¿™ä¸ªç›®å½•æµ‹è¯•è¿™ä¸ªå‡½ æ•°ã€‚ \3. å–ç»ƒä¹ 2å¾—åˆ°çš„æ–‡ä»¶åˆ—è¡¨ ï¼Œæ‰“å°ä¸€ä¸ªæŠ¥å‘Š ï¼Œæ˜¾ç¤ºå­—æ¯è¡¨ä¸­çš„å„ä¸ªå­—æ¯ ä»¥åŠä»¥è¯¥å­—æ¯ å¼€å¤´çš„æ–‡ä»¶æ•°ã€‚ \4. å†™ä¸€ä¸ªå‡½æ•°è¿”å›žä¸¤ä¸ªæ•°ä¹‹ç§¯ ï¼Œè¿™ä¸¤ä¸ªæ•°åˆ†åˆ«æŒ‡å®šä¸º String ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°å€¼ç±» åž‹ã€‚ä½ èƒ½åŒæ—¶æ”¯æŒæ•´æ•°å’Œæµ®ç‚¹ æ•°å—ï¼Ÿå¦‚ä½•è¡¨è¾¾å…¶ä¸­ä¸€ä¸ªæˆ–ä¸¤ä¸ªè¾“å…¥å¯èƒ½ä¸åˆä½ ï¼Ÿ ä½ èƒ½ä½¿ç”¨ä¸€ä¸ªåŒ¹é…è¡¨è¾¾å¼å¤„ç†è½¬æ¢ çš„æ•°å—ï¼Ÿèƒ½ä¸èƒ½ä½¿ç”¨forå¾ªçŽ¯æ¥åšåˆ°IJ? \5. ç¼–å†™ä¸€ä¸ªå‡½æ•°å®‰å…¨åœ°åŒ…è£…JVMåº“æ–¹ä½System.getpropert y(&lt;St ringï¼žï¼‰çš„è°ƒç”¨ï¼Œé¿ å…äº§ç”Ÿå¼‚å¸¸æˆ–n ullç»“æžœã€‚ç»™å®šå±žæ€§åï¼ŒSy stem.get P ro pert y(&lt;St r ingï¼žï¼‰è¿”å›žä¸€ä¸ª JVMçŽ¯å¢ƒå±žæ€§å€¼ã€‚ä¾‹å¦‚ ï¼ŒSy st ern. get P r oper t y( â€œj a va .h omeâ€ï¼‰ä¼šè¿”å›žå½“å‰è¿è¡Œçš„ Javaå®žä¾‹çš„è·¯å¾„ ï¼Œè€ŒSystem .getproperty ï¼ˆé£žJ ser .t imezon eâ€ï¼‰ è¿”å›žæ“ä½œç³»ç»Ÿ çš„æ—¶ åŒºå±žæ€§ã€‚ä¸è¿‡ ï¼Œè¿™ä¸ªæ–¹å‘Šä½¿ç”¨æ—¶å¯èƒ½å¾ˆå±é™©ï¼Œå› ä¸ºå®ƒå¯èƒ½æŠ›å‡ºå¼‚å¸¸ ï¼Œæˆ–è€…å¯¹ä¸åˆ æ€¯çš„è¾“å…¥è¿”å›žnull ã€‚åœ¨Scala REPL ä¸­è¯•ç€è°ƒç”¨System.get Property ï¼ˆ å·â€™ï¼‰æˆ–System. get Property ï¼ˆé£žlah â€œï¼‰ï¼Œ æ¥çœ‹å®ƒå¦‚ä½•æ™Œåº” ã€‚ æœ‰ç»éªŒçš„Scalaå¼€å‘äººå‘˜ä¼šæž„å»ºä»–ä»¬è‡ªå·±çš„å‡½æ•°åº“ ï¼Œç”¨Scalaä¸€å…ƒé›†åˆåŒ…è£…ä¸å®‰å…¨ çš„ ä»£ç ã€‚ä½ çš„å‡½æ•°è¦æŠŠè¾“å…¥ä¼ å…¥è¿™ä¸ªæ–¹æ€¯ï¼Œç¡®ä¿èƒ½å®‰å…¨åœ°å¤„ç†å’Œè¿‡æ»¤å¼‚å¸¸å’Œ n ullå€¼ã€‚ å¯¹è¿™é‡Œä½¿ç”¨çš„ç¤ºä¾‹å±žæ€§åè°ƒç”¨ä½ çš„å‡½æ•° ï¼ŒåŒ…æ‹¬åˆå“å’Œä¸åˆæ€¯çš„è¾“å…¥ ï¼Œæ¥éªŒè¯å®ƒä¸ ä¼šäº§ç”Ÿå¼‚å¸¸æˆ–è¿”å›ž nullç»“æžœã€‚ \6. å†™ä¸€ä¸ªå‡½æ•° ï¼ŒæŠ¥å‘Šä¸€ä¸ªé¡¹ç›®çš„æœ€è¿‘Gi tHu bæäº¤ ï¼ˆ comm it ï¼‰ æƒ…å†µã€‚G i tH u bæä¾›äº† ä¸€ä¸ªç»™å®šç”¨æˆ·çš„æœ€è¿‘com mi t çš„RSSæè¦ ã€å­˜å‚¨åº“å’Œåˆ†æ”¯ ï¼ˆ br an ch ï¼‰ ï¼Œå…¶ä¸­åŒ…å« XML ï¼Œå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æžè¿™ä¸ªXML ã€‚è¿™ä¸ªå‡½æ•°åº”å½“å–ç”¨æˆ·ã€å­˜å‚¨åº“å’Œåˆ†æ”¯ ï¼Œ è¯»å–äº•è§£æžRSSæè¦ ï¼Œç„¶åŽè¾“å‡ºæäº¤ä¿¡æ¯ ã€‚è¿™åº”å½“åŒ…å«æ¯ä¸ªæäº¤çš„æ—¥æœŸ ã€é¢˜ç›®å’Œä½œ è€…ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹RSS URLæ¥èŽ·å–ä¸€ä¸ªç»™å®šå­˜å‚¨åº“å’Œåˆ†æ”¯çš„å½“å‰commit: https://github.com/ &lt; user name&gt; / /commits/&lt; branch name&gt;.atom å¯ä»¥å¦‚ä¸‹å°†RSSæè¦èŽ·å–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸² ï¼š scala&gt; val u ï¼â€https:/ /github.com/scala /scala /commits/2.11.x.atomâ€ u: String = https://github.com/scala /scala /commits/2.11.x.atom scala&gt; val s = io.Source.fromUR L(u ) s: scala.io.Buff eredSource = non-empty iterator scala&gt; val text = s.getlines.map(_. t rim) .mkString ï¼ˆâ€â€œï¼‰ text: String = &lt;?xml versionï¼é£žã€‚â€ encoding ï¼â€UTF-8 â€œï¼Ÿï¼ž&lt;feed xmlns= â€¦ å¤„ç†XMLå¯èƒ½å¾ˆç‚¹å›°éš¾ã€‚å¯ä»¥ä½¿ç”¨t e x t .sp lit(&lt;t o k e nï¼žï¼‰ å°†æ–‡æœ¬åˆ†è§£ä¸ºå•ç‹¬ çš„ &lt; e n t r y ï¼žï¼Œ ç„¶åŽç”¨æ­£åˆ™è¡¨è¾¾å¼æ•èŽ·ç»„ ï¼ˆ è§ç¬¬2ç«  â€œæ­£åˆ™è¡¨è¾¾å¼â€ ä¸€èŠ‚ï¼‰ è§£æžå‡º &lt;titleï¼žå’Œå…¶ä»–å…ƒç´ ã€‚è¿˜å¯ä»¥é€‰ä»£å¤„ç†XMLæ–‡ä»¶çš„æ‰€æœ‰è¡Œ ï¼Œå‘çŽ°å…ƒç´ æ—¶æŠŠå®ƒä»¬å¢žåŠ  åˆ°ä¸€ä¸ªç¼“å†²åŒº ï¼Œç„¶åŽæŠŠå®ƒä»¬è½¬æ¢ä¸ºä¸€ä¸ªæ–°åˆ—è¡¨ã€‚ å®Œæˆè¿™ä¸ªç»ƒä¹ åŽ ï¼ˆè¿™é‡Œæœ‰å¾ˆå¤šå·¥ä½œè¦åšï¼‰ï¼Œ è¿˜æœ‰å‡ ä¸ªç‰¹æ€§å¾ˆå€¼å¾—å¥½å¥½ç ” ç©¶ï¼š a. å°†user ã€repoå’Œbranch å‚æ•°ç§»åˆ°ä¸€ä¸ªå…ƒç»„å‚æ•°ä¸­ ã€‚ b. åœ¨ç»ƒä¹ aåŸºç¡€ä¸Š ï¼Œè®©å‡½æ•°å–ä¸€ä¸ªGi tHu bé¡¹ç›®åˆ—è¡¨ ï¼ŒæŒ‰æŒ‡å®šé¡¹ç›®çš„é¡ºåºæ‰“å°å„ä¸ª é¡¹ç›®çš„æäº¤æƒ…å†µæŠ¥å‘Š ã€‚ c. åœ¨ç»ƒä¹ båŸºç¡€ä¸Š ï¼ŒèŽ·å–æ‰€æœ‰é¡¹ç›®ï¼Œä½¿ç”¨futu reäº•å‘åœ°æäº¤æ•°æ® ï¼Œç­‰å¾…ç»“æžœ ï¼ˆä¸è¶… è¿‡5ç§’ï¼‰ï¼Œ ç„¶åŽæŒ‰æŒ‡å®šé¡¹ç›®çš„é¡ºåºæ‰“å°å„ä¸ªé¡¹ ç›®çš„æäº¤æƒ…å†µæŠ¥å‘Šã€‚ d. åœ¨ç»ƒä¹ cåŸºç¡€ä¸Š ï¼ŒæŠŠæäº¤æƒ…å†µæ°“æ‚åœ¨ä¸€èµ· ï¼ŒæŒ‰æäº¤æ—¥æœŸæŽ’åº ï¼Œç„¶åŽæ‰“å°æŠ¥å‘Š ï¼Œ å¢žåŠ ä¸€ä¸ªé¢å¤–çš„ â€œrep â€œåˆ—ã€‚ å®žçŽ°è¿™äº›é¢å¤–çš„ç‰¹æ€§å¯èƒ½ éœ€è¦èŠ±ä¸€äº›æ—¶é—´ ï¼Œä¸è¿‡è¿™å¯¹å­¦ä¹  Scalaä»¥åŠæé«˜ä½ çš„ Scalaå¼€å‘èƒ½åŠ›å¾ˆæœ‰æ„ä¹‰ ã€‚ å®Œæˆè¿™äº›ç‰¹æ€§åŽ ï¼Œé’ˆå¯¹ä»¥ä¸‹é¡¹ç›®æµ‹è¯•ä½ çš„æäº¤æŠ¥å‘Šï¼š https:/ /github.com/akka /akka /tree/master https: I/github. com/scala /scala /tree/2 .11.x https://github.com/sbt/sbt/tree/0.1 3 https:/ /github.com/scalaz/scalaz/tree/series/7.2.x è¿™äº›é¡¹ç›®éƒ½è¿˜åœ¨è¿›è¡Œä¸­æˆ–å·²ç»å®Œæˆ ï¼Œæ‰€ä»¥åº”è¯¥èƒ½åœ¨ä½ çš„æŠ¥å‘Šé‡Œçœ‹åˆ°ä¸€äº› å¾ˆæœ‰æ„ æ€çš„æäº¤æ´»åŠ¨æ•°æ®ã€‚æœ‰å¿…è¦å¥½å¥½æµè§ˆè¿™äº›æ ¸å¿ƒå¼€æºScalaé¡¹ç›®çš„å­˜å‚¨åº“ï¼Œæˆ–è€…è‡³ å°‘åº”è¯¥çœ‹çœ‹å®ƒä»¬çš„æ–‡æ¡£ ï¼Œæ¥äº†è§£è¿™äº›å“è¶Šçš„é¡¹ç›®ã€‚ \7. å†™ä¸€ä¸ªå‘½ä»¤è¡Œè„šæœ¬æ¥è°ƒç”¨ç»ƒä¹  6å¾—åˆ°çš„G itH u bæäº¤æŠ¥å‘Šå‡½æ•° ï¼Œå¹¶æ‰“å°ç»“æžœ ã€‚è¿™éœ€ è¦ä½¿ç”¨ä¸€ä¸ªU NI X shel l z å¦‚æžœä½ ä½¿ç”¨Wi n dowsç³»ç»Ÿï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªå…¼å®¹çš„U N IX çŽ¯å¢ƒ ï¼Œå¦‚Cygw inæˆ–Virtual box ï¼ˆè¿è¡Œä¸€ä¸ªU NIX è™šæ‹Ÿæœºï¼‰ã€‚ å¦å¤–è¿˜éœ€è¦å®‰è£…SBT (Simple B u ild Toolï¼‰ ï¼Œè¿™ä¸ªæž„å»ºå·¥å…·æ”¯æŒä¾èµ–æ–‡ä»¶ç®¡ç†å’Œæ’ä»¶ ï¼Œåœ¨Scalaé¡¹ ç›®ä¸­å¾ˆ å¸¸ç”¨ã€‚å¯ä»¥ä»Žhttp:Ilww w.scala-sbt .org ï¼ä¸‹è½½é¢å‘å„ä¸ªçŽ¯å¢ƒçš„ SBTï¼ŒåŒ…æ‹¬ä¸€ä¸ªMSI Windows Installerç‰ˆæœ¬ã€‚SBTä¹Ÿå¯ä»¥ä»Žæµè¡Œçš„åŒ…ç®¡ç†å™¨å¾—åˆ° ã€‚å¦‚æžœä½ åœ¨ä½¿ç”¨OS X çš„ Homebrew ï¼Œå¯ä»¥ç”¨brew install sbtæ¥å®‰è£…ã€‚ æ³¨æ„ ï¼šSBTéš¾å­¦å—ï¼Ÿ å¯èƒ½æœ‰ä¸€ç‚¹ã€‚åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œæˆ‘ä»¬åªç”¨å®ƒä½œä¸ºä¸€ä¸ªshellè„šæœ¬å¯åŠ¨å·¥å…· ï¼Œä»¥ä¾¿åœ¨Scalaä¸­ç¼–å†™ å’Œæ‰§è¡Œshellè„šæœ¬ã€‚åŽé¢å‡ ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ç¼–å†™SBTæž„å»ºçš„è„šæœ¬æ¥ç®¡ç†ä½  è‡ªå·±çš„é¡¹ç›®ã€‚ \8. ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºäºŽSBTçš„ç¤ºä¾‹Scalaè„šæœ¬ ï¼Œå®ƒå°†å‘½ä»¤è¡Œå‚æ•°è¯»å–ä¸ºä¸€ä¸ªL i stï¼Œå¹¶æ‰“å° ä¸€ä¸ªæ¬¢è¿Žè¾ž ã€‚ç”¨ä¸‰ä¸ªæ˜Ÿå·å¼€å§‹ çš„æ³¨æ‹©å—ä¸“é—¨ç”¨ä½œä¸º SBTè®¾ç½®çš„æ³¨é‡Šã€‚åœ¨è¿™ä¸ªè„šæœ¬ ä¸­ï¼Œè¿™ä¸ªæ³¨è¾‘æŒ‡å®šæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨ Scalaè¯­è¨€çš„ 2.11.lç‰ˆæœ¬ ï¼š #!/usr/bin/env sbt -Dsbt.ma in .class=sbt .ScriptMain ï¼ï¼Šï¼Šï¼Š scalaVersion := â€œ2 .11.1â€ ï¼Šï¼ def greet(name: String) : String = sâ€Hello, $name lâ€ II Entry point for our script args.tolist match { case List( name) =&gt; { val greeting = greet(name) println(greeting) case =&gt; println (â€œusage: HelloScript.scala &lt; nameï¼žâ€ï¼‰ æŠŠè¿™ä¸ªè„šæœ¬å¤åˆ¶åˆ°æ–‡ä»¶ HelloS cr ipt.scala ä¸­ï¼Œå°†æƒé™æ”¹ä¸ºå¯æ‰§è¡Œ ï¼ˆ U NIXçŽ¯å¢ƒä¸‹æ‰§è¡Œ chmod a+x HelloScript .scala ï¼‰ ã€‚ç„¶åŽå¯ä»¥ç›´æŽ¥è¿è¡Œè¿™ä¸ªè„šæœ¬ ï¼š $ ./HelloScript .scala Jason [info] Set current project to root-4926629s8acd7bceob (in build è‡ªle:/Users/ jason/ .sbt/boot/4926629s8acd7bceob/) Helloï¼Œã€•ason! ä½ çš„æäº¤æŠ¥å‘Šè„šæœ¬éœ€è¦å–å¤šä¸ª GitH u bé¡¹ç›®ä½œä¸ºå‚æ•° ã€‚ä¸ºäº†ä¿è¯å‚æ•°ç®€æ²½ ï¼Œå¯èƒ½å¸Œæœ›ç»“ åˆå„ä¸ªé¡¹ç›®çš„è¾“å…¥æž„æˆä¸€ä¸ªè¦è§£æžçš„å­—ç¬¦ä¸² ï¼Œå¦‚sea la / scala/2 .11.Xo è¾“å‡ºåº”å½“ç®€æ´ ã€æ ¼å¼è‰¯å¥½ ï¼Œè€Œä¸”å¯è¯» ã€‚ä½¿ç”¨å›ºå®šçš„åˆ—å®½å¯èƒ½ä¼šæœ‰å¸®åŠ©ï¼Œä¸ºæ­¤å¯ä»¥åœ¨å­— ç¬¦ä¸²å†…æ’æ—¶ä½¿ç”¨printf é£Žæ ¼çš„æ ¼å¼åŒ–ä»£ç  ï¼ˆè§ç¬¬2ç«  â€œå­—ç¬¦ä¸²å†…æ’â€ ä¸€èŠ‚ï¼‰ã€‚ ç« èŠ‚8I. æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªæ¸¸æˆç½‘ç«™ ï¼Œéœ€è¦è·Ÿè¸ªç±»ä¼¼Xbox Twoå’ŒPlaystation 5ä¹‹ç±»æµè¡Œçš„æ˜¾ç¤º å™¨ ï¼ˆæˆ‘åœ¨è§„åˆ’æœªæ¥ï¼‰ ã€‚ a. åˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºå™¨ç±» ï¼Œè·Ÿè¸ªå“ç‰Œ ã€åž‹å·ã€ä¸Šå¸‚æ—¥æœŸ ã€Wi Fiç±»åž‹ã€æ”¯æŒçš„ç‰©ç†åª’ä½“ æ ¼å¼ ï¼Œä»¥åŠæœ€å¤§è§†é¢‘åˆ†è¾¨çŽ‡ ã€‚è¦†ç›–é»˜è®¤çš„t oS t r in gæ–¹æ€¯ ï¼Œæ‰“å°ä¸€ä¸ªå¤§å°é€‚å½“ çš„å®žä¾‹æè¿° ï¼ˆå°äºŽ120å­—ç¬¦ï¼‰ã€‚ â€¢ ä¸Šå¸‚æ—¥æœŸ ï¼ˆæˆ–å‡ºåŽ‚æ—¥æœŸï¼‰ åº”å½“æ˜¯ja va .util. Dateçš„ä¸€ä¸ªå®žä¾‹ã€‚ ç±» I 163 WiFiç±»åž‹ ï¼ˆ bé¥µï¼Œb/g/nç­‰ï¼‰ å­—æ®µä¸ºå¯é€‰ ï¼Œå› ä¸ºæœ‰äº›æ˜¾ç¤ºå™¨æ²¡æœ‰WiFi ã€‚ â€¢ ç‰©ç†åª’ä½“æ ¼å¼åº”å½“æ˜¯ ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™é‡ŒStri ngæœ€é€‚ç”¨å—ï¼Ÿè¿˜æ˜¯è¦ä½¿ç”¨ä¸€ä¸ªåŒ¹ é…å¸¸é‡å€¼çš„Int? â€¢ æœ€å¤§è§†é¢‘åˆ†è¾¨çŽ‡åº”å½“é‡‡ç”¨ ç§ç‰¹å®šçš„æ ¼å¼ ï¼Œä»Žè€Œå¯ä»¥æŒ‰æœ€å¤§åƒç´ æ•°å¯¹æ˜¾ç¤º å™¨æŽ’åºã€‚ b. æµ‹è¯•è¿™ä¸ªæ–°çš„æ˜¾ç¤ºå™¨ç±» ï¼Œå†™ä¸€ä¸ªæ–°ç±» ï¼Œåˆ›å»ºè¿™ä¸ªæ˜¾ç¤ºå™¨ç±»çš„4ä¸ªå®žä¾‹ã€‚æ‰€æœ‰è¿™ äº›å®žä¾‹éƒ½åº”å½“æœ‰æ­£ç¡®çš„å€¼ã€‚ c. çŽ°åœ¨æ¥å®žçŽ°æ¸¸æˆ ã€‚åˆ›å»ºä¸€ä¸ªæ¸¸æˆç±» ï¼ŒåŒ…å«åå­— ã€å¼€å‘å•†å’Œæ‰€æ”¯æŒçš„ä¸€ä¸ªæ˜¾ç¤ºå™¨ åˆ—è¡¨ ï¼Œä»¥åŠä¸€ä¸ª Supported â€œæ–¹æ¯¡ ï¼Œå¦‚æžœæ”¯æŒä¸€ä¸ªç»™å®šçš„æ˜¾ç¤ºå™¨åˆ™è¿”å›žtruå·³ã€‚ d. æµ‹è¯•è¿™ä¸ªæ¸¸æˆç±» ï¼Œç”Ÿæˆä¸€ä¸ªæ¸¸æˆåˆ—è¡¨ ï¼Œæ¯ä¸ªæ¸¸æˆåŒ…å« ä¸€ä¸ªæˆ–å¤šä¸ªæ˜¾ç¤ºå™¨å®žä¾‹ ã€‚ èƒ½æŠŠè¿™ä¸ªåˆ—è¡¨è½¬æ¢ä¸ºæ˜¾ç¤ºå™¨å’Œæ‰€æ”¯æŒæ¸¸æˆåˆ—è¡¨çš„ ä¸€ä¸ªæŸ¥æ‰¾è¡¨å—ï¼Ÿèƒ½ä¸èƒ½å®žçŽ°ä¸€ ä¸ªå‡½æ•° ï¼Œæ‰“å°æ¸¸æˆåˆ—è¡¨ ï¼Œé¦–å…ˆæŒ‰å¼€å‘å•†æŽ’åº ï¼Œå†æŒ‰æ¸¸æˆåæŽ’åºï¼Ÿ \2. åˆ›å»ºä¸€ä¸ªé¢å‘å¯¹è±¡é£Žæ ¼çš„é“¾è¡¨ ã€‚ a. åˆ›å»ºä¸€ä¸ªçª—å£ç±» ï¼ŒåŒ…å«å®ƒè‡ªèº«çš„ä¸€ä¸ªå®žä¾‹ ï¼Œä»¥åŠ ä¸ªå‚æ•°åŒ–ç±»åž‹çš„å®žä¾‹ ã€‚æž„ é€ å‡½æ•°å–ä¸€äº›å®žä¾‹ ï¼ˆä¾‹å¦‚ ï¼Œå­—ç¬¦ä¸² ã€i n tæˆ–ä»»ä½•å…¶ä»–å‚æ•°åŒ–ç±»åž‹ï¼‰ï¼Œ å®žä¾‹ä¸ªæ•° å¯å˜ ï¼Œè¿™å¯ä»¥ç”¨varargå‚æ•° ï¼ˆè§ç¬¬4ç«  â€œvara rgå‚æ•°â€ ä¸€èŠ‚ï¼‰ å®žçŽ°ã€‚å®žçŽ°ä¸€ä¸ª â€œforeachâ€ æ–¹å‘Šï¼Œç”¨æˆ·å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ€»è¿­ä»£å¤„ç†åˆ—è¡¨ ï¼Œå¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨ç›¸åº”çš„ å‡½æ•°ã€‚ â€¢ å¦‚ä½•ç¡®å®šåˆ—è¡¨ç»“æŸ ï¼Ÿ . cé£Žæ ¼çš„åˆ—è¡¨é€šå¸¸ä½¿ç”¨ ä¸€ä¸ªå·11å€¼æ¥æŒ‡ç¤ºåˆ—è¡¨æœ«å°¾ ã€‚åœ¨è¿™é‡Œè¿™æ˜¯æœ€å¥½çš„æ–¹ åœ¨åŽ»å—ï¼Ÿ è¿™é‡Œå¯ä»¥ä½¿ç”¨a pply ï¼ˆï¼‰æ–¹ä½å—ï¼Ÿ b. ç›¸ä¿¡ä½ çš„é“¾è¡¨è‚¯å®šå¾ˆå¾ˆå¥½åœ°å·¥ä½œ ï¼Œä¸è¿‡è¯•ç€ç”¨ä¸€ä¸ªæœ‰è¶£çš„æ–¹æ³•é‡æž„è¿™ä¸ªç±» ã€‚æŠŠ ä½ çš„å®¹å™¨ç±»å˜æˆæœ‰ä¸¤ä¸ªå­ç±»çš„æŠ½è±¡ç±» ï¼šä¸€ä¸ªè¡¨ç¤ºæœ‰åˆä½é¡¹çš„èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªè¡¨ç¤º æ²¡æœ‰åˆèƒ½é¡¹çš„èŠ‚ç‚¹ï¼ŒæŒ‡ç¤ºåˆ—è¡¨çš„æœ€åŽä¸€é¡¹ã€‚ â€¢ éœ€è¦ç¬¬äºŒä¸ªå­ç±»çš„å¤šä¸ªå®žä¾‹å—ï¼Ÿ â€¢ æœ‰æ²¡æœ‰åº”å½“ç§æœ‰çš„è¾…åŠ©æ–¹æ³•ï¼Ÿ â€¢ éœ€è¦å­ç±»å®žçŽ°çš„æŠ½è±¡æ–¹èƒ½å‘¢ï¼Ÿ å¦‚æžœå®žçŽ°äº†apply ï¼ˆï¼‰æ–¹é™† ï¼Œå„ä¸ªå­ç±»åº”å½“æœ‰è‡ªå·±çš„å®žçŽ° å—ï¼Ÿ c. ä¸ºä½ çš„é“¾è¡¨å¢žåŠ æ ‡å‡†çš„head ã€tail ã€f ilter ã€sizeå’Œma pé›†åˆæ–¹ä¹Ÿ ã€‚ä½ èƒ½ç”¨æ‡’å€¼ å®žçŽ°å…¶ä¸­æŸä¸ªæ–¹æ¡‚å— ï¼Ÿå“ªäº›æ–¹æ€¯è¦åœ¨çˆ¶ç±»ä¸­å®žçŽ° ï¼Œå“ªäº›åˆ™è¦åœ¨å­ç±»ä¸­å®žçŽ° ï¼Ÿ d. ä½¿ç”¨é€’å½’è€Œä¸æ˜¯è¿­ä»£å®žçŽ°head ã€tailã€filter ã€sizeå’Œmapé›†åˆæ–¹æ¡‚ ã€‚ä½ èƒ½ç¡®ä¿ æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½ä½¿ç”¨å°¾é€’å½’ ï¼ˆè§ç¬¬4ç«  â€œé€’å½’å‡½æ•°â€ ä¸€èŠ‚ï¼‰ æ¥é¿å…è¶…å¤§é›†åˆçš„ æ£€ç›‘å‡ºé”™è¯¯å—ï¼Ÿ \3. å†æ¢ä¸€ä¸ªé—®é¢˜ ï¼Œä¸‹é¢åˆ›å»ºä¸€ä¸ªç›®å½•è¯·å•ç±» ã€‚æž„é€ å­—æ®µåº”å½“æ˜¯è¿™ä¸ªç›®å½•çš„å®Œæ•´è·¯ å¾„ ï¼Œå¦å¤–æœ‰ä¸€ä¸ªè°“è¯å‡½æ•° ï¼Œå®ƒå–ä¸€ä¸ªSt r in g ï¼ˆæ–‡ä»¶åï¼‰ï¼Œ å¦‚æžœè¦åŒ…å«è¿™ä¸ªæ–‡ä»¶åˆ™ è¿”å›žtrueã€‚æ–¹å¤å‡»â€listâ€åº”å½“åˆ—å‡º ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ è¦å®žçŽ°è¿™ä¸ªç±» ï¼Œéœ€è¦åˆ›å»ºja va .io.Fileçš„ä¸€ä¸ªå®žä¾‹ ï¼Œäº•ç”¨å®ƒçš„list Files ( f ilter: F i l e n a m e F i l t e r ï¼‰ åˆ—å‡ºä¸Žç»™å®šè¿‡æ»¤å™¨ åŒ¹é…çš„æ–‡ä»¶ ã€‚å¯ä»¥æ‰¾åˆ°è¿™ä¸ªæ–¹æ€¯ä»¥åŠ j a va .io. F ilen ame F ilt erç±»çš„Javadocs ï¼Œä¸è¿‡éœ€è¦æ˜Žç¡®å¦‚ä½•ä»Ž Scalaiå‘¨ç”¨ã€‚å¦å¤– FilenameFilterå‚æ•°åº”å½“ä½œä¸ºä¸€ä¸ªåŒ¿åç±»ä¼ å…¥ã€‚ â€¢ è¿™ä¸ªç±»çš„å“ªäº›éƒ¨åˆ†å¯ä»¥ä½œä¸ºæ‡’å€¼ï¼Ÿ â€¢ æ˜¯å¦å¯ä»¥æŠŠjava .io.FilenameFilter çš„åŒ¿åå­ç±»å­˜å‚¨ä¸ºä¸€ä¸ªæ‡’å€¼ï¼Ÿ ï¼Žè¿‡æ»¤åŽçš„ç›®å½•æ¸…å•å‘¢ï¼Ÿ \4. JVMåº“åŒ…å«ä¸€ä¸ªèƒ½çœŸæ­£å·¥ä½œçš„MIDIå£°éŸ³åˆæˆå™¨ ã€‚ä¸‹é¢çš„ä¾‹å­ä¼šæ’­æ”¾ä¸€ç»„éŸ³ç¬¦ï¼š scala&gt; val synth = javax.sound .midi.MidiSystem.getSynthesizer synth: javax. sound .midi.Synthesizer = com. sun .media .sound .SoftSynthesizer@283a8ad6 seala&gt; synth. open() scala&gt; val channel = synth.å·¨etChannels.head channel: javax.sound .midi.MidiChannel = com.sun.media.sound .SoftChannelProxy@606d6d2c scala&gt; channel.noteOn(so, 80); Thread .sleep(250); channel.note0ff (30) seala&gt; synth. close() ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªæ›´ç®€å•çš„ç•Œé¢ ï¼Œä¸ºæ­¤è¦ç¼–å†™ä¸€ä¸ªç±»æ’­æ”¾ä¸€ç³»åˆ—éŸ³ç¬¦ ã€‚è¿™ä¸ªç±»çš„æž„é€  å‡½æ•°è¦å¾—åˆ°éŸ³é‡ ï¼ˆè¿™ä¸ªä¾‹å­ä¸­è®¾ç½®ä¸º 80 ï¼‰ ï¼Œä¸è¿‡æ€»ä½¿ç”¨ç›¸åŒçš„æŒç»­æ—¶é—´ ï¼ˆè¿™ä¸ªä¾‹ å­ä¸­ä¸º250æ¯«ç§’ï¼‰ã€‚ å®ƒçš„â€play â€œæ–¹æ³•è¦å–ä¸€ä¸ªéŸ³ç¬¦åˆ—è¡¨ ï¼Œä¾‹å¦‚Seq(30, 35, 40, 45, 50, 55, 60, 65, 70ï¼‰ ï¼Œå¹¶åœ¨åˆæˆå™¨ä¸­æ’­æ”¾ ã€‚ ï¼Žå‡è®¾getSynt hesizeræ–¹æˆ˜è°ƒç”¨å¼€é”€å¾ˆå¤§ ã€‚å¦‚æžœæ°¸è¿œä¸ä¼šè°ƒç”¨â€play â€œæ–¹æ’ž ï¼Œå¦‚ä½• é¿å…ä¸å¿…è¦åœ°è°ƒç”¨getSynthesizeræ–¹æ³•ï¼Ÿ â€¢ ç¡®ä¿éšè—è°ƒç”¨è€…ä¸éœ€è¦çŸ¥é“çš„å­—æ®µã€‚ ç±» I 16s â€¢ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªRangeä½œä¸ºè¾“å…¥å—ï¼Ÿå¦‚play(30 to 70 by 5) ? èƒ½æ”¯æŒå¤šä¸ªèŒƒå›´å—ï¼Ÿä¾‹å¦‚å‡è°ƒã€é™è°ƒç„¶åŽå†å‡è°ƒï¼Ÿ â€¢ å‡è®¾åªéœ€è¦ä¸€ä¸ªå®žä¾‹ ï¼ŒéŸ³é‡è®¾ç½®ä¸º95ã€‚ä½ èƒ½ä½¿ç”¨è®¿ é—®æŽ§åˆ¶æ¥ç¡®ä¿è¿™ä¸ªç±»ä¸ä¼šæœ‰ å¤šä¸ªå®žä¾‹å—ï¼Ÿ ç« èŠ‚9\1. ä¸‹é¢è¯´æ˜Žå¦‚ä½•åœ¨Scalaä¸­åˆ©ç”¨ScalaTestæ¡†æž¶ç¼–å†™ä¸€ä¸ªå•å…ƒæµ‹è¯• ã€‚è¿™ä¸ªç»ƒä¹ å°†ä¸ºIDE å¢žåŠ ä¸€ä¸ªæµ‹è¯• ï¼Œæ‰§è¡Œè¿™ä¸ªæµ‹è¯•ï¼Œäº•éªŒè¯æ˜¯å¦èƒ½å¾—åˆ°æˆåŠŸçš„ç»“æžœ ã€‚å¦‚æžœä½ å·²ç»ç†Ÿæ‚‰ å¦‚ä½•åœ¨IDEä¸­æ‰§è¡Œæµ‹è¯•ï¼Œè¿™ä¸ªç»ƒä¹ å¯èƒ½ç›¸å½“ç®€å•ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£ScalaTestæ¡†æž¶ ï¼Œ å»ºè®®ä½ æš‚æ—¶å…ˆä¸è€ƒè™‘è¿™ä¸ªç»ƒä¹  ï¼Œå¯ä»¥å…ˆçœ‹çœ‹ScalaTestç½‘ç«™ ï¼ˆhttp:// www.scalatest. orgï¼ï¼‰ çš„å®˜æ–¹æ–‡æ¡£ã€‚ é¦–å…ˆæ¥çœ‹ â€œHt mlUtilsâ€ å¯¹è±¡ ï¼ˆ è§æœ¬ç« å‰é¢ â€œå¯¹è±¡â€ ä¸€èŠ‚ï¼‰ã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„Scal a ç±» ï¼Œå¯ä»¥åœ¨IDE ä¸­å³é”®å•å‡»src/main! seala ç›®å½•ï¼Œäº•é€‰æ‹©New â†’Scala Classã€‚é”®å…¥ç±» å HtmlUtils ï¼Œå°†ç±»åž‹è®¾ç½®ä¸ºå¯¹è±¡ ã€‚å°†å•ä¾‹å¯¹è±¡æ›¿æ¢ä¸ºä»¥ä¸‹æºä»£ç  ï¼š object HtmlUtils { def removeMarkup(input : String) = { input .replaceAllï¼ˆâ€â€œâ€œï¼œï¼ï¼Ÿï¼¼w ï¼»ã€Šã€‰ï¼½ï¼Šã€‰â€ï¼Žï¼Žâ€ï¼Œâ€â€œï¼‰ .replaceAll ï¼ˆâ€ã€ˆ ï¼Šã€‰â€ â€œâ€œï¼‰ è¿™ä¸ªæ–°çš„HtmlU til. calÎ±æ–‡ä»¶åº”å½“ä½äºŽsrc!mÎ±in!scala ï¼Œè¿™æ˜¯é¡¹ç›®ä¸­æºä»£ç çš„æ ¹ç›® å½•ã€‚çŽ°åœ¨å†åœ¨src!test/ seala ç›®å½•ä¸‹å¢žåŠ ä¸€ä¸ªæ–°çš„ â€œHtmlUtilsSpec â€œ ç±» ï¼ˆ å¿…è¦æ—¶ ï¼Œéœ€ è¦å…ˆåˆ›å»ºè¿™ä¸ªç›®å½•ï¼‰ã€‚ SBTå’ŒIntelliJéƒ½ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹æŸ¥æ‰¾æµ‹è¯• ï¼Œå®ƒä¸Žä¸»src!main! scala ç›®å½•å¯¹åº” ã€‚å°†ä»¥ä¸‹æºä»£ç å¢žåŠ åˆ°HtmlUtilsSpec. scala æ–‡ä»¶ï¼š import org.scalatest._ class HtmlUtilsSpec extends FlatSpec with ShouldMatchers { â€œThe Html Utils objectâ€ should â€œremove single elements â€œ in { HtmlUtils.removeMarkup ï¼ˆ æ°”br ï¼ï¼žâ€ï¼‰ should equal ï¼ˆå·ï¼‰ 190 I ç¬¬9ç«  it should â€œremove paired elementsâ€ in { HtmlUtils.removeMarkup ï¼ˆæ°”b&gt;Hi&lt; /bï¼žâ€ï¼‰ should equalï¼ˆâ€Hiâ€) it should â€œhave no eff ect on empty stringsâ€ in { val empty = true HtmlUtils. removeé—®arkupï¼ˆâ€â€œï¼‰ .isEmpty should be(empty) è¿™é‡Œåªä½¿ç”¨äº†è¿™ä¸ªåŒ…çš„ F 1a t Sp e dâ€™r:JS h o u 1d M a t c h e r sç±»åž‹ ï¼Œä¸è¿‡æˆ‘ä»¬å°†å¯¼å…¥ æ‰€æœ‰ ç±» ï¼Œä»¥ä¾¿å°†æ¥ å¯ä»¥å¾ˆ å®¹æ˜“åœ°å¢žåŠ å…¶ä»–çš„æµ‹è¯•å·¥å…· ï¼ˆ ä¾‹å¦‚ ï¼Œæˆ‘æœ€å–œæ¬¢çš„ â€œOption Valuesâ€ ï¼‰ã€‚æœ‰å¾ˆå¤šæµ‹è¯•ç±»åž‹å¯é€‰ ï¼Œç±»Flat Specæ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œå®ƒç”±Ruby çš„ Rspec ( http://rspec.iå«å£°ï¼ï¼‰ æž„å»ºã€‚ShouldMatchers ä¸ºæµ‹è¯•å¢žåŠ äº†shouldå’Œbeæ“ä½œ ç¬¦ ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåŸŸç‰¹å®šçš„è¯­è¨€ ï¼Œå¯ä»¥ä½¿ä½ çš„æµ‹è¯•æ›´å¯è¯»ã€‚ ç¬¬ä¸€ä¸ªæµ‹è¯•ä¸Žå…¶ä»–æµ‹è¯•ç¨æœ‰äº›ä¸åŒ ã€‚å¯¹äºŽFl a t S pe c ï¼Œæ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªæµ‹è¯•åº”å½“ä»¥ ä¸€ä¸ªæ–‡æœ¬æè¿°å¼€å¤´ ï¼Œæè¿°å°†åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æµ‹è¯•ä»€ä¹ˆã€‚åŽé¢çš„æµ‹è¯•åˆ™ä½¿ç”¨i tå…³é”®å­—å¼• ç”¨è¿™ä¸ªæè¿°ã€‚è¿™æœ‰åŠ©äºŽå¢žå¼ºæµ‹è¯•æŠ¥å‘Šçš„å¯è¯»æ€§ã€‚ åœ¨æµ‹è¯•ä½“ä¸­ ï¼Œeq u alæ“ä½œç¬¦ç¡®ä¿å‰é¢çš„å€¼åº”å½“ç­‰äºŽå®ƒ çš„å‚æ•°ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ç©ºä¸²â€â€œ ã€‚ å¦‚æžœä¸ç›¸ç­‰ ï¼Œä¼šå¯¼è‡´è¿™ä¸ªæµ‹è¯•å¤±è´¥ï¼Œå¹¶ç«‹å³é€€å‡º ã€‚ç±»ä¼¼åœ° ï¼Œå¦‚æžœå‰é¢çš„å€¼ä¸æ˜¯åŒ ä¸€ä¸ªå®žä¾‹ ï¼Œbeæ“ä½œç¬¦ä¼šä½¿æµ‹è¯•å¤±è´¥ ï¼Œè¿™å¯¹äºŽæ¯”è¾ƒt r ue ã€Nilå’ŒNoneç­‰å…¨å±€å®žä¾‹ä¼šå¾ˆ æœ‰ç”¨ã€‚ è¿è¡Œæµ‹è¯•æ—¶ï¼Œæ‰“å¼€Preferences ä¸‹çš„IntelliJ Pluginsé¦–é€‰é¡¹é¢æ¿ ï¼Œç¡®ä¿å®‰è£…äº† â€œjnitâ€ æ’ä»¶ã€‚è¿™ä¸ªæ’ä»¶å°†ç¡®ä¿èƒ½å¾ˆå®¹æ˜“åœ°æŸ¥çœ‹å’Œæµè§ˆä½ çš„æµ‹è¯•ç»“ æžœã€‚ ä¸€æ—¦ä¸ºé¡¹ç›®å¢žåŠ äº†æµ‹è¯• ï¼Œåœ¨IDEä¸­ç¼–è¯‘è¿™ä¸ªæµ‹è¯•ã€‚å¦‚æžœæ— æ³•ç¼–è¯‘ ï¼Œæˆ–è€…æŠ¥å‘ŠæŸä¸ªé”™ è¯¯ï¼Œå¦‚æ— ä¹Ÿæ‰¾åˆ° â€œScalaTestâ€ åŒ… ï¼Œè¦ç¡®ä¿ä½ çš„æž„å»ºè„šæœ¬åŒ…å«äº† ScalaTestä¾èµ–æ–‡ä»¶ ï¼Œ è€Œä¸”å¯ä»¥åœ¨lntelliJ â€œProjectâ€ è§†å›¾çš„ â€œExternal Librariesâ€ éƒ¨åˆ†æŸ¥çœ‹ã€‚ çŽ°åœ¨æˆ‘ä»¬æ¥è¿è¡Œè¿™ä¸ªæµ‹è¯• ã€‚å³é”®å•å‡»æµ‹è¯•ç±»çš„å Ht m l U t i l s S p e c ï¼Œé€‰æ‹©R u n Ht m lUtilsSpec ã€‚æ‰§è¡Œè¿™ä¸ªæµ‹è¯•åªéœ€è¦å‡ ç§’çš„æ—¶é—´ ï¼Œå¦‚æžœæµ‹è¯•å’Œæºåº”ç”¨è¾“å…¥æ­£ç¡®ï¼Œ å®ƒä»¬éƒ½ä¼šæˆåŠŸè¿è¡Œ ã€‚å›¾9-3å±•ç¤ºäº†æµ‹è¯•å®Œæˆæ—¶æ˜¾ç¤º çš„æµ‹è¯•ç»“æžœ ã€‚ HardyHç”ºon - ï¼»â€I Code/learn ingScala/Privatelearn ingScala/ tests/ HardyHeroå« !â€™ HtmlUtilsSpec ll,. â€¢â€¢ â€¢ â€˜ äº‹ 11.ï¼Œ q åš£ï¼Œ al ? â€œ Y â†“ï¼Ÿ çŽ‹ æ˜¥ è‡ª â€œâ€˜ Â·â€¢ Test Results â€œâ€˜ .â€¢ HtmlUtilsSpec â€¢ Â·.The Html Utlls object should remove single elements åˆ· should remove patred elements Â· should have no eä½•ect on empl)â€™ string Process f inished with exit æ—¥ â€™é‡ï¼šRun å²³ é˜³ylDé˜Ÿ ç”±å ‚ çš‡ï¼‡TOOO Tests passed (2 minutes å¨çš„ ç¿© Terminal æ—¥æ—¦.Changes C,t:mastor EÎ½ç”ºã€E Log é›¶ ï¼ˆTl å›½9-3: lntelliJ IDEAç”³çš„æµ‹è¯•ç»“æžœè§†å›½ åœ¨è¿™ä¸ªç»ƒä¹ çš„æœ€åŽï¼Œå°†ç”±ä½ æ¥å®Œæˆä¸€ä¸ªå…·ä½“çš„ç»ƒä¹  ï¼šä¸ºè¿™ä¸ªHtmlUt ilsSpecæµ‹è¯•ç±» å¢žåŠ å…¶ä»–æµ‹è¯• ã€‚å“ªäº›ç‰¹æ€§è¿˜æ²¡æœ‰æµ‹è¯• ï¼Ÿæ˜¯å¦æ”¯æŒæ‰€æœ‰åˆæ³•çš„ HTMLæ ‡è®°ï¼Ÿ è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¦åŽ»é™¤â€scri ptâ€ æ ‡è®°ä¸­åŒ…å«çš„JavaScri ptå—ï¼Ÿè¿˜æ˜¯éšå…¶ä½™æ–‡æœ¬ ä¸€ åŒå‡ºçŽ°ï¼Ÿå¯ä»¥è®¤ä¸ºè¿™æ˜¯åŽŸç‰ˆæœ¬ Ht ã€Žn lUt ilsçš„ä¸€ä¸ªb ug ã€‚å¢žåŠ ä¸€ä¸ªæµ‹è¯•æ¥éªŒè¯å°†åŽ» é™¤ JavaScriptæ–‡æœ¬ï¼Œç„¶åŽè¿è¡Œè¿™ä¸ªæµ‹è¯•ã€‚å¦‚æžœå¤±è´¥ï¼Œä¿®æ­£HtmlUtils ï¼Œå¹¶é‡æ–°è¿è¡Œæµ‹è¯• æ¥éªŒè¯å·²ç»å¾—åˆ°ä¿®æ­£ ã€‚ ç¥è´ºä½ ï¼ŒçŽ°åœ¨ä½ å·²ç»å¯ä»¥ç”¨Scalaå†™æµ‹è¯•äº† ï¼è¦è®°ä½ï¼Œå®Œæˆè¿™æœ¬ä¹¦åŽé¢çš„ç»ƒä¹ æ—¶è¿˜ è¦åšæŒå†™æµ‹è¯• ï¼Œåˆ©ç”¨è¿™äº›æµ‹è¯•æ¥éªŒè¯ä½ çš„ç­”æ¡ˆæ˜¯å¦æ­£ç¡® ï¼Œäº•æ•èŽ·å…¶ä¸­æ‰€æœ‰ï¼ˆä¸å¯ é¢„è§çš„ï¼‰ bug o \2. ä¸‹é¢ æ¥ è€ƒ è™‘è¿™ ä¸€ç« ä¸­çš„ å¦ ä¸€ ä¸ª ä¾‹å­ ã€‚åˆ› å»º ä¸€ ä¸ªæ–°çš„ S c a 1a â€œSafeStringUtilsâ€ï¼Œäº•å¢žåŠ ä»¥ä¸‹æºä»£ç  ï¼š t r a I t , åä¸º trait SafeStringUtils { II Returns a trimmed version of the string wrapped in an Option, II or None if the trimmed string is empty. def trimToNone(s: String) : Option [String] = { Option(s) map(_.trim) filterNot (_.isEmpty) ï½ ï½ éªŒè¯è¿™ä¸ªtraitåœ¨IDEä¸­èƒ½å¤Ÿç¼–è¯‘ã€‚å¦‚æžœä¸€åˆ‡æ­£å¸¸ ï¼Œå®Œæˆä»¥ä¸‹æ­¥éª¤ ï¼š 192 ç¬¬9ç«  a. ä¹ŸIï¼½å»ºè¿™ä¸ªtraitçš„ä¸€ä¸ªå¯¹è±¡ç‰ˆæœ¬ ã€‚ b. åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±» SafeStringUt ilsSpec ï¼Œæµ‹è¯•Saf eStringUt ils.trimToNone() æ–¹å‘Šã€‚éªŒè¯å®ƒä¼šåŽ»é™¤å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼ ï¼Œå¹¶å®‰å…¨åœ°å¤„ç† n ullå’Œç©ºä¸²ã€‚æµ‹è¯•ç±»ä¸­åº” è¯¥æœ‰3åˆ°5ä¸ªä¸åŒçš„æµ‹è¯•ã€‚è¿è¡Œæµ‹è¯•ç±»ï¼Œäº•éªŒè¯å®ƒèƒ½æˆåŠŸåœ°æ‰§è¡Œ ã€‚ c. å¢žåŠ ä¸€ä¸ªæ–¹æ¯¡ ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²å®‰å…¨åœ°è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•° ï¼Œå³ä½¿å­—ç¬¦ä¸²ä¸å¯è§£æžä¹Ÿ ä¸ä¼šæŠ›å‡ºé”™è¯¯ ã€‚ç¼–å†™äº•æ‰§è¡Œæµ‹è¯•æ¥æµ‹è¯•åˆå³°å’Œä¸åˆä½çš„è¾“å…¥ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œ æœ€é€‚ç”¨çš„ä¸€å…ƒé›†åˆæ˜¯ä»€ä¹ˆï¼Ÿ d. å¢žåŠ ä¸€ä¸ªæ–¹æ³• ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²å®‰å…¨åœ°è½¬æ¢ä¸º ä¸€ä¸ªlongæ•´æ•° ï¼Œå³ä½¿å­—ç¬¦ä¸²ä¸å¯è§£ æžä¹Ÿä¸ä¼šæŠ›å‡ºé”™è¯¯ ã€‚ç¼–å†™äº•æ‰§è¡Œæµ‹è¯•æ¥æµ‹è¯•åˆæ³•å’Œä¸åˆæ³•çš„è¾“å…¥ ã€‚åœ¨è¿™ä¸ªå‡½æ•° ä¸­ï¼Œæœ€é€‚ç”¨çš„ä¸€å…ƒé›†åˆæ˜¯ä»€ä¹ˆï¼Ÿ e. å¢žåŠ ä¸€ä¸ªæ–¹æ¯¡ ï¼Œè¿”å›žä¸€ä¸ªç»™å®šå¤§å° çš„ç”Ÿæˆå­—ç¬¦ä¸² ï¼Œè¦æ±‚ä»…åŒ…æ‹¬å¤§å†™å’Œå°å†™å­— æ¯ã€‚ç¼–å†™äº•æ‰§è¡Œæµ‹è¯•æ¥éªŒè¯å°†è¿”å›žæ­£ç¡®çš„å†…å®¹ï¼Œè€Œä¸”ä¼šå¤„ç†ä¸åˆä½çš„è¾“å…¥ã€‚åœ¨ è¿™ä¸ªå‡½æ•°ä¸­ ï¼Œæœ‰æ²¡æœ‰é€‚ç”¨çš„ä¸€å…ƒé›†åˆï¼Ÿ \3. ç¼–å†™ä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨ ï¼Œæœç´¢å’Œæ›¿æ¢æ–‡ä»¶ä¸­çš„æ–‡æœ¬ ã€‚è¾“å…¥å‚æ•°æ˜¯ä¸€ä¸ªæœç´¢æ¨¡å¼ ã€æ­£ åˆ™è¡¨è¾¾å¼ã€æ›¿æ¢æ–‡æœ¬ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ªè¦æœç´¢ çš„æ–‡ä»¶ã€‚ a. é¦–å…ˆå†™ä¸€ä¸ªéª¨æž¶å‘½ä»¤è¡Œåº”ç”¨ ï¼Œè§£æžè¾“å…¥å‚æ•° ï¼šæœç´¢æ¨¡å¼ã€æ›¿æ¢æ–‡æœ¬å‚æ•°å’Œè¦å¤„ ç†çš„æ–‡ä»¶ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ ã€‚æ‰“å°è¿™äº›è¾“å…¥æ¥éªŒè¯å¯ä»¥æ­£ç¡®åœ°æ•èŽ·åˆ°è¾“å…¥ ã€‚ b. åœ¨å‘½ä»¤è¡Œç”¨sbt â€œrun-main &lt;input arguments ï¼žâ€æ‰§è¡Œè¿™ä¸ªéª¨æž¶ åº”ç”¨ã€‚è¾“å…¥å‚æ•°æ”¾åœ¨â€ru n-ma inâ€å‚æ•°æ‰€åœ¨çš„åŒä¸€ä¸ªåŒå¼•å·å†…ï¼Œè¿™æ ·SBTå·¥å…·å°± ä¼šæŠŠå®ƒä»¬è¯»ä½œä¸º ä¸€ä¸ªå‘½ä»¤ ã€‚è¿˜å¯ä»¥ä»ŽIDEè¿è¡Œ ï¼Œé€‰æ‹©R u nâ†’R U Dï¼‚ï¼‡åˆ›å»ºä¸€ä¸ªè¿ è¡Œæ—¶é…ç½®ã€‚åˆ©ç”¨è¿è¡Œæ—¶é…ç½®ï¼Œå¯ä»¥æŒ‡å®šä¸€æ¬¡è¾“å…¥å‚æ•° ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œ æ—¶æ˜¾ç¤ºæ•´ä¸ªé…ç½®ã€‚éªŒè¯æœç´¢æ¨¡å¼ã€æ›¿æ¢æ–‡æœ¬å’Œæ–‡ä»¶åˆ—è¡¨èƒ½æˆåŠŸåœ°è§£æž ã€‚ c. å®žçŽ°è¿™ä¸ªåº”ç”¨çš„æ ¸å¿ƒé€»è¾‘ ï¼Œè¯»å–å„ä¸ªè¾“å…¥æ–‡ä»¶ï¼Œæœç´¢å¹¶æ›¿æ¢æ‰€æŒ‡å®šçš„æ¨¡å¼ï¼Œç„¶ åŽæŠŠç»“æžœæ‰“å°åˆ°æŽ§åˆ¶ å°ã€‚å°è¯•å¯¹å‡ ä¸ªè¾“å…¥æ–‡ä»¶è¿è¡Œè¿™ä¸ªåº”ç”¨ï¼ŒéªŒè¯ç¡®å®žå¯¹æ¨¡å¼ å®Œæˆäº†æ›¿æ¢ã€‚ d. çŽ°åœ¨æŠŠä¿®æ”¹åŽçš„æ–‡æœ¬å†™å›žåˆ°è¯»å–è¿™äº›æ–‡æœ¬çš„åŽŸæ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨Javaåº“å°†å­—ç¬¦ ä¸²å†™å…¥æ–‡ä»¶çš„ä¸€ä¸ªä¾‹å­ ï¼š import java .io._ val writer = new PrintWriter(new Fileï¼ˆâ€out .txtâ€ï¼‰ï¼‰ writer .writeï¼ˆå’±ello, World!\nHere I am ï¼â€ï¼‰ writer. close() e. è¦è®©ä½ çš„åº”ç”¨ä½¿ç”¨æ—¶æ›´å®‰å…¨ ï¼Œå¯ä»¥åœ¨ä¿®æ”¹è¾“å…¥æ–‡ä»¶ä¹‹å‰å…ˆåˆ›å»ºè¿™äº›æ–‡ä»¶çš„ ä¸€ ä¸ªå¤‡ä»½ ã€‚åˆ›å»ºå¤‡ä»½æ—¶ ï¼Œé¦–å…ˆæŠŠæœªä¿®æ”¹çš„å†…å®¹å†™å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ ï¼Œåœ¨è¾“å…¥æ–‡ä»¶å åŽåŠ .bak ã€‚åˆ›å»ºè¿™ä¸ªå¤‡ä»½æ–‡ä»¶ä¹‹å‰ï¼Œä½¿ç”¨æ–°çš„ja va .io.Fileï¼ˆï¼œå¹² ile n a m e&gt; ) . e x i s t sï¼ˆï¼‰ æ¥ç¡®ä¿å¤‡ä»½æ–‡ä»¶ä¸ä¼šä¸Žå·²æœ‰æ–‡ä»¶é‡å ã€‚å¯ä»¥å°è¯•å¢žåŠ é€’å¢žçš„æ•° å­— ï¼ˆå¦‚.bakl å’Œ.bak2 ï¼‰ æ¥æ‰¾åˆ°å”¯ä¸€çš„å¤‡ä»½æ–‡ä»¶åã€‚ f. åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±» ï¼Œäº•ç¼–å†™æµ‹è¯•æ¥éªŒè¯ä½ çš„åº”ç”¨ä¼šæŒ‰é¢„æœŸ å·¥ä½œã€‚ä½ çš„åº”ç”¨çš„æ ¸å¿ƒ åŠŸèƒ½åº”å½“å¯ä»¥ä½œä¸ºæ–¹æ€¯æ¥è°ƒç”¨ ï¼Œè€Œä¸éœ€è¦å…·ä½“å¯åŠ¨åº”ç”¨ ã€‚ç¡®ä¿å°†åŠŸèƒ½åˆ†è§£ä¸ºå¯ è¯»è€Œä¸”å¤§å°åˆç†çš„æ–¹æ€¯ ï¼Œç„¶åŽä¸ºæŽ¥å¿ƒæ–¹æ€¯ä»¥åŠmai næ–¹é™†åˆ†åˆ«ç¼–å†™æµ‹è¯• ã€‚åœ¨è¿™ä¸ª ç»ƒä¹ çš„æœ€åŽ ï¼Œè¿è¡Œä½ çš„æµ‹è¯•ï¼ŒéªŒè¯æµ‹è¯•éƒ½èƒ½æˆåŠŸ ï¼Œç„¶åŽä»Žå‘½ä»¤è¡Œé’ˆå¯¹ä¸€ä¸ªæµ‹è¯• æ–‡ä»¶è¿è¡Œä½ çš„åº”ç”¨ ã€‚ \4. ç¼–å†™ä¸€ä¸ªåº”ç”¨ ï¼Œå¯¹ä¸€ä¸ªæ–‡ä»¶æä¾›æ€»ç»“ã€‚å®ƒå–ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä½œä¸ºè¾“å…¥ï¼Œå¹¶æ‰“å°ä¸€ä¸ª å®Œæ•´çš„æ€»ç»“ ï¼ŒåŒ…æ‹¬å­—ç¬¦æ•° ã€å•è¯æ•°å’Œæ®µè½æ•° ï¼Œä»¥åŠä½¿ç”¨æœ€å¤šçš„ 20ä¸ªå•è¯æž„æˆçš„ä¸€ ä¸ªåˆ—è¡¨ã€‚ è¿™ä¸ªåº”ç”¨åº”è¯¥è¶³å¤Ÿèªæ˜Ž ï¼Œå¯ä»¥è¿‡æ»¤éžå•è¯å­—ç¬¦ ã€‚è§£æžä¸€ä¸ª Scalaæ–‡ä»¶æ—¶ ï¼Œåº”å½“æ˜¾ç¤º ï¼ˆä¾‹å¦‚ï¼‰ å•è¯ ï¼Œè€Œä¸æ˜¾ç¤ºç‰¹æ®Š å­—ç¬¦ ï¼ˆå¦‚â€ï½›â€ æˆ–â€ï¼ï¼â€ï½ ã€‚å®ƒåº”å½“è¿˜èƒ½ç»Ÿè®¡åŒ…å«å®žé™…å†…å®¹ çš„æ®µè½æ•°è€Œä¸ä¼šç»Ÿè®¡åªæœ‰ç©ºæ ¼çš„æ®µè½ ã€‚ ç¼–å†™æµ‹è¯• ï¼Œä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²æ¥éªŒè¯è¾“å‡º ã€‚è¿™ä¸ªåº”ç”¨åº”å½“æ¨¡å—åŒ–ä¸ºå•ç‹¬çš„æ–¹æ³•ä»¥ä¾¿ äºŽæµ‹è¯•ã€‚å¯ä»¥ç¼–å†™ä¸€ä¸ªæµ‹è¯• ï¼Œç»™å®šå­—ç¬¦ä¸²å’„is is is not a testâ€ ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªå®žä¾‹æŒ‡ å‡ºå•è¯â€isâ€ä¸ºä½¿ç”¨æœ€å¤šçš„å•è¯ ã€‚ ä¸ºäº†çœŸæ­£æŸ¥çœ‹ä½ æ˜¯å¦å·²ç»æŽŒæ¡è¿™ä¸€ç« çš„å†… å®¹ ï¼Œä¸€å®šè¦åœ¨ä½ çš„è§£å†³æ–¹æ¡ˆä¸­ä½¿ç”¨å¯¹ è±¡ã€traitå’Œcaseç±»ã€‚ \5. ç¼–å†™ä¸€ä¸ªåº”ç”¨ ï¼Œå¯¹ç»™å®š GitHub é¡¹ç›®çš„æœ€è¿‘ç»“æŸçš„é—®é¢˜æä¾›ä¸€ä¸ªæŠ¥å‘Šã€‚è¾“å…¥å‚æ•°åº” å½“åŒ…æ‹¬å­˜å‚¨åº“åã€é¡¹ç›®åå’Œä¸€ä¸ªå¯é€‰çš„è¦æŠ¥å‘Š çš„é—®é¢˜æ•° ï¼ˆé»˜è®¤å€¼ä¸º 10ï¼‰ ã€‚è¾“å‡ºå°† æœ‰ä¸€ä¸ªæŠ¥å‘Šè¡¨å¤´ ï¼Œå¹¶æ˜¾ç¤ºå„ä¸ªé—®é¢˜çš„ç¼–å· ã€æ ‡é¢˜ã€ç”¨æˆ·åã€è¯„è®ºæ•°å’Œæ ‡ç­¾åã€‚è¾“ å‡ºåº”å½“æ˜¯è‰¯æ ¼å¼çš„ï¼Œæœ‰å›ºå®šå®½åº¦çš„åˆ— ï¼Œç”¨ç«–çº¿ï¼ˆ ï½œ ï¼‰ åˆ†éš” ï¼Œè¡¨å¤´ç”¨ç­‰å·åˆ†éš”ï¼ˆï¼‰ã€‚ éœ€è¦ä»ŽGitHub APIè¯»å…¥è¿™äº›é—®é¢˜ ï¼ˆå…³äºŽè¯»å–ä¸€ä¸ªUR Lçš„æœ‰å…³å†…å®¹ï¼Œæ›´å¤šä¿¡æ¯è§ç¬¬6 ç«  â€œç»ƒä¹ â€ ï¼‰ ã€‚è§£æžJSONå€¼ ï¼Œç„¶åŽæ‰“å°ä¸€ä¸ªè¯¦ç»†æ ¼å¼ ã€‚ä¸‹é¢ç»™å‡ºçš„ç¤ºä¾‹U R Lå¯ä»¥ è¿”å›žGitHubä¸Šå®˜æ–¹Scalaé¡¹ç›®çš„æœ€è¿‘10ä¸ªç»“æŸçš„é—®é¢˜ ï¼š https:/ /api.github.com/ repos/scala /scala/issues?state =closed&amp;per_page=10 æˆ‘ä»¬å°†ä½¿ç”¨Json4såº“ ï¼ˆhttp:/ /json4s.org ï¼ï¼‰ å°†JSONå“åº”è§£æžä¸ºä¸€ä¸ªcaseç±»åˆ—è¡¨ã€‚é¦– å…ˆï¼Œå°†è¿™ä¸ªä¾èµ–åº“å¢žåŠ åˆ°ä½ çš„ æž„å»ºè„šæœ¬ ï¼Œå¹¶é‡æ–°æž„å»ºè¿™ä¸ªé¡¹ç›® ï¼š é£žrg.json4s â€œ æ‹™ â€™ï¼‡j son4s-nativeï¼‚é¬¼ â€œ 3.2.10â€ è¿™å¯ä»¥æ”¾åœ¨ScalaTestä¾èµ–åº“å‰é¢ ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨å®ƒåŽé¢ã€‚I n tel l i Jä¼šå‘çŽ°è¿™ä¸ªæ”¹å˜ ï¼Œ ä¸‹è½½è¿™ä¸ªåº“ ï¼Œäº•é‡æ–°æž„å»ºè¿™ä¸ªé¡¹ç›®ã€‚å¦‚æžœæ²¡æœ‰è¿™ä¹ˆåšï¼Œå¯ä»¥åœ¨IntelliJ ä¸­æ‰“å¼€SBTè§† å›¾ï¼Œå¹¶åˆ·æ–°é¡¹ç›®ï¼Œæˆ–è€…ä»Žå‘½ä»¤è¡Œè¿è¡Œ sbt clean compileã€‚ A PIçš„ JSONå“åº”ç›¸å½“åºžå¤§ ï¼Œä¸è¿‡å¹¶ä¸éœ€è¦è§£æžæ‰€æœ‰ä¸°æ®µ ã€‚åº”å½“è®¾è®¡ä¸€ä¸ªcaseç±» ï¼Œ åŒ…å«JSON ä¸­ä½ æƒ³è¦è§£æžçš„é‚£äº›å­—æ®µ ï¼Œä½¿ç”¨Opt i onç±»åž‹è¡¨ç¤ºå¯èƒ½ä¸º n u l læˆ–å¯é€‰çš„å®‡ æ®µ ã€‚è§£æžJ S ON nå‘åº”æ—¶ï¼ŒJ son4så°†åªæ’å…¥caseç±»ä¸­å®šä¹‰çš„å­—æ®µ ï¼Œè€Œå¿½ç•¥å…¶ä½™çš„å­— æ®µã€‚ ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨Json4sä»Žä¸€ä¸ªæ›´å¤§çš„GitHu bé—®é¢˜æ–‡æ¡£è§£æžâ€l abel sâ€æ•°ç»„ã€‚é€šè¿‡ç ”ç©¶ å¯¹åº”ä¸€ä¸ªè®°å½•çš„APIè¾“å‡ºï¼Œåº”è¯¥èƒ½è®¾è®¡ä¸€ç³»åˆ—caseç±» ï¼Œå…¶ä¸­åªåŒ…å«ä½ éœ€è¦çš„ä¿¡æ¯ã€‚ éœ€è¦è¯´æ˜Ž ï¼ŒAPIè¿”å›žçš„JSONæ–‡æ¡£æ˜¯ä¸€ä¸ªæ•°ç»„ ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ç»“åˆ Listè°ƒç”¨extra ct æ–¹é™† ï¼ˆä¾‹å¦‚ï¼Œextract [List[Gith u blssue] ] ) import org.json4s.DefaultFormats import org. j son4s. native. JsonMethods f) â€œlabelsâ€ ï¼šï¼» ï½› â€œurlâ€ï¼šâ€https://api.github.com/repos/scala /scala /labels/tested â€œï¼Œ â€œname ï¼‚ï¼šâ€tested â€œï¼Œ â€œcolor ï¼‚ï¼šâ€d7e102â€ case class Label(url: String, name: String) @ case class LabelDocument(labels: List[ Label ï¼½ ï¼‰ ã€‚ implicit val formats = DefaultFormats 0 val labelDoc = Jsoné—®ethods.parse( jsonText).extract[LabelDocument ] @ val labels = labelDoc.labels val firstlabel = labels.headOptio å·é˜³p(_. name) ã€‚é™¤äº†æ”¯æŒæ•°å­—å’Œå­—ç¬¦ä¸²å¤– ï¼ŒDef ault Formatsè¿˜æ”¯æŒå¸¸ç”¨çš„æ—¥æœŸæ ¼å¼ã€‚ ï¼  æˆ‘ä»¬åœ¨J sonMet hodsä¸­ä½¿ç”¨ â€œnativeâ€ JSONè§£æžå™¨æ¥è§£æžJSONæ–‡æ¡£ï¼Œå¹¶æŠŠå®ƒä»¬ æŠ½å–åˆ°caseç±»å®žä¾‹ã€‚ ï¼  æˆ‘æŠŠ â€œlabelsâ€ JSONæ•°ç»„ä¸­çš„ä¸€é¡¹ç§°ä¸ºä¸€ä¸ª â€œLabelâ€ã€‚éœ€è¦è¯´æ˜Žï¼Œä¸éœ€è¦æŒ‡å®š â€œcolorâ€ å­—æ®µ ã€‚ æ•´ä¸ªJSONæ–‡æ¡£æœ‰ä¸€ä¸ªå­—æ®µ â€œlabelsâ€ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªcaseç±»è¡¨ç¤ºè¿™ä¸ªæ–‡æ¡£ ã€‚ 0 Implicitå…³é”®å­—å°†åœ¨ç¬¬ 10ç« è®¨è®ºã€‚å¾ˆæŠ±æ­‰è¿˜æ²¡æœ‰ä»‹ç»å°±æå‰ä½¿ç”¨è¿™ä¸ªæ¦‚å¿µï¼Œä¸ è¿‡ä½ éœ€è¦è¿™ä¸€è¡Œæ¥ç¡®ä¿Json4sèƒ½è§£æžä½ çš„JSONæ–‡æ¡£ã€‚ 0 J sonMet hodsä¼šæŠŠJSONæ–‡æ¡£è§£æžä¸ºè‡ªå·±çš„ä¸­é—´æ ¼å¼ï¼Œç„¶åŽå†ç”¨ä¸€ä¸ªç»“å®šçš„case ç±»æŠ½å–ã€‚ \6. å®Œæˆè¿™ä¸ªç»ƒä¹ éœ€è¦å…ˆå®Œæˆå‰ä¸€ä¸ªç»ƒä¹ ã€‚ä¸€æ—¦å®ŒæˆG i tH u bæŠ¥å‘Šåº”ç”¨ ï¼Œä¸‹é¢å¯¹å®ƒè¿›è¡Œ é‡æž„æ¥æä¾›å¯é‡ç”¨æ€§å’Œå¯é æ€§ ã€‚ a. é¦–å…ˆä¸ºGitHubæŠ¥å‘Šç¼–å†™æµ‹è¯• ï¼ŒéªŒè¯å„ä¸ªç»„ä»¶æœ‰æ­£ç¡®çš„è¡Œä¸º ã€‚å¦‚æžœä½ çš„è®¡ç®—æœºä¸ èƒ½è¿žå…¥äº’è”ç½‘ ï¼ˆæ²¡æœ‰äº˜è”ç½‘è¿žæŽ¥ï¼‰ï¼Œä½  èƒ½æµ‹è¯•è¿™ä¸ªåº”ç”¨ä¸­çš„å¤šå°‘é€»è¾‘ï¼Ÿåº”å½“èƒ½ æµ‹è¯•å¤§éƒ¨åˆ†é€»è¾‘ ï¼Œè€Œä¸éœ€è¦å®žé™…è¿žæŽ¥åˆ° GitHubç½‘ç«™ã€‚ b. é‡æž„JSON å¤„ç†ä»£ç æ¥ä½¿ç”¨è‡ªå·±çš„trait ï¼Œä¾‹å¦‚ â€œJsonSupport â€œã€‚ç¼–å†™æµ‹è¯• ï¼ŒéªŒ iæ­£å®ƒèƒ½æ­£ç¡®åœ°è§£æžJSONä»£ç  ï¼Œäº•å¤„ç†Json4såº“å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ã€‚æœ‰å¿…è¦æä¾›è¿™ ä¸ªtraitçš„å¯¹è±¡ç‰ˆæœ¬å—ï¼Ÿ c. å¯¹Webå¤„ç†ä»£ç å®ŒæˆåŒæ ·çš„é‡æž„ã€‚åˆ›å»ºä½ è‡ªå·±çš„â€HtmJCJient â€œ traitå’Œå¯¹è±¡ ï¼Œå– ä¸€ä¸ªUR Lï¼Œå°†å…¶å†…å®¹ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨è¿”å›ž ã€‚é™¤äº†å†…å®¹ä¹‹å¤– ï¼Œå¯ä»¥åœ¨ç±»ä¸­åŒ… å«æœåŠ¡å™¨çš„çŠ¶æ€å“åº”å— ï¼Ÿç¼–å†™æµ‹è¯• ï¼ŒéªŒi.iEWebå¤„ç†ä»£ç èƒ½é˜²æ­¢æŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚ d. æœ€åŽ ï¼Œé‡æž„æŠ¥å‘Šç”Ÿæˆä»£ç ä¸­å¤„ç†å›ºå®šå®½åº¦åˆ—çš„ éƒ¨åˆ† ï¼ŒæŠŠå®ƒé‡æž„ä¸º ä¸€ä¸ªå¯é‡ç”¨çš„ tra i tã€‚å®ƒèƒ½å–ä¸€ä¸ªä»»æ„å¤§å°çš„å…ƒç»„äº•æ‰“å°å…¶ å†…å®¹å—ï¼Ÿæœ‰æ²¡æœ‰ä¸€ç§æ›´åˆé€‚çš„æ•°æ® ç±»åž‹ ï¼Œå¯ä»¥æ”¯æŒå¯å˜æ•°ç›® çš„åˆ—ï¼Œè€Œä¸”çŸ¥é“å¦‚ä½•æ‰“å°å­—ç¬¦ä¸²è€Œä¸æ˜¯double{ç›´ï¼Ÿç¡® ä¿ä½ çš„æŠ¥å‘Šç”Ÿæˆä»£ç è¦å–æœ€å¤§è¡Œå®½åº¦ä½œä¸ºå‚æ•° ã€‚ ç« èŠ‚10å°½ç®¡è¿™ä¸€ç« å¾ˆé‡è¦ ï¼Œéœ€è¦è®¤çœŸé˜…è¯»å’Œç†è§£ ï¼Œä¸è¿‡è¿™é‡Œä»‹ç»çš„æŠ€æœ¯å±‚æ¬¡å¾ˆé«˜ ï¼Œé™¤éžè¦ç”¨ Scalaç¼–å†™ä½ è‡ªå·±çš„åº“æˆ–é«˜çº§åº”ç”¨ ï¼Œå¦åˆ™é€šå¸¸å¯èƒ½ç”¨ä¸åˆ°è¿™äº›æŠ€æœ¯ã€‚ åœ¨è¿™ä¸€ç« ä¸­ ï¼Œæˆ‘ä»¬ä¸å†åƒå‰é¢å„ç« é‚£æ · ä¸“ç”¨æœ‰ä¸€èŠ‚ç»™å‡ºæ ‡å‡†ç»ƒä¹ ã€‚å¦‚æžœä½ å·²ç»å®Œæˆäº† ä¹‹å‰çš„æ‰€æœ‰ç»ƒä¹  ï¼ŒçŽ°åœ¨åº”è¯¥å·²ç»ç†Ÿæ‚‰å¦‚ä½•åœ¨R EPLä¸­å¼€å‘ç®€æ´çš„ç±»å’Œå‡½æ•° ï¼Œä»¥åŠå¦‚ä½•åœ¨ ä¸€ä¸ªIDEä¸­å¼€å‘æ›´å¤§è§„æ¨¡çš„åº”ç”¨ ã€‚å®žé™…ä¸Š ï¼Œæˆ‘ä¼šé—®ä¸€äº›æœ‰å…³æœ¬ç« æ‰€ä»‹ç» çš„é«˜çº§ç±»åž‹ç‰¹ æ€§å’ŒåŠŸèƒ½çš„é—®é¢˜ã€‚ ä½ å¯èƒ½æƒ³è¦åœ¨REPLæˆ–IDEä¸­åšä¸€äº›è¯•éªŒæ¥æ‰¾å‡ºè¿™äº›é—®é¢˜çš„ç­”æ¡ˆã€‚å¯ä»¥æŠŠè¿™äº›é—®é¢˜çœ‹ä½œ æ˜¯éœ€è¦å®Œæˆçš„ä¸€ä¸ªå…¨é¢çš„è¯•éªŒ ï¼Œé€šè¿‡è¿™ä¸ªè¯•éªŒï¼Œå¯ä»¥ä½¿ä½ å¯¹è¿™ä¸ªè¯­è¨€ çš„ä½¿ç”¨æœ‰æ›´å¤šä½“ éªŒã€‚ I. å¦‚ä½•æ‰©å±•ä¸€ä¸ªå‡½æ•°ï¼Ÿä¸€ä¸ªæ‰©å±•F u n ction1å¿¡ï¼ŒB ï¼½çš„ç±»æˆ–traitæœ‰å“ªäº›åº”ç”¨ï¼Ÿå¦‚æžœä½ åœ¨å†™ è¿™æ ·ä¸€ä¸ªç±»æˆ–trait ï¼Œä½ ä¼šæ‰©å±• Function1[A,Bï¼½ è¿˜æ˜¯æ‰©å±•A =&gt; B? \2. å¦‚æžœä¸€ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•° è¡¨ ï¼Œè¿™ä¸¤ä¸ªå‚æ•°è¡¨ä¸­åˆ†åˆ«åŒ…å«ä¸€ä¸ªæ•´æ•° ï¼Œè€Œä¸”å‡½æ•°å°†è¿” å›žä¸€ä¸ªæ•´æ•° ï¼Œè¿™ä¸ªå‡½æ•°çš„å‡½æ•°ç±»åž‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æžœæŠŠå®ƒå†™ä¸ºä¸€ä¸ªF u n ct ion Xç±»ï¼Œå…·ä½“ çš„ç±»å’Œç±»åž‹å‚æ•°åŒ…å«ä»€ä¹ˆ ï¼Ÿ \3. éšå«å‚æ•°çš„ä¸€ä¸ªæµè¡Œç”¨é™†æ˜¯ç”¨ä½œä¸ºé»˜è®¤è®¾ç½® ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªé»˜ è®¤è®¾ç½® ï¼Œä¸è¿‡åœ¨ç‰¹æ®Šæƒ…å†µä¸‹å¯ä»¥è¢«è¦†ç›–ã€‚å‡è®¾ä½ åœ¨å†™ä¸€ä¸ªæŽ’åºå‡½æ•° ï¼Œå®ƒå–ä¸€äº›æ–‡ æœ¬è¡Œ ï¼Œè¿™äº›æ–‡æœ¬è¡Œå¯èƒ½ä»¥ä¸€ä¸ªå³å¯¹é½çš„æ•°å­—å¼€å¤´ ã€‚å¦‚æžœæƒ³è¦æ ¹æ®è¿™äº›æ•°å­—æŽ’åº ï¼ˆæ•°å­—å‰é¢å¯èƒ½æœ‰ç©ºæ ¼ä½œä¸ºå‰ç¼€ï¼‰ï¼Œå¦‚ä½•æŠŠè¿™ä¸ªåŠŸèƒ½å†™åœ¨ ä¸€ä¸ªéšå«å‚æ•°ä¸­ ï¼Ÿå¦‚æžœ å…è®¸ç”¨æˆ·è¦†ç›–è¿™ä¸ªè¡Œä¸º ï¼Œåœ¨æŽ’åºä¸­å¿½ç•¥è¿™äº›æ•°å­— ï¼Œåˆè¯¥å¦‚ä½•åšåˆ°ï¼Ÿ \4. å‡è®¾ä½ å†™äº†è‡ªå·±çš„Opt ion [Aï¼½ ï¼Œå‘½åä¸º Per ha ps[A ï¼½ ï¼Œäº•å®žçŽ°äº†ä¸€æˆ–ä¸¤ä¸ªæ–¹æ’žæ¥è®¿ é—® å®ƒçš„å†…å®¹ã€‚éœ€è¦æä¾›å“ªç§éšå«è½¬æ¢æ‰å…è®¸å°†å®ƒå¤„ç†ä¸ºä¸€ä¸ªé›†åˆ ï¼Ÿå¦‚ä½•å®žä¾‹ä¸Šè°ƒç”¨ flatMapå’Œfilterè€Œä¸éœ€è¦å®žçŽ°è¿™äº›æ–¹æ’žï¼Ÿ \5. å¦‚æžœè¦å®žçŽ°ä½ è‡ªå·±çš„å­—ç¬¦ä¸²ç±» Cha racters ï¼Œæ”¯æŒæ‰€æœ‰JVMçš„java .lang.Stringæ–¹ æ“ï¼Œå¦å¤–è¿˜å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªScal aé›†åˆ ï¼Œè¦å¦‚ä½•å®žçŽ° ï¼Ÿç»“åˆç±»åž‹å’Œè½¬æ¢å°±èƒ½å®Œæˆå¤§ éƒ¨åˆ†å·¥ä½œå—ï¼Ÿå»ºè®®ä»”ç»†ç ”ç©¶ scala .Predefçš„æºä»£ç æ¥æ‰¾å‡ºæç¤ºã€‚ \6. è¦ä¸ºæ‰€æœ‰æ— ç»„å¢žåŠ ä¸€ä¸ªâ€su mâ€æ–¹æ³• ï¼Œå®ƒè¿”å›žå…ƒç»„ä¸­æ‰€æœ‰æ•°å€¼çš„æ€» å’Œï¼Œå¦‚æžœå®žçŽ°è¿™ä¸ª æ–¹æ³•ï¼Ÿä¾‹å¦‚ ï¼Œï¼ˆâ€™ a â€™ ï¼Œå’±iâ€ï¼Œ2 .5, 1, true) .sumåº”å½“è¿”å›ž 3.5ã€‚ \7. F u nc tion1ç±»åž‹æŽ¥å—ç±»åž‹å‚æ•° ï¼Œä¸€ä¸ªå¯¹åº”è¾“å…¥å€¼ ï¼Œå¦ä¸€ä¸ªå¯¹åº”è¾“å‡ºå€¼ã€‚å“ªä¸€ä¸ªåº”å½“ æ˜¯åå˜å‚æ•°ï¼Ÿå“ªä¸€ä¸ªåˆ™åº”å½“æ˜¯é€†å˜å‚æ•°ï¼Ÿ]]></content>
      <categories>
        <category>scala</category>
      </categories>
      <tags>
        <tag>scala</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç»æµŽå­¦æ¦‚å¿µ]]></title>
    <url>%2F2019%2F03%2F09%2Feconomics-tips%2F</url>
    <content type="text"><![CDATA[[x] æœ‰äººçš„åœ°æ–¹å°±æœ‰äº¤æ˜“ [x] æˆæœ¬æ˜¯æ”¾å¼ƒäº†çš„æœ€å¤§ä»£ä»· [x] ç¨€ç¼ºæ˜¯ä¸€ä¸ªåŸºæœ¬äº‹å®ž [x] äººçš„éœ€æ±‚æ°¸æ— æ­¢å¢ƒ [x] å¯¹äººæ­§è§†è¶Šå¤šï¼Œè‡ªå·±ä»£ä»·è¶Šå¤§ [x] æ²‰æ²¡æˆæœ¬ä¸æ˜¯æˆæœ¬ [x] ä½ çš„æˆæœ¬ç”±åˆ«äººå†³å®š [x] äº§å“çš„ä¾›éœ€å†³å®šåŽŸææ–™çš„æˆæœ¬ [x] ä¾›éœ€å…³ç³»å†³å®šå•†å“ä»·æ ¼ï¼Œå•†å“ä»·æ ¼å†³å®šèµ„æºæˆæœ¬ [x] ä¹žä¸æ²¡æœ‰ç™½æ‹¿æ–½èˆ [x] ç§‘æ–¯å®šå¾‹ï¼šåœ¨äº¤æ˜“è´¹ç”¨ä¸ºé›¶æˆ–è¶³å¤Ÿä½Žçš„æƒ…å†µä¸‹ï¼Œä¸ç®¡èµ„æºæœ€åˆçš„ä¸»äººæ˜¯è°ï¼Œèµ„æºéƒ½åŒæ ·ä¼šæµåˆ°ä»·å€¼æœ€é«˜çš„ç”¨é€”ä¸ŠåŽ»ã€‚ç”¨å¤§ç™½è¯æ¥è¯´ï¼Œå°±æ˜¯â€œè°ç”¨å¾—å¥½å°±å½’è°â€ã€‚ [x] å¾…æ›´æ–°]]></content>
      <categories>
        <category>è¯»ä¹¦</category>
      </categories>
      <tags>
        <tag>ç»æµŽå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Apache-HBase-â„¢-ä¸­æ–‡æŒ‡å—-æœ€æ–°ç‰ˆHBase-3-0-0-ch3-HBaseå‡çº§]]></title>
    <url>%2F2019%2F03%2F04%2FApache-HBase-%E2%84%A2-%E4%B8%AD%E6%96%87%E6%8C%87%E5%8D%97-%E6%9C%80%E6%96%B0%E7%89%88HBase-3-0-0-ch3-HBase%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%20-%20%E5%89%AF%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[Apache HBaseå‡çº§ è¯‘è€…: xixici å½“ä½ æƒ³è¦å‡çº§æ—¶ï¼Œä½ ä¸èƒ½è·³è¿‡ä¸»è¦ç‰ˆæœ¬ã€‚å½“ä½ ä»Žç‰ˆæœ¬0.98.xåˆ° 2.xæ—¶ï¼Œä½ å¿…é¡»é¦–å…ˆå‡çº§åˆ°1.2.xå†ä»Ž1.2.xå‡çº§åˆ° 2.xã€‚ å›žé¡¾ Apache HBase é…ç½®ç« èŠ‚ï¼Œè¿˜æœ‰ Hadoopï¼Œå¹¶ç†Ÿæ‚‰ æ”¯æŒå’Œæµ‹è¯•. 11. HBaseç‰ˆæœ¬å·å’Œå…¼å®¹æ€§11.1. æœŸæœ›è¯­ä¹‰ç‰ˆæœ¬æŽ§åˆ¶ä»Žç‰ˆæœ¬1.0.0å¼€å§‹ï¼ŒHBaseé‡‡ç”¨ Semantic Versioningä½œä¸ºç‰ˆæœ¬æŽ§åˆ¶ã€‚ å¯¹äºŽç»™å®šçš„ç‰ˆæœ¬å· MAJOR.MINOR.PATCHï¼Œå¢žåŠ å¦‚ä¸‹å†…å®¹ï¼š MINOR ç‰ˆæœ¬ï¼Œå½“æ‚¨ä»¥å‘åŽå…¼å®¹çš„æ–¹å¼æ·»åŠ åŠŸèƒ½æ—¶PATCH ç‰ˆæœ¬ï¼Œå½“æ‚¨è¿›è¡Œå‘åŽå…¼å®¹çš„é”™è¯¯ä¿®å¤æ—¶é¢„å‘å¸ƒå’Œæž„å»ºå…ƒæ•°æ®çš„å…¶ä»–æ ‡ç­¾å¯ä½œä¸ºMAJOR.MINOR.PATCHæ ¼å¼çš„æ‰©å±•ã€‚ MAJOR ç‰ˆæœ¬ï¼Œå½“ä½ è¿›è¡Œä¸å…¼å®¹çš„ API æ›´æ”¹æ—¶ MINOR ç‰ˆæœ¬ï¼Œå½“æ‚¨ä»¥å‘åŽå…¼å®¹çš„æ–¹å¼æ·»åŠ åŠŸèƒ½æ—¶ PATCH ç‰ˆæœ¬ï¼Œå½“æ‚¨è¿›è¡Œå‘åŽå…¼å®¹çš„é”™è¯¯ä¿®å¤æ—¶ é¢„å‘å¸ƒå’Œæž„å»ºå…ƒæ•°æ®çš„å…¶ä»–æ ‡ç­¾å¯ä½œä¸ºMAJOR.MINOR.PATCHæ ¼å¼çš„æ‰©å±•ã€‚ å…¼å®¹æ€§ç»´åº¦ é™¤äº†é€šå¸¸çš„ API ç‰ˆæœ¬è€ƒè™‘ä¹‹å¤–ï¼ŒHBase è¿˜æœ‰å…¶ä»–éœ€è¦è€ƒè™‘çš„å…¼å®¹æ€§ç»´åº¦ã€‚ Client-Server çº¿åè®®å…¼å®¹æ€§ï¼š å…è®¸ä¸åŒæ­¥æ›´æ–°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ã€‚ æˆ‘ä»¬åªèƒ½å…è®¸å…ˆå‡çº§æœåŠ¡å™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡å™¨å°†å‘åŽå…¼å®¹æ—§å®¢æˆ·ç«¯ï¼Œè¿™æ ·æ–°çš„ API å°±å¯ä»¥ä½¿ç”¨ã€‚ ç¤ºä¾‹ï¼šç”¨æˆ·åº”è¯¥èƒ½å¤Ÿä½¿ç”¨æ—§å®¢æˆ·ç«¯è¿žæŽ¥åˆ°å‡çº§çš„ç¾¤é›†ã€‚ Server-Server åè®®å…¼å®¹æ€§ï¼š ä¸åŒç‰ˆæœ¬çš„æœåŠ¡å™¨å¯ä»¥å…±å­˜äºŽåŒä¸€ä¸ªç¾¤é›†ä¸­ã€‚ æœåŠ¡å™¨ä¹‹é—´çš„æœ‰çº¿åè®®æ˜¯å…¼å®¹çš„ã€‚ åˆ†å¸ƒå¼ä»»åŠ¡çš„å·¥ä½œäººå‘˜ï¼ˆå¦‚å¤åˆ¶å’Œæ—¥å¿—æ‹†åˆ†ï¼‰å¯ä»¥å…±å­˜äºŽåŒä¸€ä¸ªç¾¤é›†ä¸­ã€‚ ç›¸å…³åè®®ï¼ˆå¦‚ä½¿ç”¨ZKè¿›è¡Œåè°ƒï¼‰ä¹Ÿä¸ä¼šæ”¹å˜ã€‚ ç¤ºä¾‹ï¼šç”¨æˆ·å¯ä»¥æ‰§è¡Œæ»šåŠ¨å‡çº§ã€‚ æ–‡ä»¶æ ¼å¼å…¼å®¹æ€§ï¼š æ”¯æŒæ–‡ä»¶æ ¼å¼å‘å‰å’Œå‘åŽå…¼å®¹ ç¤ºä¾‹ï¼šæ–‡ä»¶ã€ZK ç¼–ç ã€ç›®å½•å¸ƒå±€è‡ªåŠ¨å‡çº§ä¸º HBase å‡çº§çš„ä¸€éƒ¨åˆ†ã€‚ç”¨æˆ·å¯ä»¥é™çº§åˆ°æ—§ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸€åˆ‡éƒ½å°†ç»§ç»­å·¥ä½œã€‚ å®¢æˆ·ç«¯ API å…¼å®¹æ€§ï¼š å…è®¸æ›´æ”¹æˆ–åˆ é™¤çŽ°æœ‰çš„å®¢æˆ·ç«¯ APIã€‚ åœ¨æˆ‘ä»¬æ›´æ”¹/åˆ é™¤ä¸»è¦ç‰ˆæœ¬ä¹‹å‰ï¼ŒAPI éœ€è¦è¢«å¼ƒç”¨ã€‚ ä¿®è¡¥ç¨‹åºï¼ˆpatchï¼‰ç‰ˆæœ¬ä¸­æä¾›çš„ API å°†åœ¨æ‰€æœ‰åŽç»­ä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¸­æä¾›ã€‚ä½†æ˜¯ï¼Œå¯èƒ½ä¼šæ·»åŠ æ–°çš„ APIï¼Œè¿™äº› API åœ¨ä»¥å‰çš„ä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¸­å°†ä¸å¯ç”¨ã€‚ ä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¸­å¼•å…¥çš„æ–° API åªèƒ½ä»¥æºä»£ç å…¼å®¹çš„æ–¹å¼æ·»åŠ ï¼šå³å®žçŽ°å…¬å…± API çš„ä»£ç å°†ç»§ç»­ç¼–è¯‘[1]:ã€‚ç¤ºä¾‹ï¼šä½¿ç”¨æ–°åºŸç”¨çš„ API çš„ç”¨æˆ·ä¸éœ€è¦ä½¿ç”¨ HBase API è°ƒç”¨ä¿®æ”¹åº”ç”¨ç¨‹åºä»£ç ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ã€‚ ç¤ºä¾‹ï¼šåœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¹‹å‰ï¼Œä½¿ç”¨æ–°å¼ƒç”¨çš„APIçš„ç”¨æˆ·ä¸éœ€è¦ä¿®æ”¹åº”ç”¨ç¨‹åºçš„HBase APIè°ƒç”¨ä»£ç ã€‚ å®¢æˆ·ç«¯äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼š å†™å…¥ç»™å®šä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¸­æä¾›çš„ API çš„å®¢æˆ·ç«¯ä»£ç å¯ä»¥è¿è¡Œä¸å˜ï¼ˆä¸éœ€è¦é‡æ–°ç¼–è¯‘ï¼‰ï¼Œä»¥æŠµè¡¥æ–°çš„ jar åŽç»­è¡¥ä¸ç‰ˆæœ¬ã€‚ å†™å…¥ç»™å®šä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¸­æä¾›çš„ API çš„å®¢æˆ·ç«¯ä»£ç å¯èƒ½æ— æ³•é’ˆå¯¹æ—©æœŸä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¸­çš„æ—§ jar è¿è¡Œã€‚ç¤ºä¾‹ï¼šæ—§ç¼–è¯‘çš„å®¢æˆ·ç«¯ä»£ç å°†åœ¨ jar ä¸­ä¿æŒä¸å˜ã€‚ ç¤ºä¾‹ï¼šæ—§ç¼–è¯‘çš„å®¢æˆ·ç«¯ä»£ç å°†åœ¨ jar ä¸­ä¿æŒä¸å˜ã€‚ å¦‚æžœå®¢æˆ·ç«¯å®žçŽ° HBase æŽ¥å£ï¼Œåˆ™å¯èƒ½éœ€è¦é‡æ–°ç¼–è¯‘å‡çº§åˆ°è¾ƒæ–°çš„æ¬¡è¦ï¼ˆminorï¼‰ç‰ˆæœ¬ã€‚ æœåŠ¡å™¨ç«¯æœ‰é™çš„ API å…¼å®¹æ€§ï¼ˆå–è‡ª Hadoopï¼‰ï¼š å†…éƒ¨APIè¢«æ ‡è®°ä¸ºâ€œç¨³å®šï¼ˆStableï¼‰â€ï¼Œâ€œæ­£åœ¨å‘å±•ï¼ˆEvolvingï¼‰â€æˆ–â€œä¸ç¨³å®šï¼ˆUnstableï¼‰â€ã€‚ è¿™æ„å‘³ç€åå¤„ç†å™¨å’Œæ’ä»¶ï¼ˆå¯æ’å…¥ç±»ï¼ŒåŒ…æ‹¬å¤åˆ¶ï¼‰çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼Œåªè¦è¿™äº›åªä½¿ç”¨æ ‡è®°çš„æŽ¥å£/ç±»ã€‚ ä¾‹å¦‚ï¼šæ—§ç¼–è¯‘çš„åå¤„ç†å™¨ï¼Œè¿‡æ»¤å™¨æˆ–æ’ä»¶ä»£ç å°†åœ¨æ–° jar ä¸­ä¿æŒä¸å˜ã€‚ ç›¸å…³æ€§å…¼å®¹æ€§ï¼š HBase çš„å‡çº§é™¤Apache Hadoopå¤–ï¼Œä¸éœ€è¦ä¾èµ–é¡¹ç›®çš„å…¼å®¹å‡çº§ï¼ŒåŒ…æ‹¬è¿è¡Œ Java æ—¶ã€‚ HBase çš„å‡çº§ä¸éœ€è¦ä¾èµ–é¡¹ç›®çš„å…¼å®¹å‡çº§ï¼ŒåŒ…æ‹¬Java ã€‚ ç¤ºä¾‹ï¼šå°†HBaseå‡çº§åˆ°æ”¯æŒ_ä¾èµ–å…¼å®¹æ€§_çš„ç‰ˆæœ¬ä¸éœ€è¦å‡çº§Apache ZooKeeperæœåŠ¡ã€‚ ç¤ºä¾‹ï¼šç¤ºä¾‹ï¼šå¦‚æžœå½“å‰ç‰ˆæœ¬çš„HBaseæ”¯æŒåœ¨JDK 8ä¸Šè¿è¡Œï¼Œåˆ™å‡çº§åˆ°æ”¯æŒ_ä¾èµ–å…¼å®¹æ€§_çš„ç‰ˆæœ¬ä¹Ÿå°†åœ¨JDK 8ä¸Šè¿è¡Œã€‚ Hadoop ç‰ˆæœ¬ ä¹‹å‰ï¼Œæˆ‘ä»¬å°è¯•ç»´æŠ¤åŸºç¡€HadoopæœåŠ¡çš„ä¾èµ–å…¼å®¹æ€§ï¼Œä½†åœ¨è¿‡åŽ»å‡ å¹´ä¸­ï¼Œè¿™å·²ç»è¯æ˜Žæ˜¯ç«™ä¸ä½è„šçš„ã€‚ è™½ç„¶HBaseé¡¹ç›®è¯•å›¾ç»´æŒå¯¹æ—§ç‰ˆæœ¬Hadoopçš„æ”¯æŒï¼Œä½†æˆ‘ä»¬åˆ é™¤äº†æ¬¡è¦ç‰ˆæœ¬çš„â€œå—æ”¯æŒâ€æŒ‡ç¤ºç¬¦ã€‚ æ­¤å¤–ï¼ŒHadoopé¡¹ç›®æœ‰è‡ªå·±çš„ä¸€ç»„å…¼å®¹æ€§æŒ‡å—ï¼Œè¿™æ„å‘³ç€åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¼šç ´åæŒ‡å—ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»æ›´æ–°åˆ°è¾ƒæ–°çš„å—æ”¯æŒçš„æ¬¡è¦ç‰ˆæœ¬ã€‚ æ“ä½œå…¼å®¹æ€§ï¼š åº¦é‡æ ‡å‡†çš„æ›´æ”¹ æœåŠ¡çš„è¡Œä¸ºå˜åŒ– é€šè¿‡ /jmx/ ç«¯ç‚¹å…¬å¼€çš„ JMX API æ¦‚è¦ ä¿®è¡¥ç¨‹åºï¼ˆpatchï¼‰å‡çº§æ˜¯ä¸€ç§ç›´æŽ¥æ›¿ä»£æ–¹æ¡ˆã€‚ä»»ä½•ä¸æ˜¯ Java äºŒè¿›åˆ¶å’Œæºä»£ç å…¼å®¹çš„æ›´æ”¹éƒ½å°†ä¸è¢«å…è®¸[2]ã€‚åœ¨ä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¸­é™çº§ç‰ˆæœ¬å¯èƒ½ä¸å…¼å®¹ã€‚ æ¬¡è¦ï¼ˆminorï¼‰å‡çº§ä¸éœ€è¦ä¿®æ”¹åº”ç”¨ç¨‹åº/å®¢æˆ·ç«¯ä»£ç ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªç›´æŽ¥æ›¿æ¢ï¼Œä½†å¦‚æžœä½¿ç”¨æ–°çš„ jarï¼Œåˆ™å®¢æˆ·ç«¯ä»£ç ï¼Œåå¤„ç†å™¨ï¼Œè¿‡æ»¤å™¨ç­‰å¯èƒ½å¿…é¡»é‡æ–°ç¼–è¯‘ã€‚ ä¸»è¦ï¼ˆmajorï¼‰å‡çº§å…è®¸ HBase åšå‡ºé‡å¤§æ”¹å˜ã€‚ Major Minor Patch å®¢æˆ·ç«¯ - æœåŠ¡å™¨çº¿è·¯å…¼å®¹æ€§ N Y Y æœåŠ¡å™¨ - æœåŠ¡å™¨å…¼å®¹æ€§ N Y Y æ–‡ä»¶æ ¼å¼å…¼å®¹æ€§ N [4] Y Y å®¢æˆ·ç«¯APIå…¼å®¹æ€§ N Y Y å®¢æˆ·ç«¯äºŒè¿›åˆ¶å…¼å®¹æ€§ N N Y æœåŠ¡å™¨ç«¯æœ‰é™çš„APIå…¼å®¹æ€§ ç¨³å®šæ€§ï¼ˆStableï¼‰ N Y Y å‘å±•æ€§ï¼ˆEvolvingï¼‰ N N Y ä¸ç¨³å®šæ€§ï¼ˆUnstableï¼‰ N N N ç›¸å…³æ€§å…¼å®¹æ€§ N Y Y æ“ä½œå…¼å®¹æ€§ N N Y 11.1.1. HBase APIHBase æœ‰å¾ˆå¤š API è¦ç‚¹ï¼Œä½†å¯¹äºŽä¸Šé¢çš„å…¼å®¹æ€§çŸ©é˜µï¼Œæˆ‘ä»¬åŒºåˆ†äº†Client APIï¼ˆå®¢æˆ·ç«¯ APIï¼‰ï¼ŒLimited Private APIï¼ˆæœ‰é™çš„ç§æœ‰ APIï¼‰å’Œ Private APIï¼ˆç§æœ‰ APIï¼‰ã€‚HBase ä½¿ç”¨ Apache Yetus Audience Annotations æ¥å®šä¹‰ç¨³å®šæ€§ InterfaceAudience (javadocs): æ•æ‰é¢„æœŸçš„å—ä¼—ï¼Œå¯èƒ½çš„å€¼åŒ…æ‹¬ï¼š Publicï¼šå¯¹äºŽæœ€ç»ˆç”¨æˆ·å’Œå¤–éƒ¨é¡¹ç›®æ˜¯å®‰å…¨çš„ï¼› LimitedPrivateï¼šç”¨äºŽæˆ‘ä»¬æœŸæœ›å¯æ’å…¥çš„å†…éƒ¨ç»„ä»¶ï¼Œå¦‚åå¤„ç†å™¨ï¼› Privateï¼šä¸¥æ ¼ç”¨äºŽ HBase è‡ªèº«å†…éƒ¨å®šä¹‰ä¸º IA çš„ç±»ä¸­ï¼ŒPrivate å¯ä»¥ç”¨ä½œå£°æ˜Ž IA.LimitedPrivate æŽ¥å£çš„å‚æ•°æˆ–è¿”å›žå€¼ã€‚å°†IA.Privateå¯¹è±¡è§†ä¸ºä¸é€æ˜Žï¼›ä¸è¦å°è¯•ç›´æŽ¥è®¿é—®å…¶æ–¹æ³•æˆ–å­—æ®µã€‚ InterfaceStability (javadocs): æè¿°å…è®¸æŽ¥å£æ›´æ”¹çš„ç±»åž‹ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼š Stableï¼šæŽ¥å£æ˜¯å›ºå®šçš„ï¼Œé¢„è®¡ä¸ä¼šæ”¹å˜ï¼› Evolvingï¼šç•Œé¢å¯èƒ½ä¼šåœ¨æœªæ¥çš„minor ç‰ˆæœ¬ä¸­æ”¹å˜ï¼› Unstableï¼šç•Œé¢å¯èƒ½éšæ—¶æ›´æ”¹ è¯·è®°ä½ HBase é¡¹ç›®ä¸­ InterfaceAudience æ³¨é‡Šå’Œ InterfaceStability æ³¨é‡Šä¹‹é—´çš„ä»¥ä¸‹ç›¸äº’ä½œç”¨ï¼š IA.Public ç±»æœ¬è´¨ä¸Šæ˜¯ç¨³å®šçš„ï¼Œå¹¶åšæŒæˆ‘ä»¬æœ‰å…³å‡çº§ç±»åž‹ï¼ˆä¸»è¦ï¼Œæ¬¡è¦æˆ–ä¿®è¡¥ç¨‹åºï¼‰çš„ç¨³å®šæ€§ä¿è¯ã€‚ IA.LimitedPrivate ç±»åº”å§‹ç»ˆä½¿ç”¨ç»™å®šçš„ InterfaceStability å€¼çš„å…¶ä¸­ä¸€ä¸ªè¿›è¡Œæ³¨é‡Šã€‚å¦‚æžœä»–ä»¬ä¸æ˜¯ï¼Œä½ åº”è¯¥å‡å®šä»–ä»¬æ˜¯ IS.Unstableã€‚ IA.Private ç±»åº”è¯¥è¢«è®¤ä¸ºæ˜¯éšå«ä¸ç¨³å®šçš„ï¼Œä¸èƒ½ä¿è¯å‘å¸ƒä¹‹é—´çš„ç¨³å®šæ€§ã€‚ HBase Client API HBase å®¢æˆ·ç«¯ API ç”±æ‰€æœ‰æ ‡è®°æœ‰ InterfaceAudience.Public æŽ¥å£çš„ç±»æˆ–æ–¹æ³•ç»„æˆã€‚hbase-client å’Œä¾èµ–æ¨¡å—ä¸­çš„æ‰€æœ‰ä¸»ç±»éƒ½æœ‰InterfaceAudience.Publicï¼ŒInterfaceAudience.LimitedPrivateæˆ–InterfaceAudience.Privateæ ‡è®°ã€‚å¹¶éžæ‰€æœ‰å…¶ä»–æ¨¡å—ï¼ˆhbase-serverç­‰ï¼‰ä¸­çš„ç±»éƒ½æœ‰æ ‡è®°ã€‚å¦‚æžœä¸€ä¸ªç±»æ²¡æœ‰ä½¿ç”¨ä¸Šè¿°ä¸­çš„ä¸€ä¸ªæ³¨é‡Šï¼Œåˆ™å®ƒè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªInterfaceAudience.Privateç±»ã€‚ HBase LimitedPrivate API LimitedPrivate æ³¨é‡Šä¸ºæŽ¥å£é™„å¸¦äº†ä¸€ç»„ç›®æ ‡ä½¿ç”¨è€…ã€‚è¿™äº›ä½¿ç”¨è€…æ˜¯åå¤„ç†å™¨ï¼Œphoenixï¼Œå¤åˆ¶ç«¯ç‚¹å®žçŽ°ç­‰ã€‚æ­¤æ—¶ï¼ŒHBase åªèƒ½ä¿è¯ä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¹‹é—´çš„è¿™äº›æŽ¥å£çš„æºå’ŒäºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ HBase Private API æ‰€æœ‰ä½¿ç”¨InterfaceAudience.Privateæ³¨é‡Šçš„ç±»æˆ–æ²¡æœ‰æ³¨é‡Šçš„æ‰€æœ‰ç±»ä»…åœ¨HBaseå†…éƒ¨ä½¿ç”¨ã€‚æŽ¥å£å’Œæ–¹æ³•ç­¾åå¯ä»¥éšæ—¶æ”¹å˜ã€‚å¦‚æžœæ‚¨ä¾èµ–äºŽæ ‡è®°ä¸ºPrivateçš„ç‰¹å®šç•Œé¢ï¼Œåˆ™åº”æ‰“å¼€jiraä»¥å»ºè®®å°†ç•Œé¢æ›´æ”¹ä¸ºPublicæˆ–LimitedPrivateï¼Œæˆ–è€…ä¸ºæ­¤ç›®çš„å…¬å¼€çš„æŽ¥å£ã€‚ äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼š å½“æˆ‘ä»¬è¯´ä¸¤ä¸ª HBase ç‰ˆæœ¬æ˜¯å…¼å®¹çš„æ—¶ï¼Œæˆ‘ä»¬çš„æ„æ€æ˜¯è¿™äº›ç‰ˆæœ¬æ˜¯çº¿ï¼ˆwireï¼‰å’ŒäºŒè¿›åˆ¶å…¼å®¹çš„ã€‚å…¼å®¹çš„HBaseç‰ˆæœ¬æ„å‘³ç€å®¢æˆ·å¯ä»¥ä¸Žå…¼å®¹ä½†ä¸åŒç‰ˆæœ¬çš„æœåŠ¡å™¨é€šè¯ã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ å¯ä»¥æ¢å‡ºä¸€ä¸ªç‰ˆæœ¬çš„ jarï¼Œå¹¶ç”¨å¦ä¸€ä¸ªå…¼å®¹ç‰ˆæœ¬çš„ jar æ›¿æ¢å®ƒä»¬ï¼Œæ‰€æœ‰çš„ jar éƒ½å¯ä»¥å·¥ä½œã€‚é™¤éžå¦æœ‰è¯´æ˜Žï¼Œå¦åˆ™ HBase ä¸»è¦çš„ç‰ˆæœ¬éƒ½æ˜¯äºŒè¿›åˆ¶å…¼å®¹çš„ã€‚æ‚¨å¯ä»¥å®‰å…¨åœ°åœ¨äºŒè¿›åˆ¶å…¼å®¹ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œæ»šåŠ¨å‡çº§ã€‚ä¾‹å¦‚ä»Ž1.2.4åˆ° 1.2.6.è¯¦è§:[Does compatibility between versions also mean binary compatibility?] åœ¨HBaseè®ºå›çš„è®¨è®ºã€‚ 11.2. æ»šåŠ¨å‡çº§æ»šåŠ¨å‡çº§æ˜¯æ‚¨ä¸€æ¬¡æ›´æ–°æœåŠ¡å™¨ç¾¤é›†ä¸­çš„æœåŠ¡å™¨çš„è¿‡ç¨‹ã€‚å¦‚æžœå®ƒä»¬æ˜¯äºŒè¿›åˆ¶æˆ–çº¿è·¯å…¼å®¹çš„ï¼Œåˆ™å¯ä»¥è·¨ HBaseç‰ˆæœ¬è¿›è¡Œæ»šåŠ¨å‡çº§ã€‚è¯¦è§ï¼šRolling Upgrade Between Versions that are Binary/Wire Compatible ç²—ç•¥åœ°è¯´ï¼Œæ»šåŠ¨å‡çº§æ˜¯æ­£å¸¸åœ°åœæ­¢æ¯å°æœåŠ¡å™¨ï¼Œæ›´æ–°è½¯ä»¶ï¼Œç„¶åŽé‡æ–°å¯åŠ¨ã€‚æ‚¨å¯ä»¥ä¸ºé›†ç¾¤ä¸­çš„æ¯ä¸ªæœåŠ¡å™¨æ‰§è¡Œæ­¤æ“ä½œã€‚é€šå¸¸å…ˆå‡çº§ Masterï¼Œç„¶åŽå†å‡çº§ RegionServersã€‚ æŸ¥çœ‹ Rolling Restart ä¾‹å¦‚ï¼Œä¸‹é¢çš„ HBase æ˜¯ symlinked å®žé™…çš„ HBase å®‰è£…ã€‚åœ¨å‡çº§ä¹‹å‰ï¼Œåœ¨ç¾¤é›†ä¸Šè¿è¡Œæ»šåŠ¨é‡å¯ä¹‹å‰ï¼Œæˆ‘ä»¬å°† symlink æ›´æ”¹ä¸ºæŒ‡å‘æ–°çš„ HBase è½¯ä»¶ç‰ˆæœ¬ï¼Œç„¶åŽè¿è¡Œï¼š 1$ HADOOP_HOME=~/hadoop-2.6.0-CRC-SNAPSHOT ~/hbase/bin/rolling-restart.sh --config ~/conf_hbase æ»šåŠ¨é‡æ–°å¯åŠ¨è„šæœ¬å°†é¦–å…ˆæ­£å¸¸åœæ­¢å¹¶é‡æ–°å¯åŠ¨ä¸»æœåŠ¡å™¨ï¼Œç„¶åŽä¾æ¬¡é‡æ–°å¯åŠ¨æ¯ä¸ª RegionServerã€‚ç”±äºŽ symlink è¢«æ›´æ”¹ï¼Œæ‰€ä»¥é‡æ–°å¯åŠ¨æ—¶ï¼ŒæœåŠ¡å™¨å°†ä½¿ç”¨æ–°çš„HBase ç‰ˆæœ¬ã€‚éšç€æ»šåŠ¨å‡çº§çš„è¿›è¡Œï¼Œæ£€æŸ¥æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯ã€‚ åœ¨å…¼å®¹äºŒè¿›åˆ¶/Wireçš„ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œæ»šåŠ¨å‡çº§ï¼š é™¤éžå¦æœ‰è¯´æ˜Žï¼Œå¦åˆ™ HBase æŒ‡å‘çš„ç‰ˆæœ¬æ˜¯äºŒè¿›åˆ¶å…¼å®¹çš„ã€‚æ‚¨å¯ä»¥åœ¨ HBase ä¸»è¦ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œæ»šåŠ¨å‡çº§ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨é›†ç¾¤ä¸­è¿›è¡Œæ»šåŠ¨å‡çº§ï¼Œä½¿ç”¨0.94.6äºŒè¿›åˆ¶æ–‡ä»¶æ›¿æ¢0.94.5äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä»Žè€Œä»Ž 0.94.5 è½¬åˆ° 0.94.6ã€‚ åœ¨æ¬¡è¦ï¼ˆminorï¼‰ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨çš„ç‰ˆæœ¬æ˜¯æœ‰çº¿/åè®®å…¼å®¹çš„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œæ»šåŠ¨å‡çº§ã€‚ 12. ç‰ˆæœ¬æ¢å¤å½“ä½ åœ¨è¯•ç€å‡çº§ HBase çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°å‡çº§å¤±è´¥çš„é—®é¢˜ï¼Œå¹¶ä¸”æƒ³è¦å°†å…¶æ¢å¤æˆä¹‹å‰çš„ç‰ˆæœ¬ã€‚æœ¬èŠ‚å°±ä»‹ç»å¦‚ä½•æ‰§è¡Œ_å›žæ»š_ä»¥å°† HBase æ¢å¤ä¸ºåˆ°è¾ƒæ—©çš„ç‰ˆæœ¬ã€‚è¯·æ³¨æ„ï¼Œè¿™åº”è¯¥åªåœ¨ä¸»è¦ç‰ˆæœ¬å’Œä¸€äº›æ¬¡è¦ç‰ˆæœ¬ä¹‹é—´éœ€è¦ã€‚æ‚¨åº”è¯¥å§‹ç»ˆèƒ½å¤Ÿåœ¨ç›¸åŒæ¬¡è¦ç‰ˆæœ¬çš„ HBase Patch ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œ_é™çº§_ã€‚è¿™äº›è¯´æ˜Žå¯èƒ½è¦æ±‚æ‚¨åœ¨å¼€å§‹å‡çº§è¿‡ç¨‹ä¹‹å‰æ³¨æ„ç›¸å…³çš„äº‹é¡¹ï¼Œå› æ­¤è¯·åŠ¡å¿…äº‹å…ˆé˜…è¯»æœ¬èŠ‚ã€‚ 12.1. è­¦å‘Šå›žæ»šä¸Žé™çº§ æœ¬èŠ‚ä»‹ç»å¦‚ä½•å¯¹ HBase æ¬¡è¦ç‰ˆæœ¬å’Œä¸»è¦ç‰ˆæœ¬ä¹‹é—´çš„å‡çº§æ‰§è¡Œå›žæ»šã€‚åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œå›žæ»šæŒ‡çš„æ˜¯é‡‡å–å‡çº§åŽçš„é›†ç¾¤å¹¶å°†å…¶æ¢å¤åˆ°æ—§ç‰ˆæœ¬çš„è¿‡ç¨‹ï¼ŒåŒæ—¶_ä¸¢å¤±å‡çº§åŽå‘ç”Ÿçš„æ‰€æœ‰æ›´æ”¹_ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç¾¤é›†é™çº§ä¼šå°†å‡çº§åŽçš„ç¾¤é›†æ¢å¤åˆ°æ—§ç‰ˆæœ¬ï¼ŒåŒæ—¶ä¿ç•™å‡çº§åŽå†™å…¥çš„ä»»ä½•æ•°æ®ã€‚æˆ‘ä»¬ç›®å‰ä»…æä¾›å›žæ»š HBase é›†ç¾¤çš„è¯´æ˜Žã€‚æ­¤å¤–ï¼Œåªæœ‰åœ¨æ‰§è¡Œå‡çº§ä¹‹å‰éµå¾ªè¿™äº›è¯´æ˜Žï¼Œå›žæ»šæ‰æœ‰æ•ˆã€‚ å½“è¿™äº›æŒ‡ä»¤è°ˆè®ºå›žæ»šä¸Žé™çº§çš„å…ˆå†³æ¡ä»¶ç¾¤é›†æœåŠ¡ï¼ˆå³HDFSï¼‰æ—¶ï¼Œæ‚¨åº”è¯¥å°†æœåŠ¡ç‰ˆæœ¬ä¸Žé€€åŒ–çš„é™çº§æ¡ˆä¾‹è§†ä¸ºç›¸åŒã€‚ å¤åˆ¶ é™¤éžæ‚¨æ­£åœ¨æ‰§è¡Œå…¨éƒ¨æœåŠ¡å›žæ»šï¼Œå¦åˆ™ HBase ç¾¤é›†å°†ä¼šä¸¢å¤±ä»»ä½•é…ç½®çš„å¯¹ç­‰ HBase å¤åˆ¶ã€‚å¦‚æžœæ‚¨çš„é›†ç¾¤é…ç½®ä¸º HBase å¤åˆ¶ï¼Œé‚£ä¹ˆåœ¨æŒ‰ç…§è¿™äº›è¯´æ˜ŽManaging and Configuring Cluster Replicationè¿›è¡Œæ“ä½œä¹‹å‰ï¼Œæ‚¨åº”è¯¥è®°å½•æ‰€æœ‰å¤åˆ¶èŠ‚ç‚¹ã€‚æ‰§è¡Œå›žæ»šä¹‹åŽï¼Œæ‚¨åº”è¯¥å°†æ¯ä¸ªè®°å½•çš„å¯¹ç­‰ç‚¹æ·»åŠ å›žç¾¤é›†ã€‚å¦å¤–è¦æ³¨æ„ï¼Œè‡ªå‡çº§åŽå†™å…¥ç¾¤é›†çš„æ•°æ®å¯èƒ½å·²ç»æˆ–å¯èƒ½æœªè¢«å¤åˆ¶åˆ°ä»»ä½•å¯¹ç­‰æ–¹ã€‚ æ•°æ®ä½ç½® é™¤éžæ‚¨æ­£åœ¨æ‰§è¡Œå…¨éƒ¨æœåŠ¡å›žæ»šï¼Œå¦åˆ™é€šè¿‡å›žæ»šè¿‡ç¨‹å¯èƒ½ä¼šç ´åRegion Serverçš„æ‰€æœ‰å±€éƒ¨ä½ç½®ã€‚åœ¨ç¾¤é›†æœ‰æ—¶é—´é€šè¿‡ç´§å‡‘æŽ’åˆ—æ¢å¤æ•°æ®ä½ç½®ä¹‹å‰ï¼Œæ‚¨åº”è¯¥æœŸæœ›æ€§èƒ½çš„é™çº§ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥å¼ºåˆ¶åŽ‹ç¼©æ¥åŠ é€Ÿæ­¤è¿‡ç¨‹ï¼Œä½†è¦ä»¥ç”Ÿæˆç¾¤é›†è´Ÿè½½ä¸ºä»£ä»·ã€‚ å¯é…ç½®çš„ä½ç½® ä»¥ä¸‹è¯´æ˜Žå‡è®¾ HBase æ•°æ®ç›®å½•å’Œ HBase znode çš„é»˜è®¤ä½ç½®ã€‚è¿™ä¸¤ä¸ªä½ç½®éƒ½æ˜¯å¯é…ç½®çš„ï¼Œæ‚¨åº”è¯¥åœ¨ç»§ç»­æ“ä½œä¹‹å‰éªŒè¯ç¾¤é›†ä¸­ä½¿ç”¨çš„å€¼ã€‚å¦‚æžœæ‚¨æœ‰ä¸åŒçš„å€¼ï¼Œåªéœ€å°†é»˜è®¤å€¼æ›¿æ¢ä¸ºåœ¨é…ç½®ä¸­æ‰¾åˆ°çš„ HBase æ•°æ®ç›®å½•ï¼Œå®ƒæ˜¯é€šè¿‡å¯†é’¥ â€œHBaseâ€ (rootdir) é…ç½®çš„ï¼Œå¹¶ä¸”å…·æœ‰é»˜è®¤çš„ â€œ/HBaseâ€ã€‚* HBase znodeé€šè¿‡å¯†é’¥â€™zookeeper.znode.parentâ€™è¿›è¡Œé…ç½®ï¼Œé»˜è®¤å€¼ä¸ºâ€™/ hbaseâ€™ã€‚ 12.2. æ‰€æœ‰æœåŠ¡å›žæ»šå¦‚æžœæ‚¨è¦æ‰§è¡Œ HDFS å’Œ ZooKeeper æœåŠ¡çš„å›žæ»šï¼Œé‚£ä¹ˆ HBase çš„æ•°æ®å°†åœ¨æ­¤è¿‡ç¨‹ä¸­å›žæ»šã€‚ è¦æ±‚ èƒ½å¤Ÿå›žæ»š HDFS å’Œ ZooKeeper å‡çº§å‰ åœ¨å‡çº§å‰ä¸éœ€è¦é¢å¤–çš„æ­¥éª¤ã€‚ä½œä¸ºä¸€é¡¹é¢å¤–çš„é¢„é˜²æŽªæ–½ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨ distcp å°† HBase æ•°æ®å¤‡ä»½åˆ°è¦å‡çº§çš„ç¾¤é›†ä¹‹å¤–ã€‚ä¸ºæ­¤ï¼Œè¯·æœ¬èŠ‚å†…å®¹ä¸­çš„æŒ‰ç…§â€œHDFSé™çº§åŽå›žæ»šâ€çš„â€œå‡çº§å‰â€éƒ¨åˆ†ä¸­çš„æ­¥éª¤æ“ä½œï¼Œä½†å®ƒæ˜¯å¤åˆ¶åˆ°å¦ä¸€ä¸ª HDFS å®žä¾‹ï¼Œè€Œä¸æ˜¯åœ¨åŒä¸€å®žä¾‹ä¸­ã€‚ æ‰§è¡Œå›žæ»š åœæ­¢ HBase æ‰§è¡Œ HDFS å’Œ ZooKeeper çš„å›žæ»šï¼ˆHBase åº”è¯¥ä¿æŒåœæ­¢çŠ¶æ€ï¼‰ å°†å®‰è£…çš„ HBase ç‰ˆæœ¬æ›´æ”¹ä¸ºä»¥å‰çš„ç‰ˆæœ¬ å¯åŠ¨ HBase éªŒè¯ HBase å†…å®¹ - ä½¿ç”¨ HBase shell åˆ—å‡ºè¡¨æ ¼å¹¶æ‰«æä¸€äº›å·²çŸ¥å€¼ã€‚ 12.3. HDFS å›žæ»šå’Œ ZooKeeper é™çº§åŽå›žæ»šå¦‚æžœæ‚¨å°†å›žæ»š HDFSï¼Œä½†é€šè¿‡ ZooKeeper é™çº§ï¼Œé‚£ä¹ˆ HBase å°†å¤„äºŽä¸ä¸€è‡´çš„çŠ¶æ€ã€‚åœ¨å®Œæˆæ­¤è¿‡ç¨‹ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ç¡®ä¿é›†ç¾¤æœªå¯åŠ¨ã€‚ è¦æ±‚ èƒ½å¤Ÿå›žæ»š HDFS èƒ½å¤Ÿé™çº§ ZooKeeper å‡çº§å‰ åœ¨å‡çº§å‰ä¸éœ€è¦é¢å¤–çš„æ­¥éª¤ã€‚ä½œä¸ºä¸€ç§é¢å¤–çš„é¢„é˜²æŽªæ–½ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨ distcp å°† HBase æ•°æ®å¤‡ä»½åˆ°è¦å‡çº§çš„ç¾¤é›†ä¹‹å¤–ã€‚ä¸ºæ­¤ï¼Œè¯·æœ¬èŠ‚å†…å®¹ä¸­çš„æŒ‰ç…§â€œHDFSé™çº§åŽå›žæ»šâ€çš„â€œå‡çº§å‰â€éƒ¨åˆ†ä¸­çš„æ­¥éª¤æ“ä½œï¼Œä½†å®ƒå°†å¤åˆ¶åˆ°å¦ä¸€ä¸ªHDFSå®žä¾‹ï¼Œè€Œä¸æ˜¯åœ¨åŒä¸€å®žä¾‹ä¸­ã€‚ æ‰§è¡Œå›žæ»š åœæ­¢ HBase æ‰§è¡Œ HDFS å›žæ»šå’Œ ZooKeeper é™çº§ï¼ˆHBase åº”è¯¥ä¿æŒåœæ­¢çŠ¶æ€ï¼‰ å°†å®‰è£…çš„ HBase ç‰ˆæœ¬æ›´æ”¹ä¸ºä»¥å‰çš„ç‰ˆæœ¬ æ¸…é™¤ä¸Ž HBase ç›¸å…³çš„ ZooKeeper ä¿¡æ¯ã€‚è­¦å‘Šï¼šæ­¤æ­¥éª¤å°†æ°¸ä¹…é”€æ¯æ‰€æœ‰å¤åˆ¶å¯¹ç­‰ç‚¹ã€‚ æ¸…ç† ZooKeeper ä¸­çš„ HBase ä¿¡æ¯ 123456[hpnewton@gateway_node.example.com ~]$ zookeeper-client -server zookeeper1.example.com:2181,zookeeper2.example.com:2181,zookeeper3.example.com:2181Welcome to ZooKeeper!JLine support is disabledrmr /hbasequitQuitting... å¯åŠ¨ HBase éªŒè¯ HBase å†…å®¹ - ä½¿ç”¨ HBase shell åˆ—å‡ºè¡¨æ ¼å¹¶æ‰«æä¸€äº›å·²çŸ¥å€¼ã€‚ 12.4. HDFS é™çº§åŽå›žæ»šå¦‚æžœæ‚¨è¦æ‰§è¡Œ HDFS é™çº§ï¼Œåˆ™æ— è®ºZooKeeperæ˜¯å¦é€šè¿‡å›žæ»šã€é™çº§æˆ–é‡æ–°å®‰è£…ï¼Œæ‚¨éƒ½éœ€è¦éµå¾ªè¿™äº›æŒ‡ç¤ºä¿¡æ¯ã€‚ è¦æ±‚ å¯ä»¥é™çº§ HDFS å‡çº§å‰ç¾¤é›†å¿…é¡»èƒ½å¤Ÿè¿è¡Œ MapReduce ä½œä¸š HDFS è¶…çº§ç”¨æˆ·è®¿é—® åœ¨ HDFS ä¸­è‡³å°‘æœ‰ä¸¤ä¸ª HBase æ•°æ®ç›®å½•çš„å‰¯æœ¬ç©ºé—´å¯ä»¥é™çº§ HDFS å‡çº§å‰ åœ¨å¼€å§‹å‡çº§è¿‡ç¨‹ä¹‹å‰ï¼Œæ‚¨å¿…é¡»å¯¹ HBase çš„æ”¯æŒæ•°æ®è¿›è¡Œå®Œæ•´å¤‡ä»½ã€‚ä»¥ä¸‹è¯´æ˜Žä»‹ç»äº†åœ¨å½“å‰HDFSå®žä¾‹ä¸­å¤‡ä»½æ•°æ®çš„è¿‡ç¨‹ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ distcp å‘½ä»¤å°†æ•°æ®å¤åˆ¶åˆ°å¦ä¸€ä¸ª HDFS ç¾¤é›†ã€‚ åœæ­¢ HBase ç¾¤é›† å°† HBase æ•°æ®ç›®å½•å¤åˆ¶åˆ°å¤‡ä»½ä½ç½®, æ–¹æ³•distcp commandæ˜¯ä½¿ç”¨ distcp å‘½ä»¤ä½œä¸º HDFS è¶…çº§ç”¨æˆ· (ä¸‹é¢æ˜¾ç¤ºåœ¨å¯ç”¨å®‰å…¨çš„ç¾¤é›†ä¸Š) ä½¿ç”¨distcpå¤‡ä»½HBaseæ•°æ®ç›®å½•ï¼š 12[hpnewton@gateway_node.example.com ~]$ kinit -k -t hdfs.keytab hdfs@EXAMPLE.COM[hpnewton@gateway_node.example.com ~]$ hadoop distcp /hbase /hbase-pre-upgrade-backup Distcp å°†å¯åŠ¨ä¸€ä¸ª mapreduce ä½œä¸šæ¥å¤„ç†ä»¥åˆ†å¸ƒå¼æ–¹å¼å¤åˆ¶æ–‡ä»¶ã€‚æ£€æŸ¥ distcp å‘½ä»¤çš„è¾“å‡ºï¼Œä»¥ç¡®ä¿æ­¤ä½œä¸šæˆåŠŸå®Œæˆã€‚ æ‰§è¡Œå›žæ»š åœæ­¢ HBase æ‰§è¡Œ HDFS çš„é™çº§å’Œ ZooKeeper çš„é™çº§/å›žæ»šï¼ˆHBase åº”è¯¥ä¿æŒåœæ­¢çŠ¶æ€ï¼‰ å°†å®‰è£…çš„ HBase ç‰ˆæœ¬æ›´æ”¹ä¸ºä»¥å‰çš„ç‰ˆæœ¬ å°† HBase æ•°æ®ç›®å½•ä»Žå‡çº§å‰æ¢å¤ä¸º HDFS è¶…çº§ç”¨æˆ· (å¦‚ä¸‹æ‰€ç¤ºåœ¨å¯ç”¨å®‰å…¨çš„ç¾¤é›†ä¸Š)ã€‚å¦‚æžœæ‚¨å°†æ•°æ®å¤‡ä»½åˆ°å¦ä¸€ä¸ª HDFS ç¾¤é›†è€Œä¸æ˜¯æœ¬åœ°ï¼Œåˆ™éœ€è¦ä½¿ç”¨distcp å‘½ä»¤å°†å…¶å¤åˆ¶å›žå½“å‰çš„ HDFS ç¾¤é›†ã€‚æ¢å¤ HBase æ•°æ®ç›®å½•ï¼š 123[hpnewton@gateway_node.example.com ~]$ kinit -k -t hdfs.keytab hdfs@EXAMPLE.COM[hpnewton@gateway_node.example.com ~]$ hdfs dfs -mv /hbase /hbase-upgrade-rollback[hpnewton@gateway_node.example.com ~]$ hdfs dfs -mv /hbase-pre-upgrade-backup /hbase æ¸…é™¤ä¸Ž HBase ç›¸å…³çš„ ZooKeeper ä¿¡æ¯ã€‚è­¦å‘Šï¼šæ­¤æ­¥éª¤å°†æ°¸ä¹…é”€æ¯æ‰€æœ‰å¤åˆ¶å¯¹ç­‰ç‚¹ã€‚ æ¸…ç† ZooKeeper ä¸­çš„ HBase ä¿¡æ¯ï¼š 123456[hpnewton@gateway_node.example.com ~]$ zookeeper-client -server zookeeper1.example.com:2181,zookeeper2.example.com:2181,zookeeper3.example.com:2181Welcome to ZooKeeper!JLine support is disabledrmr /hbasequitQuitting... å¯åŠ¨ HBase éªŒè¯ HBase å†…å®¹ - ä½¿ç”¨ HBase shell åˆ—å‡ºè¡¨æ ¼å¹¶æ‰«æä¸€äº›å·²çŸ¥å€¼ã€‚ 13. HBaseå‡çº§è·¯å¾„13.1. ä»Ž 1.x å‡çº§åˆ° 2.xåœ¨æœ¬èŠ‚ä¸­ï¼Œå…ˆå‰ç¨³å®šçš„HBaseç‰ˆæœ¬ç›¸æ¯”æ‰€å‘ç”Ÿçš„é‡å¤§å˜åŒ–ï¼Œä¸€å®šè¦ä»”ç»†é˜…è¯»ï¼Œç„¶åŽå†è¿›è¡Œå‡çº§ã€‚ä»¥å…å‘ç”Ÿæ„å¤–ã€‚ 13.1.1. å˜åŒ–é€šå‘Šé¦–å…ˆï¼Œæˆ‘ä»¬å°†ä»‹ç»å‡çº§åˆ°HBase 2.0+æ—¶å¯èƒ½é‡åˆ°çš„éƒ¨ç½²/æ“ä½œæ›´æ”¹ã€‚ä¹‹åŽï¼Œæˆ‘ä»¬å°†å‘ŠçŸ¥ä¸‹æ¸¸åº”ç”¨ç¨‹åºçš„æ›´æ”¹ã€‚è¯·æ³¨æ„ï¼Œåå¤„ç†å™¨åŒ…å«åœ¨æ“ä½œéƒ¨åˆ†ä¸­ã€‚å¦å¤–è¯·æ³¨æ„ï¼Œæœ¬èŠ‚å¹¶ä¸æ—¨åœ¨ä¼ è¾¾æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–°åŠŸèƒ½çš„ä¿¡æ¯ã€‚æœ‰å…³æ›´æ”¹çš„å®Œæ•´æ‘˜è¦ï¼Œè¯·å‚é˜…æ‚¨è®¡åˆ’å‡çº§åˆ°çš„ç‰ˆæœ¬çš„æºå‘å¸ƒå·¥ä»¶ä¸­çš„changes.txtæ–‡ä»¶ã€‚ æ›´æ–°åˆ°HBase 2.0+çš„åŸºæœ¬æœ€ä½Žå…ˆå†³æ¡ä»¶ å¦‚ä¹‹å‰ç« èŠ‚æ‰€è¿° Basic Prerequisites, HBase 2.0+ éœ€è¦ä¾èµ–Java 8 å’Œ Hadoop 2.6. HBaseç¤¾åŒºå»ºè®®åœ¨å‡çº§æ‚¨çš„HBaseç‰ˆæœ¬ä¹‹å‰ï¼Œç¡®ä¿æ‚¨å·²ç»å®Œæˆäº†ä»»ä½•å¿…è¦çš„å…ˆå†³æ¡ä»¶å‡çº§ã€‚ HBCK ä¸€å®šè¦åŒ¹é…HBaseç‰ˆæœ¬ ä¸€å®šä¸è¦åœ¨HBase 2.0+ é›†ç¾¤ä¸Šä½¿ç”¨ HBase 1.x ç‰ˆæœ¬çš„ HBCKã€‚ HBCKæ˜¯ä¸¥æ ¼ç»‘å®š HBaseç‰ˆæœ¬çš„ã€‚ å¯¹hbase 2.0+é›†ç¾¤ä½¿ç”¨æ—©æœŸç‰ˆæœ¬çš„hbckå·¥å…·å°†ä»¥ä¸å¯æ¢å¤çš„æ–¹å¼ç ´åæ€§åœ°æ”¹å˜é›†ç¾¤ã€‚ ä»ŽHBase 2.0å¼€å§‹ï¼Œ HBCK (ä¹Ÿå«åš_HBCK1_ æˆ– _hbck1_)æ˜¯ä¸€ä¸ªåªè¯»å·¥å…·ï¼Œå¯ä»¥æŠ¥å‘ŠæŸäº›éžå…¬å…±ç³»ç»Ÿå†…éƒ¨çš„çŠ¶æ€ã€‚æ‚¨ä¸åº”è¯¥ä¾èµ–è¿™äº›å†…éƒ¨æž„ä»¶çš„æ ¼å¼å’Œå†…å®¹æ¥ä¿æŒHBaseç‰ˆæœ¬ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚ æ›¿ä»£å“è¯¦è§ï¼š HBase HBCK2 å’Œ Apache HBase Operational Management. é…ç½®è®¾ç½®ä¸å†ä½äºŽHBase 2.0+ ä¸‹åˆ—é…ç½®è®¾ç½®ä¸å†é€‚ç”¨æˆ–ä¸å¯ç”¨ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è¯¦ç»†çš„å‘è¡Œè¯´æ˜Žã€‚ hbase.config.read.zookeeper.config (æŸ¥çœ‹ ZooKeeper configs no longer read from zoo.cfg ) hbase.zookeeper.useMulti (HBaseçŽ°åœ¨ä½¿ç”¨ZKâ€™s multi functionality) hbase.rpc.client.threads.max hbase.rpc.client.nativetransport hbase.fs.tmp.dir hbase.bucketcache.combinedcache.enabled hbase.bucketcache.ioengine ä¸å†æ”¯æŒ â€˜heapâ€™ å€¼. hbase.bulkload.staging.dir hbase.balancer.tablesOnMaster ä¸¥æ ¼åœ°è¯´ï¼Œå®ƒå¹¶æ²¡æœ‰è¢«åˆ é™¤ï¼Œä½†å®ƒçš„æ„ä¹‰å·²ç»å‘ç”Ÿäº†æ ¹æœ¬æ€§çš„æ”¹å˜ï¼Œç”¨æˆ·ä¸åº”è¯¥è®¾ç½®å®ƒã€‚è¯¦è§ï¼š â€œMaster hosting regionsâ€ feature broken and unsupported hbase.master.distributed.log.replay è¯¦è§ï¼š â€œDistributed Log Replayâ€ feature broken and removed hbase.regionserver.disallow.writes.when.recovering è¯¦è§ï¼š â€œDistributed Log Replayâ€ feature broken and removed hbase.regionserver.wal.logreplay.batch.size è¯¦è§ï¼š â€œDistributed Log Replayâ€ feature broken and removed hbase.master.catalog.timeout hbase.regionserver.catalog.timeout hbase.metrics.exposeOperationTimes hbase.metrics.showTableName hbase.online.schema.update.enable (HBase ä¸å†æ”¯æŒ) hbase.thrift.htablepool.size.max åœ¨HBase 2.0+é‡å‘½åçš„é…ç½®å±žæ€§ å·²é‡å‘½åä»¥ä¸‹å±žæ€§ã€‚åœ¨è¿è¡Œæ—¶è®¾ç½®æ—§å±žæ€§å°†å¤±è´¥ã€‚ æ—§åç§° æ–°åç§° hbase.rpc.server.nativetransport hbase.netty.nativetransport hbase.netty.rpc.server.worker.count hbase.netty.worker.count hbase.hfile.compactions.discharger.interval hbase.hfile.compaction.discharger.interval hbase.hregion.percolumnfamilyflush.size.lower.bound hbase.hregion.percolumnfamilyflush.size.lower.bound.min åœ¨HBase 2.0+ä¸­å…·æœ‰ä¸åŒé»˜è®¤å€¼çš„é…ç½® ä»¥ä¸‹é…ç½®è®¾ç½®æ›´æ”¹äº†å®ƒä»¬çš„é»˜è®¤å€¼ã€‚åœ¨é€‚ç”¨çš„æƒ…å†µä¸‹ï¼Œå°†ç»™å‡ºhbase 1.2è¡Œä¸ºçš„è®¾ç½®å€¼ã€‚ hbase.security.authorization é»˜è®¤ false. ä¹‹å‰ç‰ˆæœ¬çš„defaultæ˜¯true hbase.client.retries.number çŽ°åœ¨é»˜è®¤10. ä¹‹å‰é»˜è®¤ 35.å»ºè®®ä¸‹æ¸¸ç”¨æˆ·ä½¿ç”¨ Timeout settings æ‰€è¿°çš„å®¢æˆ·ç«¯è¶…æ—¶ã€‚ hbase.client.serverside.retries.multiplier çŽ°åœ¨é»˜è®¤3. ä¹‹å‰é»˜è®¤ 10.å»ºè®®ä¸‹æ¸¸ç”¨æˆ·ä½¿ç”¨ Timeout settings æ‰€è¿°çš„å®¢æˆ·ç«¯è¶…æ—¶ã€‚ hbase.master.fileSplitTimeout é»˜è®¤10åˆ†é’Ÿï¼Œä¹‹å‰æ˜¯30ç§’ hbase.regionserver.logroll.multiplieré»˜è®¤ 0.5\ä¹‹å‰ 0.95. æ­¤æ›´æ”¹ä¸Žä¸‹é¢çš„å—å¤§å°åŠ å€æœ‰å…³ã€‚ç»“åˆèµ·æ¥ï¼Œè¿™ä¸¤ä¸ªé…ç½®æ›´æ”¹åº”è¯¥ä½¿WALçš„å¤§å°ä¸ŽHBase-1.xä¸­çš„å¤§å°å¤§è‡´ç›¸åŒï¼Œä½†æ˜¯å°å—çš„å‘ç”ŸçŽ‡åº”è¯¥æ›´ä½Žï¼Œå› ä¸ºåœ¨è¾¾åˆ°å—å¤§å°é˜ˆå€¼ä¹‹å‰ï¼Œæˆ‘ä»¬æ— æ³•æ»šåŠ¨WALã€‚è¯¦è§ï¼š HBASE-19148 hbase.regionserver.hlog.blocksize é»˜è®¤ä¸ºwal dirçš„hdfsé»˜è®¤å—å¤§å°çš„2å€ã€‚ä»¥å‰å®ƒç­‰äºŽwal dirçš„hdfsé»˜è®¤å—å¤§å°ã€‚ hbase.client.start.log.errors.counter æ›´æ”¹ä¸º5,ä»¥å‰æ˜¯9 hbase.ipc.server.callqueue.type æ”¹ä¸ºâ€œFIFOâ€ã€‚åœ¨HBaseç‰ˆæœ¬1.0-1.2ä¸­ï¼Œè¿™æ˜¯â€œæœ€åŽæœŸé™â€ã€‚åœ¨ä¹‹å‰å’Œä¹‹åŽçš„1.xç‰ˆæœ¬ä¸­ï¼Œå®ƒå·²ç»é»˜è®¤ä¸ºâ€œFIFOâ€ã€‚ hbase.hregion.memstore.chunkpool.maxsize é»˜è®¤ä¸º1.0, ä¹‹å‰æ˜¯0.0. å®žé™…ä¸Šï¼Œè¿™æ„å‘³ç€ä»¥å‰å½“memstore onheapæ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šä½¿ç”¨åŒºå—æ± ï¼ŒçŽ°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨ã€‚æœ‰å…³mslabåŒºå—æ± çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Long GC pauses hbase.master.cleaner.interval é»˜è®¤ä¸º10åˆ†é’Ÿ, ä¹‹å‰æ˜¯1åˆ†é’Ÿ. hbase.master.procedure.threads çŽ°åœ¨å°†é»˜è®¤ä¸ºå¯ç”¨CPUæ•°é‡çš„1/4ï¼Œä½†ä¸å°‘äºŽ16ä¸ªçº¿ç¨‹ã€‚ä»¥å‰ï¼Œçº¿ç¨‹æ•°ç­‰äºŽCPUæ•°ã€‚ hbase.hstore.blockingStoreFiles çŽ°åœ¨æ˜¯16ã€‚ä»¥å‰æ˜¯10ã€‚ hbase.http.max.threads çŽ°åœ¨æ˜¯16ã€‚ä»¥å‰æ˜¯10ã€‚ hbase.client.max.perserver.tasks çŽ°åœ¨æ˜¯2ã€‚ä»¥å‰æ˜¯5 hbase.normalizer.period çŽ°åœ¨æ˜¯5åˆ†é’Ÿã€‚ä»¥å‰æ˜¯30åˆ†é’Ÿ. hbase.regionserver.region.split.policy çŽ°åœ¨æ˜¯æ­¥è¿›å¼åˆ†å‰²ç­–ç•¥ã€‚ä»¥å‰ï¼Œå®ƒå¢žåŠ è¾¹ç•ŒåŒºåŸŸç­–ç•¥ã€‚ replication.source.ratio çŽ°åœ¨æ˜¯0.5ã€‚ä»¥å‰æ˜¯0.1. â€œä¸»æ‰˜ç®¡åŒºåŸŸâ€åŠŸèƒ½å·²æŸåä¸”ä¸å—æ”¯æŒ hbase 1.yä¸­çš„â€œmasterå……å½“åŒºåŸŸæœåŠ¡å™¨â€åŠŸèƒ½å’Œç›¸å…³åŽç»­å·¥ä½œåœ¨hbase 2.yä¸­ä¸èµ·ä½œç”¨ï¼Œä¸åº”åœ¨ç”Ÿäº§è®¾ç½®ä¸­ä½¿ç”¨ï¼Œå› ä¸ºmasteråˆå§‹åŒ–æ—¶å‡ºçŽ°æ­»é”ã€‚å»ºè®®ä¸‹æ¸¸ç”¨æˆ·å°†ç›¸å…³çš„é…ç½®è®¾ç½®è§†ä¸ºå®žéªŒæ€§çš„ï¼Œå¹¶å°†è¯¥åŠŸèƒ½è§†ä¸ºä¸é€‚åˆç”Ÿäº§è®¾ç½®ã€‚ ç›¸å…³å˜æ›´çš„ç®€è¦æ¦‚è¿°ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼ŒMasterä¸å†æ‰¿è½½åŒºåŸŸ hbase.balancer.tablesonmasteræ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºfalseï¼ˆå¦‚æžœå®ƒåŒ…å«hbase 1.xè¡¨åˆ—è¡¨ï¼Œåˆ™é»˜è®¤ä¸ºfalseï¼‰ hbase.balancer.tablesonmaster.systemtablesonlyæ˜¯ä¿æŒç”¨æˆ·è¡¨è¿œç¦»masterçš„å¸ƒå°”å€¼ã€‚ç¼ºçœå‡ é‚£äº›å¸Œæœ›å¤åˆ¶æ—§æœåŠ¡å™¨åˆ—è¡¨é…ç½®çš„äººåº”è¯¥éƒ¨ç½²ä¸€ä¸ªç‹¬ç«‹çš„åŒºåŸŸæœåŠ¡å™¨è¿›ç¨‹ï¼Œç„¶åŽä¾èµ–äºŽåŒºåŸŸæœåŠ¡å™¨ç»„ã€‚ â€œåˆ†å¸ƒå¼æ—¥å¿—å›žæ”¾â€åŠŸèƒ½å·²ä¸­æ–­å¹¶å·²åˆ é™¤ åˆ†å¸ƒå¼æ—¥å¿—é‡æ’­åŠŸèƒ½å·²æŸåï¼Œå·²ä»Žhbase 2.y+ä¸­åˆ é™¤ã€‚å› æ­¤ï¼Œæ‰€æœ‰ç›¸å…³çš„é…ç½®ã€åº¦é‡ã€RPCå­—æ®µå’Œæ—¥å¿—è®°å½•éƒ½å·²è¢«åˆ é™¤ã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿è¡Œåˆ°hbase 1.0æ—¶å‘çŽ°æ­¤åŠŸèƒ½ä¸å¯é ï¼Œé»˜è®¤ä¸ºæœªä½¿ç”¨ï¼Œå½“æˆ‘ä»¬å¼€å§‹å¿½ç•¥æ‰“å¼€è¯¥åŠŸèƒ½çš„é…ç½®æ—¶ (HBASE-14465)ï¼Œå®ƒåœ¨hbase 1.2.0ä¸­è¢«æœ‰æ•ˆåˆ é™¤ã€‚å¦‚æžœæ‚¨å½“å‰æ­£åœ¨ä½¿ç”¨è¯¥åŠŸèƒ½ï¼Œè¯·ç¡®ä¿æ‰§è¡Œå¹²å‡€çš„å…³æœºï¼Œç¡®ä¿å®Œæˆæ‰€æœ‰DLRå·¥ä½œï¼Œå¹¶åœ¨å‡çº§ä¹‹å‰ç¦ç”¨è¯¥åŠŸèƒ½ã€‚ _prefix-tree_ ç¼–ç ç§»é™¤ å‰ç¼€æ ‘ç¼–ç å·²ä»Žhbase 2.0.0ä¸­åˆ é™¤(HBASE-19179)ã€‚åœ¨HBase-1.2.7ã€HBase-1.4.0å’ŒHBase-1.3.2ä¸­å·²å¼ƒç”¨ã€‚ æ­¤åŠŸèƒ½è¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒæœªè¢«ç§¯æžç»´æŠ¤ã€‚å¦‚æžœæœ‰å…´è¶£æ¢å¤è¿™ç§å¯ä»¥åœ¨æ…¢å†™ä»£ä»·é«˜æ˜‚çš„æƒ…å†µä¸‹æ”¹å–„éšæœºè¯»å–å»¶è¿Ÿçš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨_dev at hbase dot apache dot org_ä¸Šå†™ä¸‹hbaseå¼€å‘è€…åˆ—è¡¨ã€‚ å‡çº§åˆ°HBase 2.0+ä¹‹å‰ï¼Œéœ€è¦ä»Žæ‰€æœ‰è¡¨ä¸­åˆ é™¤å‰ç¼€æ ‘ç¼–ç ã€‚è¦é¦–å…ˆæ‰§è¡Œæ­¤æ“ä½œï¼Œæ‚¨éœ€è¦å°†ç¼–ç ä»Žå‰ç¼€æ ‘æ›´æ”¹ä¸ºHBase 2.0ä¸­æ”¯æŒçš„å…¶ä»–å†…å®¹ã€‚ä¹‹åŽï¼Œæ‚¨å¿…é¡»ä¸»è¦åŽ‹ç¼©ä»¥å‰ä½¿ç”¨å‰ç¼€æ ‘ç¼–ç çš„è¡¨ã€‚è¦æ£€æŸ¥å“ªäº›åˆ—æ—ä½¿ç”¨çš„æ•°æ®å—ç¼–ç ä¸å…¼å®¹ï¼Œå¯ä»¥ä½¿ç”¨Pre-Upgrade Validator æŒ‡æ ‡å˜åŒ– ä»¥ä¸‹æŒ‡æ ‡å·²æ›´æ”¹åç§°ï¼š ä»¥å‰ä»¥â€AssignmentMangerâ€ [sic]åç§°å‘å¸ƒçš„åº¦é‡çŽ°åœ¨â€AssignmentManagerâ€åç§°å‘å¸ƒã€‚ ä»¥ä¸‹æŒ‡æ ‡æ”¹å˜äº†å…¶å«ä¹‰ï¼š åŸºäºŽæ¯ä¸ªåŒºåŸŸæœåŠ¡å™¨å‘å¸ƒçš„åº¦é‡â€œblockcacheevictioncountâ€ä¸å†åŒ…æ‹¬ç”±äºŽå…¶æ¥è‡ªçš„hfilesæ— æ•ˆï¼ˆä¾‹å¦‚é€šè¿‡åŽ‹ç¼©ï¼‰è€Œä»Žç¼“å­˜ä¸­åˆ é™¤çš„å—ã€‚ åº¦é‡â€™totalRequestCountâ€™æ¯ä¸ªè¯·æ±‚å¢žåŠ ä¸€æ¬¡ï¼›ä»¥å‰å®ƒæ˜¯ç”±è¯·æ±‚ä¸­æºå¸¦çš„Actionsæ•°é‡å¢žåŠ çš„ï¼›ä¾‹å¦‚ï¼Œå¦‚æžœä¸€ä¸ªè¯·æ±‚æ˜¯ç”±å››ä¸ªgetå’Œä¸¤ä¸ªputsç»„æˆçš„multiï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†â€œtotalrequestcountâ€å¢žåŠ å…­æ¬¡ï¼›çŽ°åœ¨ï¼Œä¸ç®¡æ€Žæ ·ï¼Œæˆ‘ä»¬éƒ½å°†å¢žåŠ ä¸€æ¬¡ã€‚å¸Œæœ›åœ¨HBase-2.0.0ä¸­çœ‹åˆ°è¯¥æŒ‡æ ‡çš„è¾ƒä½Žå€¼ã€‚ â€˜readRequestCountâ€™çŽ°åœ¨å¯¹è¿”å›žéžç©ºè¡Œçš„è¯»å–è¿›è¡Œè®¡æ•°ï¼Œåœ¨è¾ƒæ—§çš„HBaseä¸­ï¼Œæ— è®ºç»“æžœæ˜¯å¦ä¸ºï¼Œæˆ‘ä»¬éƒ½ä¼šå¢žåŠ â€œreadrequestcountâ€ã€‚å¦‚æžœè¯·æ±‚ä¸å­˜åœ¨çš„è¡Œï¼Œæ­¤æ›´æ”¹å°†ä½¿è¯»å–è¯·æ±‚å›¾çš„é…ç½®æ–‡ä»¶å˜å¹³ã€‚YCSBè¯»å–ç¹é‡çš„å·¥ä½œè´Ÿè½½å¯ä»¥æ ¹æ®æ•°æ®åº“çš„åŠ è½½æ–¹å¼æ¥å®žçŽ°è¿™ä¸€ç‚¹ã€‚ å·²åˆ é™¤ä»¥ä¸‹æŒ‡æ ‡ï¼š ä¸Žåˆ†å¸ƒå¼æ—¥å¿—é‡æ’­åŠŸèƒ½ç›¸å…³çš„åº¦é‡ä¸å†å­˜åœ¨ã€‚ä»¥å‰åœ¨åŒºåŸŸæœåŠ¡å™¨ä¸Šä¸‹æ–‡ä¸­çš„åç§°â€œreplayâ€ä¸‹æ‰¾åˆ°äº†å®ƒä»¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… â€œDistributed Log Replayâ€ feature broken and removed æ·»åŠ äº†ä»¥ä¸‹æŒ‡æ ‡ï¼š â€˜totalRowActionRequestCountâ€™æ˜¯æ±‡æ€»è¯»å’Œå†™çš„åŒºåŸŸè¡Œæ“ä½œçš„è®¡æ•°ã€‚ æ›´æ”¹æ—¥å¿— HBase-2.0.0 çŽ°åœ¨ä½¿ç”¨ slf4j ä½œæ—¥å¿—ç»„ä»¶.ä¹‹å‰æ˜¯ log4j (1.2). å¯¹äºŽå¤§å¤šæ•°æƒ…å†µï¼Œè½¬æ¢åº”è¯¥æ˜¯æ— ç¼çš„ï¼›slf4jèƒ½å¤Ÿå¾ˆå¥½åœ°è§£é‡Š_log4j.properties_æ—¥å¿—é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·æ‚¨å°±ä¸ä¼šæ³¨æ„åˆ°æ—¥å¿—ç³»ç»Ÿçš„æŽ’æ”¾é‡æœ‰ä»»ä½•å·®å¼‚ã€‚ ä¹Ÿå°±æ˜¯è¯´, _log4j.properties_ éœ€è¦åˆ·æ–°ä¸‹. è¯¦è§ä¾‹å­: HBASE-20351åœ¨æ¯æ¬¡shellå‘½ä»¤è°ƒç”¨æ—¶ï¼Œä¸€ä¸ªè¿‡æ—¶çš„æ—¥å¿—é…ç½®æ–‡ä»¶éƒ½æ˜¾ç¤ºä¸ºnettyé…ç½®ï¼Œå¹¶åœ¨debugçº§åˆ«è½¬å‚¨ä¸ºå‰å¯¼ç ã€‚ zookeeperé…ç½®ä¸å†ä»Žzoo.cfgä¸­è¯»å– HBaseä¸å†é€‰æ‹©è¯»å–ä¸ŽZooKeeperç›¸å…³çš„é…ç½®è®¾ç½®çš„â€œzoo.cfgâ€æ–‡ä»¶ã€‚å¦‚æžœæ‚¨ä»¥å‰ä¾èµ–â€œhbase.config.read.zookeeper.configâ€é…ç½®æ¥å®žçŽ°æ­¤åŠŸèƒ½ï¼Œåˆ™åº”åœ¨å‘æ¯ä¸ªå±žæ€§åæ·»åŠ å‰ç¼€â€œhbase.zookeeper.property.â€çš„åŒæ—¶ï¼Œå°†ä»»ä½•éœ€è¦çš„è®¾ç½®è¿ç§»åˆ°hbase-site.xmlæ–‡ä»¶ã€‚ æƒé™æ›´æ”¹ ä»¥ä¸‹ä¸Žæƒé™ç›¸å…³çš„æ›´æ”¹è¦ä¹ˆæ›´æ”¹äº†è¯­ä¹‰ï¼Œè¦ä¹ˆæ›´æ”¹äº†é»˜è®¤å€¼ï¼š æŽˆäºˆç”¨æˆ·çš„æƒé™çŽ°åœ¨ä¸Žè¯¥ç”¨æˆ·çš„çŽ°æœ‰æƒé™åˆå¹¶ï¼Œè€Œä¸æ˜¯é‡å†™å®ƒä»¬ã€‚è¯¦è§: the release note on HBASE-17472 åŒºåŸŸæœåŠ¡å™¨ç»„å‘½ä»¤ï¼ˆåœ¨1.4.0ä¸­æ·»åŠ ï¼‰çŽ°åœ¨éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚ å¤§å¤šæ•°ç®¡ç†APIä¸é€‚ç”¨äºŽæ¥è‡ªHBase 2.0ä¹‹å‰çš„å®¢æˆ·æœºçš„HBase 2.0+ç¾¤é›†ã€‚ ä»ŽHBase 2.0ä¹‹å‰çš„å®¢æˆ·æœºä½¿ç”¨æ—¶ï¼Œè®¸å¤šç®¡ç†å‘½ä»¤éƒ½ä¸èµ·ä½œç”¨ã€‚è¿™åŒ…æ‹¬ä¸€ä¸ªhbase shellï¼Œè¯¥shellå…·æœ‰æ¥è‡ªhbase 2.0ä¹‹å‰ç‰ˆæœ¬çš„åº“jarã€‚åœ¨æ‚¨è¿˜å¯ä»¥æ›´æ–°åˆ°æ‰€éœ€çš„å®¢æˆ·ç«¯ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‚¨éœ€è¦è®¡åˆ’ç®¡ç†APIå’Œå‘½ä»¤çš„ä½¿ç”¨ä¸­æ–­ã€‚ å½“ä»ŽHBase 2.0ä¹‹å‰çš„å®¢æˆ·æœºæ‰§è¡Œæ—¶ï¼Œä»¥ä¸‹å®¢æˆ·æœºæ“ä½œä¸é€‚ç”¨äºŽHBase 2.0+ç¾¤é›†ï¼š list_procedures split merge_region list_quotas enable_table_replication disable_table_replication Snapshot related commands 1.0å·²å¼ƒç”¨çš„ç®¡ç†å‘˜å‘½ä»¤åˆ é™¤ã€‚ åœ¨é€‚ç”¨çš„æƒ…å†µä¸‹ï¼Œåˆ—å‡ºäº†æ›¿æ¢å‘½ä»¤ã€‚ â€˜hlogâ€™å‘½ä»¤å·²è¢«åˆ é™¤ã€‚ ä¸‹æ¸¸ç”¨æˆ·åº”è¯¥ä¾èµ–â€™walâ€™å‘½ä»¤ã€‚ åŒºåŸŸæœåŠ¡å™¨å†…å­˜æ¶ˆè€—æ›´æ”¹ã€‚ ä»ŽHBase 1.4ä¹‹å‰çš„ç‰ˆæœ¬å‡çº§çš„ç”¨æˆ·åº”é˜…è¯»æœ¬èŠ‚ä¸­çš„è¯´æ˜Ž Region Server memory consumption changes.. æ­¤å¤–ï¼ŒHBase 2.0æ”¹å˜äº†å¦‚ä½•è·Ÿè¸ªmemstoreå†…å­˜ä»¥è¿›è¡Œåˆ·æ–°å†³ç­–ã€‚ ä»¥å‰ï¼Œæ•°æ®å¤§å°å’Œå­˜å‚¨å¼€é”€éƒ½ç”¨äºŽè®¡ç®—å†²æ´—threasholdçš„åˆ©ç”¨çŽ‡ã€‚ çŽ°åœ¨ï¼Œåªä½¿ç”¨æ•°æ®å¤§å°æ¥åšå‡ºæ¯ä¸ªåŒºåŸŸçš„å†³ç­–ã€‚ åœ¨å…¨çƒèŒƒå›´å†…ï¼Œæ·»åŠ å­˜å‚¨å¼€é”€ç”¨äºŽåšå‡ºæœ‰å…³å¼ºåˆ¶åˆ·æ–°çš„å†³ç­–ã€‚ ç”¨äºŽæ‹†åˆ†å’Œåˆå¹¶çš„Web UIå¯¹è¡Œå‰ç¼€è¿›è¡Œæ“ä½œ ä»¥å‰ï¼ŒWeb UIåŒ…å«è¡¨çŠ¶æ€é¡µé¢ä¸Šçš„åŠŸèƒ½ï¼Œä»¥æ ¹æ®ç¼–ç çš„åŒºåŸŸåç§°è¿›è¡Œåˆå¹¶æˆ–æ‹†åˆ†ã€‚ åœ¨HBase 2.0ä¸­ï¼Œæ­¤åŠŸèƒ½é€šè¿‡é‡‡ç”¨è¡Œå‰ç¼€æ¥å·¥ä½œã€‚ ä»ŽHBase 1.4ä¹‹å‰å¯¹Replicationç”¨æˆ·è¿›è¡Œç‰¹æ®Šå‡çº§ ç”¨æˆ·åœ¨1.4.0ç‰ˆæœ¬ä¹‹å‰è¿è¡ŒHBaseç‰ˆæœ¬å¹¶ä½¿ç”¨å¤åˆ¶æ—¶ï¼Œè¯·åŠ¡å¿…é˜…è¯»æœ¬èŠ‚ä¸­çš„è¯´æ˜ŽReplication peerâ€™s TableCFs config. HBase shell å˜åŒ– HBase shellå‘½ä»¤ä¾èµ–äºŽæ†ç»‘çš„JRubyå®žä¾‹ã€‚æ†ç»‘çš„JRubyå·²ä»Ž1.6.8ç‰ˆæ›´æ–°åˆ°9.1.10.0ç‰ˆã€‚å®ƒè¡¨ç¤ºä»ŽRuby 1.8åˆ°Ruby 2.3.3çš„æ›´æ”¹ï¼Œå®ƒä¸ºç”¨æˆ·è„šæœ¬å¼•å…¥äº†ä¸å…¼å®¹çš„è¯­è¨€æ›´æ”¹ã€‚ HBase shellå‘½ä»¤çŽ°åœ¨å¿½ç•¥æ—©æœŸHBase 1.4ç‰ˆæœ¬ä¸­å­˜åœ¨çš„â€™â€”return-valuesâ€™æ ‡å¿—ã€‚ç›¸åï¼Œshellæ€»æ˜¯è¡¨çŽ°å¾—åƒä¼ é€’äº†é‚£ä¸ªæ ‡å¿—ã€‚å¦‚æžœæ‚¨å¸Œæœ›é¿å…åœ¨æŽ§åˆ¶å°ä¸­æ‰“å°è¡¨è¾¾å¼ç»“æžœï¼Œåˆ™åº”æ›´æ”¹IRBé…ç½®ï¼Œå¦‚_irbrc_ï¼‰éƒ¨åˆ†æ‰€è¿°ã€‚ HBase 2.0+ä¸­çš„åå¤„ç†å™¨APIå·²æ›´æ”¹ æ‰€æœ‰åå¤„ç†å™¨APIéƒ½ç»è¿‡é‡æž„ï¼Œä»¥æé«˜é’ˆå¯¹æœªæ¥HBaseç‰ˆæœ¬çš„äºŒè¿›åˆ¶APIå…¼å®¹æ€§çš„å¯æ”¯æŒæ€§ã€‚å¦‚æžœæ‚¨æˆ–æ‚¨æ‰€ä¾èµ–çš„åº”ç”¨ç¨‹åºå…·æœ‰è‡ªå®šä¹‰HBaseåå¤„ç†å™¨ï¼Œæ‚¨åº”é˜…è¯» the release notes for HBASE-18169 ï¼Œäº†è§£æ‚¨å°†éœ€è¦çš„æ›´æ”¹çš„è¯¦ç»†ä¿¡æ¯åœ¨å‡çº§åˆ°HBase 2.0+ä¹‹å‰åˆ¶ä½œã€‚ ä¾‹å¦‚ï¼Œå¦‚æžœä½ åœ¨HBase 1.2ä¸­æœ‰ä¸€ä¸ªBaseRegionObserverï¼Œé‚£ä¹ˆè‡³å°‘ä½ éœ€è¦æ›´æ–°å®ƒä»¥å®žçŽ°RegionObserverå’ŒRegionCoprocessorå¹¶æ·»åŠ æ–¹æ³• 123456... @Override public Optional&lt;RegionObserver&gt; getRegionObserver() &#123; return Optional.of(this); &#125;... HBase 2.0+æ— æ³•å†å†™å…¥HFile v2æ–‡ä»¶ã€‚ HBaseç®€åŒ–äº†æˆ‘ä»¬å†…éƒ¨çš„HFileå¤„ç†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å†ä¹Ÿæ— æ³•åœ¨ç‰ˆæœ¬3 \çš„é»˜è®¤ç‰ˆæœ¬ä¹‹å‰ç¼–å†™HFileç‰ˆæœ¬ã€‚å‡çº§ç”¨æˆ·åº”ç¡®ä¿åœ¨å‡çº§ä¹‹å‰hbase-site.xmlä¸­çš„hfile.format.versionæœªè®¾ç½®ä¸º2ã€‚å¦‚æžœä¸è¿™æ ·åšå°†å¯¼è‡´Region Serverå¤±è´¥ã€‚ HBaseä»ç„¶å¯ä»¥è¯»å–ä»¥æ—§ç‰ˆæœ¬2æ ¼å¼ç¼–å†™çš„HFileã€‚ HBase 2.0+æ— æ³•å†è¯»å–åŸºäºŽåºåˆ—æ–‡ä»¶çš„WALæ–‡ä»¶ã€‚ HBaseæ— æ³•å†è¯»å–ä»¥Apache Hadoopåºåˆ—æ–‡ä»¶æ ¼å¼ç¼–å†™çš„å·²å¼ƒç”¨çš„WALæ–‡ä»¶ã€‚åº”å°†hbase.regionserver.hlog.reader.implå’Œhbase.regionserver.hlog.reader.implé…ç½®æ¡ç›®è®¾ç½®ä¸ºä½¿ç”¨åŸºäºŽProtobufçš„WALè¯»å–å™¨/å†™å…¥å™¨ç±»ã€‚æ­¤å®žçŽ°æ˜¯HBase 0.96ä»¥æ¥çš„é»˜è®¤å®žçŽ°ï¼Œå› æ­¤ä¼ ç»ŸWALæ–‡ä»¶ä¸åº”æˆä¸ºå¤§å¤šæ•°ä¸‹æ¸¸ç”¨æˆ·å…³æ³¨çš„é—®é¢˜ã€‚ å¹²å‡€çš„ç¾¤é›†å…³é—­åº”ç¡®ä¿æ²¡æœ‰WALæ–‡ä»¶ã€‚å¦‚æžœæ‚¨ä¸ç¡®å®šç»™å®šçš„WALæ–‡ä»¶æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨hbase walå‘½ä»¤åœ¨HBaseé›†ç¾¤è„±æœºæ—¶è§£æžæ–‡ä»¶ã€‚åœ¨HBase 2.0+ä¸­ï¼Œæ­¤å‘½ä»¤å°†æ— æ³•è¯»å–åŸºäºŽWALçš„åºåˆ—æ–‡ä»¶ã€‚æœ‰å…³è¯¥å·¥å…·çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…WALPrettyPrinterï¼‰ã€‚ è¿‡æ»¤å™¨çš„è¡Œä¸ºæ›´æ”¹ è¿‡æ»¤å™¨ReturnCode NEXT_ROWå·²é‡æ–°å®šä¹‰ä¸ºè·³è¿‡å½“å‰ç³»åˆ—ä¸­çš„ä¸‹ä¸€è¡Œï¼Œè€Œä¸æ˜¯è·³åˆ°æ‰€æœ‰ç³»åˆ—ä¸­çš„ä¸‹ä¸€è¡Œã€‚å®ƒæ›´åˆç†ï¼Œå› ä¸ºReturnCodeæ˜¯å•†åº—çº§åˆ«çš„æ¦‚å¿µï¼Œè€Œä¸æ˜¯åŒºåŸŸçº§åˆ«ã€‚ ä¸‹æ¸¸HBase 2.0+ç”¨æˆ·åº”è¯¥ä½¿ç”¨ç€è‰²å®¢æˆ·ç«¯ å¼ºçƒˆå»ºè®®ä¸‹æ¸¸ç”¨æˆ·ä¾èµ–Mavenåæ ‡org.apache.hbaseï¼šhbase-shaded-clientæ¥è¿è¡Œå®ƒä»¬ã€‚æ­¤å·¥ä»¶åŒ…å«ä¸ŽHBaseé›†ç¾¤é€šä¿¡æ‰€éœ€çš„æ‰€æœ‰å®žçŽ°è¯¦ç»†ä¿¡æ¯ï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘æš´éœ²çš„ç¬¬ä¸‰æ–¹ä¾èµ–é¡¹çš„æ•°é‡ã€‚ è¯·æ³¨æ„ï¼Œæ­¤å·¥ä»¶å…¬å¼€org.apache.hadoopåŒ…ç©ºé—´ä¸­çš„æŸäº›ç±»ï¼ˆä¾‹å¦‚o.a.h.configuration.Configurationï¼‰ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä¿æŒä¸Žæˆ‘ä»¬çš„å…¬å…±APIçš„æºå…¼å®¹æ€§ã€‚åŒ…å«è¿™äº›ç±»ï¼Œä»¥ä¾¿å¯ä»¥å°†å®ƒä»¬æ›´æ”¹ä¸ºä½¿ç”¨ä¸ŽHBaseå®¢æˆ·ç«¯ä»£ç çš„å…¶ä½™éƒ¨åˆ†ç›¸åŒçš„é‡å®šä½ç¬¬ä¸‰æ–¹ä¾èµ–é¡¹ã€‚å¦‚æžœæ‚¨è¿˜éœ€è¦**åœ¨ä»£ç ä¸­ä½¿ç”¨Hadoopï¼Œåˆ™åº”ç¡®ä¿æ‰€æœ‰ä¸ŽHadoopç›¸å…³çš„jaréƒ½ä½äºŽç±»è·¯å¾„ä¸­çš„HBaseå®¢æˆ·ç«¯jarä¹‹å‰ã€‚ è¿è¡Œæ—¶ç±»è·¯å¾„çš„é‡å¤§æ›´æ”¹ HBaseçš„è®¸å¤šå†…éƒ¨ä¾èµ–é¡¹å·²ä»Žè¿è¡Œæ—¶ç±»è·¯å¾„ä¸­æ›´æ–°æˆ–åˆ é™¤ã€‚ ä¸éµå¾ªDownstream HBase 2.0+ users should use the shaded clientçš„æŒ‡å¯¼çš„ä¸‹æ¸¸å®¢æˆ·ç«¯ç”¨æˆ·å°†å¿…é¡»æ£€æŸ¥Mavenä¸ºå½±å“è€Œå¼•å…¥çš„ä¾èµ–å…³ç³»é›†ã€‚ LimitedPrivate Coprocessor APIçš„ä¸‹æ¸¸ç”¨æˆ·éœ€è¦æ£€æŸ¥è¿è¡Œæ—¶çŽ¯å¢ƒæ˜¯å¦æœ‰å½±å“ã€‚ æœ‰å…³æˆ‘ä»¬å¯¹åè°ƒå…¼å®¹è¿è¡Œæ—¶ç‰ˆæœ¬ä¸€ç›´å­˜åœ¨é—®é¢˜çš„ç¬¬ä¸‰æ–¹åº“çš„æ–°å¤„ç†çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å‚è€ƒæŒ‡å—éƒ¨åˆ†The hbase-thirdparty dependency and shading/relocationï¼‰ã€‚ å¯¹å®¢æˆ·ç«¯APIçš„æºå’ŒäºŒè¿›åˆ¶å…¼å®¹æ€§è¿›è¡Œå¤šæ¬¡é‡å¤§æ›´æ”¹ HBaseçš„Javaå®¢æˆ·ç«¯APIæœ‰è®¸å¤šæ›´æ”¹å¯ä»¥ç ´åæºå’ŒäºŒè¿›åˆ¶å…¼å®¹æ€§çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è¦å‡çº§åˆ°çš„ç‰ˆæœ¬çš„å…¼å®¹æ€§æ£€æŸ¥æŠ¥å‘Šã€‚ è·Ÿè¸ªå®žæ–½å˜åŒ– HBaseè·Ÿè¸ªåŠŸèƒ½çš„æ”¯æŒå®žçŽ°å·²ä»ŽApache HTrace 3æ›´æ–°ä¸ºHTrace 4ï¼Œå…¶ä¸­åŒ…æ‹¬å‡ ä¸ªé‡å¤§æ›´æ”¹ã€‚ è™½ç„¶HTrace 3å’Œ4å¯ä»¥åœ¨åŒä¸€è¿è¡Œæ—¶å…±å­˜ï¼Œä½†å®ƒä»¬ä¸ä¼šç›¸äº’é›†æˆï¼Œä»Žè€Œå¯¼è‡´ä¸ç›¸äº¤çš„è·Ÿè¸ªä¿¡æ¯ã€‚ æ­¤å‡çº§æœŸé—´HBaseçš„å†…éƒ¨æ›´æ”¹è¶³ä»¥è¿›è¡Œç¼–è¯‘ï¼Œä½†å°šæœªç¡®è®¤è·Ÿè¸ªåŠŸèƒ½ä¸­æ²¡æœ‰å›žå½’ã€‚ è¯·è€ƒè™‘æ­¤åŠŸèƒ½åœ¨ä¸ä¹…çš„å°†æ¥ä¼šè¿‡æœŸã€‚ å¦‚æžœæ‚¨ä»¥å‰ä¾èµ–ä¸ŽHBaseæ“ä½œé›†æˆçš„å®¢æˆ·ç«¯è·Ÿè¸ªï¼Œåˆ™å»ºè®®æ‚¨å°†ä½¿ç”¨æƒ…å†µå‡çº§åˆ°HTrace 4ã€‚ HFileä¸å†å‘å‰å…¼å®¹ ç”±2.0.0, 2.0.1, 2.1.0ç”Ÿæˆçš„HFileä¸Ž 1.4.6-, 1.3.2.1-, 1.2.6.1-å’Œå…¶ä»–éžæ´»åŠ¨ç‰ˆæœ¬ä¸å‘å‰å…¼å®¹ã€‚ ä¸ºä»€ä¹ˆHFileå¤±åŽ»å…¼å®¹æ€§æ˜¯æ–°ç‰ˆæœ¬(2.0.0, 2.0.1, 2.1.0)ä¸­çš„hbaseä½¿ç”¨protobufåºåˆ—åŒ–/ååºåˆ—åŒ–TimeRangeTrackerï¼ˆTRTï¼‰ï¼Œè€Œæ—§ç‰ˆæœ¬ä½¿ç”¨DataInput / DataOutputã€‚ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜,è¯¦è§: 2.xä¸­ HBASE-21012 , 1.xä¸­ HBASE-21013 . è¿˜æœ‰ HBASE-21008.æ€§èƒ½ åœ¨è¯»å–å’Œå†™å…¥è·¯å¾„å‘ç”Ÿé‡å¤§å˜åŒ–çš„æƒ…å†µä¸‹ï¼Œå‡çº§åˆ°hbase-2.0.0æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°æ€§èƒ½é…ç½®æ–‡ä»¶å‘ç”Ÿå˜åŒ–ã€‚ åœ¨å‘å¸ƒæ—¶ï¼Œå†™å…¥å¯èƒ½ä¼šæ›´æ…¢ï¼Œè¯»å–ç›¸åŒæˆ–æ›´å¥½ï¼Œå–å†³äºŽä¸Šä¸‹æ–‡ã€‚å‡†å¤‡å¥½èŠ±æ—¶é—´é‡æ–°è°ƒæ•´(è¯¦è§: Apache HBase Performance Tuning). æ€§èƒ½ä¹Ÿæ˜¯ä¸€ä¸ªæ­£åœ¨ç§¯æžå®¡æŸ¥çš„é¢†åŸŸï¼Œå› æ­¤æœŸå¾…åœ¨å³å°†å‘å¸ƒçš„ç‰ˆæœ¬ä¸­è¿›è¡Œæ”¹è¿› (è¯¦è§: HBASE-20188 TESTING Performance). é›†æˆæµ‹è¯•å’ŒKerberos é›†æˆæµ‹è¯•ï¼ˆIntegrationTests *ï¼‰è¿‡åŽ»ä¾èµ–äºŽKerberoså‡­è¯ç¼“å­˜æ¥å¯¹å®‰å…¨é›†ç¾¤è¿›è¡Œèº«ä»½éªŒè¯ã€‚ å½“å‡­è¯ç¼“å­˜ä¸­çš„ç¥¨è¯è¿‡æœŸæ—¶ï¼Œè¿™ä¼šå¯¼è‡´ç”±äºŽèº«ä»½éªŒè¯å¤±è´¥å¯¼è‡´æµ‹è¯•å¤±è´¥ã€‚ ä»Žhbase-2.0.0ï¼ˆå’Œhbase-1.3.0 +ï¼‰å¼€å§‹ï¼Œé›†æˆæµ‹è¯•å®¢æˆ·ç«¯å°†ä½¿ç”¨é…ç½®å±žæ€§hbase.client.keytab.fileå’Œhbase.client.kerberos.principalã€‚ å®ƒä»¬æ˜¯å¿…éœ€çš„ã€‚ å®¢æˆ·ç«¯å°†ä»Žé…ç½®çš„keytabæ–‡ä»¶æ‰§è¡Œç™»å½•ï¼Œå¹¶åœ¨åŽå°è‡ªåŠ¨åˆ·æ–°å‡­æ®ä»¥èŽ·å–è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ(è¯¦è§: HBASE-16231). 13.1.2. å°†åå¤„ç†å™¨å‡çº§åˆ° 2.0åå¤„ç†å™¨åœ¨2.0ä¸­å‘ç”Ÿäº†å¾ˆå¤§å˜åŒ–ï¼Œä»Žç±»å±‚æ¬¡ç»“æž„ä¸­çš„é¡¶çº§è®¾è®¡æ›´æ”¹åˆ°æ›´æ”¹/åˆ é™¤çš„æ–¹æ³•ï¼ŒæŽ¥å£ç­‰ã€‚ (è¯¦è§ jira: HBASE-18169 Coprocessor fix and cleanup before 2.0.0 release). è¿™ç§ç§å¹¿æ³›å˜åŒ–çš„åŽŸå› æ˜¯: ä¼ é€’æŽ¥å£è€Œä¸æ˜¯å®žçŽ°; e.g. TableDescriptor è€Œä¸æ˜¯ HTableDescriptor and Region è€Œä¸æ˜¯ HRegion (HBASE-18241 æ›´æ”¹client.Table å’Œ client.Admin å¹¶éžä½¿ç”¨ HTableDescriptor). è®¾è®¡é‡æž„è®©å®žçŽ°è€…éœ€è¦å¡«å†™æ›´å°‘çš„æ ·æ¿ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿›è¡Œæ›´å¤šçš„ç¼–è¯‘æ—¶æ£€æŸ¥ (HBASE-17732) ä»Žåå¤„ç†å™¨APIæ¸…é™¤åè®®ç¼“å†²åŒº (HBASE-18859, HBASE-16769, etc) å‡å°‘æˆ‘ä»¬å‘Coprocessorså…¬å¼€çš„å†…å®¹ï¼Œåˆ é™¤è¿‡äºŽç§å¯†è€Œæ— æ³•å…¬å¼€çš„å†…éƒ¨çš„é’©å­(ä¾‹å¦‚: HBASE-18453 CompactionRequestä¸åº”è¯¥æš´éœ²ç»™ç”¨æˆ·; HBASE-18298 RegionServerServices å¯¹CPå…¬å¼€çš„æŽ¥å£æ¸…ç†;) è¦åœ¨2.0ä¸­ä½¿ç”¨åå¤„ç†å™¨ï¼Œåº”è¯¥é’ˆå¯¹æ–° APIé‡å»ºå®ƒä»¬ï¼Œå¦åˆ™å®ƒä»¬å°†æ— æ³•åŠ è½½ï¼ŒHBaseè¿›ç¨‹å°†ä¼šæ­»äº¡ã€‚ å‡çº§åå¤„ç†å™¨çš„å»ºè®®æ›´æ”¹é¡ºåºï¼š ç›´æŽ¥å®žçŽ°è§‚å¯Ÿè€…æŽ¥å£ï¼Œè€Œä¸æ˜¯æ‰©å±•Base * Observerç±»ã€‚ æ›´æ”¹ Foo extends BaseXXXObserver åˆ° Foo implements XXXObserver. (HBASE-17312). é€‚åº”ä»Žç»§æ‰¿åˆ°ç»„åˆçš„è®¾è®¡å˜æ›´ (HBASE-17732) åƒ æ­¤ä¾‹. getTable()å·²ä»Žä¸­åˆ é™¤ï¼Œåå¤„ç†å™¨åº”è‡ªè¡Œç®¡ç†Tableå®žä¾‹ã€‚ è¿™é‡Œhbase-exampleæ¨¡å—ä¸­å¯ä»¥æ‰¾åˆ°ä½¿ç”¨æ–°APIç¼–å†™åå¤„ç†å™¨çš„ä¸€äº›ç¤ºä¾‹ æœ€åŽï¼Œå¦‚æžœapiè¢«æ›´æ”¹/åˆ é™¤ï¼Œä¼šä»¥æ— æ³•ä¿®å¤çš„æ–¹å¼æ‰“ç ´ä½ ï¼Œå¹¶ä¸”å¦‚æžœæœ‰å……åˆ†çš„ç†ç”±å°†å…¶æ·»åŠ å›žåŽ»ï¼Œè¯·å°†å…¶é€šçŸ¥æˆ‘ä»¬(dev@hbase.apache.org). 13.1.3. ä»Ž 1.x åˆ° 2.xçš„æ»šåŠ¨å‡çº§æ»šåŠ¨å‡çº§ç›®å‰æ˜¯ä¸€é¡¹å®žéªŒæ€§åŠŸèƒ½ã€‚ ä»–ä»¬çš„æµ‹è¯•æœ‰é™ã€‚ åœ¨æˆ‘ä»¬æœ‰é™çš„ç»åŽ†ä¸­ï¼Œæœ‰å¯èƒ½å‘çŽ°ä¸€äº›æžç«¯æƒ…å†µï¼Œæ‰€ä»¥å¦‚æžœä½ èµ°è¿™æ¡è·¯ï¼Œä½ åº”è¯¥å°å¿ƒã€‚ ä¸‹ä¸€èŠ‚Upgrade process from 1.x to 2.xä¸­æè¿°çš„åœæ­¢/å‡çº§/å¯åŠ¨æ˜¯æœ€å®‰å…¨çš„æ–¹å¼ ä»¥ä¸‹æ˜¯1.4é›†ç¾¤æ»šåŠ¨å‡çº§çš„æå‰è¦æ±‚ å‰æ å‡çº§åˆ°æœ€æ–°çš„1.4.xç‰ˆæœ¬ã€‚ Pre 1.4ç‰ˆæœ¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä½†æœªç»è¿‡æµ‹è¯•ï¼Œå› æ­¤è¯·åœ¨å‡çº§åˆ°2.xä¹‹å‰å‡çº§åˆ°1.4.3+ï¼Œé™¤éžæ‚¨æ˜¯ä¸“å®¶å¹¶ä¸”ç†Ÿæ‚‰åŒºåŸŸåˆ†é…å’Œå´©æºƒå¤„ç†ã€‚ æœ‰å…³å¦‚ä½•å‡çº§åˆ°1.4.xçš„ä¿¡æ¯ï¼Œè¯·å‚è§Upgrading from pre-1.4 to 1.4+ éƒ¨åˆ†ã€‚ ç¡®ä¿å¯ç”¨äº†æ— zkèµ‹å€¼ï¼Œå³å°†hbase.assignment.usezkè®¾ç½®ä¸ºfalseã€‚ è¿™æ˜¯æœ€é‡è¦çš„äº‹æƒ…ã€‚ å®ƒå…è®¸1.xä¸»æœåŠ¡å™¨ä¸º2.xåŒºåŸŸæœåŠ¡å™¨åˆ†é…/å–æ¶ˆåˆ†é…åŒºåŸŸã€‚ æœ‰å…³å¦‚ä½•ä»ŽåŸºäºŽzkçš„åˆ†é…è¿ç§»åˆ°zk lessèµ‹å€¼ï¼Œè¯·å‚é˜… HBASE-11059çš„å‘è¡Œè¯´æ˜Žéƒ¨åˆ†ã€‚ æˆ‘ä»¬æµ‹è¯•äº†ä»Ž1.4.3åˆ°2.1.0çš„æ»šåŠ¨å‡çº§ï¼Œä½†å¦‚æžœè¦å‡çº§åˆ°2.0.xï¼Œå®ƒä¹Ÿåº”è¯¥å¯ä»¥å·¥ä½œã€‚ è¯´æ˜Ž å¸è½½ regionæœåŠ¡å‡çº§åˆ° 2.1.0. ä»Ž HBASE-17931 çœ‹å‡ºï¼Œå…¶ä»–ç³»ç»Ÿè¡¨çš„å…ƒåŒºåŸŸå’ŒåŒºåŸŸå°†ç«‹å³ç§»åŠ¨åˆ°è¯¥åŒºåŸŸæœåŠ¡å™¨ã€‚ å¦‚æžœæ²¡æœ‰ï¼Œè¯·æ‰‹åŠ¨å°†å®ƒä»¬ç§»åŠ¨åˆ°æ–°çš„åŒºåŸŸæœåŠ¡å™¨ã€‚ è¿™éžå¸¸é‡è¦ï¼Œå› ä¸º å…ƒåŒºåŸŸçš„æ¨¡å¼æ˜¯ç¡¬ç¼–ç çš„ï¼Œå¦‚æžœå…ƒåœ¨æ—§çš„åŒºåŸŸæœåŠ¡å™¨ä¸Šï¼Œåˆ™æ–°çš„åŒºåŸŸæœåŠ¡å™¨ä¸èƒ½è®¿é—®å®ƒï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¸€äº›æ—ï¼Œä¾‹å¦‚ï¼Œè¡¨çŠ¶æ€ã€‚ è¾ƒä½Žç‰ˆæœ¬çš„å®¢æˆ·ç«¯å¯ä»¥ä¸Žå…·æœ‰æ›´é«˜ç‰ˆæœ¬çš„æœåŠ¡å™¨é€šä¿¡ï¼Œä½†åä¹‹äº¦ç„¶ã€‚ å¦‚æžœå…ƒåŒºåŸŸä½äºŽæ—§åŒºåŸŸæœåŠ¡å™¨ä¸Šï¼Œåˆ™æ–°åŒºåŸŸæœåŠ¡å™¨å°†ä½¿ç”¨å…·æœ‰è¾ƒé«˜ç‰ˆæœ¬çš„å®¢æˆ·ç«¯ä¸Žå…·æœ‰è¾ƒä½Žç‰ˆæœ¬çš„æœåŠ¡å™¨é€šä¿¡ï¼Œè¿™å¯èƒ½å¼•å…¥å¥‡æ€ªçš„é—®é¢˜ã€‚ æ»šåŠ¨å‡çº§æ‰€æœ‰å…¶ä»–åŒºåŸŸæœåŠ¡å™¨ã€‚ å‡çº§ masters. åœ¨æ»šåŠ¨å‡çº§æœŸé—´ï¼ŒåŒºåŸŸæœåŠ¡å™¨å´©æºƒæ˜¯å¯ä»¥çš„ã€‚ 1.xä¸»æœåŠ¡å™¨å¯ä»¥ä¸º1.xå’Œ2.xåŒºåŸŸæœåŠ¡å™¨åˆ†é…åŒºåŸŸï¼ŒHBASE-19166ä¿®å¤äº†é—®é¢˜ï¼Œä»¥ä¾¿ 1.xåŒºåŸŸæœåŠ¡å™¨è¿˜å¯ä»¥è¯»å–2.xåŒºåŸŸæœåŠ¡å™¨å†™å…¥çš„WALå¹¶å°†å…¶æ‹†åˆ†ã€‚ åœ¨æ»šåŠ¨å‡çº§ä¹‹å‰ï¼Œè¯·ä»”ç»†é˜…è¯»Changes of Note!éƒ¨åˆ†ã€‚ ç¡®ä¿ä¸ä½¿ç”¨2.0ä¸­åˆ é™¤çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å‰ç¼€æ ‘ç¼–ç ï¼Œæ—§çš„hfileæ ¼å¼ç­‰ã€‚å®ƒä»¬éƒ½å¯èƒ½æ— æ³•å‡çº§å¹¶ä½¿ç¾¤é›†å¤„äºŽä¸­é—´çŠ¶æ€å¹¶ä¸”éš¾ä»¥æ¢å¤ã€‚ å¦‚æžœæ‚¨æˆåŠŸè¿è¡Œæ­¤å¤„æ–¹ï¼Œè¯·é€šçŸ¥å¼€å‘è€…åˆ—è¡¨ï¼Œå¹¶é™„ä¸Šæ‚¨çš„ç»éªŒè¯´æ˜Žå’Œ/æˆ–æ›´æ–°ä¸Šè¿°å†…å®¹ä»¥åŠæ‚¨å¯èƒ½é‡‡å–çš„ä»»ä½•åå·®ï¼Œä»¥ä¾¿å…¶ä»–äººèµ°è¿™æ¡è·¯çº¿å¯ä»¥ä»Žæ‚¨çš„åŠªåŠ›ä¸­å—ç›Šã€‚ 13.1.4. ä»Ž1.xå‡çº§åˆ°2.xçš„å‡çº§è¿‡ç¨‹è¦å‡çº§çŽ°æœ‰çš„HBase 1.xç¾¤é›†ï¼Œæ‚¨åº”è¯¥ï¼š çŽ°æœ‰1.xç¾¤é›†å…³é—­ æ›´æ–°åå¤„ç†å™¨ é¦–å…ˆå‡çº§ä¸»è§’è‰² å‡çº§RegionServers ï¼ˆæœ€ç»ˆï¼‰å‡çº§å®¢æˆ·ç«¯ 13.2. Upgrading from pre-1.4 to 1.4+13.2.1. Region Server memory consumption changes.ä»ŽHBase 1.4ä¹‹å‰çš„ç‰ˆæœ¬å‡çº§çš„ç”¨æˆ·åº”è¯¥çŸ¥é“ï¼Œå¯¹äºŽæœ€å¤§ä¸º32Gçš„å †å¤§å°ï¼ˆä½¿ç”¨CompressedOopsï¼‰ï¼Œmemstoreå¯¹è±¡ï¼ˆKeyValueï¼Œå¯¹è±¡å’Œæ•°ç»„å¤´å¤§å°ç­‰ï¼‰çš„å †ä½¿ç”¨ä¼°è®¡å·²ç»æ›´å‡†ç¡®ï¼Œä»Žè€Œå¯¼è‡´ ä»–ä»¬åœ¨å®žè·µä¸­ä¸‹é™äº†10-50ï¼…ã€‚ ç”±äºŽâ€œæ›´èƒ–â€çš„å†²æ´—ï¼Œè¿™ä¹Ÿå¯¼è‡´æ›´å°‘çš„å†²æ´—å’ŒåŽ‹ç¼©ã€‚å› äººè€Œå¼‚ã€‚ å› æ­¤ï¼Œåˆ·æ–°ä¹‹å‰memstoreçš„å®žé™…å †ä½¿ç”¨é‡å¯èƒ½ä¼šå¢žåŠ æœ€å¤š100ï¼…ã€‚ å¦‚æžœå·²æ ¹æ®è§‚å¯Ÿåˆ°çš„ä½¿ç”¨æƒ…å†µè°ƒæ•´äº†åŒºåŸŸæœåŠ¡å™¨çš„å·²é…ç½®å†…å­˜é™åˆ¶ï¼Œåˆ™æ­¤æ›´æ”¹å¯èƒ½ä¼šå¯¼è‡´æ›´ç³Ÿç³•çš„GCè¡Œä¸ºæˆ–ç”šè‡³OutOfMemoryé”™è¯¯ã€‚ å°†çŽ¯å¢ƒå±žæ€§ï¼ˆä¸æ˜¯hbase-site.xmlï¼‰â€œhbase.memorylayout.use.unsafeâ€è®¾ç½®ä¸ºfalseä»¥ç¦ç”¨ã€‚ 13.2.2. Replication peerâ€™s TableCFs è®¾ç½®åœ¨1.4ä¹‹å‰ï¼Œè¡¨åä¸èƒ½åŒ…å«å¤åˆ¶å¯¹ç­‰ä½“çš„TableCFsé…ç½®çš„åç§°ç©ºé—´ã€‚ é€šè¿‡å°†TableCFæ·»åŠ åˆ°å­˜å‚¨åœ¨Zookeeperä¸Šçš„ReplicationPeerConfigæ¥ä¿®å¤å®ƒã€‚ å› æ­¤ï¼Œå½“å‡çº§åˆ°1.4æ—¶ï¼Œæ‚¨å¿…é¡»é¦–å…ˆæ›´æ–°Zookeeperä¸Šçš„åŽŸå§‹ReplicationPeerConfigæ•°æ®ã€‚ å½“æ‚¨çš„ç¾¤é›†å…·æœ‰å…·æœ‰TableCFsé…ç½®çš„å¤åˆ¶å¯¹ç­‰æ–¹æ—¶ï¼Œæœ‰å››ä¸ªæ­¥éª¤å¯ä»¥å‡çº§ã€‚ ç¦ç”¨ replication peer. å¦‚æžœmasteræœ‰æƒå†™å…¥å¤åˆ¶å¯¹ç­‰znodeï¼Œåˆ™ç›´æŽ¥æ»šåŠ¨æ›´æ–°masterã€‚ å¦‚æžœæ²¡æœ‰ï¼Œè¯·ä½¿ç”¨TableCFsUpdaterå·¥å…·æ›´æ–°å¤åˆ¶å¯¹ç­‰æ–¹çš„é…ç½®ã€‚ 1$ bin/hbase org.apache.hadoop.hbase.replication.master.TableCFsUpdater update æ»šåŠ¨å‡çº§regionservers. å¼€å¯replication peer. æ³¨æ„: æ— æ³•ä½¿ç”¨æ—§å®¢æˆ·ç«¯ï¼ˆ1.4ä¹‹å‰ï¼‰æ›´æ”¹å¤åˆ¶å¯¹ç­‰æ–¹çš„é…ç½®ã€‚ ç”±äºŽå®¢æˆ·ç«¯å°†ç›´æŽ¥å‘Zookeeperå†™å…¥é…ç½®ï¼Œå› æ­¤æ—§å®¢æˆ·ç«¯å°†é”™è¿‡TableCFsé…ç½®ã€‚ å¹¶ä¸”æ—§å®¢æˆ·ç«¯å°†TableCFsé…ç½®å†™å…¥æ—§çš„tablecfs znodeï¼Œå®ƒä¸é€‚ç”¨äºŽæ–°ç‰ˆæœ¬çš„regionserverã€‚ 13.2.3. åŽŸå§‹æ•°æ®æ‰«æå¿½ç•¥TTLçŽ°åœ¨ï¼Œæ‰§è¡ŒåŽŸå§‹æ‰«æå°†è¿”å›žæ ¹æ®TTLè®¾ç½®å·²è¿‡æœŸçš„ç»“æžœã€‚ 13.3. ä»Ž1.3ä¹‹å‰å‡çº§åˆ°1.3+å¦‚æžœåœ¨Kerberosä¸‹è¿è¡Œé›†æˆæµ‹è¯•ï¼Œè¯·å‚é˜…Integration Tests and Kerberos. 13.4. å‡çº§åˆ° 1.xæœ‰å…³å‡çº§è¿‡ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸“é—¨é’ˆå¯¹è¦å‡çº§åˆ°çš„HBaseç‰ˆæœ¬å‘å¸ƒçš„æ–‡æ¡£ã€‚]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Apache-HBase-â„¢-ä¸­æ–‡æŒ‡å—-æœ€æ–°ç‰ˆHBase-3-0-0-ch2-HBaseé…ç½®è¯¦è§£]]></title>
    <url>%2F2019%2F03%2F04%2FApache-HBase-%E2%84%A2-%E4%B8%AD%E6%96%87%E6%8C%87%E5%8D%97-%E6%9C%80%E6%96%B0%E7%89%88HBase-3-0-0-ch2-HBase%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[Apache HBaseé…ç½® è¯‘è€…: xixici åœ¨ä¸Šä¸€ç« å¿«é€Ÿå¼€å§‹çš„å†…å®¹ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•å¯åŠ¨ç‹¬ç«‹å¼ã€ä¼ªåˆ†å¸ƒå¼ä»¥åŠå®Œå…¨åˆ†å¸ƒå¼HBaseï¼Œåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»æ›´å¤šå…³äºŽApache HBaseçš„é…ç½®ï¼Œä»¥è¿›ä¸€æ­¥äº†è§£Apache HBaseã€‚è¯·ä»”ç»†é˜…è¯»æœ¬ç« ï¼Œç‰¹åˆ«æ˜¯åŸºæœ¬é…ç½®æ¡ä»¶éƒ¨åˆ†ï¼Œè¯¥éƒ¨åˆ†èƒ½å¤Ÿç¡®ä¿æ‚¨çš„HBaseæµ‹è¯•å’Œéƒ¨ç½²é¡ºåˆ©è¿›è¡Œï¼Œå¹¶é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚çŽ°åœ¨ï¼Œä¸€èµ·è¿›å…¥å­¦ä¹ å§ï¼ 3. é…ç½®æ–‡ä»¶Apache HBaseä½¿ç”¨ä¸ŽApache Hadoopç›¸åŒçš„é…ç½®ç³»ç»Ÿã€‚æ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½ä½äºŽ_conf/_ ç›®å½•ä¸­ï¼Œéœ€è¦ä¿æŒç¾¤é›†ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„åŒæ­¥ã€‚ HBaseé…ç½®æ–‡ä»¶è¯´æ˜Ž_backup-masters_ é»˜è®¤æƒ…å†µä¸‹ä¸å­˜åœ¨ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åˆ—å‡ºäº†ä¸»æœåŠ¡å™¨åº”åœ¨å…¶ä¸Šå¯åŠ¨å¤‡ä»½ä¸»è¿›ç¨‹çš„ä¸»æœºï¼Œæ¯è¡Œä¸€å°ä¸»æœºã€‚ _hadoop-metrics2-hbase.properties_ ç”¨äºŽè¿žæŽ¥HBase Hadoopçš„Metrics2æ¡†æž¶ã€‚æœ‰å…³Metrics2çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Hadoop Wiki ã€‚é»˜è®¤æƒ…å†µä¸‹åªåŒ…å«æ³¨é‡Šå‡ºçš„ç¤ºä¾‹ã€‚ _hbase-env.cmd_ and _hbase-env.sh_ ç”¨äºŽWindowså’ŒLinux/UnixçŽ¯å¢ƒçš„è„šæœ¬ï¼Œä»¥è®¾ç½®HBaseçš„å·¥ä½œçŽ¯å¢ƒï¼ŒåŒ…æ‹¬Javaã€Javaé€‰é¡¹å’Œå…¶ä»–çŽ¯å¢ƒå˜é‡çš„ä½ç½®ã€‚è¯¥æ–‡ä»¶åŒ…å«è®¸å¤šæ³¨é‡Šç¤ºä¾‹æ¥æä¾›æŒ‡å¯¼ã€‚ _hbase-policy.xml_ RPCæœåŠ¡å™¨ä½¿ç”¨é»˜è®¤ç­–ç•¥é…ç½®æ–‡ä»¶å¯¹å®¢æˆ·ç«¯è¯·æ±‚è¿›è¡ŒæŽˆæƒå†³ç­–ã€‚ä»…åœ¨å¯ç”¨HBaseå®‰å…¨æ¨¡å¼ä¸‹ä½¿ç”¨ã€‚ _hbase-site.xml_ ä¸»è¦çš„HBaseé…ç½®æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶æŒ‡å®šè¦†ç›–HBaseçš„é»˜è®¤é…ç½®çš„é…ç½®é€‰é¡¹ã€‚æ‚¨å¯ä»¥åœ¨_docs/hbase-default.xml_ä¸­æŸ¥çœ‹ï¼ˆä½†ä¸è¦ç¼–è¾‘ï¼‰é»˜è®¤é…ç½®æ–‡ä»¶ã€‚æ‚¨è¿˜å¯ä»¥åœ¨HBase Web UIçš„HBaseé…ç½®é€‰é¡¹å¡ä¸­æŸ¥çœ‹ç¾¤é›†çš„æ•´ä¸ªæœ‰æ•ˆé…ç½®ï¼ˆé»˜è®¤å’Œè¦†ç›–ï¼‰ã€‚ _log4j.properties_ é€šè¿‡log4jè¿›è¡ŒHBaseæ—¥å¿—è®°å½•çš„é…ç½®æ–‡ä»¶ã€‚ _regionservers_ åŒ…å«åº”è¯¥åœ¨HBaseé›†ç¾¤ä¸­è¿è¡ŒRegionServerçš„ä¸»æœºåˆ—è¡¨çš„çº¯æ–‡æœ¬æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«å•ä¸ªæ¡ç›®localhosttã€‚å®ƒåº”è¯¥åŒ…å«ä¸»æœºåæˆ–IPåœ°å€åˆ—è¡¨ï¼Œæ¯è¡Œä¸€ä¸ªï¼Œå¦‚æžœé›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å°†åœ¨å…¶localhostæŽ¥å£ä¸Šè¿è¡ŒRegionServerçš„è¯ï¼Œåˆ™åªåº”åŒ…å«localhost æ£€æŸ¥XMLæœ‰æ•ˆæ€§ åœ¨ç¼–è¾‘XMLæ—¶ï¼Œæœ€å¥½ä½¿ç”¨æ”¯æŒXMLçš„ç¼–è¾‘å™¨ï¼Œä»¥ç¡®ä¿æ‚¨çš„è¯­æ³•æ­£ç¡®ä¸”XMLæ ¼å¼è‰¯å¥½ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨è¯¥xmllint ç¨‹åºæ£€æŸ¥æ‚¨çš„XMLæ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œxmllint é‡æ–°æµåŠ¨å¹¶å°†XMLæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚è¦æ£€æŸ¥æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ä¸”åªåœ¨å­˜åœ¨é”™è¯¯æ—¶æ‰æ‰“å°è¾“å‡ºï¼Œè¯·ä½¿ç”¨å‘½ä»¤xmllint -noout filename.xmlã€‚ åœ¨é›†ç¾¤ä¹‹é—´ä¿æŒåŒæ­¥é…ç½® å½“åœ¨åˆ†å¸ƒå¼æ¨¡å¼ä¸‹è¿è¡Œæ—¶, åœ¨å¯¹HBaseé…ç½®è¿›è¡Œç¼–è¾‘åŽï¼Œè¯·ç¡®ä¿å°†conf/ç›®å½•çš„å†…å®¹å¤åˆ¶åˆ°ç¾¤é›†çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚HBaseä¸ä¼šä¸ºä½ è¿™ä¹ˆåšçš„ã€‚è¯·ä½¿ç”¨ rsync, scpæˆ–å…¶ä»–å®‰å…¨æœºåˆ¶å°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„èŠ‚ç‚¹ã€‚å¯¹äºŽå¤§å¤šæ•°é…ç½®, æœåŠ¡å™¨éœ€è¦é‡æ–°å¯åŠ¨æ‰èƒ½æˆåŠŸæ›´æ”¹ã€‚åŠ¨æ€é…ç½®æ˜¯è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å¤–ï¼Œåœ¨ä¹‹åŽçš„å†…å®¹å°†å¯¹æ­¤è¿›è¡Œè¯´æ˜Žã€‚ 4. HBaseåŸºç¡€æ¡ä»¶åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä½¿ç”¨HBaseæ—¶æ‰€éœ€è¦çš„æœåŠ¡å’Œä¸€äº›å¿…éœ€çš„ç³»ç»Ÿé…ç½®ã€‚ Java åœ¨ä¸‹è¡¨ä¸­ä½ å¯ä»¥çœ‹åˆ°HBaseç‰ˆæœ¬ä¸Žå…¶å¯¹åº”æ”¯æŒçš„JDKç‰ˆæœ¬ï¼š ç¤¾åŒºå¾ˆä¹æ„å¸®åŠ©ä½ è¯Šæ–­å’Œè§£å†³å¯èƒ½é‡åˆ°çš„é—®é¢˜.ä½ éœ€è¦è¿›åŽ»ç¤¾åŒºæŸ¥æ‰¾ç±»ä¼¼é—®é¢˜,å¯èƒ½éœ€è¦ä½ æ›´æ”¹javaçŽ¯å¢ƒ.æŸäº›æƒ…å†µä¸‹,ä¾‹å¦‚ç¼–è¯‘/æµ‹è¯•å•å…ƒæœ‰æ•ˆæ€§,å…·ä½“æ“ä½œé—®é¢˜)ä¹Ÿè¦æ³¨æ„. å»ºè®®ä½¿ç”¨é•¿æœŸæ”¯æŒJDKs HBaseå»ºè®®ç”¨æˆ·ä¾èµ–é•¿æœŸæ”¯æŒ (LTS)ç‰ˆæœ¬çš„JDK,æ— è®ºæ˜¯OpenJDKé¡¹ç›®æˆ–å…¶ä»–.æˆªè‡³2018å¹´3æœˆï¼Œè¿™æ„å‘³ç€Java 8æ˜¯å”¯ä¸€é€‚ç”¨çš„ç‰ˆæœ¬ï¼Œè€Œä¸‹ä¸€ä¸ªå¯èƒ½çš„æµ‹è¯•ç‰ˆæœ¬å°†æ˜¯2018 Q3çš„Java 11ã€‚ HBase Version JDK 7 JDK 8 JDK 9 (Non-LTS) JDK 10 (Non-LTS) JDK 11 2.0+ HBASE-20264 HBASE-20264 HBASE-21110 1.2+ HBASE-20264 HBASE-20264 HBASE-21110 HBaseä¸æ”¯æŒ Java 6çš„æž„å»ºæˆ–ç¼–è¯‘ ä½ å¿…é¡»åœ¨é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè®¾ç½®JAVA_HOME ã€‚_hbase-env.sh_æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æœºåˆ¶ã€‚ æ“ä½œç³»ç»Ÿ ssh ï¼ˆå¿…é¡»çš„ï¼‰HBaseå¹¿æ³›ä½¿ç”¨å®‰å…¨Shellï¼ˆsshï¼‰å‘½ä»¤å’Œå®žç”¨ç¨‹åºåœ¨é›†ç¾¤èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚é›†ç¾¤ä¸­çš„æ¯å°æœåŠ¡å™¨éƒ½å¿…é¡»è¿è¡Œsshï¼Œä»¥ä¾¿å¯ä»¥ç®¡ç†Hadoopå’ŒHBaseåŽå°è¿›ç¨‹ã€‚æ‚¨å¿…é¡»èƒ½å¤Ÿä½¿ç”¨å…±äº«å¯†é’¥è€Œä¸æ˜¯å¯†ç ï¼Œé€šè¿‡SSHï¼ˆåŒ…æ‹¬æœ¬åœ°èŠ‚ç‚¹ï¼‰ä»Žä¸»æœåŠ¡å™¨å’Œä»»ä½•å¤‡ä»½ä¸»æœåŠ¡å™¨è¿žæŽ¥åˆ°æ‰€æœ‰èŠ‚ç‚¹ã€‚æ‚¨å¯ä»¥åœ¨Linuxæˆ–Unixç³»ç»Ÿä¸­çš„â€Procedure: Configure Passwordless SSH Accessâ€œï¼ˆé…ç½®æ— å¯†ç SSHè®¿é—®ï¼‰ä¸­çœ‹åˆ°è¿™ç§è®¾ç½®çš„åŸºæœ¬æ–¹æ³•ã€‚å¦‚æžœç¾¤é›†èŠ‚ç‚¹ä½¿ç”¨OS Xï¼Œè¯·å‚é˜…SSH: Setting up Remote Desktop and Enabling Self-Login DNS HBaseä½¿ç”¨æœ¬åœ°ä¸»æœºåæ¥è‡ªè¡ŒæŠ¥å‘Šå…¶IPåœ°å€ NTP ç¾¤é›†èŠ‚ç‚¹ä¸Šçš„æ—¶é’Ÿåº”è¯¥åŒæ­¥ã€‚å°‘é‡çš„å˜åŒ–æ˜¯å¯ä»¥æŽ¥å—çš„ï¼Œä½†æ˜¯å¤§é‡çš„ä¸åŒä¼šå¯¼è‡´ä¸ç¨³å®šå’Œæ„å¤–çš„è¡Œä¸ºã€‚å¦‚æžœåœ¨ç¾¤é›†ä¸­çœ‹åˆ°æ— æ³•è§£é‡Šçš„é—®é¢˜ï¼Œåˆ™æ—¶é—´åŒæ­¥æ˜¯é¦–å…ˆè¦æ£€æŸ¥çš„äº‹é¡¹ä¹‹ä¸€ã€‚å»ºè®®æ‚¨åœ¨ç¾¤é›†ä¸Šè¿è¡Œç½‘ç»œæ—¶é—´åè®®ï¼ˆNTPï¼‰æœåŠ¡æˆ–å…¶ä»–æ—¶é—´åŒæ­¥æœºåˆ¶ï¼Œå¹¶ä¸”æ‰€æœ‰èŠ‚ç‚¹éƒ½æŸ¥æ‰¾ç›¸åŒçš„æœåŠ¡ä»¥è¿›è¡Œæ—¶é—´åŒæ­¥ã€‚è¯·å‚é˜…_The Linux Documentation Project (TLDP)_ ä¸­çš„Basic NTP Configurationä»¥è®¾ç½®NTPã€‚ æ–‡ä»¶å’Œè¿›ç¨‹æ•°é™åˆ¶ Apache HBaseæ˜¯ä¸€ä¸ªæ•°æ®åº“ã€‚å®ƒéœ€è¦èƒ½å¤Ÿä¸€æ¬¡æ‰“å¼€å¤§é‡çš„æ–‡ä»¶ã€‚è®¸å¤šLinuxå‘è¡Œç‰ˆé™åˆ¶äº†å…è®¸å•ä¸ªç”¨æˆ·æ‰“å¼€çš„æ–‡ä»¶æ•°é‡1024ï¼ˆæˆ–è€…256ï¼Œåœ¨æ—§ç‰ˆæœ¬çš„OS Xä¸Šï¼‰ã€‚å½“ä»¥è¿è¡Œ HBase çš„ç”¨æˆ·èº«ä»½ç™»å½•æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œulimit -n å‘½ä»¤æ¥æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„é™åˆ¶ã€‚é™åˆ¶å¤ªä½Žä¼šäº§ç”Ÿä¸€äº› æ•…éšœ æ‚¨ä¹Ÿå¯èƒ½ä¼šæ³¨æ„åˆ°ä»¥ä¸‹é”™è¯¯ï¼š 122010-04-06 03:04:37,542 INFO org.apache.hadoop.hdfs.DFSClient: Exception increateBlockOutputStream java.io.EOFException2010-04-06 03:04:37,542 INFO org.apache.hadoop.hdfs.DFSClient: Abandoning block blk_-6935524980745310745_1391901 å»ºè®®å°†ulimitæé«˜åˆ°è‡³å°‘10,000ï¼Œä½†æ›´å¯èƒ½æ˜¯10,240ï¼Œå› ä¸ºè¯¥å€¼é€šå¸¸ä»¥1024çš„å€æ•°è¡¨ç¤ºã€‚æ¯ä¸ªColumnFamilyè‡³å°‘æœ‰ä¸€ä¸ªStoreFileï¼Œå¦‚æžœè¯¥åŒºåŸŸå¤„äºŽåŠ è½½çŠ¶æ€ï¼Œåˆ™å¯èƒ½æœ‰å¤šäºŽå…­ä¸ªçš„StoreFileã€‚æ‰€éœ€çš„æ‰“å¼€æ–‡ä»¶çš„æ•°é‡å–å†³äºŽColumnFamiliesçš„æ•°é‡å’ŒåŒºåŸŸçš„æ•°é‡ã€‚ä»¥ä¸‹æ˜¯è®¡ç®—RegionServerä¸Šæ‰“å¼€çš„æ–‡ä»¶çš„æ½œåœ¨æ•°é‡çš„ç²—ç•¥å…¬å¼ã€‚ è®¡ç®—æ‰“å¼€æ–‡ä»¶çš„æ½œåœ¨æ•°é‡ï¼š 1(StoreFiles per ColumnFamily) x (regions per RegionServer) å‡è®¾ä¸€ä¸ªæ¨¡å¼çš„æ¯ä¸ªåŒºåŸŸæœ‰3ä¸ªColumnFamiliesï¼Œæ¯ä¸ªColumnFamilyå¹³å‡æœ‰3ä¸ªStoreFilesï¼Œæ¯ä¸ªRegionServeræœ‰100ä¸ªåŒºåŸŸï¼Œåˆ™JVMå°†æ‰“å¼€3 * 3 * 100 = 900æ–‡ä»¶æè¿°ç¬¦ï¼Œä¸åŒ…æ‹¬æ‰“å¼€çš„JARæ–‡ä»¶ã€é…ç½®æ–‡ä»¶ç­‰ç­‰ã€‚æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä¸éœ€è¦å¾ˆå¤šèµ„æºï¼Œè€Œä¸”å…è®¸ç”¨æˆ·æ‰“å¼€å¤ªå¤šæ–‡ä»¶çš„é£Žé™©å¾ˆå°ã€‚ å¦ä¸€ä¸ªç›¸å…³è®¾ç½®æ˜¯å…è®¸ç”¨æˆ·åŒæ—¶è¿è¡Œçš„è¿›ç¨‹æ•°é‡ã€‚åœ¨Linuxå’ŒUnixä¸­ï¼Œä½¿ç”¨è¯¥ulimit -u å‘½ä»¤è®¾ç½®è¿›ç¨‹çš„æ•°é‡ã€‚è¿™ä¸åº”ä¸Žnprocå‘½ä»¤æ··æ·†ï¼Œè¯¥å‘½ä»¤æŽ§åˆ¶ç»™å®šç”¨æˆ·å¯ç”¨çš„CPUæ•°é‡ã€‚åœ¨è´Ÿè½½ä¸‹ï¼Œulimit -uå¤ªä½Žä¼šå¯¼è‡´OutOfMemoryErrorå¼‚å¸¸ã€‚ ä¸ºè¿è¡ŒHBaseè¿›ç¨‹çš„ç”¨æˆ·é…ç½®æ–‡ä»¶æè¿°ç¬¦å’Œè¿›ç¨‹çš„æœ€å¤§æ•°é‡æ˜¯æ“ä½œç³»ç»Ÿé…ç½®ï¼Œè€Œä¸æ˜¯HBaseé…ç½®ã€‚ç¡®ä¿ä¸ºå®žé™…è¿è¡ŒHBaseçš„ç”¨æˆ·æ›´æ”¹è®¾ç½®ä¹Ÿå¾ˆé‡è¦ã€‚è¦æŸ¥çœ‹å“ªä¸ªç”¨æˆ·å¯åŠ¨äº†HBaseï¼Œä»¥åŠè¯¥ç”¨æˆ·çš„ulimité…ç½®ï¼Œè¯·æŸ¥çœ‹è¯¥å®žä¾‹çš„HBaseæ—¥å¿—çš„ç¬¬ä¸€è¡Œã€‚ ç¤ºä¾‹ 2. ulimit åœ¨Ubuntuä¸Šçš„è®¾ç½® è¦åœ¨Ubuntuä¸Šé…ç½®_limits.conf_è®¾ç½®ï¼Œè¯·ç¼–è¾‘ï¼š_/etc/security/limits.conf_ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”±å››åˆ—ç»„æˆçš„ç©ºæ ¼åˆ†éš”çš„æ–‡ä»¶ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€è¡Œå°†ç”¨æˆ·åä¸ºhadoopçš„æ“ä½œç³»ç»Ÿç”¨æˆ·çš„æ‰“å¼€æ–‡ä»¶æ•°ï¼ˆnofileï¼‰çš„è½¯é™åˆ¶å’Œç¡¬é™åˆ¶è®¾ç½®ä¸º32768ã€‚ç¬¬äºŒè¡Œå°†åŒä¸€ç”¨æˆ·çš„è¿›ç¨‹æ•°è®¾ç½®ä¸º32000ã€‚ 12hadoop - nofile 32768hadoop - nproc 32000 è¿™äº›è®¾ç½®ä»…é€‚ç”¨äºŽå¯æ’å…¥èº«ä»½éªŒè¯æ¨¡å—ï¼ˆPAMï¼‰çŽ¯å¢ƒæŒ‡ç¤ºä½¿ç”¨å®ƒä»¬çš„æƒ…å†µã€‚è¦é…ç½®PAMä»¥ä½¿ç”¨è¿™äº›é™åˆ¶ï¼Œè¯·ç¡®ä¿_/etc/pam.d/common-session_æ–‡ä»¶åŒ…å«ä»¥ä¸‹è¡Œï¼š 1session required pam_limits.so Linux Shell æ‰€æœ‰HBaseé™„å¸¦çš„shellè„šæœ¬éƒ½ä¾èµ–äºŽGNU Bash shell. Windows ä¸å»ºè®®åœ¨Windowsè®¡ç®—æœºä¸Šè¿è¡Œç”Ÿäº§ç³»ç»Ÿã€‚ 4.1. Hadoopä¸‹è¡¨æ€»ç»“äº†æ¯ä¸ªHBaseç‰ˆæœ¬æ”¯æŒçš„Hadoopç‰ˆæœ¬ã€‚ä¸‹è¡¨æ€»ç»“äº†æ¯ä¸ªç‰ˆæœ¬çš„HBaseæ”¯æŒçš„Hadoopç‰ˆæœ¬ã€‚æœªå‡ºçŽ°åœ¨æ­¤è¡¨ä¸­çš„æ—§ç‰ˆæœ¬è¢«è§†ä¸ºä¸å—æ”¯æŒï¼Œå¯èƒ½ç¼ºå°‘å¿…è¦çš„åŠŸèƒ½ï¼Œè€Œæ–°ç‰ˆæœ¬æœªç»æµ‹è¯•ï¼Œä½†å¯èƒ½é€‚ç”¨ã€‚ åŸºäºŽHBaseçš„ç‰ˆæœ¬ï¼Œæ‚¨åº”è¯¥é€‰æ‹©æœ€åˆé€‚çš„Hadoopç‰ˆæœ¬ã€‚å‚è€ƒæ›´å¤šå…³äºŽHadoopçŽ¯å¢ƒé…ç½®çš„å†…å®¹ï¼ ç‰ˆæœ¬æ— åŒºåˆ«. è¯·æŸ¥çœ‹ the Hadoop wiki . å»ºè®®ä½¿ç”¨ Hadoop 2.x Hadoop 2.x é€Ÿåº¦æ›´å¿«ï¼ŒåŒ…æ‹¬çŸ­è·¯è¯»å–åŠŸèƒ½( Leveraging local data)ï¼Œè¿™å°†æœ‰åŠ©äºŽæé«˜æ‚¨çš„ HBase éšæœºè¯»å–é…ç½®æ–‡ä»¶ï¼›Hadoop 2.x è¿˜åŒ…æ‹¬é‡è¦çš„ bug ä¿®å¤ï¼Œå¯ä»¥æ”¹å–„æ‚¨çš„æ•´ä½“ HBase ä½“éªŒï¼›HBase ä¸æ”¯æŒä½¿ç”¨æ—©æœŸç‰ˆæœ¬çš„ Hadoop è¿è¡Œï¼›æœ‰å…³ç‰¹å®šäºŽä¸åŒ HBase ç‰ˆæœ¬çš„è¦æ±‚ï¼Œè¯·å‚è§ä¸‹è¡¨ Hadoop 3.x ä»å¤„äºŽæ—©æœŸè®¿é—®ç‰ˆæœ¬ä¸­ï¼Œå°šæœªè¢« HBase ç¤¾åŒºå¯¹ç”Ÿäº§ç”¨ä¾‹è¿›è¡Œå……åˆ†æµ‹è¯•ã€‚ ä½¿ç”¨ä»¥ä¸‹çš„æ³¨è§£æ¥è§£é‡Šä¸‹é¢çš„è¿™ä¸ªè¡¨æ ¼ï¼š Hadoopç‰ˆæœ¬æ”¯æŒ T = æ”¯æŒ F = ä¸æ”¯æŒ N = æœªæµ‹è¯• HBase-1.2.x, HBase-1.3.x HBase-1.4.x HBase-2.0.x HBase-2.1.x Hadoop-2.4.x T F F F Hadoop-2.5.x T F F F Hadoop-2.6.0 F F F F Hadoop-2.6.1+ T F T F Hadoop-2.7.0 F F F F Hadoop-2.7.1+ T T T T Hadoop-2.8.[0-1] F F F F Hadoop-2.8.2 N N N N Hadoop-2.8.3+ N N T T Hadoop-2.9.0 F F F F Hadoop-2.9.1+ N N N N Hadoop-3.0.[0-2] F F F F Hadoop-3.0.3+ F F T T Hadoop-3.1.0 F F F F Hadoop-3.1.1+ F F T T Hadoop Pre-2.6.1 å’Œ JDK 1.8 Kerbero åœ¨ Kerberos çŽ¯å¢ƒä¸­ä½¿ç”¨ pre-2.6.1 Hadoop ç‰ˆæœ¬å’Œ JDK 1.8 æ—¶ï¼ŒHBase æœåŠ¡å™¨å¯èƒ½å›  Kerberos keytab relogin é”™è¯¯è€Œå¤±è´¥å¹¶ä¸­æ­¢ã€‚JDK 1.7 (1.7. 0_80) çš„åŽæœŸç‰ˆæœ¬ä¹Ÿæœ‰é—®é¢˜HADOOP-10786ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹è€ƒè™‘å‡çº§åˆ°Hadoop 2.6.1+ã€‚ Hadoop 2.6. å¦‚æžœæ‚¨è®¡åˆ’åœ¨ HDFS åŠ å¯†åŒºåŸŸçš„é¡¶éƒ¨è¿è¡Œ HBaseï¼Œåˆ™åŸºäºŽ 2.6.x è¡Œçš„ Hadoop å‘è¡Œç‰ˆå¿…é¡»å…·æœ‰ HADOOP-11710 åº”ç”¨ã€‚å¦‚æžœä¸è¿™æ ·åšï¼Œå°†å¯¼è‡´ç¾¤é›†æ•…éšœå’Œæ•°æ®ä¸¢å¤±ã€‚æ­¤ä¿®è¡¥ç¨‹åºå­˜åœ¨äºŽApache Hadoop 2.6.1+ç‰ˆæœ¬ä¸­ã€‚ Hadoop 2.y.0 Hadoop 2.7.0å¼€å§‹ä¸¤ä¸ªç‰ˆæœ¬æœªç»æµ‹è¯•æˆ–ä¸å—æ”¯æŒï¼Œå› ä¸ºHadoop PMCæ˜Žç¡®å°†è¯¥ç‰ˆæœ¬æ ‡è®°ä¸ºä¸ç¨³å®š.å› æ­¤ï¼ŒHBaseæ˜Žç¡®å»ºè®®ç”¨æˆ·é¿å…åœ¨è¿™äº›ç‰ˆæœ¬ä¹‹ä¸Šè¿è¡Œã€‚å¦å¤–ï¼ŒHadoop PMCä¹Ÿç»™å‡ºäº†åŒæ ·çš„è­¦å‘Šã€‚æœ‰å…³å‚è€ƒï¼Œè¯·å‚è§ Apache Hadoop 2.7.0, Apache Hadoop 2.8.0, Apache Hadoop 2.8.1, and Apache Hadoop 2.9.0. Hadoop 3.0.x åŒ…å«åº”ç”¨ç¨‹åºæ—¶é—´æœåŠ¡ç‰¹æ€§çš„Hadoopé›†ç¾¤å¯èƒ½ä¼šå¯¼è‡´å‡ºçŽ°æ„å¤–çš„HBaseç±»ç‰ˆæœ¬.ç”¨æˆ·è¦ç¡®ä¿YARN-7190 å­˜åœ¨äºŽyarnæœåŠ¡ä¸­ (ç›®å‰å·²ä¿®å¤ 2.9.1+ , 3.1.0+). Hadoop 3.1.0 Hadoop PMCå£°ç§°3.1.0 ä¸ç¨³å®šä¸”ä¸èƒ½ç”¨äºŽç”Ÿäº§.å› æ­¤,HBaseå»ºè®®ç”¨æˆ·é¿å…ä½¿ç”¨æœ¬ç‰ˆæœ¬.è¯¦æƒ…: release announcement for Hadoop 3.1.0. æ›´æ¢Hadoop å› ä¸ºhbaseä¾èµ–äºŽhadoopï¼Œå¹¶ä¸”hadoop jarå­˜åœ¨ _lib_ç›®å½•ä¸‹ã€‚è¿™äº›çš„jarä»…åœ¨ç‹¬ç«‹æ¨¡å¼ä¸‹ä½¿ç”¨ã€‚åœ¨åˆ†å¸ƒå¼æ¨¡å¼ä¸‹ï¼Œé›†ç¾¤ä¸Šçš„Hadoopç‰ˆæœ¬ä¸ŽHBaseä¸‹çš„ç‰ˆæœ¬åŒ¹é…æ˜¯_è‡³å…³é‡è¦_çš„ã€‚å°†hbase libç›®å½•ä¸­çš„hadoop jaræ›¿æ¢ä¸ºé›†ç¾¤ä¸Šè¿è¡Œçš„ç‰ˆæœ¬ä¸­çš„hadoop jarï¼Œä»¥é¿å…ç‰ˆæœ¬ä¸åŒ¹é…é—®é¢˜ã€‚ç¡®ä¿åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ›¿æ¢hbaseä¸‹çš„jarã€‚Hadoopç‰ˆæœ¬ä¸åŒ¹é…é—®é¢˜æœ‰å¤šç§è¡¨çŽ°å½¢å¼ã€‚å¦‚æžœHBaseå‡ºçŽ°æŒ‚èµ·ï¼Œè¯·æ£€æŸ¥æ˜¯å¦ä¸åŒ¹é…ã€‚ 4.1.1. dfs.datanode.max.transfer.threadsHDFS DataNodeåœ¨ä»»ä½•æ—¶å€™éƒ½ä¼šæœ‰ä¸€ä¸ªæ–‡ä»¶æ•°ä¸Šé™ã€‚åœ¨è¿›è¡Œä»»ä½•åŠ è½½ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»é…ç½®äº†Hadoopçš„_conf/hdfs-site.xml_ï¼Œå¹¶å°†è¯¥dfs.datanode.max.transfer.threadså€¼è®¾ç½®ä¸ºè‡³å°‘å¦‚ä¸‹çš„å€¼ï¼š 1234&lt;property&gt; &lt;name&gt;dfs.datanode.max.transfer.threads&lt;/name&gt; &lt;value&gt;4096&lt;/value&gt;&lt;/property&gt; è¿›è¡Œä¸Šè¿°é…ç½®åŽï¼ŒåŠ¡å¿…é‡æ–°å¯åŠ¨HDFSã€‚ æ²¡æœ‰è¿™ä¸ªé…ç½®å°±ä¼šé€ æˆå¥‡æ€ªçš„æ•…éšœã€‚å…¶ä¸­ä¸€ç§è¡¨çŽ°æ˜¯ç¼ºå¤±åŒºå—ã€‚ä¾‹å¦‚ï¼š 12310/12/08 20:10:31 INFO hdfs.DFSClient: Could not obtain block blk_XXXXXXXXXXXXXXXXXXXXXX_YYYYYYYY from any node: java.io.IOException: No live nodes contain current block. Will get new block locations from namenode and retry... æŸ¥çœ‹ casestudies.max.transfer.threads å¹¶æ³¨æ„ dfs.datanode.max.xcievers (e.g. Hadoop HDFS: Deceived by Xciever). 4.2. ZooKeeper è¦æ±‚ZooKeeper 3.4.x å¿…éœ€. 5. HBaseè¿è¡Œæ¨¡å¼ï¼šç‹¬ç«‹å¼å’Œåˆ†å¸ƒå¼HBaseæœ‰ä¸¤ç§è¿è¡Œæ¨¡å¼ï¼šç‹¬ç«‹å¼å’Œåˆ†å¸ƒå¼ã€‚HBaseä»¥ç‹¬ç«‹æ¨¡å¼è¿è¡Œã€‚æ— è®ºæ‚¨çš„æ¨¡å¼å¦‚ä½•ï¼Œæ‚¨éƒ½éœ€è¦é€šè¿‡ç¼–è¾‘HBase _conf_ç›®å½•ä¸­çš„æ–‡ä»¶æ¥é…ç½®HBase ã€‚è‡³å°‘ï¼Œæ‚¨å¿…é¡»ç¼–è¾‘conf/hbase-env.shæ¥å‘Šè¯‰HBaseè¦ä½¿ç”¨å“ªä¸ªjavaã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä½ è®¾ç½®äº†HBaseçŽ¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚JVMçš„heapsizeå’Œå…¶ä»–é€‰é¡¹ï¼Œæ—¥å¿—æ–‡ä»¶çš„é¦–é€‰ä½ç½®ç­‰ç­‰ã€‚è®¾ç½®JAVA_HOMEä»¥æŒ‡å‘ä½ çš„javaå®‰è£…çš„æ ¹ç›®å½•ã€‚ 5.1. Standalone HBaseé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯ç‹¬ç«‹å¼çš„HBaseã€‚åœ¨å¿«é€Ÿå¼€å§‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»è¿‡ç‹¬ç«‹æ¨¡å¼ã€‚åœ¨ç‹¬ç«‹æ¨¡å¼ä¸‹ï¼ŒHBaseä¸ä½¿ç”¨HDFSï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯åœ¨åŒä¸€ä¸ªJVMä¸­è¿è¡Œæ‰€æœ‰HBaseå®ˆæŠ¤è¿›ç¨‹å’Œæœ¬åœ°ZooKeeperã€‚ZooKeeperç»‘å®šåˆ°ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„ç«¯å£ï¼Œé€šè¿‡è¯¥ç«¯å£ï¼Œå®¢æˆ·ç«¯å¯ä»¥å’ŒHBaseè¿›è¡Œé€šä¿¡ã€‚ 5.1.1. Standalone HBase over HDFSæœ‰æ—¶åœ¨ç‹¬ç«‹çš„hbaseä¸Šæœ‰ä¸€ä¸ªæœ‰ç”¨çš„å˜ä½“ï¼Œå®ƒçš„æ‰€æœ‰çš„å®ˆæŠ¤è¿›ç¨‹éƒ½åœ¨ä¸€ä¸ªJVMä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯åšæŒåˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ˜¯åšæŒåˆ°ä¸€ä¸ªHDFSå®žä¾‹ã€‚ å½“æ‚¨æ‰“ç®—ä½¿ç”¨ç®€å•çš„éƒ¨ç½²é…ç½®æ–‡ä»¶æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨æ­¤é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½å¾ˆè½»æ¾ï¼Œä½†æ˜¯æ•°æ®å¿…é¡»åœ¨èŠ‚ç‚¹çš„å‡ºå…¥ä¹‹é—´æŒç»­å­˜åœ¨ã€‚å‘ HDFS å†™å…¥æ•°æ®çš„åœ°æ–¹å¯ä»¥ç¡®ä¿åŽè€…ã€‚ è¦é…ç½®æ­¤ç‹¬ç«‹å˜ä½“ï¼Œè¯·ç¼–_hbase-site.xml_ï¼Œè®¾ç½® _hbase.rootdir_ä»¥æŒ‡å‘HDFSå®žä¾‹ä¸­çš„æŸä¸ªç›®å½•ï¼Œç„¶åŽå°†_hbase.cluster.distributed_ è®¾ç½®ä¸º_false_ã€‚ä¾‹å¦‚ï¼š12345678910&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;value&gt;hdfs://namenode.example.org:8020/hbase&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.cluster.distributed&lt;/name&gt; &lt;value&gt;false&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; 5.2. åˆ†å¸ƒå¼åˆ†å¸ƒå¼æ¨¡å¼å¯ä»¥ç»†åˆ†ä¸º_åˆ†å¸ƒå¼_ã€_ä¼ªåˆ†å¸ƒå¼_ï¼ˆæ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹éƒ½åœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼‰ã€_å®Œå…¨åˆ†å¸ƒå¼_ï¼ˆå®ˆæŠ¤è¿›ç¨‹åˆ†å¸ƒåœ¨é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¸Šï¼‰ã€‚å…¶ä¸­ï¼Œä¼ªåˆ†å¸ƒå¼æ¨¡å¼ä¸Žå®Œå…¨åˆ†å¸ƒå¼çš„å‘½åæ¥è‡ªäºŽHadoopã€‚ ä¼ªåˆ†å¸ƒå¼æ¨¡å¼å¯ä»¥é’ˆå¯¹æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè¿è¡Œï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹_Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰_çš„å®žä¾‹è¿è¡Œã€‚å®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼åªèƒ½åœ¨HDFSä¸Šè¿è¡Œã€‚æœ‰å…³å¦‚ä½•è®¾ç½®HDFSï¼Œè¯·å‚é˜… http://www.alexjf.net/blog/distributed-systems/hadoop-yarn-installation-definitive-guide. 5.2.1. ä¼ªåˆ†å¸ƒå¼ ä¼ªåˆ†å¸ƒå¼å¿«é€Ÿå¼€å§‹ å¿«é€Ÿå¼€å§‹ ç« èŠ‚åŒ…å«ç›¸å…³ä¿¡æ¯. ä¼ªåˆ†å¸ƒå¼æ¨¡å¼çš„HBaseå°±æ˜¯åœ¨å•ä¸ªä¸»æœºä¸Šè¿è¡Œçš„å®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ã€‚ä½¿ç”¨æ­¤HBaseé…ç½®ä»…è¿›è¡Œæµ‹è¯•å’ŒåŽŸåž‹è®¾è®¡ã€‚è¯·å‹¿å°†æ­¤é…ç½®ç”¨äºŽç”Ÿäº§æˆ–æ€§èƒ½è¯„ä¼°ã€‚ 5.3. å®Œå…¨åˆ†å¸ƒå¼é»˜è®¤æƒ…å†µä¸‹ï¼ŒHBaseä»¥ç‹¬ç«‹æ¨¡å¼è¿è¡Œï¼Œç‹¬ç«‹æ¨¡å¼å’Œä¼ªåˆ†å¸ƒæ¨¡å¼ç”¨äºŽå°è§„æ¨¡æµ‹è¯•ã€‚å¯¹äºŽç”Ÿäº§çŽ¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨åˆ†å¸ƒå¼æ¨¡å¼ã€‚åœ¨åˆ†å¸ƒå¼æ¨¡å¼ä¸‹ï¼ŒHBaseå®ˆæŠ¤è¿›ç¨‹çš„å¤šä¸ªå®žä¾‹åœ¨é›†ç¾¤ä¸­çš„å¤šä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œã€‚ å°±åƒåœ¨ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ä¸­ä¸€æ ·ï¼Œå®Œå…¨åˆ†å¸ƒå¼çš„é…ç½®è¦æ±‚æ‚¨å°†hbase.cluster.distributed å±žæ€§è®¾ç½®ä¸º trueã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œhbase.rootdirè¢«é…ç½®ä¸ºæŒ‡å‘é«˜å¯ç”¨æ€§çš„HDFSã€‚ æ­¤å¤–ï¼Œé›†ç¾¤è¿˜é…ç½®äº†ä»¥å¤šä¸ªç¾¤é›†èŠ‚ç‚¹æˆä¸ºRegionServerã€ZooKeeper QuorumPeerså’Œå¤‡ä»½HMasteræœåŠ¡å™¨ã€‚è¯¦è§: quickstart-fully-distributed. åˆ†å¸ƒå¼RegionServers é€šå¸¸ï¼Œä½ çš„ç¾¤é›†å°†åŒ…å«å¤šä¸ªè¿è¡Œåœ¨ä¸åŒæœåŠ¡å™¨ä¸Šçš„RegionServerï¼Œä»¥åŠä¸»è¦å’Œå¤‡ä»½Masterå’ŒZooKeeperå®ˆæŠ¤ç¨‹åºã€‚ä¸»æœåŠ¡å™¨ä¸Šçš„c_conf/regionservers_ä¸­åŒ…å«ä¸€ä¸ªä¸»æœºåˆ—è¡¨ï¼Œå…¶RegionServersä¸Žè¯¥é›†ç¾¤ç›¸å…³ã€‚æ¯ä¸ªä¸»æœºéƒ½åœ¨ä¸€ä¸ªå•ç‹¬çš„è¡Œä¸Šã€‚å½“ä¸»æœåŠ¡å™¨å¯åŠ¨æˆ–åœæ­¢æ—¶ï¼Œæ­¤æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰ä¸»æœºå°†å¯åŠ¨å’Œåœæ­¢å…¶RegionServerè¿›ç¨‹ã€‚ ZooKeeper and HBase æœ‰å…³HBaseçš„ZooKeeperè®¾ç½®è¯´æ˜Žï¼Œè¯·å‚è§ ZooKeeperéƒ¨åˆ†ã€‚ ç¤ºä¾‹ 3. åˆ†å¸ƒå¼HBaseé›†ç¾¤ç¤ºä¾‹ æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼HBaseé›†ç¾¤çš„ç®€å•çš„_conf/hbase-site.xml_ ã€‚ç”¨äºŽå®žé™…å·¥ä½œçš„ç¾¤é›†å°†åŒ…å«æ›´å¤šè‡ªå®šä¹‰é…ç½®å‚æ•°ã€‚å¤§å¤šæ•°HBaseé…ç½®æŒ‡ä»¤éƒ½å…·æœ‰é»˜è®¤å€¼ï¼Œé™¤éžåœ¨_conf/hbase-site.xml_ ä¸­è¦†ç›–è¯¥å€¼ï¼Œå¦åˆ™å°†ä½¿ç”¨è¿™äº›é»˜è®¤å€¼ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œé…ç½®æ–‡ä»¶â€ 1234567891011121314&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;value&gt;hdfs://namenode.example.org:8020/hbase&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.cluster.distributed&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt; &lt;value&gt;node-a.example.com,node-b.example.com,node-c.example.com&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; è¿™æ˜¯_conf/regionservers_ æ–‡ä»¶çš„ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å«åº”åœ¨é›†ç¾¤ä¸­è¿è¡ŒRegionServerçš„èŠ‚ç‚¹çš„åˆ—è¡¨ã€‚è¿™äº›èŠ‚ç‚¹éœ€è¦å®‰è£…HBaseï¼Œä»–ä»¬éœ€è¦ä½¿ç”¨ä¸Žä¸»æœåŠ¡å™¨ç›¸åŒçš„_conf/_ ç›®å½•å†…å®¹ï¼š 123node-a.example.comnode-b.example.comnode-c.example.com è¿™æ˜¯_conf/backup-masters_æ–‡ä»¶çš„ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å«åº”è¿è¡Œå¤‡ä»½ä¸»å®žä¾‹çš„æ¯ä¸ªèŠ‚ç‚¹çš„åˆ—è¡¨ã€‚é™¤éžä¸»ä¸»ç«™å˜ä¸ºä¸å¯ç”¨ï¼Œå¦åˆ™å¤‡ä»½ä¸»ç«™å®žä¾‹å°†å¤„äºŽç©ºé—²çŠ¶æ€ã€‚ 12node-b.example.comnode-c.example.com åˆ†å¸ƒå¼HBaseå¿«é€Ÿå…¥é—¨ è¯·å‚é˜…quickstart-fully-distributedï¼Œäº†è§£åŒ…å«å¤šä¸ªZooKeeperã€å¤‡ä»½HMasterå’ŒRegionServerå®žä¾‹çš„ç®€å•ä¸‰èŠ‚ç‚¹ç¾¤é›†é…ç½®ã€‚ è¿‡ç¨‹: HDFSå®¢æˆ·ç«¯é…ç½® å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœæ‚¨åœ¨Hadoopé›†ç¾¤ä¸Šè¿›è¡Œäº†HDFSå®¢æˆ·ç«¯é…ç½®æ›´æ”¹ï¼ˆä¾‹å¦‚ï¼ŒHDFSå®¢æˆ·ç«¯çš„é…ç½®æŒ‡ä»¤ï¼‰ï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨ç«¯é…ç½®ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€æ¥å¯ç”¨HBaseä»¥æŸ¥çœ‹å’Œä½¿ç”¨è¿™äº›é…ç½®æ›´æ”¹ï¼š åœ¨_hbase-env.sh_ä¸­æ·»åŠ ä¸€ä¸ªæŒ‡å‘ä½ HADOOP_CONF_DIRçš„HBASE_CLASSPATHçŽ¯å¢ƒå˜é‡ åœ¨_${HBASE_HOME}/conf_ä¸‹æ·»åŠ ä¸€ä¸ª_hdfs-site.xml_ï¼ˆæˆ–_hadoop-site.xml_ï¼‰æˆ–æ›´å¥½çš„ç¬¦å·é“¾æŽ¥ åªæœ‰ä¸€å°éƒ¨åˆ†HDFSå®¢æˆ·ç«¯é…ç½®ï¼Œè¯·å°†å®ƒä»¬æ·»åŠ åˆ°_hbase-site.xml_ è¿™ç§HDFSå®¢æˆ·ç«¯é…ç½®çš„ä¸€ä¸ªä¾‹å­æ˜¯dfs.replicationã€‚ä¾‹å¦‚ï¼Œå¦‚æžœå¸Œæœ›ä»¥5çš„å¤åˆ¶å› å­è¿è¡Œï¼Œåˆ™HBaseå°†åˆ›å»ºç¼ºçœå€¼ä¸º3çš„æ–‡ä»¶ï¼Œé™¤éžæ‚¨æ‰§è¡Œä¸Šè¿°æ“ä½œä»¥ä½¿é…ç½®å¯ç”¨äºŽHBaseã€‚ 6. å¼€å§‹è¿è¡Œä¿è¯HDFSç¬¬ä¸€æ¬¡è¿è¡Œï¼Œä½ éœ€è¦é€šè¿‡åœ¨HADOOP_HOMEç›®å½•ä¸­è¿è¡Œ_bin/start-hdfs.sh_æ¥å¯åŠ¨å’Œåœæ­¢Hadoop HDFSå®ˆæŠ¤è¿›ç¨‹ã€‚ä½ ç¡®ä¿å®ƒæ­£ç¡®å¯åŠ¨çš„æ–¹æ³•æ˜¯é€šè¿‡åœ¨ Hadoop æ–‡ä»¶ç³»ç»Ÿä¸­æµ‹è¯•æ–‡ä»¶çš„putå’Œgetã€‚HBaseé€šå¸¸ä¸ä½¿ç”¨MapReduceæˆ–YARNå®ˆæŠ¤è¿›ç¨‹ï¼Œå› æ­¤å®ƒä»¬ä¸éœ€è¦å¯åŠ¨ã€‚ å¦‚æžœæ‚¨æ­£åœ¨ç®¡ç†æ‚¨è‡ªå·±çš„ZooKeeperï¼Œè¯·å¯åŠ¨å®ƒå¹¶ç¡®è®¤å®ƒæ­£åœ¨è¿è¡Œï¼Œå¦åˆ™HBaseå°†å¯åŠ¨ZooKeeperä½œä¸ºå…¶å¯åŠ¨è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ ä½ å¯ä»¥ä»ŽHBASE_HOMEç›®å½•ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨HBaseï¼š 1bin/start-hbase.sh æ‚¨çŽ°åœ¨åº”è¯¥æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„HBaseå®žä¾‹ã€‚HBaseæ—¥å¿—å¯ä»¥åœ¨_log_å­ç›®å½•ä¸­æ‰¾åˆ°ã€‚æ£€æŸ¥å‡ºæ¥ï¼Œç‰¹åˆ«æ˜¯å¦‚æžœHBaseå¯åŠ¨å›°éš¾ã€‚ HBaseä¹Ÿæä¾›äº†ä¸€ä¸ªUIåˆ—å‡ºäº†é‡è¦çš„å±žæ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¢«éƒ¨ç½²åœ¨16010ç«¯å£çš„ä¸»æŽ§ä¸»æœºä¸Šï¼ˆé»˜è®¤æƒ…å†µä¸‹HBase RegionServersä¾¦å¬ç«¯å£16020ï¼Œå¹¶åœ¨ç«¯å£16030å»ºç«‹ä¸€ä¸ªä¿¡æ¯HTTPæœåŠ¡å™¨ï¼‰ã€‚å¦‚æžœä¸»æœåŠ¡å™¨ï¼ˆMaster ï¼‰åœ¨é»˜è®¤ç«¯å£ä¸ŠæŒ‡å®šmaster.example.org ä¸»æœºä¸Šè¿è¡Œï¼Œè¯·å°†æµè§ˆå™¨æŒ‡å‘http://master.example.org:16010ä»¥æŸ¥çœ‹Webç•Œé¢ã€‚ ä¸€æ—¦HBaseå¯åŠ¨ï¼Œè¯·å‚é˜…ä¸‹é¢çš„shelléƒ¨åˆ†ï¼Œäº†è§£åˆ›å»ºè¡¨ï¼Œæ·»åŠ æ•°æ®ï¼Œæ‰«ææ’å…¥å†…å®¹ä»¥åŠæœ€ç»ˆç¦ç”¨å’Œåˆ é™¤è¡¨çš„ä¸€äº›æ“ä½œå‘½ä»¤ã€‚ é€€å‡ºHBase shellåŽåœæ­¢HBaseè¿›å…¥ï¼š 12$ ./bin/stop-hbase.shstopping hbase............... å…³æœºå¯èƒ½éœ€è¦ç¨ç­‰ä¸€äº›æ—¶é—´æ‰èƒ½å®Œæˆã€‚å¦‚æžœæ‚¨çš„é›†ç¾¤ç”±å¤šå°è®¡ç®—æœºç»„æˆï¼Œåˆ™å¯èƒ½éœ€è¦æ›´é•¿çš„æ—¶é—´ã€‚å¦‚æžœæ‚¨æ­£åœ¨è¿è¡Œåˆ†å¸ƒå¼æ“ä½œï¼Œé‚£ä¹ˆåœ¨åœæ­¢Hadoopå®ˆæŠ¤è¿›ç¨‹ä¹‹å‰ï¼Œä¸€å®šè¦ç­‰åˆ°HBaseå®Œå…¨å…³é—­ã€‚ 7. é»˜è®¤é…ç½®7.1. _hbase-site.xml_ å’Œ _hbase-default.xml_åœ¨Hadoopä¸­å°†ç‰¹å®šäºŽç«™ç‚¹çš„HDFSé…ç½®æ·»åŠ åˆ°_hdfs-site.xml_æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯¹äºŽHBaseï¼Œç‰¹å®šäºŽç«™ç‚¹çš„é…ç½®æ–‡ä»¶ä¸º_conf/hbase-site.xml_ã€‚æœ‰å…³å¯é…ç½®å±žæ€§çš„åˆ—è¡¨ï¼Œè¯·å‚è§ä¸‹é¢çš„HBaseé»˜è®¤é…ç½®æˆ–æŸ¥çœ‹_src/main/resources_çš„HBaseæºä»£ç ä¸­çš„åŽŸå§‹_hbase-default.xml_æºæ–‡ä»¶ã€‚ å¹¶ä¸æ˜¯æ‰€æœ‰çš„é…ç½®é€‰é¡¹éƒ½ä¼šå°†å…¶å‘é€åˆ°_hbase-default.xml_ã€‚ä¸€äº›é…ç½®åªä¼šå‡ºçŽ°åœ¨æºä»£ç ä¸­ï¼›å› æ­¤è¯†åˆ«è¿™äº›æ›´æ”¹çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡ä»£ç å®¡æŸ¥ã€‚ ç›®å‰ï¼Œè¿™é‡Œçš„æ›´æ”¹å°†éœ€è¦ä¸ºHBaseé‡å¯é›†ç¾¤ç”Ÿæ•ˆã€‚ 7.2. HBase é»˜è®¤é…ç½®ä»¥ä¸‹æ–‡æ¡£æ˜¯ä½¿ç”¨é»˜è®¤çš„HBaseé…ç½®æ–‡ä»¶_hbase-default.xml_ä½œä¸ºæºç”Ÿæˆçš„ hbase.tmp.dir è¿™æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä¸´æ—¶ç›®å½•ã€‚å°†æ­¤è®¾ç½®æ›´æ”¹ä¸ºæŒ‡å‘æ¯”â€œ/tmpâ€æ›´æŒä¹…çš„ä½ç½®ï¼Œè¿™æ˜¯java.io.tmpdirçš„å¸¸è§è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºåœ¨é‡æ–°å¯åŠ¨è®¡ç®—æœºæ—¶æ¸…é™¤äº†â€œ/tmpâ€ç›®å½•ã€‚ é»˜è®¤: ${java.io.tmpdir}/hbase-${user.name} hbase.rootdir è¿™ä¸ªç›®å½•æ˜¯region serverså…±äº«çš„ç›®å½•ï¼ŒHBaseä¿æŒä¸å˜ã€‚è¯¥URLåº”è¯¥æ˜¯â€œå®Œå…¨é™å®šçš„â€ä»¥åŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿçš„schemeã€‚ä¾‹å¦‚ï¼Œè¦æŒ‡å®šHDFSå®žä¾‹çš„â€/hbaseâ€ç›®å½•ï¼Œnamenodeè¿è¡Œåœ¨namenode.example.orgçš„9000ç«¯å£ï¼Œè¯·å°†æ­¤å€¼è®¾ç½®ä¸ºï¼šhdfsï¼š//namenode.example.orgï¼š9000 / hbaseã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šå†™$ {hbase.tmp.dir}ï¼Œé€šå¸¸æ˜¯/tmp - æ‰€ä»¥æ”¹å˜è¿™ä¸ªé…ç½®ï¼Œå¦åˆ™æ‰€æœ‰çš„æ•°æ®åœ¨è®¡ç®—æœºé‡å¯æ—¶éƒ½ä¼šä¸¢å¤±ã€‚ é»˜è®¤: ${hbase.tmp.dir}/hbase hbase.cluster.distributed ç¾¤é›†æ‰€å¤„çš„æ¨¡å¼ã€‚å¯¹äºŽç‹¬ç«‹æ¨¡å¼ï¼Œå¯èƒ½çš„å€¼ä¸ºfalseï¼Œå¯¹äºŽåˆ†å¸ƒå¼æ¨¡å¼ï¼Œå¯èƒ½çš„å€¼ä¸ºtrueã€‚å¦‚æžœä¸ºfalseï¼Œå¯åŠ¨å°†åœ¨ä¸€ä¸ªJVMä¸­ä¸€èµ·è¿è¡Œæ‰€æœ‰HBaseå’ŒZooKeeperå®ˆæŠ¤ç¨‹åºã€‚ é»˜è®¤: false hbase.zookeeper.quorum ä½¿ç”¨é€—å·åˆ†éš”çš„ZooKeeperé›†åˆä¸­çš„æœåŠ¡å™¨åˆ—è¡¨ï¼ˆè¿™ä¸ªé…ç½®åº”è¯¥è¢«å‘½åä¸ºhbase.zookeeper.ensembleï¼‰ã€‚ä¾‹å¦‚ï¼Œâ€œhost1.mydomain.comï¼Œhost2.mydomain.comï¼Œhost3.mydomain.comâ€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºŽæœ¬åœ°å’Œä¼ªåˆ†å¸ƒå¼æ“ä½œæ¨¡å¼ï¼Œå°†å…¶è®¾ç½®ä¸ºlocalhostã€‚å¯¹äºŽå®Œå…¨åˆ†å¸ƒå¼å®‰è£…ï¼Œåº”å°†å…¶è®¾ç½®ä¸ºZooKeeperé›†æˆæœåŠ¡å™¨çš„å®Œæ•´åˆ—è¡¨ã€‚å¦‚æžœåœ¨hbase-env.shä¸­è®¾ç½®HBASE_MANAGES_ZKï¼Œè¿™æ˜¯hbaseå°†ä½œä¸ºç¾¤é›†å¯åŠ¨/åœæ­¢çš„ä¸€éƒ¨åˆ†æ¥å¯åŠ¨/åœæ­¢ZooKeeperçš„æœåŠ¡å™¨åˆ—è¡¨ã€‚å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å°†æŠŠè¿™ä¸ªé›†åˆæˆå‘˜çš„åˆ—è¡¨ï¼Œå¹¶æŠŠå®ƒä¸Žhbase.zookeeper.property.clientPorté…ç½®æ”¾åœ¨ä¸€èµ·ã€‚å¹¶å°†å…¶ä½œä¸ºconnectStringå‚æ•°ä¼ é€’ç»™zookeeperæž„é€ å‡½æ•°ã€‚ é»˜è®¤: localhost zookeeper.recovery.retry.maxsleeptime åœ¨é‡è¯• zookeeperæ“ä½œä¹‹å‰çš„æœ€å¤§ç¡çœ æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼Œè¿™é‡Œéœ€è¦æœ€å¤§æ—¶é—´ï¼Œä»¥ä¾¿ç¡çœ æ—¶é—´ä¸ä¼šæ— é™å¢žé•¿ã€‚ é»˜è®¤: 60000 hbase.local.dir å°†æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç›®å½•ç”¨ä½œæœ¬åœ°å­˜å‚¨ã€‚ é»˜è®¤:${hbase.tmp.dir}/local/ hbase.master.port HBase Masteråº”è¯¥ç»‘å®šçš„ç«¯å£ã€‚ é»˜è®¤: 16000 hbase.master.info.port HBase Master Web UIçš„ç«¯å£ã€‚å¦‚æžœæ‚¨ä¸æƒ³è¿è¡ŒUIå®žä¾‹ï¼Œè¯·å°†å…¶è®¾ç½®ä¸º-1ã€‚ é»˜è®¤: 16010 hbase.master.info.bindAddress HBase Master Web UIçš„ç»‘å®šåœ°å€ é»˜è®¤: 0.0.0.0 hbase.master.logcleaner.plugins ç”±LogsCleaneræœåŠ¡è°ƒç”¨çš„BaseLogCleanerDelegateçš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚è¿™äº›WALæ¸…ç†æ˜¯æŒ‰é¡ºåºè°ƒç”¨çš„ã€‚è¦å®žçŽ°æ‚¨è‡ªå·±çš„BaseLogCleanerDelegateï¼Œåªéœ€å°†å…¶æ”¾å…¥HBaseçš„ç±»è·¯å¾„ä¸­ï¼Œå¹¶åœ¨æ­¤æ·»åŠ å®Œå…¨é™å®šçš„ç±»åã€‚å§‹ç»ˆåœ¨åˆ—è¡¨ä¸­æ·»åŠ ä¸Šé¢çš„é»˜è®¤æ—¥å¿—æ¸…ç†å·¥å…·ã€‚ é»˜è®¤: org.apache.hadoop.hbase.master.cleaner.TimeToLiveLogCleaner,org.apache.hadoop.hbase.master.cleaner.TimeToLiveProcedureWALCleaner hbase.master.logcleaner.ttl WALåœ¨å½’æ¡£ï¼ˆ{hbase.rootdir} / oldWALsï¼‰ç›®å½•ä¸­ä¿ç•™å¤šä¹…ï¼Œä¹‹åŽå°†ç”±ä¸»çº¿ç¨‹æ¸…é™¤ã€‚è¯¥å€¼ä»¥æ¯«ç§’ä¸ºå•ä½ã€‚ é»˜è®¤: 600000 hbase.master.procedurewalcleaner.ttl è¿‡ç¨‹WALå°†åœ¨å½’æ¡£ç›®å½•ä¸­ä¿ç•™å¤šä¹…ï¼Œä¹‹åŽå°†ç”±ä¸»çº¿ç¨‹æ¸…é™¤ã€‚è¯¥å€¼ä»¥æ¯«ç§’ä¸ºå•ä½ã€‚ é»˜è®¤: 604800000 hbase.master.hfilecleaner.plugins ç”±HFileCleaneræœåŠ¡è°ƒç”¨çš„BaseHFileCleanerDelegateçš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚è¿™äº›HFileæ¸…ç†å™¨æŒ‰é¡ºåºè°ƒç”¨ã€‚è¦å®žçŽ°æ‚¨è‡ªå·±çš„BaseHFileCleanerDelegateï¼Œåªéœ€å°†å…¶æ”¾å…¥HBaseçš„ç±»è·¯å¾„ä¸­ï¼Œå¹¶åœ¨æ­¤æ·»åŠ å®Œå…¨é™å®šçš„ç±»åã€‚æ€»æ˜¯åœ¨åˆ—è¡¨ä¸­æ·»åŠ ä¸Šé¢çš„é»˜è®¤æ—¥å¿—æ¸…é™¤ç¨‹åºï¼Œå› ä¸ºå®ƒä»¬å°†è¢«è¦†ç›–åœ¨hbase-site.xmlä¸­ã€‚ é»˜è®¤: org.apache.hadoop.hbase.master.cleaner.TimeToLiveHFileCleaner hbase.master.infoserver.redirect Masteræ˜¯å¦ç›‘å¬Master Web UIç«¯å£ï¼ˆhbase.master.info.portï¼‰å¹¶å°†è¯·æ±‚é‡å®šå‘åˆ°ç”±Masterå’ŒRegionServerå…±äº«çš„Web UIæœåŠ¡å™¨ã€‚é…ç½®ï¼Œå½“ä¸»æœåŠ¡åŒºåŸŸï¼ˆè€Œä¸æ˜¯é»˜è®¤ï¼‰æ—¶æ˜¯æœ‰æ„ä¹‰çš„ã€‚ é»˜è®¤: true hbase.master.fileSplitTimeout åˆ†å‰²ä¸€ä¸ªåŒºåŸŸï¼Œåœ¨æ”¾å¼ƒå°è¯•ä¹‹å‰ç­‰å¾…æ–‡ä»¶åˆ†å‰²æ­¥éª¤éœ€è¦å¤šé•¿æ—¶é—´ã€‚é»˜è®¤å€¼ï¼š600000ã€‚è¿™ä¸ªè®¾ç½®åœ¨hbase-1.xä¸­è¢«ç§°ä¸ºhbase.regionserver.fileSplitTimeoutã€‚SplitçŽ°åœ¨è¿è¡Œä¸»ç«¯ï¼Œå› æ­¤é‡å‘½åï¼ˆå¦‚æžœæ‰¾åˆ°â€™hbase.master.fileSplitTimeoutâ€™è®¾ç½®ï¼Œå°†ä½¿ç”¨å®ƒæ¥å¡«å……å½“å‰â€™hbase.master.fileSplitTimeoutâ€™é…ç½®ã€‚ é»˜è®¤: 600000 hbase.regionserver.port HBase RegionServerç»‘å®šçš„ç«¯å£ã€‚ é»˜è®¤: 16020 hbase.regionserver.info.port HBase RegionServer Web UIçš„ç«¯å£å¦‚æžœæ‚¨ä¸å¸Œæœ›RegionServer UIè¿è¡Œï¼Œè¯·å°†å…¶è®¾ç½®ä¸º-1ã€‚ é»˜è®¤: 16030 hbase.regionserver.info.bindAddress HBase RegionServer Web UIçš„åœ°å€ é»˜è®¤: 0.0.0.0 hbase.regionserver.info.port.auto Masteræˆ–RegionServer UIæ˜¯å¦åº”æœç´¢è¦ç»‘å®šçš„ç«¯å£ã€‚å¦‚æžœhbase.regionserver.info.portå·²è¢«ä½¿ç”¨ï¼Œåˆ™å¯ç”¨è‡ªåŠ¨ç«¯å£æœç´¢ã€‚ç”¨äºŽæµ‹è¯•ï¼Œé»˜è®¤å…³é—­ã€‚ é»˜è®¤: false hbase.regionserver.handler.count åœ¨RegionServersä¸Šå¯åŠ¨RPC Listenerå®žä¾‹çš„è®¡æ•°ã€‚Masterä½¿ç”¨ç›¸åŒçš„å±žæ€§æ¥å¤„ç†ä¸»å¤„ç†ç¨‹åºçš„æ•°é‡ã€‚å¤ªå¤šçš„å¤„ç†è€…å¯èƒ½ä¼šé€‚å¾—å…¶åã€‚ä½¿å…¶æˆä¸ºCPUæ•°é‡çš„å€æ•°ã€‚å¦‚æžœä¸»è¦æ˜¯åªè¯»çš„ï¼Œå¤„ç†ç¨‹åºè®¡æ•°æŽ¥è¿‘CPUè®¡æ•°åšå¾—å¾ˆå¥½ã€‚ä»ŽCPUæ•°é‡çš„ä¸¤å€å¼€å§‹ï¼Œå¹¶ä»Žé‚£é‡Œè°ƒæ•´ã€‚ é»˜è®¤: 30 hbase.ipc.server.callqueue.handler.factor ç¡®å®šå‘¼å«é˜Ÿåˆ—æ•°é‡çš„å› ç´ ã€‚å€¼ä¸º0è¡¨ç¤ºåœ¨æ‰€æœ‰å¤„ç†ç¨‹åºä¹‹é—´å…±äº«å•ä¸ªé˜Ÿåˆ—ã€‚å€¼ä¸º1æ„å‘³ç€æ¯ä¸ªå¤„ç†ç¨‹åºéƒ½æœ‰è‡ªå·±çš„é˜Ÿåˆ—ã€‚ é»˜è®¤: 0.1 hbase.ipc.server.callqueue.read.ratio å°†è°ƒç”¨é˜Ÿåˆ—åˆ†æˆè¯»å†™é˜Ÿåˆ—ã€‚æŒ‡å®šçš„æ—¶é—´é—´éš”ï¼ˆåº”è¯¥åœ¨0.0åˆ°1.0ä¹‹é—´ï¼‰å°†ä¹˜ä»¥è°ƒç”¨é˜Ÿåˆ—çš„æ•°é‡ã€‚å€¼ä¸º0è¡¨ç¤ºä¸åˆ†å‰²è°ƒç”¨é˜Ÿåˆ—ï¼Œè¿™æ„å‘³ç€è¯»å–å’Œå†™å…¥è¯·æ±‚å°†è¢«æŽ¨é€åˆ°ç›¸åŒçš„ä¸€ç»„é˜Ÿåˆ—ä¸­ã€‚ä½ŽäºŽ0.5çš„å€¼æ„å‘³ç€å°†æ¯”å†™å…¥é˜Ÿåˆ—æ›´å°‘çš„è¯»å–é˜Ÿåˆ—ã€‚å€¼ä¸º0.5æ„å‘³ç€å°†æœ‰ç›¸åŒæ•°é‡çš„è¯»å†™é˜Ÿåˆ—ã€‚å¤§äºŽ0.5çš„å€¼æ„å‘³ç€å°†æœ‰æ›´å¤šçš„è¯»é˜Ÿåˆ—è€Œä¸æ˜¯å†™å…¥é˜Ÿåˆ—ã€‚å€¼ä¸º1.0æ„å‘³ç€é™¤äº†ä¸€ä¸ªä¹‹å¤–çš„æ‰€æœ‰é˜Ÿåˆ—éƒ½ç”¨äºŽå‘é€è¯»å–è¯·æ±‚ã€‚ç¤ºä¾‹ï¼šå‡è®¾è°ƒç”¨é˜Ÿåˆ—çš„æ€»æ•°ä¸º10ï¼Œåˆ™read.ratioä¸º0æ„å‘³ç€ï¼š10ä¸ªé˜Ÿåˆ—å°†åŒæ—¶åŒ…å«è¯»/å†™è¯·æ±‚ã€‚0.3çš„è¯»å–æ¯”ä¾‹æ„å‘³ç€ï¼š3ä¸ªé˜Ÿåˆ—å°†åªåŒ…å«è¯»å–è¯·æ±‚ï¼Œ7ä¸ªé˜Ÿåˆ—å°†åªåŒ…å«å†™å…¥è¯·æ±‚ã€‚0.5çš„read.ratioè¡¨ç¤ºï¼š5ä¸ªé˜Ÿåˆ—å°†åªåŒ…å«è¯»å–è¯·æ±‚ï¼Œ5ä¸ªé˜Ÿåˆ—å°†åªåŒ…å«å†™å…¥è¯·æ±‚ã€‚0.8çš„read.ratioæ„å‘³ç€ï¼š8ä¸ªé˜Ÿåˆ—å°†åªåŒ…å«è¯»å–è¯·æ±‚ï¼Œ2ä¸ªé˜Ÿåˆ—å°†åªåŒ…å«å†™å…¥è¯·æ±‚ã€‚1çš„read.ratioè¡¨ç¤ºï¼š9ä¸ªé˜Ÿåˆ—å°†åªåŒ…å«è¯»å–è¯·æ±‚ï¼Œ1ä¸ªé˜Ÿåˆ—å°†åªåŒ…å«å†™å…¥è¯·æ±‚ã€‚ é»˜è®¤: 0 hbase.ipc.server.callqueue.scan.ratio è€ƒè™‘åˆ°è¯»å–çš„è°ƒç”¨é˜Ÿåˆ—çš„æ•°é‡ï¼ˆæ ¹æ®è°ƒç”¨é˜Ÿåˆ—çš„æ€»æ•°ä¹˜ä»¥callqueue.read.ratioè®¡ç®—ï¼‰ï¼Œscan.ratioå±žæ€§å°†æŠŠè¯»å–çš„è°ƒç”¨é˜Ÿåˆ—æ‹†åˆ†ä¸ºå°è¯»å–å’Œé•¿è¯»å–é˜Ÿåˆ—ã€‚ä½ŽäºŽ0.5çš„å€¼æ„å‘³ç€é•¿è¯»é˜Ÿåˆ—æ¯”çŸ­è¯»é˜Ÿåˆ—å°‘ã€‚å€¼ä¸º0.5æ„å‘³ç€å°†æœ‰ç›¸åŒæ•°é‡çš„çŸ­è¯»å–å’Œé•¿è¯»å–é˜Ÿåˆ—ã€‚å¤§äºŽ0.5çš„å€¼æ„å‘³ç€å°†ä¼šæœ‰æ¯”é•¿è¯»å–é˜Ÿåˆ—æ›´å¤šçš„é•¿è¯»å–é˜Ÿåˆ—ã€‚å€¼0æˆ–1è¡¨ç¤ºä½¿ç”¨åŒä¸€ç»„é˜Ÿåˆ—è¿›è¡ŒèŽ·å–å’Œæ‰«æã€‚ç¤ºä¾‹ï¼šç»™å®šè¯»å–è°ƒç”¨é˜Ÿåˆ—çš„æ€»æ•°ä¸º8ï¼Œscan.ratioä¸º0æˆ–1æ„å‘³ç€ï¼š8ä¸ªé˜Ÿåˆ—å°†åŒ…å«é•¿è¯»è¯·æ±‚å’ŒçŸ­è¯»è¯·æ±‚ã€‚0.3çš„scan.ratioè¡¨ç¤ºï¼š2ä¸ªé˜Ÿåˆ—åªåŒ…å«é•¿è¯»è¯·æ±‚ï¼Œ6ä¸ªé˜Ÿåˆ—åªåŒ…å«çŸ­è¯»è¯·æ±‚ã€‚0.5çš„scan.ratioè¡¨ç¤ºï¼š4ä¸ªé˜Ÿåˆ—åªåŒ…å«é•¿è¯»è¯·æ±‚ï¼Œ4ä¸ªé˜Ÿåˆ—åªåŒ…å«çŸ­è¯»è¯·æ±‚ã€‚0.8çš„scan.ratioæ„å‘³ç€ï¼š6ä¸ªé˜Ÿåˆ—åªåŒ…å«é•¿è¯»è¯·æ±‚ï¼Œ2ä¸ªé˜Ÿåˆ—åªåŒ…å«çŸ­è¯»è¯·æ±‚ã€‚ é»˜è®¤: 0 hbase.regionserver.msginterval ä»ŽRegionServeråˆ°Masterçš„æ¶ˆæ¯é—´éš”ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚ é»˜è®¤: 3000 hbase.regionserver.logroll.period æ— è®ºæœ‰å¤šå°‘æ¬¡ç¼–è¾‘ï¼Œæˆ‘ä»¬å°†æ»šåŠ¨æäº¤æ—¥å¿—çš„æ—¶é—´æ®µã€‚ é»˜è®¤: 3600000 hbase.regionserver.logroll.errors.tolerated åœ¨è§¦å‘æœåŠ¡å™¨ä¸­æ­¢ä¹‹å‰ï¼Œæˆ‘ä»¬å°†å…è®¸è¿žç»­çš„WALå…³é—­é”™è¯¯çš„æ•°é‡ã€‚å¦‚æžœåœ¨æ—¥å¿—æ»šåŠ¨è¿‡ç¨‹ä¸­å…³é—­å½“å‰WALä¹¦å†™å™¨å¤±è´¥ï¼Œåˆ™è®¾ç½®ä¸º0å°†å¯¼è‡´åŒºåŸŸæœåŠ¡å™¨ä¸­æ­¢ã€‚å³ä½¿æ˜¯ä¸€ä¸ªå¾ˆå°çš„å€¼ï¼ˆ2æˆ–3ï¼‰ä¹Ÿä¼šè®©åŒºåŸŸæœåŠ¡å™¨æ‰¿æ‹…çž¬é—´çš„HDFSé”™è¯¯ã€‚ é»˜è®¤: 2 hbase.regionserver.hlog.reader.impl WALæ–‡ä»¶è¯»å–å™¨çš„å®žçŽ°ã€‚ é»˜è®¤: org.apache.hadoop.hbase.regionserver.wal.ProtobufLogReader hbase.regionserver.hlog.writer.impl WALæ–‡ä»¶ç¼–å†™å™¨çš„å®žçŽ°ã€‚ é»˜è®¤: org.apache.hadoop.hbase.regionserver.wal.ProtobufLogWriter hbase.regionserver.global.memstore.size åœ¨æ–°æ›´æ–°è¢«é˜»æ­¢å¹¶åˆ·æ–°ä¹‹å‰ï¼ŒåŒºåŸŸæœåŠ¡å™¨ä¸­æ‰€æœ‰å­˜å‚¨åŒºçš„æœ€å¤§å¤§å°ã€‚é»˜è®¤ä¸ºå †çš„40ï¼…ï¼ˆ0.4ï¼‰ã€‚æ›´æ–°è¢«é˜»æ­¢ï¼Œå¼ºåˆ¶åˆ·æ–°ç›´åˆ°åŒºåŸŸæœåŠ¡å™¨ä¸­çš„æ‰€æœ‰å†…å­˜å¤§å°éƒ½è¾¾åˆ°hbase.regionserver.global.memstore.size.lower.limitã€‚æ­¤é…ç½®ä¸­çš„é»˜è®¤å€¼å·²è¢«æ•…æ„ç•™ç©ºï¼Œä»¥ä¾¿å…‘çŽ°æ—§çš„hbase.regionserver.global.memstore.upperLimitå±žæ€§ï¼ˆå¦‚æžœå­˜åœ¨ï¼‰ã€‚ é»˜è®¤: none hbase.regionserver.global.memstore.size.lower.limit å¼ºåˆ¶åˆ·æ–°ä¹‹å‰ï¼ŒåŒºåŸŸæœåŠ¡å™¨ä¸­æ‰€æœ‰å­˜å‚¨åŒºçš„æœ€å¤§å¤§å°ã€‚é»˜è®¤ä¸ºhbase.regionserver.global.memstore.sizeï¼ˆ0.95ï¼‰çš„95ï¼…ã€‚å½“ç”±äºŽå†…å­˜é™åˆ¶è€Œå¯¼è‡´æ›´æ–°è¢«é˜»å¡žæ—¶ï¼Œæ­¤å€¼çš„100ï¼…ä¼šå¯¼è‡´æœ€å°å¯èƒ½çš„åˆ·æ–°ã€‚æ­¤é…ç½®ä¸­çš„é»˜è®¤å€¼å·²è¢«æ•…æ„ç•™ç©ºï¼Œä»¥ä¾¿å…‘çŽ°æ—§çš„hbase.regionserver.global.memstore.lowerLimitå±žæ€§ï¼ˆå¦‚æžœå­˜åœ¨ï¼‰ã€‚ é»˜è®¤: none hbase.systemtables.compacting.memstore.type ç¡®å®šç”¨äºŽç³»ç»Ÿè¡¨ï¼ˆå¦‚METAï¼Œåç§°ç©ºé—´è¡¨ç­‰ï¼‰çš„memstoreçš„ç±»åž‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒNONEæ˜¯ç±»åž‹ï¼Œå› æ­¤æˆ‘ä»¬å¯¹æ‰€æœ‰ç³»ç»Ÿè¡¨ä½¿ç”¨é»˜è®¤çš„memstoreã€‚å¦‚æžœæˆ‘ä»¬éœ€è¦ä¸ºç³»ç»Ÿè¡¨ä½¿ç”¨åŽ‹ç¼©å­˜å‚¨å™¨ï¼Œé‚£ä¹ˆå°†è¿™ä¸ªå±žæ€§è®¾ç½®ä¸ºï¼šBASIC / EAGER é»˜è®¤: NONE hbase.regionserver.optionalcacheflushinterval åœ¨è‡ªåŠ¨åˆ·æ–°ä¹‹å‰ï¼Œç¼–è¾‘åœ¨å†…å­˜ä¸­çš„æœ€é•¿æ—¶é—´ã€‚é»˜è®¤ä¸º1å°æ—¶ã€‚å°†å…¶è®¾ç½®ä¸º0å°†ç¦ç”¨è‡ªåŠ¨åˆ·æ–°ã€‚ é»˜è®¤: 3600000 hbase.regionserver.dns.interface åŒºåŸŸæœåŠ¡å™¨åº”ä»Žä¸­æŠ¥å‘Šå…¶IPåœ°å€çš„ç½‘ç»œæŽ¥å£çš„åç§°ã€‚ é»˜è®¤: default hbase.regionserver.dns.nameserver åŸŸåæœåŠ¡å™¨åº”ä½¿ç”¨çš„åç§°æœåŠ¡å™¨ï¼ˆDNSï¼‰çš„ä¸»æœºåæˆ–IPåœ°å€ï¼Œä»¥ç¡®å®šä¸»æœºç”¨äºŽé€šä¿¡å’Œæ˜¾ç¤ºçš„ä¸»æœºåã€‚ é»˜è®¤: default hbase.regionserver.region.split.policy åˆ†å‰²ç­–ç•¥å†³å®šäº†ä¸€ä¸ªåŒºåŸŸåº”è¯¥ä½•æ—¶æ‹†åˆ†ã€‚å½“å‰å¯ç”¨çš„å„ç§å…¶ä»–æ‹†åˆ†ç­–ç•¥æ˜¯ï¼šBusyRegionSplitPolicyï¼ŒConstantSizeRegionSplitPolicyï¼ŒDisabledRegionSplitPolicyï¼ŒDelimitedKeyPrefixRegionSplitPolicyï¼ŒKeyPrefixRegionSplitPolicyå’ŒSteppingSplitPolicyã€‚DisabledRegionSplitPolicyä¼šé˜»æ­¢æ‰‹åŠ¨åŒºåŸŸåˆ†å‰²ã€‚ é»˜è®¤: org.apache.hadoop.hbase.regionserver.SteppingSplitPolicy hbase.regionserver.regionSplitLimit é™åˆ¶åŒºåŸŸæ•°é‡ï¼Œä¹‹åŽä¸å†å‘ç”ŸåŒºåŸŸåˆ†å‰²ã€‚è¿™å¹¶ä¸æ˜¯ç¡¬æ€§é™åˆ¶åŒºåŸŸæ•°é‡ï¼Œè€Œæ˜¯ä½œä¸ºåŒºåŸŸæœåŠ¡å•†åœ¨ä¸€å®šé™åº¦ä¹‹åŽåœæ­¢åˆ†è£‚çš„æŒ‡å¯¼æ–¹é’ˆã€‚é»˜è®¤è®¾ç½®ä¸º1000ã€‚ é»˜è®¤: 1000 zookeeper.session.timeout ZooKeeperä¼šè¯è¶…æ—¶ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚å®ƒä½¿ç”¨ä¸¤ç§ä¸åŒçš„æ–¹å¼ã€‚é¦–å…ˆï¼Œè¿™ä¸ªå€¼ç”¨äºŽHBaseç”¨æ¥è¿žæŽ¥åˆ°é›†åˆçš„ZKå®¢æˆ·ç«¯ã€‚å½“å®ƒå¯åŠ¨ä¸€ä¸ªZKæœåŠ¡å™¨æ—¶å®ƒä¹Ÿè¢«HBaseä½¿ç”¨ï¼Œå¹¶ä¸”å®ƒè¢«ä½œä¸ºâ€™maxSessionTimeoutâ€™ä¼ é€’ã€‚è¯·å‚http://hadoop.apache.org/zookeeper/docs/current/zookeeperProgrammers.html#ch_zkSessionsã€‚ä¾‹å¦‚ï¼Œå¦‚æžœHBaseåŒºåŸŸæœåŠ¡å™¨è¿žæŽ¥åˆ°ä¹Ÿç”±HBaseç®¡ç†çš„ZKé›†åˆï¼Œé‚£ä¹ˆä¼šè¯è¶…æ—¶å°†æ˜¯ç”±æ­¤é…ç½®æŒ‡å®šçš„ã€‚ä½†æ˜¯ï¼Œè¿žæŽ¥åˆ°ä»¥ä¸åŒé…ç½®ç®¡ç†çš„é›†æˆçš„åŒºåŸŸæœåŠ¡å™¨å°†å—åˆ°è¯¥é›†åˆçš„maxSessionTimeoutçš„é™åˆ¶ã€‚æ‰€ä»¥ï¼Œå°½ç®¡HBaseå¯èƒ½ä¼šå»ºè®®ä½¿ç”¨90ç§’ï¼Œä½†æ˜¯æ•´ä½“çš„æœ€å¤§è¶…æ—¶æ—¶é—´å¯èƒ½ä¼šä½ŽäºŽæ­¤å€¼ï¼Œå¹¶ä¸”ä¼šä¼˜å…ˆè€ƒè™‘ã€‚ZKç›®å‰çš„é»˜è®¤å€¼æ˜¯40ç§’ï¼Œæ¯”HBaseçš„ä½Žã€‚ é»˜è®¤: 90000 zookeeper.znode.parent ZooKeeperä¸­ç”¨äºŽHBaseçš„Root ZNodeã€‚æ‰€æœ‰é…ç½®äº†ç›¸å¯¹è·¯å¾„çš„HBaseçš„ZooKeeperæ–‡ä»¶éƒ½ä¼šåœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„HBaseçš„ZooKeeperæ–‡ä»¶è·¯å¾„éƒ½è¢«é…ç½®ä¸ºä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œæ‰€ä»¥å®ƒä»¬å°†å…¨éƒ¨è¿›å…¥è¿™ä¸ªç›®å½•ä¸‹ï¼Œé™¤éžè¢«æ”¹å˜ã€‚ é»˜è®¤: /hbase zookeeper.znode.acl.parent Root ZNodeç”¨äºŽè®¿é—®æŽ§åˆ¶åˆ—è¡¨ã€‚ é»˜è®¤: acl hbase.zookeeper.dns.interface ZooKeeperæœåŠ¡å™¨åº”ä»Žä¸­æŠ¥å‘Šå…¶IPåœ°å€çš„ç½‘ç»œæŽ¥å£çš„åç§°ã€‚ é»˜è®¤: default hbase.zookeeper.dns.nameserver åç§°æœåŠ¡å™¨ï¼ˆDNSï¼‰çš„ä¸»æœºåæˆ–IPåœ°å€ï¼ŒZooKeeperæœåŠ¡å™¨åº”ä½¿ç”¨è¯¥åç§°æœåŠ¡å™¨æ¥ç¡®å®šä¸»æœºç”¨äºŽé€šä¿¡å’Œæ˜¾ç¤ºçš„ä¸»æœºåã€‚ é»˜è®¤: default hbase.zookeeper.peerport ZooKeeperåŒä¼´ä½¿ç”¨çš„ç«¯å£è¿›è¡Œå½¼æ­¤ä¼šè¯ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… http://hadoop.apache.org/zookeeper/docs/r3.1.1/zookeeperStarted.html#sc_RunningReplicatedZooKeeper é»˜è®¤: 2888 hbase.zookeeper.leaderport ZooKeeperç”¨äºŽleaderé€‰ä¸¾çš„ç«¯å£ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… http://hadoop.apache.org/zookeeper/docs/r3.1.1/zookeeperStarted.html#sc_RunningReplicatedZooKeeper é»˜è®¤: 3888 hbase.zookeeper.property.initLimit æ¥è‡ªZooKeeperçš„é…ç½®zoo.cfgçš„å±žæ€§ã€‚åˆå§‹åŒæ­¥é˜¶æ®µå¯ä»¥é‡‡ç”¨çš„æ—¶é’Ÿï¼ˆticksï¼‰å‘¨æœŸæ•°ã€‚ é»˜è®¤: 10 hbase.zookeeper.property.syncLimit æ¥è‡ªZooKeeperçš„é…ç½®zoo.cfgçš„å±žæ€§ã€‚å‘é€è¯·æ±‚å’ŒèŽ·å–ç¡®è®¤ä¹‹é—´å¯ä»¥ä¼ é€’çš„æ—¶é’Ÿï¼ˆticksï¼‰æ•°é‡ã€‚ é»˜è®¤: 5 hbase.zookeeper.property.dataDir æ¥è‡ªZooKeeperçš„é…ç½®zoo.cfgçš„å±žæ€§ã€‚å¿«ç…§å­˜å‚¨çš„ç›®å½•ã€‚ é»˜è®¤: ${hbase.tmp.dir}/zookeeper hbase.zookeeper.property.clientPort æ¥è‡ªZooKeeperçš„é…ç½®zoo.cfgçš„å±žæ€§ã€‚å®¢æˆ·ç«¯å°†è¿žæŽ¥çš„ç«¯å£ã€‚ é»˜è®¤: 2181 hbase.zookeeper.property.maxClientCnxns æ¥è‡ªZooKeeperçš„é…ç½®zoo.cfgçš„å±žæ€§ã€‚é™åˆ¶ç”±IPåœ°å€æ ‡è¯†çš„å•ä¸ªå®¢æˆ·ç«¯çš„å¹¶å‘è¿žæŽ¥æ•°é‡ï¼ˆåœ¨å¥—æŽ¥å­—çº§åˆ«ï¼‰å¯èƒ½ä¼šå¯¹ZooKeeperé›†åˆçš„å•ä¸ªæˆå‘˜äº§ç”Ÿå½±å“ã€‚è®¾ç½®ä¸ºé«˜ï¼Œä»¥é¿å…ç‹¬ç«‹è¿è¡Œå’Œä¼ªåˆ†å¸ƒå¼è¿è¡Œçš„zkè¿žæŽ¥é—®é¢˜ã€‚ é»˜è®¤: 300 hbase.client.write.buffer BufferedMutatorå†™å…¥ç¼“å†²åŒºçš„é»˜è®¤å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ä¸€ä¸ªæ›´å¤§çš„ç¼“å†²åŒºéœ€è¦æ›´å¤šçš„å†…å­˜ - åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ï¼Œå› ä¸ºæœåŠ¡å™¨å®žä¾‹åŒ–ä¼ é€’çš„å†™å…¥ç¼“å†²åŒºæ¥å¤„ç†å®ƒ - ä½†æ›´å¤§çš„ç¼“å†²åŒºå¤§å°å‡å°‘äº†RPCçš„æ•°é‡ã€‚å¯¹äºŽä¼°è®¡ä½¿ç”¨çš„æœåŠ¡å™¨ç«¯å†…å­˜ï¼Œè®¡ç®—ï¼šhbase.client.write.buffer * hbase.regionserver.handler.count é»˜è®¤: 2097152 hbase.client.pause ä¸€èˆ¬å®¢æˆ·ç«¯pauseå€¼ã€‚åœ¨è¿è¡Œå¤±è´¥çš„getï¼Œregion lookupç­‰çš„é‡è¯•ä¹‹å‰ï¼Œä¸»è¦ç”¨ä½œç­‰å¾…çš„å€¼ã€‚hbase.client.retries.number æœ‰å…³å¦‚ä½•å–æ¶ˆæ­¤åˆå§‹æš‚åœé‡ä»¥åŠæ­¤é‡è¯•æ•°é‡è¯´æ˜Žã€‚ é»˜è®¤: 100 hbase.client.pause.cqtbe æ˜¯å¦ä¸ºCallQueueTooBigExceptionï¼ˆcqtbeï¼‰ä½¿ç”¨ç‰¹æ®Šçš„å®¢æˆ·ç«¯pauseã€‚å¦‚æžœæ‚¨è§‚å¯Ÿåˆ°æ¥è‡ªåŒä¸€ä¸ªRegionServerçš„é¢‘ç¹çš„CQTBEï¼Œå¹¶ä¸”å…¶ä¸­çš„è°ƒç”¨é˜Ÿåˆ—ä¿æŒå……æ»¡ï¼Œåˆ™å°†æ­¤å±žæ€§è®¾ç½®ä¸ºæ¯”hbase.client.pauseæ›´é«˜çš„å€¼ é»˜è®¤: none hbase.client.retries.number æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚ç”¨ä½œæ‰€æœ‰å¯é‡è¯•æ“ä½œï¼ˆå¦‚èŽ·å–å•å…ƒæ ¼å€¼ï¼Œå¯åŠ¨è¡Œæ›´æ–°ç­‰ï¼‰çš„æœ€å¤§å€¼ã€‚é‡è¯•é—´éš”æ˜¯åŸºäºŽhbase.client.pauseçš„ç²—ç•¥å‡½æ•°ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨è¿™æ®µæ—¶é—´é‡è¯•ï¼Œä½†åŽæ¥é€€åŽï¼Œæˆ‘ä»¬å¾ˆå¿«å°±è¾¾åˆ°æ¯åç§’é’Ÿé‡è¯•ä¸€æ¬¡ã€‚è¯·å‚é˜…HConstantsï¼ƒRETRY_BACKOFFäº†è§£å¤‡ä»½å¦‚ä½•æå‡ã€‚æ”¹å˜è¿™ä¸ªè®¾ç½®å’Œhbase.client.pauseæ¥é€‚åº”ä½ çš„å·¥ä½œè´Ÿè½½ã€‚ é»˜è®¤: 15 hbase.client.max.total.tasks å•ä¸ªHTableå®žä¾‹å‘é€åˆ°é›†ç¾¤çš„æœ€å¤§å¹¶å‘çªå˜ä»»åŠ¡æ•°ã€‚ é»˜è®¤: 100 hbase.client.max.perserver.tasks å•ä¸ªHTableå®žä¾‹å°†å‘é€åˆ°å•ä¸ªåŒºåŸŸæœåŠ¡å™¨çš„å¹¶å‘çªå˜ä»»åŠ¡çš„æœ€å¤§æ•°é‡ã€‚ é»˜è®¤: 2 hbase.client.max.perregion.tasks å®¢æˆ·ç«¯å°†ç»´æŠ¤åˆ°å•ä¸ªRegionçš„æœ€å¤§å¹¶å‘çªå˜ä»»åŠ¡æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœå·²ç»æœ‰hbase.client.max.perregion.taskså†™å…¥è¿™ä¸ªåŒºåŸŸï¼Œé‚£ä¹ˆæ–°çš„æ”¾å…¥å°†ä¸ä¼šè¢«å‘é€åˆ°è¿™ä¸ªåŒºåŸŸï¼Œç›´åˆ°ä¸€äº›å†™å…¥å®Œæˆã€‚ é»˜è®¤: 1 hbase.client.perserver.requests.threshold æ‰€æœ‰å®¢æˆ·ç«¯çº¿ç¨‹ï¼ˆè¿›ç¨‹çº§åˆ«ï¼‰ä¸­ä¸€ä¸ªæœåŠ¡å™¨çš„å¹¶å‘æœªå†³è¯·æ±‚çš„æœ€å¤§æ•°é‡ã€‚è¶…è¿‡è¯·æ±‚å°†ç«‹å³æŠ›å‡ºServerTooBusyExceptionï¼Œä»¥é˜²æ­¢ç”¨æˆ·çš„çº¿ç¨‹è¢«å ç”¨å’Œåªè¢«ä¸€ä¸ªç¼“æ…¢çš„åŒºåŸŸæœåŠ¡å™¨é˜»æ­¢ã€‚å¦‚æžœä½¿ç”¨å›ºå®šæ•°é‡çš„çº¿ç¨‹ä»¥åŒæ­¥æ–¹å¼è®¿é—®HBaseï¼Œè¯·å°†æ­¤å€¼è®¾ç½®ä¸ºä¸Žçº¿ç¨‹æ•°é‡ç›¸å…³çš„é€‚å½“å€¼ï¼Œè¿™äº›å€¼å°†å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚è¯¦è§:https://issues.apache.org/jira/browse/HBASE-16388 é»˜è®¤: 2147483647 hbase.client.scanner.caching å¦‚æžœä»Žæœ¬åœ°ï¼Œå®¢æˆ·ç«¯å†…å­˜ä¸­æœªæä¾›ï¼Œåˆ™åœ¨æ‰«æç¨‹åºä¸Šè°ƒç”¨nextæ—¶å°è¯•èŽ·å–çš„è¡Œæ•°ã€‚æ­¤é…ç½®ä¸Žhbase.client.scanner.max.result.sizeä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä½¿ç”¨ç½‘ç»œã€‚ç¼ºçœå€¼é»˜è®¤ä¸ºInteger.MAX_VALUEï¼Œè¿™æ ·ç½‘ç»œå°†å¡«å……ç”±hbase.client.scanner.max.result.sizeå®šä¹‰çš„å—å¤§å°ï¼Œè€Œä¸å—ç‰¹å®šè¡Œæ•°çš„é™åˆ¶ï¼Œå› ä¸ºè¡Œçš„å¤§å°éšè¡¨æ ¼çš„ä¸åŒè€Œä¸åŒã€‚å¦‚æžœæ‚¨äº‹å…ˆçŸ¥é“æ‰«æä¸­ä¸éœ€è¦è¶…è¿‡ä¸€å®šæ•°é‡çš„è¡Œï¼Œåˆ™åº”é€šè¿‡æ‰«æï¼ƒsetCachingå°†æ­¤é…ç½®è®¾ç½®ä¸ºè¯¥è¡Œé™åˆ¶ã€‚ç¼“å­˜å€¼è¶Šé«˜ï¼Œæ‰«æå™¨çš„é€Ÿåº¦è¶Šå¿«ï¼Œä½†æ˜¯ä¼šå ç”¨æ›´å¤šçš„å†…å­˜ï¼Œè€Œå½“ç¼“å­˜ç©ºç½®æ—¶ï¼Œä¸‹ä¸€æ¬¡è°ƒç”¨çš„æ—¶é—´å¯èƒ½ä¼šè¶Šæ¥è¶Šé•¿ã€‚è¯·å‹¿è®¾ç½®æ­¤å€¼ï¼Œä»¥ä¾¿è°ƒç”¨ä¹‹é—´çš„æ—¶é—´å¤§äºŽæ‰«æå™¨è¶…æ—¶ï¼›å³hbase.client.scanner.timeout.period é»˜è®¤: 2147483647 hbase.client.keyvalue.maxsize æŒ‡å®šKeyValueå®žä¾‹çš„ç»„åˆçš„æœ€å¤§å…è®¸å¤§å°ã€‚è¿™æ˜¯ä¸ºä¿å­˜åœ¨å­˜å‚¨æ–‡ä»¶ä¸­çš„å•ä¸ªæ¡ç›®è®¾ç½®ä¸Šé™ã€‚ç”±äºŽå®ƒä»¬ä¸èƒ½è¢«åˆ†å‰²ï¼Œæ‰€ä»¥æœ‰åŠ©äºŽé¿å…å› ä¸ºæ•°æ®å¤ªå¤§è€Œå¯¼è‡´åœ°åŒºä¸èƒ½è¢«åˆ†å‰²ã€‚å°†æ­¤è®¾ç½®ä¸ºæœ€å¤§åŒºåŸŸå¤§å°çš„ä¸€å°éƒ¨åˆ†ä¼¼ä¹Žæ˜¯æ˜Žæ™ºçš„ã€‚å°†å…¶è®¾ç½®ä¸ºé›¶æˆ–æ›´å°‘å°†ç¦ç”¨æ£€æŸ¥ã€‚ é»˜è®¤: 10485760 hbase.server.keyvalue.maxsize å•ä¸ªå•å…ƒæ ¼çš„æœ€å¤§å…è®¸å¤§å°ï¼ŒåŒ…æ‹¬å€¼å’Œæ‰€æœ‰å…³é”®ç»„ä»¶ã€‚å€¼ä¸º0æˆ–æ›´å°å°†ç¦ç”¨æ£€æŸ¥ã€‚é»˜è®¤å€¼æ˜¯10MBã€‚è¿™æ˜¯ä¿æŠ¤æœåŠ¡å™¨å…å—OOMæƒ…å†µçš„å®‰å…¨è®¾ç½®ã€‚ é»˜è®¤: 10485760 hbase.client.scanner.timeout.period å®¢æˆ·ç«¯æ‰«æç¨‹åºçš„ç§ŸæœŸä»¥æ¯«ç§’ä¸ºå•ä½ã€‚ é»˜è®¤: 60000 hbase.client.localityCheck.threadPoolSize é»˜è®¤: 2 hbase.bulkload.retries.number æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œè¿™æ˜¯åœ¨é¢å¯¹åˆ†è£‚æ“ä½œæ—¶å°è¯•åŽŸå­æ‰¹é‡åŠ è½½çš„æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œ0æ„å‘³ç€æ°¸ä¸æ”¾å¼ƒã€‚ é»˜è®¤: 10 hbase.master.balancer.maxRitPercent å¹³è¡¡æ—¶è½¬æ¢åŒºåŸŸçš„æœ€å¤§ç™¾åˆ†æ¯”ã€‚é»˜è®¤å€¼æ˜¯1.0ã€‚æ‰€ä»¥æ²¡æœ‰å¹³è¡¡å™¨èŠ‚æµã€‚å¦‚æžœå°†æ­¤é…ç½®è®¾ç½®ä¸º0.01ï¼Œåˆ™æ„å‘³ç€åœ¨å¹³è¡¡æ—¶è½¬æ¢ä¸­æœ€å¤šæœ‰1ï¼…çš„åŒºåŸŸã€‚é‚£ä¹ˆå½“å¹³è¡¡æ—¶ï¼Œé›†ç¾¤çš„å¯ç”¨æ€§è‡³å°‘ä¸º99ï¼…ã€‚ é»˜è®¤: 1.0 hbase.balancer.period åŒºåŸŸå¹³è¡¡å™¨åœ¨ä¸»ç«™è¿è¡Œçš„æ—¶é—´æ®µã€‚ é»˜è®¤: 300000 hbase.normalizer.period åŒºåŸŸæ ‡å‡†åŒ–ç¨‹åºåœ¨ä¸»ç¨‹åºä¸­è¿è¡Œçš„æ—¶æ®µã€‚ é»˜è®¤: 300000 hbase.normalizer.min.region.count åŒºåŸŸæ ‡å‡†åŒ–ç¨‹åºæœ€å°æ•°é‡ é»˜è®¤: 3 hbase.regions.slop å¦‚æžœä»»ä½•åŒºåŸŸæœåŠ¡å™¨å…·æœ‰å¹³å‡å€¼+ï¼ˆå¹³å‡*æ–œçŽ‡ï¼‰åŒºåŸŸï¼Œåˆ™é‡æ–°å¹³è¡¡ã€‚StochasticLoadBalancerï¼ˆé»˜è®¤è´Ÿè½½å‡è¡¡å™¨ï¼‰ä¸­æ­¤å‚æ•°çš„é»˜è®¤å€¼ä¸º0.001ï¼Œå…¶ä»–è´Ÿè½½å‡è¡¡å™¨ï¼ˆå³SimpleLoadBalancerï¼‰ä¸­çš„é»˜è®¤å€¼ä¸º0.2ã€‚ é»˜è®¤: 0.001 hbase.server.thread.wakefrequency åœ¨ä¸¤æ¬¡æœç´¢ä¹‹é—´ä¼‘æ¯çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚ç”¨ä½œæ—¥å¿—æ»šç­’ç­‰æœåŠ¡çº¿ç¨‹çš„ç¡çœ é—´éš”ã€‚ é»˜è®¤: 10000 hbase.server.versionfile.writeattempts åœ¨æ”¾å¼ƒä¹‹å‰é‡è¯•å°è¯•å†™å…¥ç‰ˆæœ¬æ–‡ä»¶çš„æ¬¡æ•°ã€‚æ¯ä¸ªå°è¯•éƒ½ç”±hbase.server.thread.wakeé¢‘çŽ‡æ¯«ç§’åˆ†éš”ã€‚ é»˜è®¤: 3 hbase.hregion.memstore.flush.size å¦‚æžœmemstoreçš„å¤§å°è¶…è¿‡æ­¤å­—èŠ‚æ•°ï¼ŒMemstoreå°†è¢«åˆ·æ–°åˆ°ç£ç›˜ã€‚å€¼ç”±æ¯ä¸ªhbase.server.thread.wakefrequencyè¿è¡Œçš„çº¿ç¨‹æ£€æŸ¥ã€‚ é»˜è®¤: 134217728 hbase.hregion.percolumnfamilyflush.size.lower.bound.min å¦‚æžœä½¿ç”¨äº†FlushLargeStoresPolicyï¼Œå¹¶ä¸”æœ‰å¤šä¸ªåˆ—æ—ï¼Œé‚£ä¹ˆæ¯å½“æˆ‘ä»¬è¾¾åˆ°å®Œå…¨çš„memstoreé™åˆ¶æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šæ‰¾å‡ºæ‰€æœ‰memstoreè¶…è¿‡â€œä¸‹é™â€çš„åˆ—æ—ï¼Œåªæœ‰åœ¨ä¿ç•™å…¶ä»–å†…å­˜çš„åŒæ—¶åˆ·æ–°å®ƒä»¬ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œâ€œä¸‹é™â€å°†æ˜¯â€œhbase.hregion.memstore.flush.size/column_family_numberâ€ï¼Œé™¤éžè¯¥å±žæ€§çš„å€¼å¤§äºŽè¯¥å€¼ã€‚å¦‚æžœæ²¡æœ‰ä¸€ä¸ªæ—çš„memstoreå¤§å°è¶…è¿‡ä¸‹é™ï¼Œæ‰€æœ‰çš„memstoreéƒ½å°†è¢«åˆ·æ–°ï¼ˆå°±åƒå¾€å¸¸ä¸€æ ·ï¼‰ã€‚ é»˜è®¤: 16777216 hbase.hregion.preclose.flush.size å¦‚æžœæˆ‘ä»¬å…³é—­æ—¶æŸä¸ªåŒºåŸŸçš„å­˜å‚¨ç©ºé—´å¤§äºŽæˆ–ç­‰äºŽè¿™ä¸ªå¤§å°ï¼Œåˆ™å¯ä»¥è¿è¡Œâ€œé¢„å…ˆåˆ·æ–°ï¼ˆpre-flushï¼‰â€æ¥æ¸…é™¤å­˜å‚¨åŒºï¼Œç„¶åŽå†æ”¾ç½®åŒºåŸŸå…³é—­æ ‡è®°å¹¶ä½¿åŒºåŸŸè„±æœºã€‚å…³é—­æ—¶ï¼Œåœ¨å…³é—­æ ‡å¿—ä¸‹è¿è¡Œåˆ·æ–°ä»¥æ¸…ç©ºå†…å­˜ã€‚åœ¨æ­¤æœŸé—´ï¼Œè¯¥åœ°åŒºå¤„äºŽç¦»çº¿çŠ¶æ€ï¼Œæˆ‘ä»¬æ²¡æœ‰è¿›è¡Œä»»ä½•å†™å…¥ã€‚å¦‚æžœmemstoreå†…å®¹å¾ˆå¤§ï¼Œåˆ™æ­¤åˆ·æ–°å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½å®Œæˆã€‚è¿™ä¸ªé¢„åˆ·æ–°æ˜¯ä¸ºäº†æ¸…ç†å¤§éƒ¨åˆ†çš„memstoreï¼Œç„¶åŽæŠŠå…³é—­æ ‡å¿—æ”¾åˆ°ç¦»çº¿åŒºåŸŸï¼Œè¿™æ ·åœ¨å…³é—­æ ‡å¿—ä¸‹è¿è¡Œçš„åˆ·æ–°æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ã€‚ é»˜è®¤: 5242880 hbase.hregion.memstore.block.multiplier å¦‚æžœmemstoreå…·æœ‰hbase.hregion.memstore.block.multiplierä¹˜ä»¥hbase.hregion.memstore.flush.sizeä¸ªå­—èŠ‚ï¼Œåˆ™é˜»æ­¢æ›´æ–°ã€‚åœ¨æ›´æ–°é€šä¿¡é«˜å³°æœŸé—´æœ‰ç”¨çš„é˜²æ­¢å¤±æŽ§çš„memstoreã€‚å¦‚æžœæ²¡æœ‰ä¸Šé™ï¼Œmemstoreå°±ä¼šå¡«æ»¡ï¼Œå½“åˆ·æ–°ç”Ÿæˆçš„flushæ–‡ä»¶éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½åŽ‹ç¼©æˆ–æ‹†åˆ†ã€‚ é»˜è®¤: 4 hbase.hregion.memstore.mslab.enabled å¯ç”¨MemStore-Localåˆ†é…ç¼“å†²åŒºï¼Œè¯¥åŠŸèƒ½å¯ç”¨äºŽåœ¨ç¹é‡çš„å†™å…¥è´Ÿè½½ä¸‹é˜²æ­¢å †ç¢Žç‰‡ã€‚è¿™å¯ä»¥å‡å°‘åœ¨å¤§å †åœæ­¢å…¨å±€GC pauseçš„é¢‘çŽ‡ã€‚ é»˜è®¤: true hbase.hregion.max.filesize æœ€å¤§HFileå¤§å°ã€‚å¦‚æžœä¸€ä¸ªåœ°åŒºçš„HFilesçš„æ€»å’Œå·²ç»è¶…è¿‡äº†è¿™ä¸ªæ•°å€¼ï¼Œè¿™ä¸ªåœ°åŒºå°±ä¼šè¢«åˆ†æˆä¸¤éƒ¨åˆ†ã€‚ é»˜è®¤: 10737418240 hbase.hregion.majorcompaction ä¸»è¦åŽ‹ç¼©ä¹‹é—´çš„æ—¶é—´ï¼Œä»¥æ¯«ç§’è¡¨ç¤ºã€‚è®¾ç½®ä¸º0å¯ç¦ç”¨åŸºäºŽæ—¶é—´çš„è‡ªåŠ¨é‡è¦åŽ‹ç¼©ã€‚ç”¨æˆ·è¯·æ±‚çš„å’ŒåŸºäºŽå¤§å°çš„ä¸»è¦åŽ‹ç¼©å°†ä»ç„¶è¿è¡Œã€‚è¿™ä¸ªå€¼ä¹˜ä»¥hbase.hregion.majorcompaction.jitterï¼Œä½¿åŽ‹ç¼©åœ¨ä¸€ä¸ªç»™å®šçš„æ—¶é—´çª—å£å†…ç¨å¾®éšæœºçš„æ—¶é—´å¼€å§‹ã€‚é»˜è®¤å€¼æ˜¯7å¤©ï¼Œä»¥æ¯«ç§’è¡¨ç¤ºã€‚å¦‚æžœä¸»è¦åŽ‹ç¼©å¯¼è‡´æ‚¨çš„çŽ¯å¢ƒä¸­æ–­ï¼Œåˆ™å¯ä»¥å°†å®ƒä»¬é…ç½®ä¸ºåœ¨éƒ¨ç½²çš„éžé«˜å³°æ—¶é—´è¿è¡Œï¼Œæˆ–è€…é€šè¿‡å°†æ­¤å‚æ•°è®¾ç½®ä¸º0æ¥ç¦ç”¨åŸºäºŽæ—¶é—´çš„ä¸»è¦åŽ‹ç¼©ï¼Œå¹¶åœ¨cronä½œä¸šæˆ–å¦ä¸€ä¸ªå¤–éƒ¨æœºåˆ¶ã€‚ é»˜è®¤: 604800000 hbase.hregion.majorcompaction.jitter åº”ç”¨äºŽhbase.hregion.majorcompactionçš„ä¹˜æ•°ä¼šå¯¼è‡´åŽ‹ç¼©å‘ç”Ÿåœ¨ç»™å®šçš„æ—¶é—´é‡çš„ä»»ä½•ä¸€ä¾§çš„hbase.hregion.majorcompactionã€‚æ•°å­—è¶Šå°ï¼ŒåŽ‹ç¼©å°†è¶ŠæŽ¥è¿‘hbase.hregion.majorcompactionæ—¶é—´é—´éš”ã€‚ é»˜è®¤: 0.50 hbase.hstore.compactionThreshold å¦‚æžœä»»ä½•ä¸€ä¸ªStoreä¸­å­˜åœ¨è¶…è¿‡æ­¤æ•°é‡çš„StoreFilesï¼ˆæ¯ä¸ªMemStoreåˆ·æ–°ä¸€ä¸ªStoreFileï¼‰ï¼Œåˆ™ä¼šæ‰§è¡ŒåŽ‹ç¼©ä»¥å°†æ‰€æœ‰StoreFileé‡å†™ä¸ºå•ä¸ªStoreFileã€‚è¾ƒå¤§çš„å€¼ä¼šå»¶è¿ŸåŽ‹å®žï¼Œä½†æ˜¯å½“åŽ‹ç¼©å‘ç”Ÿæ—¶ï¼Œéœ€è¦è¾ƒé•¿æ—¶é—´æ‰èƒ½å®Œæˆã€‚ é»˜è®¤: 3 hbase.regionserver.compaction.enabled å¼€å¯/å…³é—­ åŽ‹ç¼© é€šè¿‡è®¾ç½®true/false.ä¹Ÿå¯ä»¥é€šè¿‡ compaction_switch shellå‘½ä»¤ é»˜è®¤: true hbase.hstore.flusher.count åˆ·æ–°çº¿ç¨‹çš„æ•°é‡ã€‚ç”¨æ›´å°‘çš„çº¿ç¨‹ï¼ŒMemStoreåˆ·æ–°å°†æŽ’é˜Ÿã€‚éšç€çº¿ç¨‹æ•°é‡çš„å¢žåŠ ï¼Œåˆ·æ–°å°†å¹¶è¡Œæ‰§è¡Œï¼Œå¢žåŠ äº†HDFSçš„è´Ÿè½½ï¼Œå¹¶å¯èƒ½å¯¼è‡´æ›´å¤šçš„åŽ‹ç¼©ã€‚ é»˜è®¤: 2 hbase.hstore.blockingStoreFiles å¦‚æžœä»»ä½•ä¸€ä¸ªStoreä¸­å­˜åœ¨è¶…è¿‡æ­¤æ•°é‡çš„StoreFilesï¼ˆæ¯æ¬¡åˆ·æ–°MemStoreæ—¶å°†å†™å…¥ä¸€ä¸ªStoreFileï¼‰ï¼Œåˆ™ä¼šé˜»æ­¢è¯¥åŒºåŸŸçš„æ›´æ–°ï¼Œç›´åˆ°åŽ‹ç¼©å®Œæˆæˆ–è¶…å‡ºhbase.hstore.blockingWaitTimeã€‚ é»˜è®¤: 16 hbase.hstore.blockingWaitTime åœ¨è¾¾åˆ°hbase.hstore.blockingStoreFileså®šä¹‰çš„StoreFileé™åˆ¶åŽï¼ŒåŒºåŸŸå°†é˜»æ­¢æ›´æ–°çš„æ—¶é—´ã€‚ç»è¿‡è¿™æ®µæ—¶é—´åŽï¼Œå³ä½¿åŽ‹ç¼©å°šæœªå®Œæˆï¼Œè¯¥åœ°åŒºä¹Ÿå°†åœæ­¢é˜»æ­¢æ›´æ–°ã€‚ é»˜è®¤: 90000 hbase.hstore.compaction.min åŽ‹ç¼©å¯ä»¥è¿è¡Œä¹‹å‰ï¼Œå¿…é¡»æœ‰ç¬¦åˆè¿›è¡ŒåŽ‹ç¼©æ¡ä»¶çš„æœ€å°StoreFilesæ•°é‡ã€‚è°ƒæ•´hbase.hstore.compaction.minçš„ç›®æ ‡æ˜¯é¿å…ä½¿ç”¨å¤ªå¤šçš„å°åž‹StoreFilesæ¥åŽ‹ç¼©ã€‚å¦‚æžœå°†æ­¤å€¼è®¾ç½®ä¸º2ï¼Œåˆ™æ¯æ¬¡åœ¨Storeä¸­æœ‰ä¸¤ä¸ªStoreFilesæ—¶ä¼šå¯¼è‡´è½»å¾®çš„åŽ‹ç¼©ï¼Œè¿™å¯èƒ½ä¸åˆé€‚ã€‚å¦‚æžœå°†æ­¤å€¼è®¾ç½®å¾—å¤ªé«˜ï¼Œåˆ™éœ€è¦ç›¸åº”è°ƒæ•´æ‰€æœ‰å…¶ä»–å€¼ã€‚å¯¹äºŽå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼æ˜¯é€‚å½“çš„ã€‚åœ¨ä»¥å‰çš„HBaseç‰ˆæœ¬ä¸­ï¼Œå‚æ•°hbase.hstore.compaction.minè¢«å‘½åä¸ºhbase.hstore.compactionThresholdã€‚ é»˜è®¤: 3 hbase.hstore.compaction.max æ— è®ºç¬¦åˆæ¡ä»¶çš„StoreFilesçš„æ•°é‡å¦‚ä½•ï¼Œå°†ä¸ºå•ä¸ªæ¬¡è¦åŽ‹ç¼©é€‰æ‹©çš„StoreFilesçš„æœ€å¤§æ•°é‡ã€‚æœ‰æ•ˆåœ°ï¼Œhbase.hstore.compaction.maxçš„å€¼æŽ§åˆ¶å•ä¸ªåŽ‹ç¼©å®Œæˆæ‰€éœ€çš„æ—¶é—´é•¿åº¦ã€‚å°†å…¶è®¾ç½®å¾—æ›´å¤§æ„å‘³ç€æ›´å¤šçš„StoreFilesåŒ…å«åœ¨åŽ‹ç¼©ä¸­ã€‚å¯¹äºŽå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼æ˜¯é€‚å½“çš„ã€‚ é»˜è®¤: 10 hbase.hstore.compaction.min.size StoreFileï¼ˆæˆ–ä½¿ç”¨ExploringCompactionPolicyæ—¶é€‰æ‹©çš„StoreFilesï¼‰å°äºŽæ­¤å¤§å°å°†å§‹ç»ˆæœ‰èµ„æ ¼è¿›è¡Œè½»å¾®åŽ‹ç¼©ã€‚è¿™ä¸ªå¤§å°æˆ–æ›´å¤§çš„HFileé€šè¿‡hbase.hstore.compaction.ratioè¿›è¡Œè®¡ç®—ï¼Œä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦åˆæ ¼ã€‚ç”±äºŽæ­¤é™åˆ¶è¡¨ç¤ºæ‰€æœ‰StoreFilesçš„â€œè‡ªåŠ¨åŒ…å«â€é™åˆ¶å°äºŽæ­¤å€¼ï¼Œå› æ­¤åœ¨éœ€è¦åˆ·æ–°å¤šä¸ªStoreFileï¼ˆ1-2 MBèŒƒå›´å†…çš„è®¸å¤šStoreFilesï¼‰çš„å†™å…¥ç¹é‡çŽ¯å¢ƒä¸­å¯èƒ½éœ€è¦é™ä½Žæ­¤å€¼ï¼Œå› ä¸ºæ¯ä¸ªStoreFileéƒ½å°†ä½œä¸ºç›®æ ‡ï¼Œå¯¹äºŽåŽ‹ç¼©è€Œè¨€ï¼Œæ‰€å¾—åˆ°çš„StoreFileå¯èƒ½ä»ç„¶åœ¨æœ€å°å°ºå¯¸ä¸‹ï¼Œå¹¶ä¸”éœ€è¦è¿›ä¸€æ­¥çš„åŽ‹ç¼©ã€‚å¦‚æžœæ­¤å‚æ•°é™ä½Žï¼Œæ¯”çŽ‡æ£€æŸ¥ä¼šæ›´å¿«åœ°è§¦å‘ã€‚è¿™è§£å†³äº†åœ¨æ—©æœŸç‰ˆæœ¬çš„HBaseä¸­çœ‹åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸å†éœ€è¦æ›´æ”¹æ­¤å‚æ•°ã€‚ é»˜è®¤: 134217728 hbase.hstore.compaction.max.size StoreFileï¼ˆæˆ–ä½¿ç”¨ExploringCompactionPolicyæ—¶é€‰æ‹©çš„StoreFilesï¼‰å¤§äºŽæ­¤å¤§å°å°†è¢«æŽ’é™¤åœ¨åŽ‹ç¼©ä¹‹å¤–ã€‚æé«˜hbase.hstore.compaction.max.sizeçš„æ•ˆæžœè¾ƒå°‘ï¼Œè¾ƒå¤§çš„StoreFilesä¸ç»å¸¸åŽ‹ç¼©ã€‚å¦‚æžœä½ è§‰å¾—åŽ‹ç¼©è¿‡äºŽé¢‘ç¹è€Œæ²¡æœ‰å¤ªå¤šå¥½å¤„ï¼Œä½ å¯ä»¥å°è¯•æé«˜è¿™ä¸ªä»·å€¼ã€‚é»˜è®¤å€¼ï¼šLONG.MAX_VALUEçš„å€¼ï¼Œä»¥å­—èŠ‚è¡¨ç¤ºã€‚ é»˜è®¤: 9223372036854775807 hbase.hstore.compaction.ratio å¯¹äºŽè½»å¾®åŽ‹ç¼©ï¼Œæ­¤æ¯”çŽ‡ç”¨äºŽç¡®å®šå¤§äºŽhbase.hstore.compaction.min.sizeçš„ç»™å®šStoreFileæ˜¯å¦é€‚åˆåŽ‹ç¼©ã€‚å…¶ä½œç”¨æ˜¯é™åˆ¶å¤§åž‹StoreFilesçš„åŽ‹ç¼©ã€‚hbase.hstore.compaction.ratioçš„å€¼ä»¥æµ®ç‚¹å°æ•°è¡¨ç¤ºã€‚ä¸€ä¸ªå¾ˆå¤§çš„æ¯”ä¾‹ï¼Œå¦‚10ï¼Œå°†äº§ç”Ÿä¸€ä¸ªå¤§åž‹çš„StoreFileã€‚ç›¸åï¼Œä½Žå€¼ï¼ˆå¦‚0.25ï¼‰ä¼šäº§ç”Ÿç±»ä¼¼äºŽBigTableåŽ‹ç¼©ç®—æ³•çš„è¡Œä¸ºï¼Œäº§ç”Ÿå››ä¸ªStoreFilesã€‚æŽ¨èä½¿ç”¨1.0åˆ°1.4ä¹‹é—´çš„ä¸­ç­‰æ•°å€¼ã€‚åœ¨è°ƒæ•´æ­¤å€¼æ—¶ï¼Œæ‚¨è¦å¹³è¡¡å†™å…¥æˆæœ¬ä¸Žè¯»å–æˆæœ¬ã€‚æé«˜ä»·å€¼ï¼ˆå¦‚1.4ï¼‰ä¼šæœ‰æ›´å¤šçš„å†™å…¥æˆæœ¬ï¼Œå› ä¸ºä½ ä¼šåŽ‹ç¼©æ›´å¤§çš„StoreFilesã€‚ç„¶è€Œï¼Œåœ¨è¯»å–æœŸé—´ï¼ŒHBaseå°†éœ€è¦é€šè¿‡æ›´å°‘çš„StoreFilesæ¥å®Œæˆè¯»å–ã€‚å¦‚æžœæ‚¨ä¸èƒ½åˆ©ç”¨Bloomè¿‡æ»¤å™¨ï¼Œè¯·è€ƒè™‘ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚å¦åˆ™ï¼Œå¯ä»¥å°†æ­¤å€¼é™ä½Žåˆ°1.0ä»¥é™ä½Žå†™å…¥çš„èƒŒæ™¯æˆæœ¬ï¼Œå¹¶ä½¿ç”¨Bloomè¿‡æ»¤å™¨æ¥æŽ§åˆ¶è¯»å–æœŸé—´è§¦æ‘¸çš„StoreFilesçš„æ•°é‡ã€‚å¯¹äºŽå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼æ˜¯é€‚å½“çš„ã€‚ é»˜è®¤: 1.2F hbase.hstore.compaction.ratio.offpeak å…è®¸æ‚¨è®¾ç½®ä¸åŒï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ›´ç§¯æžï¼‰çš„æ¯”çŽ‡ï¼Œä»¥ç¡®å®šåœ¨éžé«˜å³°æ—¶æ®µæ˜¯å¦åŒ…å«è¾ƒå¤§çš„StoreFilesã€‚ä»¥ä¸Žhbase.hstore.compaction.ratioç›¸åŒçš„æ–¹å¼å·¥ä½œã€‚ä»…å½“hbase.offpeak.start.hourå’Œhbase.offpeak.end.hourä¹Ÿè¢«å¯ç”¨æ—¶æ‰é€‚ç”¨ã€‚ é»˜è®¤: 5.0F hbase.hstore.time.to.purge.deletes ä½¿ç”¨æœªæ¥çš„æ—¶é—´æˆ³å»¶è¿Ÿæ¸…é™¤æ ‡è®°çš„æ—¶é—´ã€‚å¦‚æžœæœªè®¾ç½®ï¼Œæˆ–è®¾ç½®ä¸º0ï¼Œåˆ™å°†åœ¨ä¸‹ä¸€ä¸ªä¸»è¦åŽ‹ç¼©è¿‡ç¨‹ä¸­æ¸…é™¤æ‰€æœ‰åˆ é™¤æ ‡è®°ï¼ˆåŒ…æ‹¬å…·æœ‰æœªæ¥æ—¶é—´æˆ³çš„æ ‡è®°ï¼‰ã€‚å¦åˆ™ï¼Œå°†ä¿ç•™ä¸€ä¸ªåˆ é™¤æ ‡è®°ï¼Œç›´åˆ°åœ¨æ ‡è®°çš„æ—¶é—´æˆ³ä¹‹åŽå‘ç”Ÿçš„ä¸»è¦åŽ‹ç¼©åŠ ä¸Šæ­¤è®¾ç½®çš„å€¼ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚ é»˜è®¤: 0 hbase.offpeak.start.hour éžé«˜å³°æ—¶æ®µå¼€å§‹ï¼Œä»¥0åˆ°23ä¹‹é—´çš„æ•´æ•°è¡¨ç¤ºï¼ŒåŒ…æ‹¬0å’Œ23ä¹‹é—´çš„æ•´æ•°ã€‚è®¾ç½®ä¸º-1ä»¥ç¦ç”¨éžé«˜å³°ã€‚ é»˜è®¤: -1 hbase.offpeak.end.hour éžé«˜å³°æ—¶æ®µç»“æŸï¼Œä»¥0åˆ°23ä¹‹é—´çš„æ•´æ•°è¡¨ç¤ºï¼ŒåŒ…æ‹¬0å’Œ23ä¹‹é—´çš„æ•´æ•°ã€‚è®¾ç½®ä¸º-1ä»¥ç¦ç”¨éžé«˜å³°ã€‚ é»˜è®¤: -1 hbase.regionserver.thread.compaction.throttle æœ‰ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹æ± ç”¨äºŽåŽ‹ç¼©ï¼Œä¸€ä¸ªç”¨äºŽå¤§åž‹åŽ‹ç¼©ï¼Œå¦ä¸€ä¸ªç”¨äºŽå°åž‹åŽ‹ç¼©ã€‚è¿™æœ‰åŠ©äºŽä¿æŒç²¾ç®€è¡¨ï¼ˆå¦‚hbaseï¼šmetaï¼‰çš„å¿«é€ŸåŽ‹ç¼©ã€‚å¦‚æžœåŽ‹ç¼©åº¦å¤§äºŽæ­¤é˜ˆå€¼ï¼Œåˆ™ä¼šè¿›å…¥å¤§åž‹åŽ‹ç¼©æ± ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼æ˜¯é€‚å½“çš„ã€‚é»˜è®¤å€¼ï¼š2 x hbase.hstore.compaction.max x hbase.hregion.memstore.flush.sizeï¼ˆé»˜è®¤ä¸º128MBï¼‰ã€‚å€¼å­—æ®µå‡å®šhbase.hregion.memstore.flush.sizeçš„å€¼ä¸Žé»˜è®¤å€¼ç›¸åŒã€‚ é»˜è®¤: 2684354560 hbase.regionserver.majorcompaction.pagecache.drop æŒ‡å®šæ˜¯å¦é€šè¿‡ä¸»è¦åŽ‹ç¼©åˆ é™¤è¯»å–/å†™å…¥ç³»ç»Ÿé¡µé¢ç¼“å­˜çš„é¡µé¢ã€‚å°†å…¶è®¾ç½®ä¸ºtrueæœ‰åŠ©äºŽé˜²æ­¢é‡å¤§åŽ‹ç¼©æ±¡æŸ“é¡µé¢ç¼“å­˜ï¼Œè¿™å‡ ä¹Žæ€»æ˜¯è¦æ±‚çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºŽå…·æœ‰ä½Ž/ä¸­ç­‰å†…å­˜ä¸Žå­˜å‚¨çŽ‡çš„ç¾¤é›†ã€‚ é»˜è®¤: true hbase.regionserver.minorcompaction.pagecache.drop æŒ‡å®šæ˜¯å¦é€šè¿‡è¾ƒå°çš„åŽ‹ç¼©åˆ é™¤è¯»å–/å†™å…¥ç³»ç»Ÿé¡µé¢ç¼“å­˜çš„é¡µé¢ã€‚å°†å…¶è®¾ç½®ä¸ºtrueæœ‰åŠ©äºŽé˜²æ­¢è½»å¾®åŽ‹ç¼©æ±¡æŸ“é¡µé¢ç¼“å­˜ï¼Œè¿™å¯¹äºŽå†…å­˜ä¸Žå­˜å‚¨æ¯”çŽ‡è¾ƒä½Žçš„ç¾¤é›†æˆ–å†™å…¥è¾ƒé‡çš„ç¾¤é›†æ˜¯æœ€æœ‰åˆ©çš„ã€‚å½“å¤§éƒ¨åˆ†è¯»å–ä½äºŽæœ€è¿‘å†™å…¥çš„æ•°æ®ä¸Šæ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨ä¸­ç­‰åˆ°ä½Žå†™å…¥å·¥ä½œè´Ÿè½½ä¸‹å°†å…¶è®¾ç½®ä¸ºfalseã€‚ é»˜è®¤: true hbase.hstore.compaction.kv.max åˆ·æ–°æˆ–åŽ‹ç¼©æ—¶è¦è¯»å–å¹¶æ‰¹é‡å†™å…¥çš„KeyValuesçš„æœ€å¤§æ•°é‡ã€‚å¦‚æžœä½ æœ‰è¾ƒå¤§çš„KeyValuesï¼Œå¹¶ä¸”Out Of Memory Exceptionsæœ‰é—®é¢˜ï¼Œè¯·å°†å®ƒè®¾ç½®å¾—æ›´ä½Žã€‚ é»˜è®¤: 10 hbase.storescanner.parallel.seek.enable åœ¨StoreScannerä¸­å¯ç”¨StoreFileScannerå¹¶è¡Œæœç´¢åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½å¯ä»¥åœ¨ç‰¹æ®Šæƒ…å†µä¸‹å‡å°‘å“åº”å»¶è¿Ÿã€‚ é»˜è®¤: false hbase.storescanner.parallel.seek.threads å¦‚æžœå¯ç”¨äº†å¹¶è¡ŒæŸ¥æ‰¾åŠŸèƒ½ï¼Œåˆ™é»˜è®¤çº¿ç¨‹æ± å¤§å°ã€‚ é»˜è®¤: 10 hfile.block.cache.size StoreFileä½¿ç”¨çš„æœ€å¤§å †ï¼ˆ-Xmxè®¾ç½®ï¼‰åˆ†é…ç»™å—ç¼“å­˜çš„ç™¾åˆ†æ¯”ã€‚é»˜è®¤å€¼ä¸º0.4æ„å‘³ç€åˆ†é…40ï¼…ã€‚è®¾ç½®ä¸º0ç¦ç”¨ï¼Œä½†ä¸å»ºè®®ï¼›æ‚¨è‡³å°‘éœ€è¦è¶³å¤Ÿçš„ç¼“å­˜æ¥ä¿å­˜å­˜å‚¨æ–‡ä»¶ç´¢å¼•ã€‚ é»˜è®¤: 0.4 hfile.block.index.cacheonwrite è¿™å…è®¸åœ¨ç´¢å¼•è¢«å†™å…¥æ—¶å°†éžæ ¹å¤šçº§ç´¢å¼•å—æ”¾å…¥å—é«˜é€Ÿç¼“å­˜ä¸­ã€‚ é»˜è®¤: false hfile.index.block.max.size å½“å¤šçº§å—ç´¢å¼•ä¸­å¶çº§ï¼Œä¸­çº§æˆ–æ ¹çº§ç´¢å¼•å—çš„å¤§å°å¢žé•¿åˆ°è¿™ä¸ªå¤§å°æ—¶ï¼Œå—å°†è¢«å†™å‡ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°å—ã€‚ é»˜è®¤: 131072 hbase.bucketcache.ioengine åœ¨å“ªé‡Œå­˜å‚¨bucketcacheçš„å†…å®¹ã€‚å…¶ä¸­ä¹‹ä¸€ï¼šoffheapã€æ–‡ä»¶æˆ–mmapã€‚å¦‚æžœæœ‰æ–‡ä»¶ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸ºfile(s)ï¼šPATH_TO_FILEã€‚mmapæ„å‘³ç€å†…å®¹å°†åœ¨ä¸€ä¸ªmmapedæ–‡ä»¶ä¸­ã€‚ä½¿ç”¨mmapï¼šPATH_TO_FILEã€‚è¯¦è§: http://hbase.apache.org/book.html#offheap.blockcache é»˜è®¤: none hbase.bucketcache.size EITHERè¡¨ç¤ºç¼“å­˜çš„æ€»å †å†…å­˜å¤§å°çš„ç™¾åˆ†æ¯”ï¼ˆå¦‚æžœå°äºŽ1.0ï¼‰ï¼Œåˆ™è¡¨ç¤ºBucketCacheçš„æ€»å®¹é‡ï¼ˆå…†å­—èŠ‚ï¼‰ã€‚é»˜è®¤å€¼ï¼š0.0 é»˜è®¤: none hbase.bucketcache.bucket.sizes ç”¨äºŽbucketcacheçš„å­˜å‚¨åŒºå¤§å°çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚å¯ä»¥æ˜¯å¤šç§å°ºå¯¸ã€‚åˆ—å‡ºä»Žæœ€å°åˆ°æœ€å¤§çš„å—å¤§å°ã€‚æ‚¨ä½¿ç”¨çš„å¤§å°å–å†³äºŽæ‚¨çš„æ•°æ®è®¿é—®æ¨¡å¼ã€‚å¿…é¡»æ˜¯256çš„å€æ•°ï¼Œå¦åˆ™å½“ä½ ä»Žç¼“å­˜ä¸­è¯»å–æ—¶ï¼Œä½ ä¼šé‡åˆ°â€œjava.io.IOExceptionï¼šInvalid HFile block magicâ€ã€‚å¦‚æžœæ‚¨åœ¨æ­¤å¤„æœªæŒ‡å®šä»»ä½•å€¼ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥é€‰å–ä»£ç ä¸­è®¾ç½®çš„é»˜è®¤bucketsizesã€‚ é»˜è®¤: none hfile.format.version ç”¨äºŽæ–°æ–‡ä»¶çš„HFileæ ¼å¼ç‰ˆæœ¬ã€‚ç‰ˆæœ¬3æ·»åŠ äº†å¯¹hfilesä¸­æ ‡ç­¾çš„æ”¯æŒï¼ˆè¯·å‚é˜… http://hbase.apache.org/book.html#hbase.tagsï¼‰ã€‚å¦è¯·å‚é˜…é…ç½®â€œhbase.replication.rpc.codecâ€ã€‚ é»˜è®¤: 3 hfile.block.bloom.cacheonwrite ä¸ºå¤åˆBloomè¿‡æ»¤å™¨çš„å†…è”å—å¯ç”¨å†™å…¥ç¼“å­˜ã€‚ é»˜è®¤: false io.storefile.bloom.block.size å¤åˆBloomè¿‡æ»¤å™¨çš„å•ä¸ªå—ï¼ˆâ€œchunkâ€ï¼‰çš„å­—èŠ‚å¤§å°ã€‚è¿™ä¸ªå¤§å°æ˜¯è¿‘ä¼¼çš„ï¼Œå› ä¸ºBloomå—åªèƒ½è¢«æ’å…¥åˆ°æ•°æ®å—çš„è¾¹ç•Œå¤„ï¼Œè€Œæ¯ä¸ªæ•°æ®å—çš„keyçš„ä¸ªæ•°ä¹Ÿä¸ç›¸åŒã€‚ é»˜è®¤: 131072 hbase.rs.cacheblocksonwrite å—å®ŒæˆåŽï¼Œæ˜¯å¦åº”å°†HFileå—æ·»åŠ åˆ°å—ç¼“å­˜ä¸­ã€‚ é»˜è®¤: false hbase.rpc.timeout è¿™æ˜¯ä¸ºäº†è®©RPCå±‚å®šä¹‰ä¸€ä¸ªè¿œç¨‹è°ƒç”¨è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰HBaseå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºè¶…æ—¶ã€‚å®ƒä½¿ç”¨pingæ¥æ£€æŸ¥è¿žæŽ¥ï¼Œä½†æœ€ç»ˆä¼šæŠ›å‡ºTimeoutExceptionã€‚ é»˜è®¤: 60000 hbase.client.operation.timeout æ“ä½œè¶…æ—¶æ˜¯ä¸€ä¸ªé¡¶çº§çš„é™åˆ¶ï¼ˆæ¯«ç§’ï¼‰ï¼Œç¡®ä¿è¡¨æ ¼ä¸­çš„é˜»æ­¢æ“ä½œä¸ä¼šè¢«é˜»æ­¢è¶…è¿‡è¿™ä¸ªé™åˆ¶ã€‚åœ¨æ¯ä¸ªæ“ä½œä¸­ï¼Œå¦‚æžœrpcè¯·æ±‚ç”±äºŽè¶…æ—¶æˆ–å…¶ä»–åŽŸå› è€Œå¤±è´¥ï¼Œåˆ™å°†é‡è¯•ç›´åˆ°æˆåŠŸæˆ–æŠ›å‡ºRetriesExhaustedExceptionã€‚ä½†æ˜¯ï¼Œå¦‚æžœæ€»çš„é˜»å¡žæ—¶é—´åœ¨é‡è¯•è€—å°½ä¹‹å‰è¾¾åˆ°æ“ä½œè¶…æ—¶ï¼Œåˆ™ä¼šæå‰ä¸­æ–­å¹¶æŠ›å‡ºSocketTimeoutExceptionã€‚ é»˜è®¤: 1200000 hbase.cells.scanned.per.heartbeat.check åœ¨heartbeatæ£€æŸ¥ä¹‹é—´æ‰«æçš„å•å…ƒæ ¼çš„æ•°é‡ã€‚åœ¨æ‰«æå¤„ç†è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿheartbeatæ£€æŸ¥ï¼Œä»¥ç¡®å®šæœåŠ¡å™¨æ˜¯å¦åº”è¯¥åœæ­¢æ‰«æï¼Œä»¥ä¾¿å°†heartbeatæ¶ˆæ¯å‘é€å›žå®¢æˆ·ç«¯ã€‚heartbeatæ¶ˆæ¯ç”¨äºŽåœ¨é•¿æ—¶é—´è¿è¡Œæ‰«ææœŸé—´ä¿æŒå®¢æˆ·ç«¯ - æœåŠ¡å™¨è¿žæŽ¥çš„æ´»åŠ¨ã€‚è¾ƒå°çš„å€¼æ„å‘³ç€heartbeatæ£€æŸ¥å°†æ›´é¢‘ç¹åœ°å‘ç”Ÿï¼Œå› æ­¤å°†å¯¹æ‰«æçš„æ‰§è¡Œæ—¶é—´æä¾›æ›´ä¸¥æ ¼çš„ç•Œé™ã€‚æ•°å€¼è¶Šå¤§æ„å‘³ç€heartbeatæ£€æŸ¥å‘ç”Ÿçš„é¢‘çŽ‡è¶Šä½Žã€‚ é»˜è®¤: 10000 hbase.rpc.shortoperation.timeout è¿™æ˜¯â€œhbase.rpc.timeoutâ€çš„å¦ä¸€ä¸ªç‰ˆæœ¬ã€‚å¯¹äºŽé›†ç¾¤å†…çš„RPCæ“ä½œï¼Œæˆ‘ä»¬ä¾é æ­¤é…ç½®ä¸ºçŸ­æ“ä½œè®¾ç½®çŸ­è¶…æ—¶é™åˆ¶ã€‚ä¾‹å¦‚ï¼ŒåŒºåŸŸæœåŠ¡å™¨è¯•å›¾å‘æ´»åŠ¨ä¸»æœåŠ¡å™¨æŠ¥å‘Šçš„çŸ­rpcè¶…æ—¶å¯ä»¥æ›´å¿«åœ°è¿›è¡Œä¸»ç«™æ•…éšœè½¬ç§»è¿‡ç¨‹ã€‚ é»˜è®¤: 10000 hbase.ipc.client.tcpnodelay åœ¨rpcå¥—æŽ¥å­—è¿žæŽ¥ä¸Šè®¾ç½®æ²¡æœ‰å»¶è¿Ÿã€‚è¯¦è§: http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Socket.html#getTcpNoDelay() é»˜è®¤: true hbase.regionserver.hostname è¿™ä¸ªé…ç½®é€‚ç”¨äºŽå¯¹HBaseå¾ˆç†Ÿæ‚‰çš„äººï¼šé™¤éžä½ çœŸçš„çŸ¥é“ä½ åœ¨åšä»€ä¹ˆï¼Œå¦åˆ™ä¸è¦è®¾å®šå®ƒçš„ä»·å€¼ã€‚å½“è®¾ç½®ä¸ºéžç©ºå€¼æ—¶ï¼Œè¿™è¡¨ç¤ºåº•å±‚æœåŠ¡å™¨çš„ï¼ˆé¢å‘å¤–éƒ¨ï¼‰ä¸»æœºåã€‚ è¯¦è§: https://issues.apache.org/jira/browse/HBASE-12954 é»˜è®¤: none hbase.regionserver.hostname.disable.master.reversedns è¿™ä¸ªé…ç½®é€‚ç”¨äºŽå¯¹HBaseå¾ˆç†Ÿç»ƒçš„äººï¼šé™¤éžä½ çœŸçš„çŸ¥é“ä½ åœ¨åšä»€ä¹ˆï¼Œå¦åˆ™ä¸è¦è®¾å®šå®ƒçš„ä»·å€¼ã€‚å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œregionserverå°†ä½¿ç”¨å½“å‰èŠ‚ç‚¹ä¸»æœºåä½œä¸ºæœåŠ¡å™¨åç§°ï¼ŒHMasterå°†è·³è¿‡åå‘DNSæŸ¥æ‰¾å¹¶ä½¿ç”¨regionserverå‘é€çš„ä¸»æœºåã€‚è¯·æ³¨æ„ï¼Œæ­¤é…ç½®å’Œhbase.regionserver.hostnameæ˜¯äº’æ–¥çš„ã€‚è¯¦è§: https://issues.apache.org/jira/browse/HBASE-18226 é»˜è®¤: false hbase.master.keytab.file ç”¨äºŽç™»å½•é…ç½®çš„HMasteræœåŠ¡å™¨ä¸»ä½“çš„kerberoså¯†é’¥è¡¨æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚ é»˜è®¤: none hbase.master.kerberos.principal Ex. â€œhbase/_HOST@EXAMPLE.COMâ€åº”è¯¥ç”¨æ¥è¿è¡ŒHMasterè¿›ç¨‹çš„Kerberosä¸»ä½“åç§°ã€‚ä¸»ä½“åç§°çš„æ ¼å¼åº”ä¸ºï¼šuser/hostname @ DOMAINã€‚å¦‚æžœä½¿ç”¨â€œ_HOSTâ€ä½œä¸ºä¸»æœºåéƒ¨åˆ†ï¼Œå®ƒå°†è¢«æ›¿æ¢ä¸ºæ­£åœ¨è¿è¡Œçš„å®žä¾‹çš„å®žé™…ä¸»æœºåã€‚ é»˜è®¤: none hbase.regionserver.keytab.file ç”¨äºŽç™»å½•é…ç½®çš„HRegionServeræœåŠ¡å™¨ä¸»ä½“çš„kerberoså¯†é’¥è¡¨æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚ é»˜è®¤: none hbase.regionserver.kerberos.principal Ex. â€œhbase/_HOST@EXAMPLE.COMâ€åº”è¯¥ç”¨æ¥è¿è¡ŒHRegionServerè¿›ç¨‹çš„kerberosä¸»ä½“åç§°ã€‚ä¸»ä½“åç§°çš„æ ¼å¼åº”ä¸ºï¼šuser/hostname @ DOMAINã€‚å¦‚æžœä½¿ç”¨â€œ_HOSTâ€ä½œä¸ºä¸»æœºåéƒ¨åˆ†ï¼Œå®ƒå°†è¢«æ›¿æ¢ä¸ºæ­£åœ¨è¿è¡Œçš„å®žä¾‹çš„å®žé™…ä¸»æœºåã€‚æ­¤ä¸»ä½“çš„æ¡ç›®å¿…é¡»å­˜åœ¨äºŽhbase.regionserver.keytab.fileä¸­æŒ‡å®šçš„æ–‡ä»¶ä¸­ é»˜è®¤: none hadoop.policy.file RPCæœåŠ¡å™¨ä½¿ç”¨ç­–ç•¥é…ç½®æ–‡ä»¶å¯¹å®¢æˆ·ç«¯è¯·æ±‚è¿›è¡ŒæŽˆæƒå†³ç­–ã€‚ä»…åœ¨å¯ç”¨HBaseå®‰å…¨æ€§æ—¶ä½¿ç”¨ã€‚ é»˜è®¤: hbase-policy.xml hbase.superuser ç”¨æˆ·æˆ–ç»„åˆ—è¡¨ï¼ˆä»¥é€—å·åˆ†éš”ï¼‰ï¼Œå…è®¸åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ‹¥æœ‰å®Œå…¨æƒé™ï¼ˆä¸ç®¡å­˜å‚¨çš„ACLï¼‰ã€‚ä»…åœ¨å¯ç”¨HBaseå®‰å…¨æ€§æ—¶ä½¿ç”¨ã€‚ é»˜è®¤: none hbase.auth.key.update.interval æœåŠ¡å™¨ä¸­è®¤è¯ä»¤ç‰Œçš„ä¸»å¯†é’¥çš„æ›´æ–°é—´éš”ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚ä»…åœ¨å¯ç”¨HBaseå®‰å…¨æ€§æ—¶ä½¿ç”¨ã€‚ é»˜è®¤: 86400000 hbase.auth.token.max.lifetime éªŒè¯ä»¤ç‰Œè¿‡æœŸçš„æœ€é•¿ç”Ÿå­˜æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚ä»…åœ¨å¯ç”¨HBaseå®‰å…¨æ€§æ—¶ä½¿ç”¨ã€‚ é»˜è®¤: 604800000 hbase.ipc.client.fallback-to-simple-auth-allowed å½“å®¢æˆ·ç«¯é…ç½®ä¸ºå°è¯•å®‰å…¨è¿žæŽ¥ï¼Œä½†å°è¯•è¿žæŽ¥åˆ°ä¸å®‰å…¨çš„æœåŠ¡å™¨æ—¶ï¼Œè¯¥æœåŠ¡å™¨å¯èƒ½ä¼šæŒ‡ç¤ºå®¢æˆ·ç«¯åˆ‡æ¢åˆ°SASL SIMPLEï¼ˆä¸å®‰å…¨ï¼‰èº«ä»½éªŒè¯ã€‚æ­¤è®¾ç½®æŽ§åˆ¶å®¢æˆ·ç«¯æ˜¯å¦æŽ¥å—æ¥è‡ªæœåŠ¡å™¨çš„æ­¤æŒ‡ä»¤ã€‚å¦‚æžœä¸ºfalseï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œåˆ™å®¢æˆ·ç«¯å°†ä¸å…è®¸å›žé€€åˆ°SIMPLEèº«ä»½éªŒè¯ï¼Œå¹¶ä¼šä¸­æ­¢è¿žæŽ¥ã€‚ é»˜è®¤: false hbase.ipc.server.fallback-to-simple-auth-allowed å½“æœåŠ¡å™¨é…ç½®ä¸ºéœ€è¦å®‰å…¨è¿žæŽ¥æ—¶ï¼Œå®ƒå°†æ‹’ç»æ¥è‡ªä½¿ç”¨SASL SIMPLEï¼ˆä¸å®‰å…¨ï¼‰èº«ä»½éªŒè¯çš„å®¢æˆ·ç«¯çš„è¿žæŽ¥å°è¯•ã€‚æ­¤è®¾ç½®å…è®¸å®‰å…¨æœåŠ¡å™¨åœ¨å®¢æˆ·ç«¯è¯·æ±‚æ—¶æŽ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„SASL SIMPLEè¿žæŽ¥ã€‚å¦‚æžœä¸ºfalseï¼ˆé»˜è®¤å€¼ï¼‰ï¼ŒæœåŠ¡å™¨å°†ä¸å…è®¸å›žé€€åˆ°SIMPLEèº«ä»½éªŒè¯ï¼Œå¹¶å°†æ‹’ç»è¿žæŽ¥ã€‚è­¦å‘Šï¼šåªæœ‰åœ¨å°†å®¢æˆ·ç«¯è½¬æ¢ä¸ºå®‰å…¨èº«ä»½éªŒè¯æ—¶ï¼Œæ‰åº”å°†æ­¤è®¾ç½®ç”¨ä½œä¸´æ—¶æŽªæ–½ã€‚å¿…é¡»ç¦æ­¢å®ƒæ‰èƒ½è¿›è¡Œå®‰å…¨æ“ä½œã€‚ é»˜è®¤: false hbase.display.keys å½“å®ƒè¢«è®¾ç½®ä¸ºtrueæ—¶ï¼ŒwebUIç­‰å°†æ˜¾ç¤ºæ‰€æœ‰å¼€å§‹/ç»“æŸé”®ä½œä¸ºè¡¨æ ¼ç»†èŠ‚ï¼ŒåŒºåŸŸåç§°ç­‰çš„ä¸€éƒ¨åˆ†ã€‚å½“è¿™è¢«è®¾ç½®ä¸ºå‡æ—¶ï¼Œé”®è¢«éšè—ã€‚ é»˜è®¤: true hbase.coprocessor.enabled å¯ç”¨æˆ–ç¦ç”¨åå¤„ç†å™¨åŠ è½½ã€‚å¦‚æžœâ€™falseâ€™ï¼ˆç¦ç”¨ï¼‰ï¼Œä»»ä½•å…¶ä»–åå¤„ç†å™¨ç›¸å…³çš„é…ç½®å°†è¢«å¿½ç•¥ã€‚ é»˜è®¤: true hbase.coprocessor.user.enabled å¯ç”¨æˆ–ç¦ç”¨ç”¨æˆ·ï¼ˆåˆåè¡¨ï¼‰åå¤„ç†å™¨åŠ è½½ã€‚å¦‚æžœâ€™falseâ€™ï¼ˆç¦ç”¨ï¼‰ï¼Œåˆ™è¡¨æ ¼æè¿°ç¬¦ä¸­çš„ä»»ä½•è¡¨åå¤„ç†å™¨å±žæ€§å°†è¢«å¿½ç•¥ã€‚å¦‚æžœâ€œhbase.coprocessor.enabledâ€ä¸ºâ€œfalseâ€ï¼Œåˆ™æ­¤è®¾ç½®æ— æ•ˆã€‚ é»˜è®¤: true hbase.coprocessor.region.classes åœ¨æ‰€æœ‰è¡¨ä¸Šé»˜è®¤åŠ è½½çš„åŒºåŸŸè§‚å¯Ÿè€…æˆ–ç«¯ç‚¹åå¤„ç†å™¨çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚å¯¹äºŽä»»ä½•è¦†ç›–åå¤„ç†å™¨æ–¹æ³•ï¼Œè¿™äº›ç±»å°†æŒ‰é¡ºåºè°ƒç”¨ã€‚åœ¨å®žçŽ°è‡ªå·±çš„åå¤„ç†å™¨ä¹‹åŽï¼Œå°†å…¶æ·»åŠ åˆ°HBaseçš„ç±»è·¯å¾„ä¸­ï¼Œå¹¶åœ¨æ­¤å¤„æ·»åŠ å®Œå…¨é™å®šçš„ç±»åç§°ã€‚åå¤„ç†å™¨ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®HTableDescriptoræˆ–è€…HBase shellæ¥æŒ‰éœ€åŠ è½½ã€‚ é»˜è®¤: none hbase.coprocessor.master.classes åœ¨æ´»åŠ¨çš„HMasterè¿›ç¨‹ä¸­é»˜è®¤åŠ è½½çš„org.apache.hadoop.hbase.coprocessor.MasterObserveråå¤„ç†å™¨çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚å¯¹äºŽä»»ä½•å®žæ–½çš„åå¤„ç†å™¨æ–¹æ³•ï¼Œåˆ—å‡ºçš„ç±»å°†æŒ‰é¡ºåºè°ƒç”¨ã€‚åœ¨å®žçŽ°ä½ è‡ªå·±çš„MasterObserverä¹‹åŽï¼ŒæŠŠå®ƒæ”¾åœ¨HBaseçš„ç±»è·¯å¾„ä¸­ï¼Œå¹¶åœ¨è¿™é‡Œæ·»åŠ å®Œå…¨é™å®šçš„ç±»åç§°ã€‚ é»˜è®¤: none hbase.coprocessor.abortonerror å¦‚æžœåå¤„ç†å™¨åŠ è½½å¤±è´¥ï¼Œåˆå§‹åŒ–å¤±è´¥æˆ–å¼•å‘æ„å¤–çš„Throwableå¯¹è±¡ï¼Œåˆ™è®¾ç½®ä¸ºtrueå°†å¯¼è‡´æ‰˜ç®¡æœåŠ¡å™¨ï¼ˆä¸»æœåŠ¡å™¨æˆ–åŒºåŸŸæœåŠ¡å™¨ï¼‰ä¸­æ­¢ã€‚å°†å…¶è®¾ç½®ä¸ºfalseå°†å…è®¸æœåŠ¡å™¨ç»§ç»­æ‰§è¡Œï¼Œä½†æ‰€æ¶‰åŠçš„åå¤„ç†å™¨çš„ç³»ç»ŸèŒƒå›´çŠ¶æ€å°†å˜å¾—ä¸ä¸€è‡´ï¼Œå› ä¸ºå®ƒåªèƒ½åœ¨ä¸€éƒ¨åˆ†æœåŠ¡å™¨ä¸­æ­£ç¡®æ‰§è¡Œï¼Œæ‰€ä»¥è¿™å¯¹äºŽä»…è°ƒè¯•æ˜¯éžå¸¸æœ‰ç”¨çš„ã€‚ é»˜è®¤: true hbase.rest.port HBase RESTæœåŠ¡å™¨çš„ç«¯å£ã€‚ é»˜è®¤: 8080 hbase.rest.readonly å®šä¹‰RESTæœåŠ¡å™¨å°†å¯åŠ¨çš„æ¨¡å¼ã€‚å¯èƒ½çš„å€¼æœ‰ï¼šfalseï¼šæ­¤æ—¶ï¼Œæ‰€æœ‰çš„HTTPæ–¹æ³•éƒ½æ˜¯å…è®¸çš„ - GET / PUT / POST / DELETEã€‚trueï¼šæ­¤æ—¶åªå…è®¸GETæ–¹æ³•ã€‚ é»˜è®¤: false hbase.rest.threads.max RESTæœåŠ¡å™¨çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚æ± ä¸­çš„çº¿ç¨‹è¢«é‡ç”¨æ¥å¤„ç†RESTè¯·æ±‚ã€‚è¿™å°†æŽ§åˆ¶åŒæ—¶å¤„ç†çš„æœ€å¤§è¯·æ±‚æ•°ã€‚è¿™å¯èƒ½æœ‰åŠ©äºŽæŽ§åˆ¶RESTæœåŠ¡å™¨ä½¿ç”¨çš„å†…å­˜ä»¥é¿å…OOMé—®é¢˜ã€‚å¦‚æžœçº¿ç¨‹æ± å·²æ»¡ï¼Œåˆ™ä¼ å…¥çš„è¯·æ±‚å°†æŽ’é˜Ÿå¹¶ç­‰å¾…ä¸€äº›ç©ºé—²çš„çº¿ç¨‹ã€‚ é»˜è®¤: 100 hbase.rest.threads.min RESTæœåŠ¡å™¨çº¿ç¨‹æ± çš„æœ€å°çº¿ç¨‹æ•°ã€‚çº¿ç¨‹æ± æ€»æ˜¯è‡³å°‘æœ‰è¿™ä¹ˆå¤šçš„çº¿ç¨‹ï¼Œæ‰€ä»¥RESTæœåŠ¡å™¨å·²ç»å‡†å¤‡å¥½ä¸ºä¼ å…¥çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚ é»˜è®¤: 2 hbase.rest.support.proxyuser å¯ç”¨è¿è¡ŒRESTæœåŠ¡å™¨ä»¥æ”¯æŒä»£ç†ç”¨æˆ·æ¨¡å¼ã€‚ é»˜è®¤: false hbase.defaults.for.version.skip è®¾ç½®ä¸ºtrueå¯ä»¥è·³è¿‡â€œhbase.defaults.for.versionâ€æ£€æŸ¥ã€‚å°†å…¶è®¾ç½®ä¸ºtrueå¯ä»¥åœ¨é™¤mavenç”Ÿæˆçš„å¦ä¸€ä¾§ä¹‹å¤–çš„ä¸Šä¸‹æ–‡ä¸­æœ‰ç”¨ï¼›å³è¿è¡Œåœ¨IDEä¸­ã€‚ä½ éœ€è¦è®¾ç½®è¿™ä¸ªå¸ƒå°”å€¼ä¸ºtrueä»¥é¿å…çœ‹åˆ°RuntimeExceptionï¼šâ€œhbase-default.xmlæ–‡ä»¶ä¼¼ä¹Žæ˜¯HBaseï¼ˆ\ $ {hbase.version}ï¼‰çš„æ—§ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬æ˜¯XXX-SNAPSHOTâ€ é»˜è®¤: false hbase.table.lock.enable è®¾ç½®ä¸ºtrueä»¥å¯ç”¨é”å®šzookeeperä¸­çš„è¡¨ä»¥è¿›è¡Œæ¨¡å¼æ›´æ”¹æ“ä½œã€‚ä»Žä¸»æœåŠ¡å™¨é”å®šè¡¨å¯ä»¥é˜²æ­¢å¹¶å‘çš„æ¨¡å¼ä¿®æ”¹æŸåè¡¨çŠ¶æ€ã€‚ é»˜è®¤: true hbase.table.max.rowsize å•è¡Œå­—èŠ‚çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ä¸º1 Gbï¼‰ï¼Œç”¨äºŽGet-ingæˆ–Scanâ€™ningï¼Œä¸è®¾ç½®è¡Œå†…æ‰«ææ ‡å¿—ã€‚å¦‚æžœè¡Œå¤§å°è¶…è¿‡æ­¤é™åˆ¶RowTooBigExceptionè¢«æŠ›å‡ºåˆ°å®¢æˆ·ç«¯ã€‚ é»˜è®¤: 1073741824 hbase.thrift.minWorkerThreads çº¿ç¨‹æ± çš„â€œæ ¸å¿ƒå¤§å°â€ã€‚åœ¨æ¯ä¸ªè¿žæŽ¥ä¸Šåˆ›å»ºæ–°çº¿ç¨‹ï¼Œç›´åˆ°åˆ›å»ºäº†è®¸å¤šçº¿ç¨‹ã€‚ é»˜è®¤: 16 hbase.thrift.maxWorkerThreads çº¿ç¨‹æ± çš„æœ€å¤§å¤§å°ã€‚å¾…å¤„ç†çš„è¯·æ±‚é˜Ÿåˆ—æº¢å‡ºæ—¶ï¼Œå°†åˆ›å»ºæ–°çº¿ç¨‹ï¼Œç›´åˆ°å…¶å·ç è¾¾åˆ°æ­¤æ•°å­—ã€‚ä¹‹åŽï¼ŒæœåŠ¡å™¨å¼€å§‹ä¸¢å¼ƒè¿žæŽ¥ã€‚ é»˜è®¤: 1000 hbase.thrift.maxQueuedRequests åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æœ€å¤§ç­‰å¾…èŠ‚ç‚¹è¿žæŽ¥æ•°ã€‚å¦‚æžœæ± ä¸­æ²¡æœ‰ç©ºé—²çº¿ç¨‹ï¼Œåˆ™æœåŠ¡å™¨å°†è¯·æ±‚æŽ’é˜Ÿã€‚åªæœ‰å½“é˜Ÿåˆ—æº¢å‡ºæ—¶ï¼Œæ‰ä¼šæ·»åŠ æ–°çš„çº¿ç¨‹ï¼Œç›´åˆ°hbase.thrift.maxQueuedRequestsçº¿ç¨‹ã€‚ é»˜è®¤: 1000 hbase.regionserver.thrift.framed åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨Thrift TFramedTransportã€‚å¯¹äºŽthriftæœåŠ¡å™¨ï¼Œè¿™æ˜¯æŽ¨èçš„ä¼ è¾“æ–¹å¼ï¼Œéœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡Œç±»ä¼¼çš„è®¾ç½®ã€‚å°†å…¶æ›´æ”¹ä¸ºfalseå°†é€‰æ‹©é»˜è®¤ä¼ è¾“ï¼Œå½“ç”±äºŽTHRIFT-601å‘å‡ºæ ¼å¼é”™è¯¯çš„è¯·æ±‚æ—¶ï¼Œå®¹æ˜“å—åˆ°DoSçš„å½±å“ã€‚ é»˜è®¤: false hbase.regionserver.thrift.framed.max_frame_size_in_mb ä½¿ç”¨æˆå¸§ä¼ è¾“æ—¶çš„é»˜è®¤å¸§å¤§å°ï¼Œä»¥MBä¸ºå•ä½ã€‚ é»˜è®¤: 2 hbase.regionserver.thrift.compact ä½¿ç”¨Thrift TCompactProtocoläºŒè¿›åˆ¶åºåˆ—åŒ–åè®®ã€‚ é»˜è®¤: false hbase.rootdir.perms å®‰å…¨ï¼ˆkerberosï¼‰å®‰è£…ç¨‹åºä¸­æ ¹æ•°æ®å­ç›®å½•çš„FS Permissionsã€‚ä¸»æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œä¼šä½¿ç”¨æ­¤æƒé™åˆ›å»ºrootdirï¼Œå¦‚æžœä¸åŒ¹é…åˆ™è®¾ç½®æƒé™ã€‚ é»˜è®¤: 700 hbase.wal.dir.perms å®‰å…¨ï¼ˆkerberosï¼‰å®‰è£…ç¨‹åºä¸­çš„æ ¹WALç›®å½•çš„FS Permissionsã€‚å½“ä¸»æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå®ƒå°†ä½¿ç”¨æ­¤æƒé™åˆ›å»ºWALç›®å½•ï¼Œå¦‚æžœä¸åŒ¹é…åˆ™è®¾ç½®æƒé™ã€‚ é»˜è®¤: 700 hbase.data.umask.enable å¦‚æžœå¯ç”¨ï¼Œåˆ™å¯ç”¨è¯¥æ–‡ä»¶æƒé™åº”åˆ†é…ç»™åŒºåŸŸæœåŠ¡å™¨å†™å…¥çš„æ–‡ä»¶ é»˜è®¤: false hbase.data.umask å½“hbase.data.umask.enableä¸ºtrueæ—¶ï¼Œåº”è¯¥ç”¨æ¥å†™å…¥æ•°æ®æ–‡ä»¶çš„æ–‡ä»¶æƒé™ é»˜è®¤: 000 hbase.snapshot.enabled è®¾ç½®ä¸ºtrueä»¥å…è®¸taken/restored/clonedã€‚ é»˜è®¤: true hbase.snapshot.restore.take.failsafe.snapshot è®¾ç½®ä¸ºtrueä»¥åœ¨è¿˜åŽŸæ“ä½œä¹‹å‰å¾—åˆ°å¿«ç…§ã€‚æ‰€å¾—åˆ°çš„å¿«ç…§å°†åœ¨å¤±è´¥çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä»¥æ¢å¤ä»¥å‰çš„çŠ¶æ€ã€‚åœ¨è¿˜åŽŸæ“ä½œç»“æŸæ—¶ï¼Œæ­¤å¿«ç…§å°†è¢«åˆ é™¤ é»˜è®¤: true hbase.snapshot.restore.failsafe.name restoreæ“ä½œæ‰€é‡‡ç”¨çš„æ•…éšœå®‰å…¨å¿«ç…§çš„åç§°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨{snapshot.name}ï¼Œ{table.name}å’Œ{restore.timestamp}å˜é‡æ ¹æ®è¦æ¢å¤çš„å†…å®¹åˆ›å»ºä¸€ä¸ªåç§°ã€‚ é»˜è®¤: hbase-failsafe-{snapshot.name}-{restore.timestamp} hbase.snapshot.working.dir å¿«ç…§è¿‡ç¨‹å°†å‘ç”Ÿçš„ä½ç½®ã€‚å·²å®Œæˆå¿«ç…§çš„ä½ç½®ä¸ä¼šæ›´æ”¹ï¼Œä½†å¿«ç…§è¿›ç¨‹å‘ç”Ÿçš„ä¸´æ—¶ç›®å½•å°†è®¾ç½®ä¸ºæ­¤ä½ç½®ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œä¸æ˜¯æ ¹ç›®å½•ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…HBase-21098 é»˜è®¤: none hbase.server.compactchecker.interval.multiplier è¿™ä¸ªæ•°å­—å†³å®šäº†æˆ‘ä»¬æ‰«æçš„é¢‘çŽ‡ï¼Œçœ‹æ˜¯å¦éœ€è¦åŽ‹ç¼©ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒåŽ‹ç¼©æ˜¯åœ¨æŸäº›äº‹ä»¶ï¼ˆå¦‚memstore flushï¼‰ä¹‹åŽå®Œæˆçš„ï¼Œä½†æ˜¯å¦‚æžœåŒºåŸŸåœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å¤§é‡çš„å†™å…¥ï¼Œæˆ–è€…ç”±äºŽä¸åŒçš„åŽ‹ç¼©ç­–ç•¥ï¼Œåˆ™å¯èƒ½éœ€è¦å®šæœŸæ£€æŸ¥ã€‚æ£€æŸ¥ä¹‹é—´çš„æ—¶é—´é—´éš”æ˜¯hbase.server.compactchecker.interval.multiplierä¹˜ä»¥hbase.server.thread.wakefrequencyã€‚ é»˜è®¤: 1000 hbase.lease.recovery.timeout åœ¨æ”¾å¼ƒä¹‹å‰ï¼Œæˆ‘ä»¬ç­‰å¾…dfs leaseçš„æ€»æ¢å¤æ—¶é—´ã€‚ é»˜è®¤: 900000 hbase.lease.recovery.dfs.timeout dfsæ¢å¤leaseè°ƒç”¨ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚åº”è¯¥å¤§äºŽnamenodeä¸ºdatanodeçš„ä¸€éƒ¨åˆ†å‘å‡ºå—æ¢å¤å‘½ä»¤æ‰€éœ€çš„æ—¶é—´æ€»å’Œï¼›dfs.heartbeat.intervalå’Œä¸»æ•°æ®èŠ‚ç‚¹æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œåœ¨æ­»æ•°æ®èŠ‚ç‚¹ä¸Šæ‰§è¡Œæ•°æ®å—æ¢å¤åˆ°è¶…æ—¶ï¼›é€šå¸¸æ˜¯dfs.client.socket-timeoutã€‚è¯¦è§:HBASE-8389 é»˜è®¤: 64000 hbase.column.max.version æ–°çš„åˆ—æ—æè¿°ç¬¦å°†ä½¿ç”¨æ­¤å€¼ä½œä¸ºè¦ä¿ç•™çš„é»˜è®¤ç‰ˆæœ¬æ•°ã€‚ é»˜è®¤: 1 dfs.client.read.shortcircuit å¦‚æžœè®¾ç½®ä¸ºtrueï¼Œåˆ™æ­¤é…ç½®å‚æ•°å¯ç”¨short-circuitæœ¬åœ°è¯»å–ã€‚ é»˜è®¤: false dfs.domain.socket.path å¦‚æžœå°†dfs.client.read.shortcircuitè®¾ç½®ä¸ºtrueï¼Œåˆ™è¿™æ˜¯ä¸€ä¸ªUNIXåŸŸå¥—æŽ¥å­—çš„è·¯å¾„ï¼Œè¯¥å¥—æŽ¥å­—å°†ç”¨äºŽDataNodeä¸Žæœ¬åœ°HDFSå®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡ã€‚å¦‚æžœè¯¥è·¯å¾„ä¸­å­˜åœ¨å­—ç¬¦ä¸²â€œ_PORTâ€ï¼Œåˆ™ä¼šè¢«DataNodeçš„TCPç«¯å£æ›¿æ¢ã€‚è¯·æ³¨æ„æ‰˜ç®¡å…±äº«åŸŸå¥—æŽ¥å­—çš„ç›®å½•çš„æƒé™ã€‚ é»˜è®¤: none hbase.dfs.client.read.shortcircuit.buffer.size å¦‚æžœæœªè®¾ç½®DFSClienté…ç½®dfs.client.read.shortcircuit.buffer.sizeï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ­¤å¤„é…ç½®çš„å†…å®¹ä½œä¸ºshort-circuitè¯»å–é»˜è®¤ç›´æŽ¥å­—èŠ‚ç¼“å†²åŒºå¤§å°ã€‚DFSClientæœ¬æœºé»˜è®¤å€¼æ˜¯1MBï¼›HBaseä¿æŒHDFSæ–‡ä»¶çš„æ‰“å¼€çŠ¶æ€ï¼Œæ‰€ä»¥æ–‡ä»¶å—*1MBçš„æ•°é‡å¾ˆå¿«å°±å¼€å§‹ç´¯ç§¯èµ·æ¥ï¼Œå¹¶ç”±äºŽç›´æŽ¥å†…å­˜ä¸è¶³è€Œå¨èƒOOMEã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»Žé»˜è®¤è®¾ç½®ä¸‹æ¥ã€‚ä½¿å®ƒå¤§äºŽåœ¨HColumnDescriptorä¸­è®¾ç½®çš„é»˜è®¤hbaseå—å¤§å°ï¼Œé€šå¸¸æ˜¯64kã€‚ é»˜è®¤: 131072 hbase.regionserver.checksum.verify å¦‚æžœè®¾ç½®ä¸ºtrueï¼ˆé»˜è®¤ï¼‰ï¼ŒHBaseå°†éªŒè¯hfileå—çš„æ ¡éªŒå’Œã€‚å½“HBaseå†™å‡ºhfilesæ—¶ï¼ŒHBaseå°†æ ¡éªŒå’Œå†™å…¥æ•°æ®ã€‚HDFSï¼ˆåœ¨æ­¤å†™å…¥æ—¶ï¼‰å°†æ ¡éªŒå’Œå†™å…¥å•ç‹¬çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯éœ€è¦é¢å¤–æŸ¥æ‰¾çš„æ•°æ®æ–‡ä»¶ã€‚è®¾ç½®è¿™ä¸ªæ ‡å¿—å¯ä»¥èŠ‚çœä¸€äº›I/Oã€‚è®¾ç½®æ­¤æ ‡å¿—æ—¶ï¼ŒHDFSçš„æ ¡éªŒå’ŒéªŒè¯å°†åœ¨hfileæµå†…éƒ¨ç¦ç”¨ã€‚å¦‚æžœhbase-checksuméªŒè¯å¤±è´¥ï¼Œæˆ‘ä»¬å°†åˆ‡æ¢å›žä½¿ç”¨HDFSæ ¡éªŒå’Œï¼ˆæ‰€ä»¥ä¸è¦ç¦ç”¨HDFSæ ¡éªŒï¼é™¤æ­¤åŠŸèƒ½å¤–ï¼Œè¿˜é€‚ç”¨äºŽhfilesï¼Œè€Œä¸é€‚ç”¨äºŽWALï¼‰ã€‚å¦‚æžœè¿™ä¸ªå‚æ•°è®¾ç½®ä¸ºfalseï¼Œé‚£ä¹ˆhbaseå°†ä¸ä¼šéªŒè¯ä»»ä½•æ ¡éªŒå’Œï¼Œè€Œæ˜¯å–å†³äºŽHDFSå®¢æˆ·ç«¯ä¸­çš„æ ¡éªŒå’ŒéªŒè¯ã€‚ é»˜è®¤: true hbase.hstore.bytes.per.checksum æ–°åˆ›å»ºçš„æ ¡éªŒå’Œå—ä¸­çš„å­—èŠ‚æ•°ï¼Œç”¨äºŽhfileå—ä¸­çš„HBaseçº§æ ¡éªŒå’Œã€‚ é»˜è®¤: 16384 hbase.hstore.checksum.algorithm ç”¨äºŽè®¡ç®—æ ¡éªŒå’Œçš„ç®—æ³•çš„åç§°ã€‚å¯èƒ½çš„å€¼æ˜¯NULLï¼ŒCRC32ï¼ŒCRC32Cã€‚ é»˜è®¤: CRC32C hbase.client.scanner.max.result.size è°ƒç”¨æ‰«æå™¨çš„ä¸‹ä¸€ä¸ªæ–¹æ³•æ—¶è¿”å›žçš„æœ€å¤§å­—èŠ‚æ•°ã€‚è¯·æ³¨æ„ï¼Œå½“å•ä¸ªè¡Œå¤§äºŽæ­¤é™åˆ¶æ—¶ï¼Œè¡Œä»ç„¶å®Œå…¨è¿”å›žã€‚é»˜è®¤å€¼æ˜¯2MBï¼Œè¿™å¯¹äºŽ1geç½‘ç»œæ˜¯æœ‰å¥½å¤„çš„ã€‚æœ‰äº†æ›´å¿«å’Œ/æˆ–æ›´é«˜çš„å»¶è¿Ÿç½‘ç»œï¼Œè¿™ä¸ªå€¼åº”è¯¥å¢žåŠ ã€‚ é»˜è®¤: 2097152 hbase.server.scanner.max.result.size è°ƒç”¨æ‰«æå™¨çš„ä¸‹ä¸€ä¸ªæ–¹æ³•æ—¶è¿”å›žçš„æœ€å¤§å­—èŠ‚æ•°ã€‚è¯·æ³¨æ„ï¼Œå½“å•ä¸ªè¡Œå¤§äºŽæ­¤é™åˆ¶æ—¶ï¼Œè¡Œä»ç„¶å®Œå…¨è¿”å›žã€‚é»˜è®¤å€¼æ˜¯100MBã€‚è¿™æ˜¯ä¿æŠ¤æœåŠ¡å™¨å…å—OOMæƒ…å†µçš„å®‰å…¨è®¾ç½®ã€‚ é»˜è®¤: 104857600 hbase.status.published è¯¥è®¾ç½®æ¿€æ´»äº†ä¸»æŽ§å‘å¸ƒåŒºåŸŸæœåŠ¡å™¨çš„çŠ¶æ€ã€‚å½“ä¸€å°åŒºåŸŸæœåŠ¡å™¨æ­»äº¡å¹¶å¼€å§‹æ¢å¤æ—¶ï¼Œä¸»æœåŠ¡å™¨ä¼šå°†è¿™äº›ä¿¡æ¯æŽ¨é€åˆ°å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºï¼Œè®©ä»–ä»¬ç«‹å³åˆ‡æ–­è¿žæŽ¥ï¼Œè€Œä¸æ˜¯ç­‰å¾…è¶…æ—¶ã€‚ é»˜è®¤: false hbase.status.publisher.class ç”¨multicastæ¶ˆæ¯å®žçŽ°çŠ¶æ€å‘å¸ƒã€‚ é»˜è®¤: org.apache.hadoop.hbase.master.ClusterStatusPublisher$MulticastPublisher hbase.status.listener.class ä½¿ç”¨multicastæ¶ˆæ¯å®žçŽ°çŠ¶æ€ç›‘å¬å™¨ã€‚ é»˜è®¤: org.apache.hadoop.hbase.client.ClusterStatusListener$MulticastListener hbase.status.multicast.address.ip ç”¨äºŽmulticaseçŠ¶æ€å‘å¸ƒçš„multicaseåœ°å€ã€‚ é»˜è®¤: 226.1.1.3 hbase.status.multicast.address.port ç”¨äºŽmulticaseçŠ¶æ€å‘å¸ƒçš„multicaseç«¯å£ã€‚ é»˜è®¤: 16100 hbase.dynamic.jars.dir è‡ªå®šä¹‰è¿‡æ»¤å™¨JARçš„ç›®å½•å¯ä»¥ç”±åŒºåŸŸæœåŠ¡å™¨åŠ¨æ€åŠ è½½ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨ã€‚ä½†æ˜¯ï¼Œå·²åŠ è½½çš„è¿‡æ»¤å™¨/åå¤„ç†å™¨ç±»å°†ä¸ä¼šè¢«å¸è½½ã€‚ä¸é€‚ç”¨äºŽåå¤„ç†å™¨ã€‚è¯¦è§:HBASE-1936 é»˜è®¤: ${hbase.rootdir}/lib hbase.security.authentication æŽ§åˆ¶æ˜¯å¦ä¸ºHBaseå¯ç”¨å®‰å…¨èº«ä»½éªŒè¯ã€‚å¯èƒ½çš„å€¼æ˜¯â€œsimpleâ€ï¼ˆä¸è®¤è¯ï¼‰å’Œâ€œKerberosâ€ã€‚ é»˜è®¤: simple hbase.rest.filter.classes ç”¨äºŽRESTæœåŠ¡çš„Servletè¿‡æ»¤å™¨ã€‚ é»˜è®¤: org.apache.hadoop.hbase.rest.filter.GzipFilter hbase.master.loadbalancer.class ç”¨äºŽåœ¨æœŸé—´å‘ç”Ÿæ—¶æ‰§è¡ŒåŒºåŸŸå¹³è¡¡çš„ç±»ã€‚å®ƒå°†DefaultLoadBalanceræ›¿æ¢ä¸ºé»˜è®¤å€¼ï¼ˆå› ä¸ºå®ƒè¢«é‡å‘½åä¸ºSimpleLoadBalancer ï¼‰ã€‚è¯¦è§: http://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/master/balancer/StochasticLoadBalancer.html é»˜è®¤: org.apache.hadoop.hbase.master.balancer.StochasticLoadBalancer hbase.master.loadbalance.bytable å¹³è¡¡å™¨è¿è¡Œæ—¶çš„å› å­è¡¨åç§°ã€‚é»˜è®¤ï¼šfalseã€‚ é»˜è®¤: false hbase.master.normalizer.class ç”¨äºŽæ‰§è¡ŒæœŸé—´å‘ç”Ÿæ—¶çš„åŒºåŸŸæ ‡å‡†åŒ–çš„ç±»ã€‚è¯¦è§: http://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/master/normalizer/SimpleRegionNormalizer.html é»˜è®¤: org.apache.hadoop.hbase.master.normalizer.SimpleRegionNormalizer hbase.rest.csrf.enabled è®¾ç½®ä¸ºtrueä»¥å¯ç”¨è·¨ç«™è¯·æ±‚ä¼ªé€ çš„ä¿æŠ¤ã€‚ é»˜è®¤: false hbase.rest-csrf.browser-useragents-regex é€šè¿‡å°†hbase.rest.csrf.enabledè®¾ç½®ä¸ºtrueæ¥å¯ç”¨ä¸ºRESTæœåŠ¡å™¨ï¼Œé’ˆå¯¹è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰çš„é˜²æŠ¤æ—¶ï¼Œç”¨äºŽåŒ¹é…HTTPè¯·æ±‚çš„User-Agentæ ‡å¤´çš„æ­£åˆ™è¡¨è¾¾å¼çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚å¦‚æžœä¼ å…¥çš„ç”¨æˆ·ä»£ç†ä¸Žè¿™äº›æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ä»»ä½•ä¸€ä¸ªç›¸åŒ¹é…ï¼Œåˆ™è®¤ä¸ºè¯¥è¯·æ±‚è¢«æµè§ˆå™¨å‘é€ï¼Œå› æ­¤CSRFé¢„é˜²è¢«å¼ºåˆ¶æ‰§è¡Œã€‚å¦‚æžœè¯·æ±‚çš„ç”¨æˆ·ä»£ç†ä¸Žè¿™äº›æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½ä¸åŒ¹é…ï¼Œåˆ™è¯¥è¯·æ±‚è¢«è®¤ä¸ºæ˜¯ç”±é™¤æµè§ˆå™¨ä»¥å¤–çš„å…¶ä»–ä¸œè¥¿å‘é€çš„ï¼Œä¾‹å¦‚è„šæœ¬è‡ªåŠ¨åŒ–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒCSRFä¸æ˜¯ä¸€ä¸ªæ½œåœ¨çš„æ”»å‡»å‘é‡ï¼Œæ‰€ä»¥é¢„é˜²æ²¡æœ‰è¢«æ‰§è¡Œã€‚è¿™æœ‰åŠ©äºŽå®žçŽ°ä¸Žå°šæœªæ›´æ–°ä»¥å‘é€CSRFé¢„é˜²æŠ¥å¤´çš„çŽ°æœ‰è‡ªåŠ¨åŒ–çš„å‘åŽå…¼å®¹æ€§ã€‚ é»˜è®¤: &lt;sup&gt;Mozilla.**,**&lt;/sup&gt;**Opera.** hbase.security.exec.permission.checks å¦‚æžœå¯ç”¨æ­¤è®¾ç½®ï¼Œå¹¶ä¸”åŸºäºŽACLçš„è®¿é—®æŽ§åˆ¶å¤„äºŽæ´»åŠ¨çŠ¶æ€ï¼ˆAccessControlleråå¤„ç†å™¨ä½œä¸ºç³»ç»Ÿåå¤„ç†å™¨å®‰è£…ï¼Œæˆ–ä½œä¸ºè¡¨åå¤„ç†å™¨å®‰è£…åœ¨è¡¨ä¸Šï¼‰ï¼Œåˆ™å¿…é¡»æŽˆäºˆæ‰€æœ‰ç›¸å…³ç”¨æˆ·EXECæƒé™ï¼ˆå¦‚æžœéœ€è¦æ‰§è¡Œåå¤„ç†å™¨ç«¯ç‚¹è°ƒç”¨ã€‚åƒä»»ä½•å…¶ä»–æƒé™ä¸€æ ·ï¼ŒEXECæƒé™å¯ä»¥åœ¨å…¨å±€èŒƒå›´å†…æŽˆäºˆç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥æŽˆäºˆæ¯ä¸ªè¡¨æˆ–å‘½åç©ºé—´çš„ç”¨æˆ·ã€‚æœ‰å…³åå¤„ç†å™¨ç«¯ç‚¹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…HBaseè”æœºæ‰‹å†Œçš„åå¤„ç†å™¨éƒ¨åˆ†ã€‚æœ‰å…³ä½¿ç”¨AccessControlleræŽˆäºˆæˆ–æ’¤æ¶ˆæƒé™çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…HBaseè”æœºæ‰‹å†Œçš„å®‰å…¨æ€§éƒ¨åˆ†ã€‚ é»˜è®¤: false hbase.procedure.regionserver.classes åœ¨æ´»åŠ¨HRegionServerè¿›ç¨‹ä¸­é»˜è®¤åŠ è½½çš„org.apache.hadoop.hbase.procedure.RegionServerProcedureManagerè¿‡ç¨‹ç®¡ç†å™¨çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆinit / start / stopï¼‰å°†ç”±æ´»åŠ¨çš„HRegionServerè¿›ç¨‹è°ƒç”¨ï¼Œä»¥æ‰§è¡Œç‰¹å®šçš„å…¨å±€barrieredè¿‡ç¨‹ã€‚åœ¨å®žçŽ°ä½ è‡ªå·±çš„RegionServerProcedureManagerä¹‹åŽï¼ŒæŠŠå®ƒæ”¾åœ¨HBaseçš„ç±»è·¯å¾„ä¸­ï¼Œå¹¶åœ¨è¿™é‡Œæ·»åŠ å®Œå…¨é™å®šçš„ç±»åç§°ã€‚ é»˜è®¤: none hbase.procedure.master.classes åœ¨æ´»åŠ¨HMasterè¿›ç¨‹ä¸­é»˜è®¤åŠ è½½çš„org.apache.hadoop.hbase.procedure.MasterProcedureManagerè¿‡ç¨‹ç®¡ç†å™¨çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚ç¨‹åºé€šè¿‡å…¶ç­¾åè¿›è¡Œæ ‡è¯†ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç­¾åå’Œå³æ—¶åç§°æ¥è§¦å‘å…¨å±€ç¨‹åºçš„æ‰§è¡Œã€‚åœ¨å®žçŽ°ä½ è‡ªå·±çš„MasterProcedureManagerä¹‹åŽï¼ŒæŠŠå®ƒæ”¾åœ¨HBaseçš„ç±»è·¯å¾„ä¸­ï¼Œå¹¶åœ¨è¿™é‡Œæ·»åŠ å®Œå…¨é™å®šçš„ç±»åç§°ã€‚ é»˜è®¤: none hbase.coordinated.state.manager.class åè°ƒçŠ¶æ€ç®¡ç†å‘˜çš„å®Œå…¨åˆæ ¼çš„åå­—ã€‚ é»˜è®¤: org.apache.hadoop.hbase.coordination.ZkCoordinatedStateManager hbase.regionserver.storefile.refresh.period ç”¨äºŽåˆ·æ–°è¾…åŠ©åŒºåŸŸçš„å­˜å‚¨æ–‡ä»¶çš„æ—¶é—´æ®µï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚0æ„å‘³ç€æ­¤åŠŸèƒ½è¢«ç¦ç”¨ã€‚è¾…åŠ©åŒºåŸŸåœ¨æ¬¡è¦åŒºåŸŸåˆ·æ–°åŒºåŸŸä¸­çš„æ–‡ä»¶åˆ—è¡¨æ—¶ä¼šçœ‹åˆ°æ¥è‡ªä¸»è¦æ–‡ä»¶çš„æ–°æ–‡ä»¶ï¼ˆæ¥è‡ªåˆ·æ–°å’ŒåŽ‹ç¼©ï¼‰ï¼ˆæ²¡æœ‰é€šçŸ¥æœºåˆ¶ï¼‰ã€‚ä½†æ˜¯é¢‘ç¹åˆ·æ–°å¯èƒ½ä¼šå¯¼è‡´é¢å¤–çš„NamenodeåŽ‹åŠ›ã€‚å¦‚æžœæ–‡ä»¶çš„åˆ·æ–°æ—¶é—´ä¸èƒ½è¶…è¿‡HFile TTLï¼ˆhbase.master.hfilecleaner.ttlï¼‰ï¼Œè¯·æ±‚å°†è¢«æ‹’ç»ã€‚æ­¤è®¾ç½®è¿˜å»ºè®®å°†HFile TTLé…ç½®ä¸ºè¾ƒå¤§çš„å€¼ã€‚ é»˜è®¤: 0 hbase.region.replica.replication.enabled æ˜¯å¦å¯ç”¨å¯¹è¾…åŠ©åŒºåŸŸå‰¯æœ¬çš„å¼‚æ­¥WALå¤åˆ¶ã€‚å¦‚æžœå¯ç”¨äº†æ­¤åŠŸèƒ½ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªåä¸ºâ€œregion_replica_replicationâ€çš„å¤åˆ¶å¯¹ç­‰é¡¹ï¼Œå®ƒå°†å¯¹æ—¥å¿—è¿›è¡Œå°¾éšå¤„ç†ï¼Œå¹¶å°†çªå˜å¤åˆ¶åˆ°åŒºåŸŸå¤åˆ¶å¤§äºŽ1çš„åŒºåŸŸå¤åˆ¶çš„åŒºåŸŸå¤åˆ¶ã€‚å¦‚æžœå¯ç”¨ä¸€æ¬¡ï¼Œç¦ç”¨æ­¤å¤åˆ¶ä¹Ÿéœ€è¦ç¦ç”¨å¤åˆ¶å¯¹ç­‰ä½¿ç”¨shellæˆ–Admin javaç±»ã€‚å¤åˆ¶åˆ°è¾…åŠ©åŒºåŸŸå‰¯æœ¬å¯ä»¥åœ¨æ ‡å‡†ç¾¤é›†é—´å¤åˆ¶ä¸Šå·¥ä½œã€‚ é»˜è®¤: false hbase.http.filter.initializers ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„ç±»ååˆ—è¡¨ã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸ªç±»éƒ½å¿…é¡»æ‰©å±•org.apache.hadoop.hbase.http.FilterInitializerã€‚ç›¸åº”çš„è¿‡æ»¤å™¨å°†è¢«åˆå§‹åŒ–ã€‚ç„¶åŽï¼Œè¿‡æ»¤å™¨å°†åº”ç”¨äºŽæ‰€æœ‰é¢å‘jspå’Œservletç½‘é¡µçš„ç”¨æˆ·ã€‚åˆ—è¡¨çš„æŽ’åºå®šä¹‰äº†è¿‡æ»¤å™¨çš„æŽ’åºã€‚é»˜è®¤çš„StaticUserWebFilteræ·»åŠ hbase.http.staticuser.userå±žæ€§å®šä¹‰çš„ç”¨æˆ·ä¸»ä½“ã€‚ é»˜è®¤: org.apache.hadoop.hbase.http.lib.StaticUserWebFilter hbase.security.visibility.mutations.checkauths å¦‚æžœå¯ç”¨æ­¤å±žæ€§ï¼Œå°†æ£€æŸ¥å¯è§æ€§è¡¨è¾¾å¼ä¸­çš„æ ‡ç­¾æ˜¯å¦ä¸Žå‘å‡ºçªå˜çš„ç”¨æˆ·ç›¸å…³è” é»˜è®¤: false hbase.http.max.threads HTTPæœåŠ¡å™¨å°†åœ¨å…¶ThreadPoolä¸­åˆ›å»ºçš„æœ€å¤§çº¿ç¨‹æ•°ã€‚ é»˜è®¤: 16 hbase.replication.rpc.codec å¯ç”¨å¤åˆ¶æ—¶è¦ä½¿ç”¨çš„ç¼–è§£ç å™¨ï¼Œä»¥ä¾¿æ ‡ç­¾ä¹Ÿè¢«å¤åˆ¶ã€‚è¿™ä¸Žæ”¯æŒæ ‡ç­¾çš„HFileV3ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æžœæ ‡ç­¾æœªè¢«ä½¿ç”¨æˆ–è€…æ‰€ä½¿ç”¨çš„hfileç‰ˆæœ¬æ˜¯HFileV2ï¼Œåˆ™å¯ä»¥ä½¿ç”¨KeyValueCodecä½œä¸ºå¤åˆ¶ç¼–è§£ç å™¨ã€‚è¯·æ³¨æ„ï¼Œåœ¨æ²¡æœ‰æ ‡ç­¾æ—¶ä½¿ç”¨KeyValueCodecWithTagsè¿›è¡Œå¤åˆ¶ä¸ä¼šé€ æˆä»»ä½•ä¼¤å®³ã€‚ é»˜è®¤: org.apache.hadoop.hbase.codec.KeyValueCodecWithTags hbase.replication.source.maxthreads ä»»ä½•å¤åˆ¶æºå°†ç”¨äºŽå¹¶è¡Œä¼ é€ç¼–è¾‘åˆ°æŽ¥æ”¶å™¨çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚è¿™ä¹Ÿé™åˆ¶äº†æ¯ä¸ªå¤åˆ¶æ‰¹æ¬¡è¢«åˆ†è§£æˆçš„å—çš„æ•°é‡ã€‚è¾ƒå¤§çš„å€¼å¯ä»¥æé«˜ä¸»ç¾¤é›†å’Œä»Žç¾¤é›†ä¹‹é—´çš„å¤åˆ¶åžåé‡ã€‚é»˜è®¤å€¼ä¸º10ï¼Œå¾ˆå°‘éœ€è¦æ”¹å˜ã€‚ é»˜è®¤: 10 hbase.http.staticuser.user è¦åœ¨å‘ˆçŽ°å†…å®¹æ—¶åœ¨é™æ€ç½‘é¡µè¿‡æ»¤å™¨ä¸Šè¿‡æ»¤çš„ç”¨æˆ·åç§°ã€‚ä¸€ä¸ªç¤ºä¾‹ä½¿ç”¨æ˜¯HDFS Web UIï¼ˆç”¨äºŽæµè§ˆæ–‡ä»¶çš„ç”¨æˆ·ï¼‰ã€‚ é»˜è®¤: dr.stack hbase.regionserver.handler.abort.on.error.percent åŒºåŸŸæœåŠ¡å™¨RPCçº¿ç¨‹çš„ç™¾åˆ†æ¯”æ— æ³•ä¸­æ­¢RSã€‚-1è¡¨ç¤ºç¦ç”¨ä¸­æ­¢ï¼›0è¡¨ç¤ºå³ä½¿å•ä¸ªå¤„ç†ç¨‹åºå·²ç»æ­»äº¡ä¹Ÿä¼šä¸­æ­¢ï¼›0.xè¡¨ç¤ºåªæœ‰å½“è¿™ä¸ªç™¾åˆ†æ¯”çš„å¤„ç†ç¨‹åºæ­»äº¡æ—¶æ‰ä¸­æ­¢ï¼›1è¡¨ç¤ºåªä¸­æ­¢æ‰€æœ‰çš„å¤„ç†ç¨‹åºå·²ç»æ­»äº¡ã€‚ é»˜è®¤: 0.5 hbase.mob.file.cache.size è¦ç¼“å­˜çš„å·²æ‰“å¼€æ–‡ä»¶å¤„ç†ç¨‹åºçš„æ•°é‡ã€‚æ›´å¤§çš„å€¼å°†é€šè¿‡ä¸ºæ¯ä¸ªç§»åŠ¨æ–‡ä»¶ç¼“å­˜æä¾›æ›´å¤šçš„æ–‡ä»¶å¤„ç†ç¨‹åºæ¥å‡å°‘é¢‘ç¹çš„æ–‡ä»¶æ‰“å¼€å’Œå…³é—­ï¼Œä»Žè€Œæœ‰åˆ©äºŽè¯»å–ã€‚ä½†æ˜¯ï¼Œå¦‚æžœè®¾ç½®å¾—å¤ªé«˜ï¼Œåˆ™å¯èƒ½å¯¼è‡´â€œæ‰“å¼€çš„æ–‡ä»¶å¤„ç†ç¨‹åºå¤ªå¤šâ€ã€‚é»˜è®¤å€¼ä¸º1000ã€‚ é»˜è®¤: 1000 hbase.mob.cache.evict.period mobé«˜é€Ÿç¼“å­˜é©±é€é«˜é€Ÿç¼“å­˜çš„mobæ–‡ä»¶ä¹‹å‰çš„æ—¶é—´ï¼ˆç§’ï¼‰ã€‚é»˜è®¤å€¼æ˜¯3600ç§’ã€‚ é»˜è®¤: 3600 hbase.mob.cache.evict.remain.ratio å½“ç¼“å­˜çš„ç§»åŠ¨æ–‡ä»¶æ•°é‡è¶…è¿‡hbase.mob.file.cache.sizeæ—¶ï¼Œè§¦å‘é©±é€åŽä¿ç•™çš„æ–‡ä»¶çš„æ¯”çŽ‡ï¼ˆä»‹äºŽ0.0å’Œ1.0ä¹‹é—´ï¼‰ä¼šè¢«è§¦å‘ã€‚é»˜è®¤å€¼æ˜¯0.5fã€‚ é»˜è®¤: 0.5f hbase.master.mob.ttl.cleaner.period ExpiredMobFileCleanerChoreè¿è¡Œçš„æ—¶é—´æ®µã€‚è¯¥å•ä½æ˜¯ç§’ã€‚é»˜è®¤å€¼æ˜¯ä¸€å¤©ã€‚MOBæ–‡ä»¶åä»…ä½¿ç”¨æ–‡ä»¶åˆ›å»ºæ—¶é—´çš„æ—¥æœŸéƒ¨åˆ†ã€‚æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ—¶é—´æ¥å†³å®šæ–‡ä»¶çš„TTLåˆ°æœŸæ—¶é—´ã€‚æ‰€ä»¥åˆ é™¤TTLè¿‡æœŸçš„æ–‡ä»¶å¯èƒ½ä¼šè¢«å»¶è¿Ÿã€‚æœ€å¤§å»¶è¿Ÿå¯èƒ½æ˜¯24å°æ—¶ã€‚ é»˜è®¤: 86400 hbase.mob.compaction.mergeable.threshold å¦‚æžœä¸€ä¸ªmobæ–‡ä»¶çš„å¤§å°å°äºŽè¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆå®ƒè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå°æ–‡ä»¶ï¼Œéœ€è¦åœ¨mob compactionä¸­åˆå¹¶ã€‚é»˜è®¤å€¼æ˜¯1280MBã€‚ é»˜è®¤: 1342177280 hbase.mob.delfile.max.count mobåŽ‹ç¼©ä¸­å…è®¸çš„æœ€å¤§delæ–‡ä»¶æ•°ã€‚åœ¨mobåŽ‹ç¼©ä¸­ï¼Œå½“çŽ°æœ‰çš„delæ–‡ä»¶çš„æ•°é‡å¤§äºŽè¿™ä¸ªå€¼æ—¶ï¼Œå®ƒä»¬è¢«åˆå¹¶ï¼Œç›´åˆ°delæ–‡ä»¶çš„æ•°é‡ä¸å¤§äºŽè¯¥å€¼ã€‚é»˜è®¤å€¼æ˜¯3ã€‚ é»˜è®¤: 3 hbase.mob.compaction.batch.size åœ¨ä¸€æ‰¹mobåŽ‹ç¼©ä¸­æ‰€å…è®¸çš„mobæ–‡ä»¶çš„æœ€å¤§æ•°é‡ã€‚mobåŽ‹ç¼©åˆå¹¶å°çš„mobæ–‡ä»¶åˆ°æ›´å¤§çš„ã€‚å¦‚æžœå°æ–‡ä»¶çš„æ•°é‡éžå¸¸å¤§ï¼Œåˆ™å¯èƒ½å¯¼è‡´åˆå¹¶ä¸­çš„â€œæ‰“å¼€çš„æ–‡ä»¶å¤„ç†ç¨‹åºå¤ªå¤šâ€ã€‚åˆå¹¶å¿…é¡»åˆ†æˆæ‰¹æ¬¡ã€‚æ­¤å€¼é™åˆ¶åœ¨ä¸€æ‰¹mobåŽ‹ç¼©ä¸­é€‰æ‹©çš„mobæ–‡ä»¶çš„æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯100ã€‚ é»˜è®¤: 100 hbase.mob.compaction.chore.period MobCompactionChoreè¿è¡Œçš„æ—¶é—´ã€‚è¯¥å•ä½æ˜¯ç§’ã€‚é»˜è®¤å€¼æ˜¯ä¸€ä¸ªæ˜ŸæœŸã€‚ é»˜è®¤: 604800 hbase.mob.compactor.class æ‰§è¡Œmob compactorï¼Œé»˜è®¤ä¸€ä¸ªæ˜¯PartitionedMobCompactorã€‚ é»˜è®¤: org.apache.hadoop.hbase.mob.compactions.PartitionedMobCompactor hbase.mob.compaction.threads.max MobCompactorä¸­ä½¿ç”¨çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚ é»˜è®¤: 1 hbase.snapshot.master.timeout.millis ä¸»å¿«ç…§ç¨‹åºæ‰§è¡Œçš„è¶…æ—¶ã€‚ é»˜è®¤: 300000 hbase.snapshot.region.timeout åŒºåŸŸæœåŠ¡å™¨å°†çº¿ç¨‹ä¿æŒåœ¨å¿«ç…§è¯·æ±‚æ± ä¸­ç­‰å¾…è¶…æ—¶ã€‚ é»˜è®¤: 300000 hbase.rpc.rows.warning.threshold æ‰¹å¤„ç†æ“ä½œä¸­çš„è¡Œæ•°ï¼Œè¶…è¿‡è¯¥å€¼å°†è®°å½•è­¦å‘Šã€‚ é»˜è®¤: 5000 hbase.master.wait.on.service.seconds é»˜è®¤æ˜¯5åˆ†é’Ÿã€‚åš30ç§’çš„æµ‹è¯•ã€‚æœ‰å…³ä¸Šä¸‹æ–‡ï¼Œè¯·å‚è§HBASE-19794ã€‚ é»˜è®¤: 30 7.3. _hbase-env.sh_hbase-env.shæ–‡ä»¶ç”¨æ¥è®¾ç½®HBaseçŽ¯å¢ƒå˜é‡ã€‚æ¯”å¦‚åŒ…æ‹¬åœ¨å¯åŠ¨HBaseå®ˆæŠ¤ç¨‹åºï¼ˆå¦‚å †å¤§å°å’Œåžƒåœ¾å›žæ”¶å™¨é…ç½®ï¼‰æ—¶ä¼ é€’JVMçš„é€‰é¡¹ã€‚æ‚¨è¿˜å¯ä»¥è®¾ç½®HBaseé…ç½®ã€æ—¥å¿—ç›®å½•ã€nicenessã€sshé€‰é¡¹ï¼Œå®šä½è¿›ç¨‹pidæ–‡ä»¶çš„ä½ç½®ç­‰çš„é…ç½®ã€‚æ‰“å¼€_conf/hbase-env.sh_æ–‡ä»¶å¹¶ä»”ç»†é˜…è¯»å…¶å†…å®¹ã€‚æ¯ä¸ªé€‰é¡¹éƒ½æœ‰ç›¸å½“å¥½çš„è®°å½•ã€‚å¦‚æžœå¸Œæœ›åœ¨å¯åŠ¨æ—¶ç”±HBaseå®ˆæŠ¤è¿›ç¨‹è¯»å–ï¼Œè¯·åœ¨æ­¤å¤„æ·»åŠ æ‚¨è‡ªå·±çš„çŽ¯å¢ƒå˜é‡ã€‚ æ­¤å¤„çš„æ›´æ”¹å°†éœ€è¦é‡å¯HBaseæ‰èƒ½æ³¨æ„åˆ°æ›´æ”¹ã€‚ 7.4. _log4j.properties_ç¼–è¾‘æ­¤æ–‡ä»¶ä»¥æ›´æ”¹HBaseæ–‡ä»¶çš„æ»šåŠ¨é€Ÿåº¦ï¼Œå¹¶æ›´æ”¹HBaseè®°å½•æ¶ˆæ¯çš„çº§åˆ«ã€‚ æ­¤å¤„çš„æ›´æ”¹å°†éœ€è¦é‡æ–°å¯åŠ¨é›†ç¾¤ä»¥æ³¨æ„åˆ°æ›´æ”¹ï¼Œå°½ç®¡å¯ä»¥é€šè¿‡HBase UIä¸ºç‰¹å®šçš„å®ˆæŠ¤ç¨‹åºæ›´æ”¹æ—¥å¿—çº§åˆ«ã€‚ 7.5. å®¢æˆ·ç«¯é…ç½®å’Œä¾èµ–å…³ç³»è¿žæŽ¥åˆ°HBaseé›†ç¾¤å¦‚æžœæ‚¨åœ¨ç‹¬ç«‹æ¨¡å¼ä¸‹è¿è¡ŒHBaseï¼Œåˆ™ä¸å¿…ä¸ºæ‚¨çš„å®¢æˆ·ç«¯é…ç½®ä»»ä½•å†…å®¹ï¼Œåªè¦ä¿è¯å®ƒä»¬åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šå³å¯ã€‚ ç”±äºŽHBase Masterå¯ä»¥ç§»åŠ¨ï¼Œå®¢æˆ·å¯ä»¥é€šè¿‡å‘ZooKeeperå¯»æ‰¾å½“å‰çš„å…³é”®ä½ç½®æ¥è¿›è¡Œå¼•å¯¼ã€‚ZooKeeperæ˜¯ä¿å­˜æ‰€æœ‰è¿™äº›å€¼çš„åœ°æ–¹ã€‚å› æ­¤å®¢æˆ·éœ€è¦ZooKeeperé›†åˆçš„ä½ç½®æ‰èƒ½åšå…¶ä»–äº‹æƒ…ã€‚é€šå¸¸è¿™ä¸ªé›†åˆä½ç½®è¢«ä¿å­˜åœ¨_hbase-site.xml_ä¸­ï¼Œå¹¶ç”±å®¢æˆ·ç«¯ä»ŽCLASSPATHä¸­æå–ã€‚ å¦‚æžœä½ æ­£åœ¨é…ç½®ä¸€ä¸ªIDEæ¥è¿è¡Œä¸€ä¸ªHBaseå®¢æˆ·ç«¯ï¼Œä½ åº”è¯¥åœ¨ä½ çš„ç±»è·¯å¾„ä¸­åŒ…å«_conf/_ç›®å½•ï¼Œè¿™æ ·å¯ä»¥æ‰¾åˆ°_hbase-site.xml_è®¾ç½®ï¼ˆæˆ–è€…æ·»åŠ _src/test/resources_æ¥èŽ·å–ä½¿ç”¨çš„hbase-site.xmlæ–‡ä»¶é€šè¿‡æµ‹è¯•ï¼‰ã€‚ æœ€å°çš„æƒ…å†µæ˜¯ï¼Œå½“è¿žæŽ¥åˆ°é›†ç¾¤æ—¶ï¼ŒHBaseå®¢æˆ·æœºéœ€è¦ä¾èµ–å…³ç³»ä¸­çš„hbase-clientæ¨¡å—ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt; &lt;artifactId&gt;hbase-shaded-client&lt;/artifactId&gt; &lt;version&gt;2.0.0&lt;/version&gt;&lt;/dependency&gt; ä¸€ä¸ªåŸºæœ¬çš„å®¢æˆ·ç«¯çš„_hbase-site.xml_çš„ä½¿ç”¨ç¤ºä¾‹å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910&lt;?xml version=&quot;1.0&quot;?&gt;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt; &lt;value&gt;example1,example2,example3&lt;/value&gt; &lt;description&gt;The directory shared by region servers. &lt;/description&gt; &lt;/property&gt;&lt;/configuration&gt; 7.5.1. Javaå®¢æˆ·ç«¯é…ç½®avaå®¢æˆ·ç«¯ä½¿ç”¨çš„é…ç½®ä¿å­˜åœ¨HBaseConfigurationå®žä¾‹ä¸­ã€‚ HBaseConfigurationçš„å·¥åŽ‚æ–¹æ³•ï¼ŒHBaseConfiguration.create();;ï¼Œåœ¨è°ƒç”¨æ—¶ä¼šè¯»å–å®¢æˆ·ç«¯ä¸Šçš„ç¬¬ä¸€ä¸ª_hbase-site.xml_çš„å†…å®¹ï¼ˆCLASSPATHå¦‚æžœå­˜åœ¨çš„è¯ï¼‰ï¼ˆè°ƒç”¨ä¹Ÿå°†åŒ…å«åœ¨ä»»ä½•å‘çŽ°çš„_hbase-default.xml_ä¸­ï¼›_hbase-default.xml_åœ¨_hbase.X.X.X.jar_é‡Œé¢ï¼‰ã€‚ä¹Ÿå¯ä»¥ç›´æŽ¥æŒ‡å®šé…ç½®ï¼Œè€Œæ— éœ€ä»Ž_hbase-site.xml_ä¸­è¯»å–æ•°æ®ã€‚ä¾‹å¦‚ï¼Œè¦ä»¥ç¼–ç¨‹æ–¹å¼è®¾ç½®é›†ç¾¤çš„ZooKeeperé›†æˆï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š 12Configuration config = HBaseConfiguration.create();config.set(&quot;hbase.zookeeper.quorum&quot;, &quot;localhost&quot;); // Here we are running zookeeper locally å¦‚æžœå¤šä¸ªZooKeeperå®žä¾‹ç»„æˆZooKeeperé›†åˆï¼Œåˆ™å¯ä»¥åœ¨é€—å·åˆ†éš”åˆ—è¡¨ä¸­æŒ‡å®šå®ƒä»¬ï¼ˆå°±åƒåœ¨_hbase-site.xml_æ–‡ä»¶ä¸­ä¸€æ ·ï¼‰ã€‚è¿™ä¸ªå¡«å……çš„Configurationå®žä¾‹ç„¶åŽå¯ä»¥ä¼ é€’ç»™ä¸€ä¸ªè¡¨ï¼Œä¾æ­¤ç±»æŽ¨ã€‚ 7.6. è¶…æ—¶é…ç½®HBaseæä¾›äº†å„ç§å„æ ·çš„è¶…æ—¶è®¾ç½®æ¥é™åˆ¶å„ç§è¿œç¨‹æ“ä½œçš„æ‰§è¡Œæ—¶é—´ã€‚ hbase.rpc.timeout hbase.rpc.read.timeout hbase.rpc.write.timeout hbase.client.operation.timeout hbase.client.meta.operation.timeout hbase.client.scanner.timeout.period hbase.rpc.timeoutå±žæ€§é™åˆ¶å•ä¸ªrpcè°ƒç”¨åœ¨è¶…æ—¶ä¹‹å‰å¯ä»¥è¿è¡Œçš„æ—¶é—´ã€‚è¦å¾®è°ƒè¯»æˆ–å†™ç›¸å…³çš„RPCè¶…æ—¶ï¼Œè¯·è®¾ç½®hbase.rpc.read.timeoutå’Œhbase.rpc.write.timeouté…ç½®å±žæ€§ã€‚å¦‚æžœæ²¡æœ‰è¿™äº›å±žæ€§ï¼Œå°†ä½¿ç”¨hbase.rpc.timeoutã€‚ æ›´é«˜çº§åˆ«çš„è¶…æ—¶ä¸ºhbase.client.operation.timeoutï¼Œå¯¹æ¯ä¸ªå®¢æˆ·ç«¯è°ƒç”¨éƒ½æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼Œå½“ç”±äºŽhbase.rpc.timeoutè€Œå¯¼è‡´rpcè°ƒç”¨å¤±è´¥æ—¶ï¼Œå°†é‡è¯•è¯¥è°ƒç”¨ï¼Œç›´åˆ°è¾¾åˆ°hbase.client.operation.timeoutã€‚å¯ä»¥é€šè¿‡è®¾ç½®hbase.client.meta.operation.timeouté…ç½®å€¼æ¥å¾®è°ƒç³»ç»Ÿè¡¨çš„å®¢æˆ·ç«¯æ“ä½œè¶…æ—¶ã€‚å¦‚æžœä¸è®¾ç½®ï¼Œåˆ™å…¶å€¼å°†ä½¿ç”¨hbase.client.operation.timeoutã€‚ æ‰«ææ“ä½œçš„è¶…æ—¶æŽ§åˆ¶æ–¹å¼ä¸åŒã€‚ä½¿ç”¨hbase.client.scanner.timeout.periodå±žæ€§è®¾ç½®æ­¤è¶…æ—¶ã€‚ 8. HBaseé…ç½®ç¤ºä¾‹8.1. åŸºæœ¬åˆ†å¸ƒå¼HBaseå®‰è£…åœ¨ä¸‹æ–‡å†…å®¹ä¸­æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼10èŠ‚ç‚¹çš„ç¾¤é›†çš„åŸºæœ¬é…ç½®ç¤ºä¾‹ï¼šå…¶ä¸­ï¼ŒèŠ‚ç‚¹è¢«å‘½åä¸ºexample0ï¼Œexample1â€¦ä¸€ç›´åˆ°example9ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼›HBase Masterå’ŒHDFS NameNodeæ­£åœ¨èŠ‚ç‚¹example0ä¸Šè¿è¡Œï¼›RegionServersåœ¨èŠ‚ç‚¹example1- example9ä¸Šè¿è¡Œï¼›ä¸€ä¸ª3èŠ‚ç‚¹ZooKeeperé›†åˆè¿è¡Œåœ¨example1ã€example2ï¼Œä»¥åŠexample3çš„é»˜è®¤ç«¯å£ä¸Šï¼›ZooKeeperçš„æ•°æ®è¢«ä¿å­˜åˆ°ï¼š_/export/zookeeper_rã€‚ ä¸‹é¢æˆ‘ä»¬æ˜¾ç¤ºåœ¨HBase confç›®å½•ä¸­æ‰¾åˆ°çš„ä¸»è¦é…ç½®æ–‡ä»¶_hbase-site.xml_, _regionservers_, and _hbase-env.sh_ã€‚ 8.1.1. _hbase-site.xml_12345678910111213141516171819202122232425262728293031&lt;?xml version=&quot;1.0&quot;?&gt;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt; &lt;value&gt;example1,example2,example3&lt;/value&gt; &lt;description&gt;The directory shared by RegionServers. &lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt; &lt;value&gt;/export/zookeeper&lt;/value&gt; &lt;description&gt;Property from ZooKeeper config zoo.cfg. The directory where the snapshot is stored. &lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;value&gt;hdfs://example0:8020/hbase&lt;/value&gt; &lt;description&gt;The directory shared by RegionServers. &lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.cluster.distributed&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;description&gt;The mode the cluster will be in. Possible values are false: standalone and pseudo-distributed setups with managed ZooKeeper true: fully-distributed with unmanaged ZooKeeper Quorum (see hbase-env.sh) &lt;/description&gt; &lt;/property&gt;&lt;/configuration&gt; 8.1.2. _regionservers_åœ¨æ­¤æ–‡ä»¶ä¸­åˆ—å‡ºå°†è¿è¡ŒRegionServersçš„èŠ‚ç‚¹ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™äº›èŠ‚ç‚¹æ˜¯example1- example9ã€‚ 123456789example1example2example3example4example5example6example7example8example9 8.1.3. _hbase-env.sh__hbase-env.sh_æ–‡ä»¶ä¸­çš„ä»¥ä¸‹è¡Œæ˜¾ç¤ºäº†å¦‚ä½•è®¾ç½®JAVA_HOMEçŽ¯å¢ƒå˜é‡ï¼ˆHBaseéœ€è¦çš„ï¼‰å¹¶å°†å †è®¾ç½®ä¸º4 GBï¼ˆè€Œä¸æ˜¯é»˜è®¤å€¼1 GBï¼‰ã€‚å¦‚æžœæ‚¨å¤åˆ¶å¹¶ç²˜è´´æ­¤ç¤ºä¾‹ï¼Œè¯·åŠ¡å¿…è°ƒæ•´JAVA_HOMEä»¥é€‚åˆæ‚¨çš„çŽ¯å¢ƒã€‚ 12345# The java implementation to use.export JAVA_HOME=/usr/java/jdk1.8.0/# The maximum amount of heap to use. Default is left to JVM default.export HBASE_HEAPSIZE=4G ä½¿ç”¨rsyncå°†_conf_ç›®å½•çš„å†…å®¹å¤åˆ¶åˆ°ç¾¤é›†çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ 9. HBaseé‡è¦é…ç½®ä¸‹é¢æˆ‘ä»¬åˆ—å‡ºä¸€äº›_é‡è¦_çš„é…ç½®ã€‚æˆ‘ä»¬å·²ç»å°†è¿™éƒ¨åˆ†åˆ†ä¸ºå¿…éœ€çš„é…ç½®å’Œå€¼å¾—æŽ¨èçš„é…ç½®ã€‚ 9.1. æ‰€éœ€çš„é…ç½®è¯·ä½ å‚è€ƒæœ¬æ•™ç¨‹ä¸­HBaseåŸºç¡€æ¡ä»¶ä¸­çš„æ“ä½œç³»ç»Ÿå’ŒHadoopéƒ¨åˆ†çš„å†…å®¹ï¼ 9.1.1. å¤§åž‹ç¾¤é›†é…ç½®å¦‚æžœæ‚¨æ‹¥æœ‰ä¸€ä¸ªåŒ…å«å¤§é‡åŒºåŸŸçš„ç¾¤é›†ï¼Œé‚£ä¹ˆåœ¨ä¸»æœåŠ¡å™¨å¯åŠ¨åŽï¼ŒRegionserverå¯èƒ½ä¼šæš‚æ—¶åœ°è¿›è¡Œæ£€æŸ¥ï¼Œè€Œæ‰€æœ‰å‰©ä½™çš„RegionServersè½åŽã€‚è¦ç­¾å…¥çš„ç¬¬ä¸€å°æœåŠ¡å™¨å°†è¢«åˆ†é…åˆ°æ‰€æœ‰ä¸æ˜¯æœ€ä¼˜çš„åŒºåŸŸã€‚ä¸ºé˜²æ­¢å‡ºçŽ°ä¸Šè¿°æƒ…å†µï¼Œè¯·å°†å…¶hbase.master.wait.on.regionservers.mintostartå±žæ€§ä»Žå…¶é»˜è®¤å€¼1ä¸­è°ƒé«˜ã€‚è¯¦è§: HBASE-6389 Modify the conditions to ensure that Master waits for sufficient number of Region Servers before starting region assignments 9.2. æŽ¨èçš„é…ç½®9.2.1. ZooKeeper é…ç½®zookeeper.session.timeouté»˜è®¤çš„è¶…æ—¶æ—¶é—´æ˜¯ä¸‰åˆ†é’Ÿï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æžœæœåŠ¡å™¨å´©æºƒï¼Œåˆ™åœ¨ä¸»æœåŠ¡å™¨åœ¨ä¸‰åˆ†é’Ÿå‰å‘çŽ°å´©æºƒå¹¶å¼€å§‹æ¢å¤ã€‚æ‚¨å¯èƒ½éœ€è¦å°†è¶…æ—¶è°ƒæ•´åˆ°ä¸€åˆ†é’Ÿç”šè‡³æ›´çŸ­çš„æ—¶é—´ï¼Œä»¥ä¾¿ä¸»æœåŠ¡å™¨å°½å¿«é€šçŸ¥æ•…éšœã€‚åœ¨æ›´æ”¹æ­¤å€¼ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„JVMåžƒåœ¾æ”¶é›†é…ç½®å¤„äºŽå—æŽ§çŠ¶æ€ï¼Œå¦åˆ™ï¼Œé•¿æ—¶é—´çš„åžƒåœ¾å›žæ”¶ä¼šè¶…å‡ºZooKeeperä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œå°†å–å‡ºæ‚¨çš„RegionServerã€‚ï¼ˆå¦‚æžœä¸€ä¸ªRegionServeré•¿æ—¶é—´å¤„äºŽGCçŠ¶æ€ï¼Œä½ å¯èƒ½éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå¯åŠ¨æ¢å¤ï¼‰ã€‚ è¦æ›´æ”¹æ­¤é…ç½®ï¼Œè¯·ç¼–è¾‘_hbase-site.xml_ï¼Œå°†æ›´æ”¹çš„æ–‡ä»¶å¤åˆ¶åˆ°ç¾¤é›†ä¸­å¹¶é‡æ–°å¯åŠ¨ã€‚ æˆ‘ä»¬å°†è¿™ä¸ªå€¼è®¾ç½®å¾—å¾ˆé«˜ï¼Œä»¥é¿å…ä¸å¿…è¦çš„éº»çƒ¦ã€‚å¦‚æžœå‡ºçŽ°ç±»ä¼¼â€œä¸ºä»€ä¹ˆæˆ‘åœ¨æ‰§è¡Œä¸€ä¸ªå¤§è§„æ¨¡æ•°æ®å¯¼å…¥çš„æ—¶å€™Region Serveræ­»æŽ‰å•¦â€è¿™æ ·çš„é—®é¢˜ï¼Œå¯ä»¥è§£é‡Šçš„åŽŸå› æ˜¯ï¼šä»–ä»¬çš„JVMæœªè¢«è§£æžï¼Œå¹¶ä¸”æ­£åœ¨è¿è¡Œé•¿æ—¶é—´çš„GCæ“ä½œã€‚ ZooKeeper æ•°é‡è¯¦è§ zookeeper. 9.2.2. HDFS é…ç½®dfs.datanode.failed.volumes.toleratedè¿™æ˜¯â€œDataNode åœæ­¢æä¾›æœåŠ¡ä¹‹å‰å…è®¸å¤±è´¥çš„å·æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä»»ä½•å·å¤±è´¥éƒ½ä¼šå¯¼è‡´ datanode å…³é—­â€_ä»ŽHDFS-default.xml_ä¸­çš„æè¿°ã€‚æ‚¨å¯èƒ½å¸Œæœ›å°†å…¶è®¾ç½®ä¸ºå¯ç”¨ç£ç›˜æ•°é‡çš„ä¸€åŠå·¦å³ã€‚ hbase.regionserver.handler.countæ­¤è®¾ç½®å®šä¹‰äº†ä¸ºåº”ç­”ä¼ å…¥çš„ç”¨æˆ·è¡¨è¯·æ±‚è€Œä¿æŒæ‰“å¼€çš„çº¿ç¨‹æ•°ã€‚ç»éªŒæ³•åˆ™æ˜¯ï¼Œå½“æ¯ä¸ªè¯·æ±‚çš„æœ‰æ•ˆè½½è·æŽ¥è¿‘MBï¼ˆå¤§å®¹é‡ã€æ‰«æä½¿ç”¨å¤§ç¼“å­˜ï¼‰æ—¶ä¿æŒä½Žæ•°å­—ï¼Œå¹¶ä¸”å½“æœ‰æ•ˆè´Ÿè½½å°ï¼ˆèŽ·å–ï¼Œå°æŠ•å…¥ï¼ŒICVï¼Œåˆ é™¤ï¼‰æ—¶ä¿æŒæ­¤æ•°å­—ä¸ºé«˜ã€‚æ­£åœ¨è¿›è¡Œçš„æŸ¥è¯¢çš„æ€»å¤§å°å—è®¾ç½® hbase.ipc.server.max.callqueue.sizeçš„é™åˆ¶ã€‚ å¦‚æžœè¿™ä¸ªæ•°å­—çš„æœ‰æ•ˆè½½è·å¾ˆå°ï¼Œé‚£ä¹ˆå°†è¿™ä¸ªæ•°å­—è®¾ç½®ä¸ºæœ€å¤§ä¼ å…¥å®¢æˆ·ç«¯æ•°é‡æ˜¯å®‰å…¨çš„ï¼Œå…¸åž‹çš„ä¾‹å­æ˜¯ä¸€ä¸ªæœåŠ¡äºŽç½‘ç«™çš„é›†ç¾¤ï¼Œå› ä¸ºputé€šå¸¸ä¸è¢«ç¼“å†²ï¼Œå¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯èŽ·å–çš„ã€‚ ä¿æŒæ­¤è®¾ç½®çš„é«˜é£Žé™©çš„åŽŸå› æ˜¯ï¼Œå½“å‰åœ¨åŒºåŸŸæœåŠ¡å™¨ä¸­å‘ç”Ÿçš„æ‰€æœ‰æŠ•å…¥çš„æ€»å¤§å°å¯èƒ½å¯¹å…¶å†…å­˜é€ æˆå¤ªå¤§çš„åŽ‹åŠ›ï¼Œç”šè‡³ä¼šè§¦å‘OutOfMemoryErrorã€‚åœ¨ä½Žå†…å­˜ä¸Šè¿è¡Œçš„RegionServerå°†è§¦å‘å…¶JVMçš„åžƒåœ¾æ”¶é›†å™¨ï¼Œä»¥æ›´é¢‘ç¹çš„æ–¹å¼è¿è¡Œï¼Œç›´åˆ°GCæš‚åœå˜å¾—æ˜Žæ˜¾ï¼ˆåŽŸå› æ˜¯ç”¨äºŽä¿ç•™æ‰€æœ‰è¯·æ±‚çš„æœ‰æ•ˆè½½è·çš„æ‰€æœ‰å†…å­˜ä¸èƒ½è¢«ä¸¢å¼ƒï¼Œå³ä¾¿åžƒåœ¾æ”¶é›†å™¨æ­£åœ¨è¿›è¡Œå°è¯•ï¼‰ã€‚ä¸€æ®µæ—¶é—´ä¹‹åŽï¼Œæ•´ä¸ªç¾¤é›†åžåé‡éƒ½ä¼šå—åˆ°å½±å“ï¼Œå› ä¸ºæ¯ä¸ªç¢°åˆ°è¯¥RegionServerçš„è¯·æ±‚éƒ½å°†èŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼Œè¿™æ›´åŠ å‰§äº†é—®é¢˜çš„ä¸¥é‡æ€§ã€‚ æ‚¨å¯ä»¥é€šè¿‡rpc.loggingæŸ¥çœ‹æŸä¸ªRegionServerä¸Šæ˜¯å¦æœ‰å¤ªå¤šæˆ–å¤ªå¤šçš„å¤„ç†ç¨‹åºï¼Œç„¶åŽè·Ÿè¸ªå…¶æ—¥å¿—ï¼ˆæŽ’é˜Ÿè¯·æ±‚æ¶ˆè€—å†…å­˜ï¼‰ã€‚ 9.2.3. å¤§åž‹å†…å­˜æœºå™¨çš„é…ç½®HBaseæä¾›äº†ä¸€ä¸ªåˆç†çš„ï¼Œä¿å®ˆçš„é…ç½®ï¼Œå¯ä»¥åœ¨å‡ ä¹Žæ‰€æœ‰äººä»¬å¯èƒ½æƒ³è¦æµ‹è¯•çš„æœºå™¨ç±»åž‹ä¸Šè¿è¡Œã€‚å¦‚æžœä½ æœ‰æ›´å¤§çš„æœºå™¨ - HBaseæœ‰8Gæˆ–æ›´å¤§çš„å † - ä½ å¯èƒ½ä¼šå‘çŽ°ä¸‹é¢çš„é…ç½®é€‰é¡¹å¾ˆæœ‰å¸®åŠ©ã€‚ 9.2.4. åŽ‹ç¼©æ‚¨åº”è¯¥è€ƒè™‘å¯ç”¨ColumnFamilyåŽ‹ç¼©ã€‚æœ‰å‡ ä¸ªé€‰é¡¹å¯ä»¥åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯é€šè¿‡å‡å°StoreFilesçš„å¤§å°æ¥æé«˜æ€§èƒ½ï¼Œä»Žè€Œå‡å°‘I / Oã€‚ è¯¦è§ compression 9.2.5. é…ç½®WALæ–‡ä»¶çš„å¤§å°å’Œæ•°é‡åœ¨å‘ç”ŸRSæ•…éšœçš„æƒ…å†µä¸‹ï¼ŒHBaseä½¿ç”¨walæ¢å¤å°šæœªåˆ·æ–°åˆ°ç£ç›˜çš„memstoreæ•°æ®ã€‚è¿™äº›WALæ–‡ä»¶åº”è¯¥é…ç½®ä¸ºç•¥å°äºŽHDFSå—ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒHDFSå—ä¸º64Mbï¼ŒWALæ–‡ä»¶ä¸ºã€œ60Mbï¼‰ã€‚ HBaseä¹Ÿå¯¹WALæ–‡ä»¶çš„æ•°é‡æœ‰é™åˆ¶ï¼Œæ—¨åœ¨ç¡®ä¿åœ¨æ¢å¤è¿‡ç¨‹ä¸­ä¸ä¼šæœ‰å¤ªå¤šçš„æ•°æ®éœ€è¦é‡æ”¾ã€‚è¿™ä¸ªé™åˆ¶éœ€è¦æ ¹æ®memstoreé…ç½®è¿›è¡Œè®¾ç½®ï¼Œä»¥ä¾¿æ‰€æœ‰å¿…è¦çš„æ•°æ®éƒ½å¯ä»¥é€‚ç”¨ã€‚å»ºè®®åˆ†é…è¶³å¤Ÿå¤šçš„WALæ–‡ä»¶æ¥å­˜å‚¨è‡³å°‘é‚£ä¹ˆå¤šçš„æ•°æ®ï¼ˆå½“æ‰€æœ‰çš„å­˜å‚¨éƒ½æŽ¥è¿‘å®Œæ•´æ—¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¯¹äºŽ16Gb RSå †ï¼Œé»˜è®¤çš„memstoreè®¾ç½®ï¼ˆ0.4ï¼‰å’Œé»˜è®¤çš„WALæ–‡ä»¶å¤§å°ï¼ˆã€œ60Mbï¼‰ï¼Œ16Gb * 0.4 / 60ï¼ŒWALæ–‡ä»¶æ•°çš„èµ·ç‚¹ä¸ºã€œ109ã€‚ä½†æ˜¯ï¼Œç”±äºŽæ‰€æœ‰çš„memstoresä¸ä¼šä¸€ç›´å æ»¡ï¼Œæ‰€ä»¥å¯ä»¥åˆ†é…æ›´å°‘çš„WALæ–‡ä»¶ã€‚ 9.2.6. ç®¡ç†åˆ†å‰²HBaseé€šå¸¸ä¼šæ ¹æ®æ‚¨çš„_hbase-default.xml_ å’Œ _hbase-site.xml_ é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®æ¥å¤„ç†æ‚¨æ‰€åœ¨åŒºåŸŸçš„åˆ†å‰²ã€‚é‡è¦çš„è®¾ç½®åŒ…æ‹¬ï¼šhbase.regionserver.region.split.policy, hbase.hregion.max.filesize, hbase.regionserver.regionSplitLimitã€‚åˆ†å‰²çš„ä¸€ä¸ªç®€å•çš„è§‚ç‚¹æ˜¯ï¼Œå½“ä¸€ä¸ªåŒºåŸŸå‘å±•åˆ°hbase.hregion.max.filesizeæ—¶ï¼Œå®ƒè¢«åˆ†å‰²ã€‚å¯¹äºŽå¤§å¤šæ•°ä½¿ç”¨æ¨¡å¼ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨è‡ªåŠ¨åˆ†å‰²ã€‚è¯¦è§: manual region splitting decisions for more information about manual region splitting. ä¸è¦è®©HBaseè‡ªåŠ¨åˆ†å‰²ä½ çš„åŒºåŸŸï¼Œä½ å¯ä»¥é€‰æ‹©è‡ªå·±ç®¡ç†åˆ†å‰²ã€‚HBase 0.90.0å¢žåŠ äº†è¿™ä¸ªåŠŸèƒ½ã€‚å¦‚æžœä½ çŸ¥é“ä½ çš„å¯†é’¥ç©ºé—´ï¼Œæ‰‹åŠ¨ç®¡ç†åˆ†å‰²å°±è¡Œï¼Œå¦åˆ™è®©HBaseä¸ºä½ åˆ†å‰²ã€‚æ‰‹åŠ¨åˆ†å‰²å¯ä»¥å‡è½»åœ¨è´Ÿè½½ä¸‹çš„åŒºåŸŸåˆ›å»ºå’Œç§»åŠ¨ã€‚è¿™ä¹Ÿä½¿å¾—åŒºåŸŸè¾¹ç•Œæ˜¯å·²çŸ¥çš„å’Œä¸å˜çš„ï¼ˆå¦‚æžœä½ ç¦ç”¨åŒºåŸŸåˆ†å‰²ï¼‰ã€‚å¦‚æžœä½¿ç”¨æ‰‹åŠ¨åˆ†å‰²ï¼Œåˆ™å¯ä»¥æ›´è½»æ¾åœ°è¿›è¡Œäº¤é”™å¼çš„åŸºäºŽæ—¶é—´çš„ä¸»è¦åŽ‹ç¼©æ¥åˆ†æ•£ç½‘ç»œIOè´Ÿè½½ã€‚ ç¦ç”¨è‡ªåŠ¨åˆ†å‰² è¦ç¦ç”¨è‡ªåŠ¨æ‹†åˆ†ï¼Œå¯ä»¥åœ¨é›†ç¾¤é…ç½®æˆ–è¡¨é…ç½®ä¸­è®¾ç½®åŒºåŸŸæ‹†åˆ†ç­–ç•¥ï¼š org.apache.hadoop.hbase.regionserver.DisabledRegionSplitPolicy è‡ªåŠ¨åˆ†å‰²å»ºè®® å¦‚æžœç¦ç”¨è‡ªåŠ¨åˆ†å‰²æ¥è¯Šæ–­é—®é¢˜æˆ–åœ¨æ•°æ®å¿«é€Ÿå¢žé•¿æœŸé—´ï¼Œå»ºè®®åœ¨æ‚¨çš„æƒ…å†µå˜å¾—æ›´åŠ ç¨³å®šæ—¶é‡æ–°å¯ç”¨å®ƒä»¬ã€‚ ç¡®å®šé¢„åˆ†å‰²åŒºåŸŸçš„æœ€ä½³æ•°ç›® é¢„åˆ†å‰²åŒºåŸŸçš„æœ€ä½³æ•°é‡å–å†³äºŽæ‚¨çš„åº”ç”¨ç¨‹åºå’ŒçŽ¯å¢ƒã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ä»Žæ¯ä¸ªæœåŠ¡å™¨çš„10ä¸ªé¢„åˆ†å‰²åŒºåŸŸå¼€å§‹ï¼Œéšç€æ—¶é—´çš„æŽ¨ç§»æ•°æ®ä¸æ–­å¢žé•¿ã€‚å°½é‡åœ¨åŒºåŸŸå¤ªå°‘çš„åœ°æ–¹çŠ¯é”™ï¼Œç¨åŽè¿›è¡Œæ»šåŠ¨åˆ†å‰²æ›´å¥½ã€‚åŒºåŸŸçš„æœ€ä½³æ•°é‡å–å†³äºŽæ‚¨æ‰€åœ¨åŒºåŸŸä¸­æœ€å¤§çš„StoreFileã€‚å¦‚æžœæ•°æ®é‡å¢žåŠ ï¼Œæœ€å¤§çš„StoreFileçš„å¤§å°å°†éšç€æ—¶é—´å¢žåŠ ã€‚ç›®æ ‡æ˜¯ä½¿æœ€å¤§çš„åŒºåŸŸè¶³å¤Ÿå¤§ï¼ŒåŽ‹å®žé€‰æ‹©ç®—æ³•ä»…åœ¨å®šæ—¶çš„ä¸»è¦åŽ‹å®žæœŸé—´å°†å…¶åŽ‹ç¼©ã€‚å¦åˆ™ï¼Œè¯¥é›†ç¾¤å¯èƒ½ä¼šåŒæ—¶å‡ºçŽ°å¤§é‡åŽ‹å®žåŒºåŸŸçš„åŽ‹å®žé£Žæš´ã€‚æ•°æ®å¢žé•¿å¯¼è‡´åŽ‹ç¼©é£Žæš´ï¼Œè€Œä¸æ˜¯äººå·¥åˆ†å‰²å†³ç­–ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚ å¦‚æžœåŒºåŸŸè¢«åˆ†å‰²æˆå¤ªå¤šçš„åŒºåŸŸï¼Œå¯ä»¥é€šè¿‡é…ç½®HConstants.MAJOR_COMPACTION_PERIODæ¥å¢žåŠ ä¸»è¦çš„åŽ‹ç¼©é—´éš”ã€‚org.apache.hadoop.hbase.util.RegionSplitter`æä¾›æ‰€æœ‰åŒºåŸŸçš„ç½‘ç»œIOå®‰å…¨æ»šåŠ¨åˆ†å‰²ã€‚ 9.2.7. ç®¡ç†åŽ‹ç¼©é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»è¦çš„åŽ‹ç¼©è®¡åˆ’åœ¨7å¤©å†…è¿è¡Œä¸€æ¬¡ã€‚ å¦‚æžœæ‚¨éœ€è¦ç²¾ç¡®æŽ§åˆ¶ä¸»è¦åŽ‹ç¼©çš„è¿è¡Œæ—¶é—´å’Œé¢‘çŽ‡ï¼Œå¯ä»¥ç¦ç”¨æ‰˜ç®¡çš„ä¸»è¦åŽ‹ç¼©ã€‚è¯·å‚é˜… hbase.hregion.majorcompaction compaction.parameters ä¸ç¦ç”¨ä¸»è¦åŽ‹ç¼© å¯¹äºŽStoreFileæ¸…ç†æ¥è¯´ï¼Œé‡è¦çš„åŽ‹ç¼©æ˜¯ç»å¯¹å¿…è¦çš„ã€‚ä¸è¦å®Œå…¨ç¦ç”¨å®ƒä»¬ã€‚æ‚¨å¯ä»¥é€šè¿‡HBase shellæˆ–Admin APIæ‰‹åŠ¨è¿è¡Œä¸»è¦åŽ‹ç¼©ã€‚ è¯¦è§: compaction 9.2.8. é¢„æµ‹æ‰§è¡Œé¢„æµ‹æ‰§è¡ŒMapReduceä»»åŠ¡æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œå¯¹äºŽHBaseé›†ç¾¤ï¼Œé€šå¸¸å»ºè®®å…³é—­ç³»ç»Ÿçº§çš„æŽ¨æµ‹æ‰§è¡Œï¼Œé™¤éžæ‚¨éœ€è¦åœ¨ç‰¹å®šæƒ…å†µä¸‹å¯ä»¥é…ç½®æ¯ä¸ªä½œä¸šã€‚å°†å±žæ€§ mapreduce.map.speculative å’Œ mapreduce.reduce.speculative è®¾ç½®ä¸º falseã€‚ 9.3. å…¶ä»–é…ç½®9.3.1. å¹³è¡¡å™¨å¹³è¡¡å™¨ï¼ˆBalancerï¼‰æ˜¯åœ¨ä¸»æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ä¸€ä¸ªå‘¨æœŸæ€§æ“ä½œï¼Œç”¨äºŽé‡æ–°åˆ†é…é›†ç¾¤ä¸Šçš„åŒºåŸŸã€‚å®ƒé€šè¿‡hbase.balancer.periodé…ç½®ï¼Œé»˜è®¤ä¸º300000ï¼ˆ5åˆ†é’Ÿï¼‰ã€‚ è¯¦è§: master.processes.loadbalancer 9.3.2. ç¦ç”¨Blockcacheä¸è¦å…³é—­å—ç¼“å­˜ï¼ˆä½ å¯ä»¥é€šè¿‡è®¾ç½®hfile.block.cache.sizeä¸ºé›¶æ¥å®žçŽ°ï¼‰ã€‚è¿™æ ·åšæ²¡æœ‰å¥½å¤„ï¼Œå› ä¸ºRegionServerå°†èŠ±è´¹æ‰€æœ‰çš„æ—¶é—´ä¸€æ¬¡åˆä¸€æ¬¡åœ°åŠ è½½HFileç´¢å¼•ã€‚å¦‚æžœä½ çš„å·¥ä½œé›†æ˜¯è¿™æ ·é…ç½®å—ç¼“å­˜ï¼Œé‚£ä¹ˆæ²¡æœ‰ç›Šå¤„ï¼Œæœ€å°‘åº”ä¿è¯hfileæŒ‡æ•°ä¿å­˜åœ¨å—ç¼“å­˜å†…çš„å¤§å°ï¼ˆä½ å¯ä»¥é€šè¿‡è°ƒæŸ¥RegionServer UIç²—ç•¥åœ°äº†è§£ä½ éœ€è¦çš„å¤§å°ï¼›è¯·å‚é˜…å ç½‘é¡µé¡¶éƒ¨é™„è¿‘çš„ç´¢å¼•å—å¤§å°ï¼‰ 9.3.3. Nagleâ€™s æˆ–å°packageé—®é¢˜å¦‚æžœåœ¨å¯¹HBaseçš„æ“ä½œä¸­å‡ºçŽ°å¤§çº¦40mså·¦å³çš„å»¶è¿Ÿï¼Œè¯·å°è¯•Naglesçš„è®¾ç½®ã€‚ ä¾‹å¦‚ï¼Œè¯·å‚é˜…ç”¨æˆ·é‚®ä»¶åˆ—è¡¨çº¿ç¨‹Inconsistent scan performance with caching set to 1 å°†ç¼“å­˜è®¾ç½®ä¸º1çš„ä¸ä¸€è‡´æ‰«ææ€§èƒ½ä»¥åŠå…¶ä¸­æ‰€å¼•ç”¨çš„è®¾ç½®notcpdelayæ¥æé«˜æ‰«æé€Ÿåº¦çš„é—®é¢˜ã€‚è¯¦è§æ–‡æ¡£åº•éƒ¨å›¾è¡¨HBASE-7008 Set scanner caching to a better default è®¾ç½®äº†æ‰«æç¼“å­˜åˆ°ä¸€ä¸ªæ›´å¥½çš„é»˜è®¤ä½ç½®ï¼Œæˆ‘ä»¬çš„Lars Hofhanslä¼šå°è¯•ä½¿ç”¨Nagleæ‰“å¼€å’Œå…³é—­æµ‹é‡æ•ˆæžœçš„å„ç§æ•°æ®å¤§å°ã€‚ 9.3.4. æ›´å¥½çš„å¹³å‡æ¢å¤æ—¶é—´è¿™éƒ¨åˆ†æ˜¯å…³äºŽåœ¨æœåŠ¡å™¨å‡ºçŽ°æ•…éšœåŽä¼šä½¿æœåŠ¡å™¨æ¢å¤æ›´å¿«çš„é…ç½®ã€‚è¯¦è§:Introduction to HBase Mean Time to Recover (MTTR) HBASE-8354 forces Namenode into loop with lease recovery requests ä½¿ç”¨leaseæ¢å¤è¯·æ±‚å¾ªçŽ¯çš„é—®é¢˜æ˜¯æ··ä¹±çš„ï¼Œä½†åœ¨ä½Žè¶…æ—¶ä»¥åŠå¦‚ä½•å¼•èµ·æ›´å¿«çš„æ¢å¤ï¼ŒåŒ…æ‹¬å¼•ç”¨æ·»åŠ åˆ°HDFSçš„ä¿®å¤ç¨‹åºæ–¹é¢ï¼Œæœ‰å¾ˆå¤šå¥½çš„è®¨è®ºã€‚ä¸‹é¢å»ºè®®çš„é…ç½®æ˜¯Varunçš„å»ºè®®çš„æç‚¼å’Œæµ‹è¯•ï¼Œç¡®ä¿ä½ åœ¨HDFSç‰ˆæœ¬ä¸Šè¿è¡Œï¼Œæ‰€ä»¥ä½ æœ‰ä»–æ‰€æåˆ°çš„ä¿®è¡¥ç¨‹åºï¼Œå¹¶ä¸”ä»–è‡ªå·±æ·»åŠ åˆ°HDFSï¼Œå¸®åŠ©HBase MTTRï¼ˆä¾‹å¦‚HDFS-3703ï¼ŒHDFS-3712å’ŒHDFS-4791 -Hadoop 2ç¡®ä¿æœ‰ä»–ä»¬å¹¶ä¸”åŽæœŸHadoop 1æœ‰ä¸€äº›ï¼‰ã€‚åœ¨RegionServerä¸­è®¾ç½®ä»¥ä¸‹å†…å®¹ï¼š 1234567891011&lt;property&gt; &lt;name&gt;hbase.lease.recovery.dfs.timeout&lt;/name&gt; &lt;value&gt;23000&lt;/value&gt; &lt;description&gt;How much time we allow elapse between calls to recover lease. Should be larger than the dfs timeout.&lt;/description&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.client.socket-timeout&lt;/name&gt; &lt;value&gt;10000&lt;/value&gt; &lt;description&gt;Down the DFS timeout from 60 to 10 seconds.&lt;/description&gt;&lt;/property&gt; åœ¨NameNode/DataNodeç«¯ï¼Œè®¾ç½®ä»¥ä¸‹å†…å®¹æ¥å¯ç”¨HDFS-3703ï¼ŒHDFS-3912ä¸­å¼•å…¥çš„stalenessï¼š 1234567891011121314151617181920212223242526272829303132333435&lt;property&gt; &lt;name&gt;dfs.client.socket-timeout&lt;/name&gt; &lt;value&gt;10000&lt;/value&gt; &lt;description&gt;Down the DFS timeout from 60 to 10 seconds.&lt;/description&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.datanode.socket.write.timeout&lt;/name&gt; &lt;value&gt;10000&lt;/value&gt; &lt;description&gt;Down the DFS timeout from 8 * 60 to 10 seconds.&lt;/description&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;ipc.client.connect.timeout&lt;/name&gt; &lt;value&gt;3000&lt;/value&gt; &lt;description&gt;Down from 60 seconds to 3.&lt;/description&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;ipc.client.connect.max.retries.on.timeouts&lt;/name&gt; &lt;value&gt;2&lt;/value&gt; &lt;description&gt;Down from 45 seconds to 3 (2 == 3 retries).&lt;/description&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.namenode.avoid.read.stale.datanode&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;description&gt;Enable stale state in hdfs&lt;/description&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.namenode.stale.datanode.interval&lt;/name&gt; &lt;value&gt;20000&lt;/value&gt; &lt;description&gt;Down from default 30 seconds&lt;/description&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;dfs.namenode.avoid.write.stale.datanode&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;description&gt;Enable stale state in hdfs&lt;/description&gt;&lt;/property&gt; 9.3.5. JMXJMXï¼ˆJava Management Extensionsï¼ŒJavaç®¡ç†æ‰©å±•ï¼‰æä¾›äº†å†…ç½®çš„å·¥å…·ï¼Œä½¿æ‚¨èƒ½å¤Ÿç›‘è§†å’Œç®¡ç†Java VMã€‚è¦å¯ç”¨è¿œç¨‹ç³»ç»Ÿçš„ç›‘è§†å’Œç®¡ç†ï¼Œåœ¨å¯åŠ¨ Java VM æ—¶ï¼Œæ‚¨éœ€è¦è®¾ç½®ç³»ç»Ÿå±žæ€§com.sun.management.jmxremote.portï¼ˆè¦å¯ç”¨JMX RMIè¿žæŽ¥çš„ç«¯å£å·ï¼‰ã€‚è¯¦è§:official documentation. ä»ŽåŽ†å²ä¸Šçœ‹ï¼Œé™¤äº†ä¸Šé¢æåˆ°çš„ç«¯å£ä¹‹å¤–ï¼ŒJMXè¿˜ä¼šæ‰“å¼€ä¸¤ä¸ªé™„åŠ çš„éšæœºTCPä¾¦å¬ç«¯å£ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç«¯å£å†²çªé—®é¢˜ã€‚è¯¦è§: HBASE-10289 ä½œä¸ºä¸€ç§æ›¿ä»£æ–¹æ³•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨HBaseæä¾›çš„åŸºäºŽåå¤„ç†å™¨çš„JMXå®žçŽ°ã€‚å¯ç”¨å®ƒï¼Œè¯·åœ¨hbase-site.xmlä¸­æ·»åŠ ä»¥ä¸‹å±žæ€§ï¼š: 1234&lt;property&gt; &lt;name&gt;hbase.coprocessor.regionserver.classes&lt;/name&gt; &lt;value&gt;org.apache.hadoop.hbase.JMXListener&lt;/value&gt;&lt;/property&gt; ä¸è¦åŒæ—¶ä¸ºJava VM è®¾ç½® com.sun.management.jmxremote.port ç›®å‰å®ƒæ”¯æŒMasterå’ŒRegionServer Java VMã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒJMXä¾¦å¬TCPç«¯å£10102ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å±žæ€§è¿›ä¸€æ­¥é…ç½®ç«¯å£ï¼š 12345678&lt;property&gt; &lt;name&gt;regionserver.rmi.registry.port&lt;/name&gt; &lt;value&gt;61130&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;regionserver.rmi.connector.port&lt;/name&gt; &lt;value&gt;61140&lt;/value&gt;&lt;/property&gt; åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ³¨å†Œè¡¨ç«¯å£å¯ä»¥ä¸Žè¿žæŽ¥å™¨ç«¯å£å…±äº«ï¼Œæ‰€ä»¥åªéœ€è¦é…ç½®regionserver.rmi.registry.portã€‚ä½†æ˜¯ï¼Œå¦‚æžœè¦ä½¿ç”¨SSLé€šä¿¡ï¼Œåˆ™å¿…é¡»å°†2ä¸ªç«¯å£é…ç½®ä¸ºä¸åŒçš„å€¼ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯†ç è®¤è¯å’ŒSSLé€šä¿¡è¢«ç¦ç”¨ã€‚è¦å¯ç”¨å¯†ç éªŒè¯ï¼Œæ‚¨éœ€è¦åƒä¸‹é¢é‚£æ ·æ›´æ–°_hbase-env.sh_ï¼š 123456export HBASE_JMX_BASE=&quot;-Dcom.sun.management.jmxremote.authenticate=true \ -Dcom.sun.management.jmxremote.password.file=your_password_file \ -Dcom.sun.management.jmxremote.access.file=your_access_file&quot;export HBASE_MASTER_OPTS=&quot;$HBASE_MASTER_OPTS $HBASE_JMX_BASE &quot;export HBASE_REGIONSERVER_OPTS=&quot;$HBASE_REGIONSERVER_OPTS $HBASE_JMX_BASE &quot; è¯·å‚é˜…_$JRE_HOME/lib/management_ä¸‹é¢çš„ç¤ºä¾‹password/accessæ–‡ä»¶ã€‚ è¦ä½¿ç”¨å¯†ç éªŒè¯å¯ç”¨SSLé€šä¿¡ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š 12345678#1\. generate a key pair, stored in myKeyStorekeytool -genkey -alias jconsole -keystore myKeyStore#2\. export it to file jconsole.certkeytool -export -alias jconsole -keystore myKeyStore -file jconsole.cert#3\. copy jconsole.cert to jconsole client machine, import it to jconsoleKeyStorekeytool -import -alias jconsole -keystore jconsoleKeyStore -file jconsole.cert æ›´æ–° _hbase-env.sh_ : 123456789export HBASE_JMX_BASE=&quot;-Dcom.sun.management.jmxremote.ssl=true \ -Djavax.net.ssl.keyStore=/home/tianq/myKeyStore \ -Djavax.net.ssl.keyStorePassword=your_password_in_step_1 \ -Dcom.sun.management.jmxremote.authenticate=true \ -Dcom.sun.management.jmxremote.password.file=your_password file \ -Dcom.sun.management.jmxremote.access.file=your_access_file&quot;export HBASE_MASTER_OPTS=&quot;$HBASE_MASTER_OPTS $HBASE_JMX_BASE &quot;export HBASE_REGIONSERVER_OPTS=&quot;$HBASE_REGIONSERVER_OPTS $HBASE_JMX_BASE &quot; æœ€åŽï¼Œä½¿ç”¨å¯†é’¥å­˜å‚¨åœ¨å®¢æˆ·ç«¯ä¸Šå¯åŠ¨ jconsole 1jconsole -J-Djavax.net.ssl.trustStore=/home/tianq/jconsoleKeyStore To è¦åœ¨ä¸»æœåŠ¡å™¨ä¸Šå¯ç”¨HBase JMXå®žçŽ°ï¼Œè¿˜éœ€è¦åœ¨ _hbase-site.xml_ä¸­æ·»åŠ ä»¥ä¸‹å±žæ€§ï¼š 1234&lt;property&gt; &lt;name&gt;hbase.coprocessor.master.classes&lt;/name&gt; &lt;value&gt;org.apache.hadoop.hbase.JMXListener&lt;/value&gt;&lt;/property&gt; ç«¯å£é…ç½®çš„ç›¸åº”å±žæ€§ä¸ºï¼šmaster.rmi.registry.portï¼ˆé»˜è®¤ä¸º10101ï¼‰å’Œmaster.rmi.connector.portï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸Žregistry.portç›¸åŒï¼‰ã€‚ 10. åŠ¨æ€é…ç½®ä½ å¯ä»¥åœ¨ä¸é‡æ–°å¯åŠ¨æœåŠ¡å™¨çš„æƒ…å†µä¸‹æ›´æ”¹é…ç½®çš„å­é›†ã€‚åœ¨ HBase shell ä¸­ï¼Œæœ‰æ–°çš„æ“ä½œç¬¦ï¼Œupdate_config ä»¥åŠ update_all_configï¼Œå®ƒä»¬ä¼šæç¤ºæœåŠ¡å™¨æˆ–æ‰€æœ‰æœåŠ¡å™¨é‡æ–°åŠ è½½é…ç½®ã€‚ å½“å‰æ­£åœ¨è¿è¡Œçš„æœåŠ¡å™¨ä¸­ï¼Œåªèƒ½æ›´æ”¹æ‰€æœ‰é…ç½®çš„å­é›†ã€‚ä»¥ä¸‹æ˜¯è¿™äº›æ”¯æŒåŠ¨æ€æ›´æ”¹çš„é…ç½®ï¼š Key hbase.ipc.server.fallback-to-simple-auth-allowed hbase.cleaner.scan.dir.concurrent.size hbase.regionserver.thread.compaction.large hbase.regionserver.thread.compaction.small hbase.regionserver.thread.split hbase.regionserver.throughput.controller hbase.regionserver.thread.hfilecleaner.throttle hbase.regionserver.hfilecleaner.large.queue.size hbase.regionserver.hfilecleaner.small.queue.size hbase.regionserver.hfilecleaner.large.thread.count hbase.regionserver.hfilecleaner.small.thread.count hbase.regionserver.hfilecleaner.thread.timeout.msec hbase.regionserver.hfilecleaner.thread.check.interval.msec hbase.regionserver.flush.throughput.controller hbase.hstore.compaction.max.size hbase.hstore.compaction.max.size.offpeak hbase.hstore.compaction.min.size hbase.hstore.compaction.min hbase.hstore.compaction.max hbase.hstore.compaction.ratio hbase.hstore.compaction.ratio.offpeak hbase.regionserver.thread.compaction.throttle hbase.hregion.majorcompaction hbase.hregion.majorcompaction.jitter hbase.hstore.min.locality.to.skip.major.compact hbase.hstore.compaction.date.tiered.max.storefile.age.millis hbase.hstore.compaction.date.tiered.incoming.window.min hbase.hstore.compaction.date.tiered.window.policy.class hbase.hstore.compaction.date.tiered.single.output.for.minor.compaction hbase.hstore.compaction.date.tiered.window.factory.class hbase.offpeak.start.hour hbase.offpeak.end.hour hbase.oldwals.cleaner.thread.size hbase.oldwals.cleaner.thread.timeout.msec hbase.oldwals.cleaner.thread.check.interval.msec hbase.procedure.worker.keep.alive.time.msec hbase.procedure.worker.add.stuck.percentage hbase.procedure.worker.monitor.interval.msec hbase.procedure.worker.stuck.threshold.msec hbase.regions.slop hbase.regions.overallSlop hbase.balancer.tablesOnMaster hbase.balancer.tablesOnMaster.systemTablesOnly hbase.util.ip.to.rack.determiner hbase.ipc.server.max.callqueue.length hbase.ipc.server.priority.max.callqueue.length hbase.ipc.server.callqueue.type hbase.ipc.server.callqueue.codel.target.delay hbase.ipc.server.callqueue.codel.interval hbase.ipc.server.callqueue.codel.lifo.threshold hbase.master.balancer.stochastic.maxSteps hbase.master.balancer.stochastic.stepsPerRegion hbase.master.balancer.stochastic.maxRunningTime hbase.master.balancer.stochastic.runMaxSteps hbase.master.balancer.stochastic.numRegionLoadsToRemember hbase.master.loadbalance.bytable hbase.master.balancer.stochastic.minCostNeedBalance hbase.master.balancer.stochastic.localityCost hbase.master.balancer.stochastic.rackLocalityCost hbase.master.balancer.stochastic.readRequestCost hbase.master.balancer.stochastic.writeRequestCost hbase.master.balancer.stochastic.memstoreSizeCost hbase.master.balancer.stochastic.storefileSizeCost hbase.master.balancer.stochastic.regionReplicaHostCostKey hbase.master.balancer.stochastic.regionReplicaRackCostKey hbase.master.balancer.stochastic.regionCountCost hbase.master.balancer.stochastic.primaryRegionCountCost hbase.master.balancer.stochastic.moveCost hbase.master.balancer.stochastic.maxMovePercent hbase.master.balancer.stochastic.tableSkewCost]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Apache HBase â„¢ ä¸­æ–‡æŒ‡å—(æœ€æ–°ç‰ˆHBase 3.0.0)-ch0å‰è¨€]]></title>
    <url>%2F2019%2F02%2F28%2FApache-HBase-%E2%84%A2-%E4%B8%AD%E6%96%87%E6%8C%87%E5%8D%97-%E6%9C%80%E6%96%B0%E7%89%88HBase-3-0-0-ch0%E5%89%8D%E8%A8%80%2F</url>
    <content type="text"><![CDATA[å‰è¨€ è¯‘è€…: xixici æ­¤å¤„ä¸ºHBaseç‰ˆæœ¬çš„å®˜æ–¹å‚è€ƒæŒ‡å—ã€‚ ä»Žè¿™é‡Œï¼Œä½ ä¸ä»…èƒ½æ‰¾åˆ°å‘å¸ƒçš„HBaseç‰ˆæœ¬çš„æœ€ç»ˆæ–‡æ¡£ï¼Œè€Œä¸”åŒ…æ‹¬ç›¸å…³Javadocå’ŒJIRAä¿¡æ¯ã€‚ å…³äºŽæŒ‡å—æœ¬æŒ‡å—ä»åœ¨ç¼–è¾‘å½“ä¸­ã€‚æœ¬æŒ‡å—çš„æºç å¯ä»¥åœ¨æ–‡ä»¶å¤¹_src/main/asciidocå½“ä¸­æ‰¾åˆ°ã€‚æœ¬æŒ‡å—æœ€ç»ˆä½¿ç”¨ AsciiDoc æž„å»ºï¼Œæˆä¸ºâ€™ç«™ç‚¹â€™çš„ä¸€éƒ¨åˆ†. è¿è¡Œ 1mvn site æ¥ç”Ÿæˆæ­¤æ–‡æ¡£ã€‚å¹¶ä¸”æ¬¢è¿Žå¯¹æ­¤è¿›è¡Œä¿®æ”¹å’Œæ”¹è¿›ã€‚ç‚¹å‡»æ­¤é“¾æŽ¥ æä¾›bugåé¦ˆ. æ–‡æ¡£è´¡çŒ®æœ‰å…³AsciiDocçš„æ¦‚è¿°ä»¥åŠæ–‡æ¡£å‚ä¸Žçš„å»ºè®®ï¼Œè¯·å‚é˜…æœ¬æ–‡æ¡£åŽé¢çš„ç›¸å…³éƒ¨åˆ†ã€‚ å¦‚æžœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡æ¶‰è¶³åˆ†å¸ƒå¼è®¡ç®—é¢†åŸŸâ€¦â€¦ è‹¥è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡è¸å…¥åˆ†å¸ƒå¼è®¡ç®—çš„ç²¾å½©ä¸–ç•Œï¼Œä½ ä¼šæ„Ÿåˆ°è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„å¹´ä»£ã€‚åˆ†å¸ƒå¼è®¡ç®—æ˜¯å¾ˆéš¾çš„ï¼Œåšä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿéœ€è¦å¾ˆå¤šè½¯ç¡¬ä»¶å’Œç½‘ç»œçš„æŠ€èƒ½ã€‚ ä½ çš„é›†ç¾¤å¯ä»¥ä¼šå› ä¸ºå„å¼å„æ ·çš„é”™è¯¯å‘ç”Ÿæ•…éšœã€‚æ¯”å¦‚HBaseæœ¬èº«çš„Bug,é”™è¯¯çš„é…ç½®(åŒ…æ‹¬æ“ä½œç³»ç»Ÿ)ï¼Œç¡¬ä»¶çš„æ•…éšœ(ç½‘å¡å’Œç£ç›˜ç”šè‡³å†…å­˜)ï¼ˆIssueé‡Œæœ‰ä¸¤ä¸ªæœ€è¿‘çš„ç¡¬ä»¶é—®é¢˜ç¤ºä¾‹ï¼Œè¡¨çŽ°ä¸ºâ€œHBaseå¾ˆæ…¢â€ï¼‰ å¦‚æžœä½ ä¸€ç›´åœ¨å†™å•æœºç¨‹åºçš„è¯ï¼Œä½ éœ€è¦é‡æ–°å¼€å§‹å­¦ä¹ ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹åˆ†å¸ƒå¼è®¡ç®—çš„è°¬è®º. æ‰€ä»¥ï¼Œæ¬¢è¿Žä½ ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„åœ°æ–¹ã€‚HBaseç¤¾åŒºã€‚ æŠ¥å‘Šbugsè¯·ä½¿ç”¨ [JIRA]ï¼ˆhttps://issues.apache.org/jira/browse/hbaseï¼‰ æŠ¥å‘Šä¸Žå®‰å…¨æ— å…³çš„é”™è¯¯ã€‚ ä¸ºäº†ä¿æŠ¤çŽ°æœ‰HBaseå®‰è£…å…å—æ–°æ¼æ´žçš„å½±å“ï¼Œè¯·å‹¿ä½¿ç”¨JIRAæŠ¥å‘Šä¸Žå®‰å…¨ç›¸å…³çš„é”™è¯¯ã€‚ ç›¸åï¼Œè¯·å°†æ‚¨çš„æŠ¥å‘Šå‘é€åˆ°é‚®ä»¶åˆ—è¡¨[private@hbase.apache.org]ï¼ˆmailtoï¼šprivate@hbase.apache.orgï¼‰ï¼Œè¯¥åˆ—è¡¨å…è®¸ä»»ä½•äººå‘é€é‚®ä»¶ï¼Œä½†é™åˆ¶è°å¯ä»¥é˜…è¯»é‚®ä»¶ã€‚ è¯¥åˆ—è¡¨ä¸­çš„æŸä¸ªäººå°†ä¸Žæ‚¨è”ç³»ä»¥è·Ÿè¿›æ‚¨çš„æŠ¥å‘Šã€‚ æ”¯æŒå’Œæµ‹è¯•ä»¥ä¸‹çŸ­è¯­/æ”¯æŒ/ï¼Œ/ä¸æ”¯æŒ/ï¼Œ/æµ‹è¯•/ï¼Œå’Œ/æœªæµ‹è¯•/ç»å¸¸å‡ºçŽ°åœ¨æœ¬æŒ‡å—ä¸­ã€‚ ä¸ºæ–¹ä¾¿èµ·è§ï¼Œè¿™é‡Œå…ˆç®€è¦è§£é‡Šäº†è¿™äº›çŸ­è¯­åœ¨HBaseèƒŒæ™¯ä¸‹çš„å«ä¹‰ è®¸å¤šHadoopä¾›åº”å•†éƒ½æä¾›Apache HBaseçš„å•†ä¸šç‰ˆæœ¬çš„æŠ€æœ¯æ”¯æŒã€‚ ä½†è¿™ä¸æ˜¯åœ¨Apache HBaseé¡¹ç›®ä¸­/ æ”¯æŒ /çš„æ„ä¹‰ã€‚ Apache HBaseå›¢é˜Ÿå¯¹æ‚¨çš„HBaseé›†ç¾¤ï¼Œé…ç½®æˆ–æ•°æ®ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚ æ”¯æŒåœ¨Apache HBaseä¸­ï¼Œ/ æ”¯æŒ /æ„å‘³ç€HBaseè¢«è®¾è®¡ä¸ºä»¥æ‰€æè¿°çš„æ–¹å¼å·¥ä½œï¼Œå¹¶ä¸”åº”è¯¥å°†ä¸Žå®šä¹‰çš„è¡Œä¸ºæˆ–åŠŸèƒ½çš„åå·®æŠ¥å‘Šä¸ºé”™è¯¯ã€‚ ä¸æ”¯æŒåœ¨Apache HBaseä¸­ï¼Œ/ä¸æ”¯æŒ/æ„å‘³ç€ç”¨ä¾‹æˆ–ä½¿ç”¨æ¨¡å¼ä¸ä¼šé‡è§†ï¼Œåº”è¯¥è¢«è§†ä¸ºåæ¨¡å¼ã€‚å¦‚æžœæ‚¨è®¤ä¸ºåº”è¯¥é’ˆå¯¹ç»™å®šåŠŸèƒ½æˆ–ä½¿ç”¨æ¨¡å¼é‡æ–°è€ƒè™‘ï¼Œè¯·æäº¤JIRAæˆ–é€šè¿‡é‚®ä»¶è®¨è®ºã€‚ å·²æµ‹è¯•åœ¨Apache HBaseä¸­ï¼Œ/ å·²æµ‹è¯• /æ„å‘³ç€å•å…ƒæˆ–é›†æˆæµ‹è¯•æ¶µç›–äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå¹¶ä¸”å·²ç»è¯æ˜Žå¯ä»¥æŒ‰é¢„æœŸå·¥ä½œã€‚ æœªæµ‹è¯•åœ¨Apache HBaseä¸­ï¼Œ/æœªæµ‹è¯•/è¡¨ç¤ºåŠŸèƒ½æˆ–ä½¿ç”¨æ¨¡å¼å¯èƒ½æˆ–å¯èƒ½ä¸ä»¥ç»™å®šæ–¹å¼å·¥ä½œï¼Œå¹¶ä¸”å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šæŸåæ‚¨çš„æ•°æ®æˆ–å¯¼è‡´æ“ä½œé—®é¢˜ã€‚è¿™æ˜¯æœªçŸ¥çš„ï¼Œæ²¡æœ‰ä»»ä½•ä¿è¯ã€‚å¦‚æžœæ‚¨å¯ä»¥æä¾›æŒ‡å®šä¸º/æœªç»æµ‹è¯•/çš„åŠŸèƒ½ä»¥ç‰¹å®šæ–¹å¼å·¥ä½œçš„è¯æ®ï¼Œè¯·æäº¤æµ‹è¯•å’ŒæŒ‡æ ‡ï¼Œä»¥ä¾¿å…¶ä»–ç”¨æˆ·å¯ä»¥ç¡®å®šä½¿ç”¨æœ‰å…³åŠŸèƒ½æˆ–ä½¿ç”¨æ¨¡å¼ã€‚]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Apache HBase â„¢ ä¸­æ–‡æŒ‡å—(æœ€æ–°ç‰ˆHBase 3.0.0)-ch1å¿«é€Ÿå¼€å§‹]]></title>
    <url>%2F2019%2F02%2F28%2FApache-HBase-%E2%84%A2-%E4%B8%AD%E6%96%87%E6%8C%87%E5%8D%97-%E6%9C%80%E6%96%B0%E7%89%88HBase-3-0-0-ch1%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B%2F</url>
    <content type="text"><![CDATA[å…¥é—¨ è¯‘è€…: xixici 1. ä»‹ç»å¿«é€Ÿå¼€å§‹ ä¼šä»‹ç»å¦‚ä½•è¿è¡Œä¸€ä¸ªå•æœºç‰ˆçš„Standaloneæ¨¡å¼HBase. 2. å¿«é€Ÿå¼€å§‹ - Standalone HBaseæœ¬ç« èŠ‚ä»‹ç»äº†åœ¨å•æœºå®‰è£…HBaseçš„æ–¹æ³•ã€‚ä¼šå¼•å¯¼ä½ é€šè¿‡hbase shellåˆ›å»ºä¸€ä¸ªè¡¨ï¼Œæ’å…¥ä¸€è¡Œï¼Œç„¶åŽæ‰§è¡Œputå’ŒscanæŒ‡ä»¤ï¼Œå¼€å¯å’Œå…³é—­è¿™å¼ è¡¨ï¼Œå¼€å¯å’Œåœæ­¢HBaseã€‚åªè¦10åˆ†é’Ÿå°±å¯ä»¥å®Œæˆä»¥ä¸‹çš„æ“ä½œã€‚ é™¤äº†ä¸‹è½½HBaseå¤–ï¼Œæ­¤è¿‡ç¨‹ä¸åˆ°10åˆ†é’Ÿå°±èƒ½å®Œæˆã€‚ 2.1. JDK ç‰ˆæœ¬è¦æ±‚HBaseè¦æ±‚å®‰è£…JDKã€‚æœ‰å…³æ”¯æŒJDKç‰ˆæœ¬çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…Javaã€‚ 2.2. HBaseå¼€å§‹è¿‡ç¨‹ï¼šä¸‹è½½ã€é…ç½®å’Œå¯åŠ¨ Standalone HBase é€‰æ‹©ä¸€ä¸ª[Apacheä¸‹è½½é•œåƒ]ï¼ˆhttps://www.apache.org/dyn/closer.lua/hbase/ï¼‰ã€‚ å»ºè®®ç‚¹å‡»é¡¶éƒ¨é“¾æŽ¥ï¼Œè¿›å…¥_HBase Releases_ ç‚¹å‡»_stable_çš„æ–‡ä»¶å¤¹ï¼Œç„¶åŽä¸‹è½½å°†ä»¥_tar.gz_ç»“å°¾çš„äºŒè¿›åˆ¶æ–‡ä»¶åˆ°æœ¬åœ°ã€‚æš‚æ—¶ä¸è¦ä¸‹è½½ä»¥_src.tar.gz_ç»“å°¾çš„æ–‡ä»¶ã€‚ è§£åŽ‹ç¼©ï¼Œç„¶åŽè¿›å…¥åˆ°é‚£ä¸ªè¦è§£åŽ‹çš„ç›®å½•. 12$ tar xzvf hbase-3.0.0-SNAPSHOT-bin.tar.gz$ cd hbase-3.0.0-SNAPSHOT/ åœ¨å¯åŠ¨HBaseä¹‹å‰ï¼Œæ‚¨éœ€è¦è®¾ç½®JAVA_HOMEçŽ¯å¢ƒå˜é‡ã€‚æ‚¨å¯ä»¥é€šè¿‡æ“ä½œç³»ç»Ÿçš„å¸¸ç”¨è®¾ç½®æ¥è®¾ç½®å˜é‡ï¼ŒHBaseä¹Ÿæä¾›äº†ä¸€ä¸ªä¸­å¿ƒæœºåˆ¶_conf/hbase-env.sh_ã€‚ç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œå–æ¶ˆæ³¨é‡Šä»¥JAVA_HOMEå¼€å¤´çš„è¡Œï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºé€‚åˆæ‚¨çš„æ“ä½œç³»ç»Ÿçš„è·¯å¾„ã€‚åº”å°†JAVA_HOMEå˜é‡è®¾ç½®ä¸ºåŒ…å«å¯æ‰§è¡Œæ–‡ä»¶_bin/java_çš„ç›®å½•ã€‚å¦‚ä»Šï¼Œå¤§å¤šæ•°Linuxæ“ä½œç³»ç»Ÿéƒ½æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä¾‹å¦‚RHELæˆ–CentOSä¸Šçš„/usr/bin/alternativesï¼Œå¯ä»¥æ–¹ä¾¿åˆ‡æ¢çŽ¯å¢ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥å°†JAVA_HOMEè®¾ç½®ä¸ºåŒ…å«_bin/java_çš„ç¬¦å·é“¾æŽ¥çš„ç›®å½•ï¼Œé€šå¸¸ä¸º_/usr_ã€‚ 1JAVA_HOME=/usr ç¼–è¾‘HBaseä¸»é…ç½®æ–‡ä»¶_conf/hbase-site.xml_.æ­¤æ—¶ï¼Œæ‚¨éœ€è¦åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸ŠæŒ‡å®šHBaseå’ŒZooKeeperæ•°æ®å­˜å‚¨ç›®å½•ï¼Œå¹¶çŸ¥æ™“ä¸€äº›é£Žé™©ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHBaseä¼šåœ¨/tmpä¸‹åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ï¼Œä½†æ˜¯è®¸å¤šæœåŠ¡ä¸ºåœ¨é‡æ–°å¯åŠ¨æ—¶ä¼šåˆ é™¤_/tmp_çš„å†…å®¹ï¼Œå› æ­¤æ‚¨éœ€è¦å°†æ•°æ®å­˜å‚¨åœ¨å…¶ä»–ä½ç½®ã€‚ä»¥ä¸‹é…ç½®æ–‡ä»¶å¤„åœ¨_hbase_,åä¸ºtestuserçš„ç”¨æˆ·çš„ä¸»ç›®å½•ä¸­ã€‚é¦–æ¬¡å®‰è£…HBaseä¸ºç©ºï¼Œå¯ä»¥å°†&lt;property&gt;æ ‡è®°ç²˜è´´åœ¨&lt;configuration&gt;å†…ã€‚ ç¤ºä¾‹ 1. _hbase-site.xml_ Standalone HBaseé…ç½® 12345678910111213141516171819202122232425&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;value&gt;file:///home/testuser/hbase&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt; &lt;value&gt;/home/testuser/zookeeper&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.unsafe.stream.capability.enforce&lt;/name&gt; &lt;value&gt;false&lt;/value&gt; &lt;description&gt; Controls whether HBase will check for stream capabilities (hflush/hsync). Disable this if you intend to run on LocalFileSystem, denoted by a rootdir with the &apos;file://&apos; scheme, but be mindful of the NOTE below. WARNING: Setting this to false blinds you to potential data loss and inconsistent system state in the event of process and/or node failures. If HBase is complaining of an inability to use hsync or hflush it&apos;s most likely not a false positive. &lt;/description&gt; &lt;/property&gt;&lt;/configuration&gt; æ‚¨ä¸éœ€è¦åˆ›å»ºHBaseæ•°æ®ç›®å½•ã€‚ HBaseä¼šè‡ªåŠ¨åˆ›å»ºã€‚å¦‚æžœæ‚¨æƒ³è¦è‡ªå®šä¹‰åˆ›å»ºç›®å½•ï¼ŒHBaseå°†å°è¯•è¿›è¡Œè¿ç§» ã€‚ ä¸Šä¾‹ä¸­çš„_hbase.rootdir_æŒ‡å‘_local filesystem_ä¸­çš„ç›®å½•ã€‚ â€˜fileï¼š//â€˜å‰ç¼€æ˜¯è¡¨ç¤ºæœ¬åœ°æ–‡ä»¶ç³»ã€‚æ‚¨åº”è¯¥å°†é…ç½®ç¤ºä¾‹ä¸­çš„è­¦å‘Šç‰¢è®°åœ¨å¿ƒã€‚åœ¨Standaloneæ¨¡å¼ä¸‹ï¼ŒHBaseåˆ©ç”¨Apache Hadoopdçš„æœ¬åœ°æ–‡ä»¶å­˜å‚¨ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¹¶ä¸èƒ½ä¿è¯HBaseè¿è¡Œçš„æŒä¹…æ€§ã€‚è¿™åªæ˜¯é€‚ç”¨äºŽäºŽæœ¬åœ°å¼€å‘å’Œæµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥å¾ˆå¥½çš„æŽ§åˆ¶é›†ç¾¤æ•…éšœçš„æˆæœ¬ã€‚å®ƒä¸é€‚åˆç”Ÿäº§éƒ¨ç½²ï¼Œå¦åˆ™ä½ ä¼šä¸¢å¤±æ•°æ®ã€‚ ä¸ºåœ¨HDFSä¸Šéƒ¨ç½²HBase, å¯ä»¥å°† _hbase.rootdir_ æŒ‡å‘å¦‚: _hdfs://namenode.example.org:8020/hbase_. æœ‰å…³æ­¤å˜é‡çš„æ›´å¤šç”¨æ³•ï¼Œå¯æŸ¥çœ‹ç« èŠ‚åŸºäºŽHDFSéƒ¨ç½²Standalone HBase. è„šæœ¬_bin/start-hbase.sh_ä¸ºå¯åŠ¨HBaseæä¾›äº†æ–¹ä¾¿çš„é€”å¾„ã€‚æ‰§è¡Œå‘½ä»¤ï¼Œåœ¨æ ‡å‡†è¾“å‡ºçš„æ—¥å¿—é‡Œå¯ä»¥çœ‹åˆ°HBaseå¯åŠ¨æˆåŠŸçš„æ¶ˆæ¯ã€‚ä½ å¯ä»¥ä½¿ç”¨ jps å‘½ä»¤æ¥ç¡®è®¤ä½ æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›è¡Œ HMasterã€‚åœ¨ HBase çš„Standaloneæ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„æœåŠ¡éƒ½è¿è¡Œåœ¨åŒä¸€JVMä¸­ï¼Œå¦‚ HMasterï¼Œå•ä¾‹çš„ HRegionServer å’Œ ZooKeeper çš„å®ˆæŠ¤è¿›ç¨‹ã€‚å¯ä»¥å‰å¾€Web UI_http://localhost:16010_æŸ¥çœ‹HBase. Javaå¿…é¡»å®‰è£…ä¸”å¯ç”¨. å¦‚æžœä½ æ”¶åˆ°é”™è¯¯æç¤ºï¼ŒJavaæœªå®‰è£…ï¼Œå¯èƒ½javaä½äºŽéžæ ‡å‡†ä½ç½®ï¼Œä½ å¯ä»¥ç¼–è¾‘_conf/hbase-env.sh_ ,ä¿®æ”¹ JAVA_HOME è·¯å¾„ï¼Œå¹¶ç¡®ä¿åŒ…å« _bin/java_. è¿‡ç¨‹: é¦–æ¬¡ä½¿ç”¨HBase è¿žæŽ¥HBase åœ¨HBaseå®‰è£…ç›®å½•_bin/_ ç›®å½•ä¸‹ä½¿ç”¨hbase shellå‘½ä»¤è¿žæŽ¥æ­£åœ¨è¿è¡Œçš„HBaseå®žä¾‹ã€‚ åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“ä½ å¯åŠ¨HBase Shell å¹¶å¿½ç•¥ä¸€äº›ç”¨æ³•å’Œç‰ˆæœ¬ä¿¡æ¯åŽï¼ŒHBase Shell æ˜¯ä»¥å­—ç¬¦&gt; ç»“å°¾ã€‚ 12$ ./bin/hbase shellhbase(main):001:0&gt; é¢„è§ˆ HBase Shell çš„å¸®åŠ©æ–‡æœ¬ è¾“å…¥helpå¹¶å›žè½¦, å¯ä»¥çœ‹åˆ°HBase Shellçš„åŸºæœ¬ä¿¡æ¯å’Œä¸€äº›ç¤ºä¾‹å‘½ä»¤.è¯·æ³¨æ„ï¼Œè¡¨åï¼Œè¡Œï¼Œåˆ—éƒ½å¿…é¡»ç”¨å¼•å·å­—ç¬¦æ‹¬èµ·æ¥ã€‚ åˆ›å»ºè¡¨ ä½¿ç”¨ createåˆ›å»ºä¸€ä¸ªè¡¨ï¼Œä½ å¿…é¡»æ‰§è¡Œä¸€ä¸ªè¡¨åå’Œåˆ—æ—åã€‚ 1234hbase(main):001:0&gt; create &apos;test&apos;, &apos;cf&apos;0 row(s) in 0.4170 seconds=&gt; Hbase::Table - test è¡¨ä¿¡æ¯ ä½¿ç”¨ list æŸ¥çœ‹å­˜åœ¨è¡¨ 123456hbase(main):002:0&gt; list &apos;test&apos;TABLEtest1 row(s) in 0.0180 seconds=&gt; [&quot;test&quot;] ä½¿ç”¨ describe æŸ¥çœ‹è¡¨ç»†èŠ‚åŠé…ç½® 12345678910hbase(main):003:0&gt; describe &apos;test&apos;Table test is ENABLEDtestCOLUMN FAMILIES DESCRIPTION&#123;NAME =&gt; &apos;cf&apos;, VERSIONS =&gt; &apos;1&apos;, EVICT_BLOCKS_ON_CLOSE =&gt; &apos;false&apos;, NEW_VERSION_BEHAVIOR =&gt; &apos;false&apos;, KEEP_DELETED_CELLS =&gt; &apos;FALSE&apos;, CACHE_DATA_ON_WRITE =&gt;&apos;false&apos;, DATA_BLOCK_ENCODING =&gt; &apos;NONE&apos;, TTL =&gt; &apos;FOREVER&apos;, MIN_VERSIONS =&gt; &apos;0&apos;, REPLICATION_SCOPE =&gt; &apos;0&apos;, BLOOMFILTER =&gt; &apos;ROW&apos;, CACHE_INDEX_ON_WRITE =&gt; &apos;false&apos;, IN_MEMORY =&gt; &apos;false&apos;, CACHE_BLOOMS_ON_WRITE =&gt; &apos;false&apos;, PREFETCH_BLOCKS_ON_OPEN =&gt; &apos;false&apos;, COMPRESSION =&gt; &apos;NONE&apos;, BLOCKCACHE =&gt; &apos;true&apos;, BLOCKSIZE =&gt; &apos;65536&apos;&#125;1 row(s)Took 0.9998 seconds æ’å…¥æ•°æ® ä½¿ç”¨ put æ’å…¥æ•°æ® 12345678hbase(main):003:0&gt; put &apos;test&apos;, &apos;row1&apos;, &apos;cf:a&apos;, &apos;value1&apos;0 row(s) in 0.0850 secondshbase(main):004:0&gt; put &apos;test&apos;, &apos;row2&apos;, &apos;cf:b&apos;, &apos;value2&apos;0 row(s) in 0.0110 secondshbase(main):005:0&gt; put &apos;test&apos;, &apos;row3&apos;, &apos;cf:c&apos;, &apos;value3&apos;0 row(s) in 0.0100 seconds åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¾€testè¡¨ä¸­ä¾æ¬¡æ’å…¥äº†ä¸‰æ¡æ•°æ®ã€‚é¦–å…ˆæ’å…¥äº†ä¸€æ¡rowkeyä¸ºrow1ã€åˆ—ä¸ºcf:aã€å€¼ä¸ºvalue1çš„æ•°æ®ã€‚HBaseä¸­çš„åˆ—æ˜¯åŒ…å«åˆ—æ—å‰ç¼€çš„ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå†’å·å‰çš„ä¸ºåˆ— cfï¼Œå†’å·åŽçš„ä¸ºåˆ—é™å®šç¬¦ a ã€‚ æ‰«æå…¨éƒ¨æ•°æ® ä»ŽHBaseèŽ·å–æ•°æ®çš„é€”å¾„ä¹‹ä¸€å°±æ˜¯ scan ã€‚ä½¿ç”¨ scan å‘½ä»¤æ‰«æè¡¨æ•°æ®ã€‚ä½ å¯ä»¥å¯¹æ‰«æåšé™åˆ¶ï¼Œä¸è¿‡çŽ°åœ¨ï¼ŒèŽ·å–å…¨éƒ¨çš„æ•°æ®ã€‚ 123456hbase(main):006:0&gt; scan &apos;test&apos;ROW COLUMN+CELL row1 column=cf:a, timestamp=1421762485768, value=value1 row2 column=cf:b, timestamp=1421762491785, value=value2 row3 column=cf:c, timestamp=1421762496210, value=value33 row(s) in 0.0230 seconds èŽ·å–ä¸€æ¡æ•°æ® ä½¿ç”¨ get å‘½ä»¤ä¸€æ¬¡èŽ·å–ä¸€æ¡æ•°æ®ã€‚ 1234hbase(main):007:0&gt; get &apos;test&apos;, &apos;row1&apos;COLUMN CELL cf:a timestamp=1421762485768, value=value11 row(s) in 0.0350 seconds ç¦ç”¨è¡¨ å¦‚æžœä½ æƒ³åˆ é™¤ä¸€ä¸ªè¡¨æˆ–è€…æ”¹å˜è¡¨çš„è®¾ç½®ï¼Œä»¥åŠä¸€äº›å…¶ä»–çš„åœºæ™¯ï¼Œé¦–å…ˆä½ éœ€è¦ä½¿ç”¨ disable å‘½ä»¤ç¦ç”¨è¡¨ã€‚ä½ å¯ä»¥ä½¿ç”¨ enable å‘½ä»¤â€œåç¦ç”¨â€å³å¯ç”¨è¡¨ã€‚ 12345hbase(main):008:0&gt; disable &apos;test&apos;0 row(s) in 1.1820 secondshbase(main):009:0&gt; enable &apos;test&apos;0 row(s) in 0.1770 seconds Disable the table again if you tested the enable command above: 12hbase(main):010:0&gt; disable &apos;test&apos;0 row(s) in 1.1820 seconds åˆ é™¤è¡¨ ä½¿ç”¨ drop å‘½ä»¤åˆ é™¤ä¸€ä¸ªè¡¨ã€‚ 12hbase(main):011:0&gt; drop &apos;test&apos;0 row(s) in 0.1370 seconds é€€å‡ºHBase Shell. ä½¿ç”¨quitå‘½ä»¤é€€å‡ºå‘½ä»¤è¡Œå¹¶ä»Žé›†ç¾¤æ–­å¼€è¿žæŽ¥ã€‚HBase ä»ç„¶åœ¨åŽå°è¿è¡Œã€‚ è¿‡ç¨‹: åœæ­¢HBase è„šæœ¬ _bin/start-hbase.sh_ è¿™ä¸ªè„šæœ¬æä¾›äº†ä¾¿åˆ©çš„å¯åŠ¨æ‰€æœ‰ HBase æœåŠ¡ï¼ŒåŒæ ·åœ°ï¼Œ _bin/stop-hbase.sh_ è„šæœ¬ç”¨æ¥åœæ­¢æ‰€æœ‰HBaseæœåŠ¡ã€‚ 123$ ./bin/stop-hbase.shstopping hbase....................$ åœ¨ä½¿ç”¨è¿™ä¸ªå‘½ä»¤åŽï¼Œå®ƒå¯èƒ½éœ€è¦è¿‡å‡ åˆ†é’Ÿæ‰èƒ½åœæŽ‰æœåŠ¡è¿›ç¨‹ã€‚å¯ä»¥ä½¿ç”¨ jps ç¡®è®¤ HMaster å’Œ HRegionServer è¿›ç¨‹æ˜¯å¦å…³é—­ã€‚ ä¸Šé¢å·²ç»å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•å¯åŠ¨å’Œåœæ­¢HBaseçš„Standaloneå®žä¾‹ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç®€è¦ä»‹ç»HBaseå…¶ä»–éƒ¨ç½²æ¨¡å¼ã€‚ 2.3. ä¼ªåˆ†å¸ƒå¼HBaseåœ¨å¿«é€Ÿå¼€å§‹å°èŠ‚éƒ¨ç½²äº†Standaloneæ¨¡å¼çš„HBaseåŽï¼Œæ‚¨å¯ä»¥é‡æ–°é…ç½®ä»¥ä¼ªåˆ†å¸ƒå¼è¿è¡Œã€‚ä¼ªåˆ†å¸ƒæ¨¡å¼æ„å‘³ç€HBaseä»ç„¶åœ¨å•ä¸ªä¸»æœºä¸Šå®Œå…¨è¿è¡Œï¼Œä½†æ˜¯æ¯ä¸ªHBaseå®ˆæŠ¤è¿›ç¨‹ï¼ˆHMasterï¼ŒHRegionServerå’ŒZooKeeperï¼‰ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹è¿è¡Œï¼šåœ¨ç‹¬ç«‹æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹éƒ½è¿è¡Œåœ¨ä¸€ä¸ªjvmè¿›ç¨‹/å®žä¾‹ä¸­ã€‚ é»˜è®¤æƒ…å†µä¸‹, é™¤éžä½ æŒ‰ å¿«é€Ÿå¼€å§‹æ›´æ”¹hbase.rootdir çš„é…ç½®ï¼Œå¦åˆ™ä½ çš„æ•°æ®ä»ä¼šå­˜å‚¨åœ¨ _/tmp/_ä¸­ã€‚å‡è®¾HDFSç³»ç»Ÿå¯ç”¨ï¼Œæˆ‘ä»¬å°†æ•°æ®å­˜å‚¨åœ¨HDFSä¸Šã€‚ å½“ç„¶ï¼Œæ‚¨å¯ä»¥è·³è¿‡HDFSé…ç½®ï¼Œç»§ç»­ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚ Hadoopé…ç½® æ­¤è¿‡ç¨‹å‡å®šå·²åœ¨æœ¬åœ°ç³»ç»Ÿæˆ–è¿œç¨‹ç³»ç»Ÿä¸Šé…ç½®Hadoopå’ŒHDFSï¼Œå¹¶ä¸”ä¿è¯æ­£åœ¨è¿è¡Œä¸”å¯ç”¨ï¼Œç‰ˆæœ¬ä¸ºHadoop 2ã€‚Hadoopæ–‡æ¡£å‘å¯¼ é…ç½®å•èŠ‚ç‚¹é›†ç¾¤. åœæ­¢HBase å‡è®¾ä½ åˆšåˆšå®Œæˆ å¿«é€Ÿå¼€å§‹ , Hbaseæ­£åœ¨è¿è¡Œ, é‚£ä¹ˆè¯·åœæ­¢ä»–.è¿™ä¸ªè¿‡ç¨‹å°†åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç›®å½•ï¼ŒHBaseå°†å­˜å‚¨å®ƒçš„æ•°æ®ï¼Œæ‰€ä»¥ä½ ä¹‹å‰åˆ›å»ºçš„ä»»ä½•æ•°æ®åº“éƒ½å°†ä¸¢å¤±ã€‚ é…ç½®HBase ç¼–è¾‘ _hbase-site.xml_ . é¦–å…ˆï¼Œæ·»åŠ ä»¥ä¸‹æŒ‡ç¤ºHBaseä»¥åˆ†å¸ƒå¼æ¨¡å¼è¿è¡Œçš„å±žæ€§ï¼Œæ¯ä¸ªå®ˆæŠ¤è¿›ç¨‹æœ‰ä¸€ä¸ªJVMå®žä¾‹ 1234&lt;property&gt; &lt;name&gt;hbase.cluster.distributed&lt;/name&gt; &lt;value&gt;true&lt;/value&gt;&lt;/property&gt; æŽ¥ä¸‹æ¥ï¼Œå°† hbase.rootdir ä»Žæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ›´æ”¹ä¸ºæ‚¨çš„ HDFS å®žä¾‹çš„åœ°å€ï¼Œä½¿ç”¨ hdfs:////çš„ URI è¯­æ³•ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒHDFSåœ¨ç«¯å£8020\çš„æœ¬åœ°ä¸»æœºä¸Šè¿è¡Œã€‚å¹¶ç¡®ä¿ hbase.unsafe.stream.capability.enforceåˆ é™¤æˆ–ä¸ºtrue. 1234&lt;property&gt; &lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;value&gt;hdfs://localhost:8020/hbase&lt;/value&gt;&lt;/property&gt; æ‚¨ä¸éœ€è¦åœ¨HDFSä¸­åˆ›å»ºç›®å½•ã€‚HBaseä¼šä¸ºä½ åšè¿™ä¸ªã€‚å¦‚æžœä½ è¦æ›´æ”¹ç›®å½•ï¼ŒHBaseä¼šè¯•å›¾è¿ç§»ã€‚ å¯åŠ¨HBase ä½¿ç”¨_bin/start-hbase.sh_ å¯åŠ¨HBase. å¦‚æžœæ‚¨çš„ç³»ç»Ÿé…ç½®æ­£ç¡®ï¼Œè¯¥jpså‘½ä»¤åº”æ˜¾ç¤ºHMasterå’ŒHRegionServerè¿›ç¨‹æ­£åœ¨è¿è¡Œã€‚ æ£€æŸ¥HDFSä¸­çš„HBaseç›®å½• å¦‚æžœä¸€åˆ‡æ­£å¸¸ï¼ŒHBaseåœ¨HDFSä¸­åˆ›å»ºå®ƒçš„ç›®å½•ã€‚åœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œå®ƒå­˜å‚¨åœ¨HDFSä¸Šçš„_/hbase/_ä¸­ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ hadoop çš„ _bin/_ç›®å½•ä¸­çš„hadoop fs å‘½ä»¤æ¥åˆ—å‡ºæ­¤ç›®å½•ã€‚ 123456789$ ./bin/hadoop fs -ls /hbaseFound 7 itemsdrwxr-xr-x - hbase users 0 2014-06-25 18:58 /hbase/.tmpdrwxr-xr-x - hbase users 0 2014-06-25 21:49 /hbase/WALsdrwxr-xr-x - hbase users 0 2014-06-25 18:48 /hbase/corruptdrwxr-xr-x - hbase users 0 2014-06-25 18:58 /hbase/data-rw-r--r-- 3 hbase users 42 2014-06-25 18:41 /hbase/hbase.id-rw-r--r-- 3 hbase users 7 2014-06-25 18:41 /hbase/hbase.versiondrwxr-xr-x - hbase users 0 2014-06-25 21:49 /hbase/oldWALs åˆ›å»ºä¸€ä¸ªè¡¨å¹¶ä½¿ç”¨æ•°æ®å¡«å……å®ƒ æ‚¨å¯ä»¥ä½¿ç”¨HBase Shellåˆ›å»ºä¸€ä¸ªè¡¨ï¼Œä½¿ç”¨æ•°æ®å¡«å……å®ƒï¼Œä½¿ç”¨ä¸Žshellç»ƒä¹ ä¸­ç›¸åŒçš„æ­¥éª¤ã€‚ å¯åŠ¨å’Œåœæ­¢å¤‡ä»½HBaseä¸»ï¼ˆHMasterï¼‰æœåŠ¡å™¨ åœ¨åŒä¸€ä¸ªç¡¬ä»¶ä¸Šè¿è¡Œå¤šä¸ªHMasterå®žä¾‹åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå°±åƒè¿è¡Œä¼ªåˆ†å¸ƒå¼é›†ç¾¤å¯¹äºŽç”Ÿäº§æ²¡æœ‰æ„ä¹‰ä¸€æ ·ã€‚æ­¤æ­¥éª¤ä»…ä¾›æµ‹è¯•å’Œå­¦ä¹ ä¹‹ç”¨ã€‚ HMasteræœåŠ¡å™¨æŽ§åˆ¶HBaseé›†ç¾¤ã€‚ä½ å¯ä»¥å¯åŠ¨æœ€å¤š9ä¸ªå¤‡ä»½HMasteræœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨æ€»å…±æœ‰10ä¸ªHMasterè®¡ç®—ä¸»æœåŠ¡å™¨ã€‚ä½¿ç”¨local-master-backup.shå¯åŠ¨å¤‡ä»½HMasterã€‚å¯¹äºŽè¦å¯åŠ¨çš„æ¯ä¸ªå¤‡ä»½ä¸»èŠ‚ç‚¹ï¼Œè¯·æ·»åŠ ä¸€ä¸ªè¡¨ç¤ºè¯¥ä¸»èŠ‚ç‚¹çš„ç«¯å£åç§»é‡çš„å‚æ•°ã€‚æ¯ä¸ªHMasterä½¿ç”¨ä¸‰ä¸ªç«¯å£ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸º16010,16020å’Œ16030ï¼‰ã€‚ç«¯å£åç§»é‡2æ·»åŠ åˆ°è¿™äº›ç«¯å£ï¼Œé‚£ä¹ˆå¤‡ä»½HMasterå°†ä½¿ç”¨ç«¯å£16012,16022å’Œ16032ã€‚ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ç«¯å£ä¸ºï¼š16012/16022/16032ï¼Œ16013/16023/16033å’Œ16015/16025/16035 1$ ./bin/local-master-backup.sh start 2 3 5 è¦åœ¨ä¸æ€æ­»æ•´ä¸ªç¾¤é›†çš„æƒ…å†µä¸‹æ€æ­»å¤‡ä»½ä¸»æœºï¼Œåˆ™éœ€è¦æŸ¥æ‰¾å…¶è¿›ç¨‹IDï¼ˆPIDï¼‰ã€‚PIDå­˜å‚¨åœ¨ä¸€ä¸ªåä¸º_/tmp/hbase-USER-X-master.pid_çš„æ–‡ä»¶ä¸­ã€‚è¯¥æ–‡ä»¶çš„å”¯ä¸€å†…å®¹æ˜¯PIDã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¯¥kill -9å‘½ä»¤æ¥æ€æ­»è¯¥PIDã€‚ä»¥ä¸‹å‘½ä»¤å°†ç»ˆæ­¢å…·æœ‰ç«¯å£åç§»1çš„ä¸»æœåŠ¡å™¨ï¼Œä½†ä¿æŒç¾¤é›†æ­£åœ¨è¿è¡Œï¼š 1$ cat /tmp/hbase-testuser-1-master.pid |xargs kill -9 å¯åŠ¨å’Œåœæ­¢å…¶ä»–RegionServers HRegionServeræŒ‰ç…§HMasterçš„é…ç½®ç®¡ç†StoreFilesä¸­çš„æ•°æ®ã€‚é€šå¸¸ï¼Œä¸€ä¸ªHRegionServeråœ¨é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚åœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸Šè¿è¡Œå¤šä¸ªHRegionServerså¯¹äºŽä¼ªåˆ†å¸ƒå¼æ¨¡å¼ä¸‹çš„æµ‹è¯•éžå¸¸æœ‰ç”¨ã€‚è¯¥local-regionservers.shå‘½ä»¤å…è®¸æ‚¨è¿è¡Œå¤šä¸ªRegionServerã€‚å®ƒä»¥ç±»ä¼¼çš„local-master-backup.shå‘½ä»¤çš„æ–¹å¼å·¥ä½œï¼Œå› ä¸ºæ‚¨æä¾›çš„æ¯ä¸ªå‚æ•°éƒ½ä»£è¡¨å®žä¾‹çš„ç«¯å£åç§»é‡ã€‚æ¯ä¸ªRegionServeréœ€è¦ä¸¤ä¸ªç«¯å£ï¼Œé»˜è®¤ç«¯å£æ˜¯16020å’Œ16030ã€‚ä½†æ˜¯ï¼Œç”±äºŽHMasterä½¿ç”¨é»˜è®¤ç«¯å£ï¼Œæ‰€ä»¥å…¶ä»–RegionServersçš„åŸºæœ¬ç«¯å£ä¸æ˜¯é»˜è®¤ç«¯å£ï¼Œè€ŒHMasterè‡ªä»ŽHBaseç‰ˆæœ¬1.1.0ä»¥æ¥ä¹Ÿæ˜¯RegionServerã€‚åŸºæœ¬ç«¯å£æ˜¯16200å’Œ16300ã€‚æ‚¨å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œå¦å¤–99ä¸ªä¸æ˜¯HMasteræˆ–å¤‡ä»½HMasterçš„RegionServerã€‚ä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨å¦å¤–å››ä¸ªRegionServersï¼Œå®ƒä»¬åœ¨ä»Ž16202/16302ï¼ˆåŸºæœ¬ç«¯å£16200/16300åŠ 2ï¼‰å¼€å§‹çš„é¡ºåºç«¯å£ä¸Šè¿è¡Œ HBaseä»Žç‰ˆæœ¬1.1.0å¼€å§‹, HMasterä¸ä½¿ç”¨ region serverç«¯å£, è€Œä¸ºRegionServersé¢„ç•™äº†10ä¸ªç«¯å£ (16020 to 16029 and 16030 to 16039). ä¸ºæ”¯æŒæ·»åŠ RegionServers, åœ¨å¯åŠ¨local-regionservers.shä¹‹å‰,éœ€è®¾ç½®HBASE_RS_BASE_PORT å’Œ HBASE_RS_INFO_BASE_PORT.ä¾‹å¦‚, ä½¿ç”¨åŸºæœ¬ç«¯å£16200å’Œ16300ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å¦å¤–99ä¸ªç«¯å£ã€‚ ä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨å¦å¤–å››ä¸ªRegionServersï¼Œå®ƒä»¬åœ¨ä»Ž16202/16302ï¼ˆåŸºæœ¬ç«¯å£16200/16300åŠ 2ï¼‰å¼€å§‹çš„é¡ºåºç«¯å£ä¸Šè¿è¡Œã€‚ 1$ .bin/local-regionservers.sh start 2 3 4 5 è¦æ‰‹åŠ¨åœæ­¢RegionServerï¼Œè¯·ä½¿ç”¨å¸¦æœ‰stopå‚æ•°å’ŒæœåŠ¡å™¨åç§»é‡çš„local-regionservers.shå‘½ä»¤åœæ­¢ã€‚ 1$ .bin/local-regionservers.sh stop 3 åœæ­¢HBase æ‚¨å¯ä»¥ä½¿ç”¨ _bin/stop-hbase.sh_å‘½ä»¤ä»¥ä¸Žå¿«é€Ÿå¼€å§‹è¿‡ç¨‹ç›¸åŒçš„æ–¹å¼åœæ­¢HBase ã€‚ 2.4. å®Œå…¨åˆ†å¸ƒå¼HBaseå®žé™…ä¸Šï¼Œæ‚¨éœ€è¦ä¸€ä¸ªå®Œå…¨åˆ†å¸ƒå¼çš„é…ç½®æ¥å…¨é¢æµ‹è¯•HBaseï¼Œå¹¶å°†å…¶ç”¨äºŽå®žé™…åœºæ™¯ä¸­ã€‚åœ¨åˆ†å¸ƒå¼é…ç½®ä¸­ï¼Œé›†ç¾¤åŒ…å«å¤šä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªHBaseå®ˆæŠ¤è¿›ç¨‹ã€‚è¿™äº›åŒ…æ‹¬ä¸»è¦å’Œå¤‡ä»½ä¸»å®žä¾‹ï¼Œå¤šä¸ªZooKeeperèŠ‚ç‚¹å’Œå¤šä¸ªRegionServerèŠ‚ç‚¹ã€‚ æ­¤é«˜çº§å¿«é€Ÿå…¥é—¨å°†ä¸¤ä¸ªä»¥ä¸Šçš„èŠ‚ç‚¹æ·»åŠ åˆ°æ‚¨çš„ç¾¤é›†ã€‚æž¶æž„å¦‚ä¸‹ï¼š Node Name Master ZooKeeper RegionServer node-a.example.com yes yes no node-b.example.com backup yes yes node-c.example.com no yes yes è¿™ä¸ªå¿«é€Ÿå…¥é—¨å‡å®šæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯è™šæ‹Ÿæœºï¼Œå¹¶ä¸”å®ƒä»¬éƒ½åœ¨åŒä¸€ä¸ªç½‘ç»œä¸Šã€‚å®ƒåŸºäºŽä¹‹å‰çš„å¿«é€Ÿå…¥é—¨ã€æœ¬åœ°å’Œä¼ªåˆ†å¸ƒå¼HBaseï¼Œå‡è®¾æ‚¨åœ¨è¯¥è¿‡ç¨‹ä¸­é…ç½®çš„ç³»ç»Ÿæ˜¯çŽ°åœ¨node-aã€‚ç»§ç»­ä¹‹å‰ï¼Œåœ¨node-aåœæ­¢HBase ã€‚ è¯·ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹éƒ½å…·æœ‰å®Œå…¨çš„é€šä¿¡è®¿é—®æƒé™ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•é˜²ç«å¢™è§„åˆ™å¯ä»¥é˜»æ­¢ã€‚å¦‚æžœæ‚¨çœ‹åˆ°ä»»ä½•é”™è¯¯ï¼Œå¦‚no route to hostï¼Œè¯·æ£€æŸ¥æ‚¨çš„é˜²ç«å¢™è®¾ç½®ã€‚ è¿‡ç¨‹: é…ç½®æ— å¯†ç SSHè®¿é—® node-aéœ€è¦èƒ½å¤Ÿç™»å½•node-bå’Œnode-cï¼ˆåŒ…å«è‡ªå·±ï¼‰æ‰èƒ½å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ã€‚å®žçŽ°è¿™ä¸€ç‚¹çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨æ‰€æœ‰ä¸»æœºä¸Šä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·åï¼Œå¹¶é…ç½®node-aåˆ°å…¶ä»–çš„æ— å¯†ç çš„SSHç™»å½• åœ¨node-aï¼Œç”Ÿæˆä¸€ä¸ªå¯†é’¥å¯¹ ä»¥è¿è¡ŒHBaseçš„ç”¨æˆ·èº«ä»½ç™»å½•æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”ŸæˆSSHå¯†é’¥å¯¹ï¼š 1$ ssh-keygen -t rsa å¦‚æžœå‘½ä»¤æˆåŠŸï¼Œå¯†é’¥å¯¹çš„ä½ç½®å°†æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚å…¬é’¥çš„é»˜è®¤åç§°æ˜¯ _id_rsa.pub_. åˆ›å»ºå¹¶å…±äº«å¯†é’¥çš„ç›®å½• åœ¨node-bå’Œä¸Šnode-cï¼Œä»¥HBaseç”¨æˆ·èº«ä»½ç™»å½•ï¼Œå¹¶åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª_.ssh/_ç›®å½•ï¼ˆå¦‚æžœå°šä¸å­˜åœ¨ï¼‰ã€‚å¦‚æžœå®ƒå·²ç»å­˜åœ¨ï¼Œè¯·æ³¨æ„å®ƒå¯èƒ½å·²ç»åŒ…å«å…¶ä»–å€¼ã€‚ å°†å…¬é’¥å¤åˆ¶åˆ°å…¶ä»–èŠ‚ç‚¹ é€šè¿‡ä½¿ç”¨scpæˆ–å…¶ä»–ä¸€äº›å®‰å…¨çš„æ‰‹æ®µï¼Œå®‰å…¨åœ°å°†å…¬é’¥ä»Žnode-aå¤åˆ¶åˆ°æ¯ä¸ªèŠ‚ç‚¹ã€‚åœ¨å…¶ä»–æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªåä¸º_.ssh/authorized_keys_çš„æ–°æ–‡ä»¶ï¼ˆå¦‚æžœè¯¥æ–‡ä»¶å°šä¸å­˜åœ¨ï¼‰ï¼Œå¹¶å°†_id_rsa.pub_ æ–‡ä»¶çš„å†…å®¹é™„åŠ åˆ°è¯¥æ–‡ä»¶çš„æœ«å°¾ã€‚è¯·æ³¨æ„ï¼Œä½ ä¹Ÿéœ€è¦ä¸ºnode-aæœ¬èº«æ‰§è¡Œæ­¤é¡¹ã€‚ 1$ cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys æµ‹è¯•æ— å¯†ç ç™»å½• ç¡®ä¿è¿‡ç¨‹æ­£ç¡®,å¯ä»¥ä»¥ç›¸åŒç”¨æˆ·åä»Žnode-a æ— å¯†ç ç™»å½•å…¶ä»–èŠ‚ç‚¹. ç”±äºŽ node-b æ˜¯å¤‡ä»½ä¸»èŠ‚ç‚¹, é‡å¤ä¸Šè¿°æ­¥éª¤,å°†node-aæ›¿æ¢ä¸ºnode-b.ç¡®ä¿ä¸ä¼šè¦†ç›–çŽ°æœ‰çš„ _.ssh/authorized_keys_ æ–‡ä»¶, å¯ä»¥ä½¿ç”¨&gt;&gt;è¿ç®—ç¬¦è€Œä¸æ˜¯&gt;è¿ç®—ç¬¦å°†æ–°å¯†é’¥æ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾ã€‚ è¿‡ç¨‹: å‡†å¤‡ node-a node-a æ˜¯ä¸»èŠ‚ç‚¹å’ŒZooKeeperè¿›ç¨‹èŠ‚ç‚¹,è€Œä¸æ˜¯RegionServersæœåŠ¡. é¦–å…ˆåœæ­¢node-aRegionServersæœåŠ¡ ç¼–è¾‘ _conf/regionservers_ ç§»é™¤åŒ…å« localhostçš„åˆ—. æ·»åŠ  node-b å’Œ node-cçš„ä¸»æœºåå’ŒIP. å³ä½¿ä½ éžè¦åœ¨ node-aä¸Šè¿è¡Œregionserver, ä½ åº”è¯¥é…ç½®ä¸»æœºå. æ¼”ç¤ºä¸­ä¸º node-a.example.com.ç¡®ä¿æ‚¨èƒ½å¤Ÿå°†é…ç½®åˆ†å‘åˆ°é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šå¹¶æ— ä»»ä½•ä¸»æœºåå†²çªã€‚ä¿å­˜æ–‡ä»¶ã€‚ é…ç½®HBase,å°† node-bä½œä¸ºå¤‡ä»½ä¸»èŠ‚ç‚¹ åœ¨ _conf/_ ç›®å½•åˆ›å»º _backup-masters_æ·»åŠ æ–°çš„ä¸€è¡Œä¸»æœºåä¸º node-b. æ¼”ç¤ºä¸­ä¸»æœºåä¸º node-b.example.com. é…ç½®ZooKeeper å®žé™…ä¸Šï¼Œä½ åº”è¯¥ä»”ç»†è€ƒè™‘ä½ çš„ZooKeeperé…ç½®ã€‚æ‚¨å¯ä»¥åœ¨zookeeperéƒ¨åˆ†æ‰¾åˆ°æ›´å¤šå…³äºŽé…ç½®ZooKeeperçš„ä¿¡æ¯ã€‚è¿™ä¸ªé…ç½®å°†æŒ‡ç¤ºHBaseåœ¨é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šå¯åŠ¨å’Œç®¡ç†ä¸€ä¸ªZooKeeperå®žä¾‹ã€‚åœ¨node-aä¸Šï¼Œç¼–è¾‘_conf/hbase-site.xml_å¹¶æ·»åŠ ä¸‹åˆ—å±žæ€§ 12345678&lt;property&gt; &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt; &lt;value&gt;node-a.example.com,node-b.example.com,node-c.example.com&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt; &lt;value&gt;/usr/local/zookeeper&lt;/value&gt;&lt;/property&gt; åœ¨æ‚¨çš„é…ç½®ä¸­ï¼Œæ‚¨å·²ç»å°†node-aä½œä¸ºlocalhostå¼•ç”¨ï¼Œå°†å¼•ç”¨æ”¹ä¸ºæŒ‡å‘å…¶ä»–èŠ‚ç‚¹ç”¨æ¥å¼•ç”¨ node-açš„ä¸»æœºåã€‚åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œä¸»æœºåæ˜¯node-a.example.com è¿‡ç¨‹: å‡†å¤‡ node-b å’Œ node-c node-b å°†è¿è¡Œä¸€ä¸ªå¤‡ä»½ä¸»æœåŠ¡å™¨å’Œä¸€ä¸ªZooKeeperå®žä¾‹ã€‚ ä¸‹è½½å¹¶è§£åŽ‹HBase å°†HBaseä¸‹è½½å¹¶è§£åŽ‹åˆ°node-bï¼Œå°±åƒæ‚¨ä¸ºç‹¬ç«‹å’Œä¼ªåˆ†å¸ƒå¼å¿«é€Ÿå…¥é—¨æ‰€æ“ä½œçš„ä¸€æ ·ã€‚ å°†é…ç½®æ–‡ä»¶ä»Žnode-aå¤åˆ¶åˆ°node-bå’Œnode-c çš„ç¾¤é›†çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦å…·æœ‰ç›¸åŒçš„é…ç½®ä¿¡æ¯ã€‚å°†_conf/_ ç›®å½•ä¸‹çš„å†…å®¹å¤åˆ¶åˆ°node-bå’Œnode-cä¸Šçš„_conf/_ ç›®å½•ä¸­ã€‚ è¿‡ç¨‹: å¯åŠ¨å¹¶æµ‹è¯•ç¾¤é›† ç¡®ä¿HBaseæ²¡æœ‰åœ¨ä»»ä½•èŠ‚ç‚¹ä¸Šè¿è¡Œ å¦‚æžœæ‚¨åœ¨ä¹‹å‰çš„æµ‹è¯•ä¸­å¿˜è®°åœæ­¢HBaseï¼Œæ‚¨å°†ä¼šé‡åˆ°é”™è¯¯ã€‚é€šè¿‡ä½¿ç”¨è¯¥jpså‘½ä»¤æ£€æŸ¥HBaseæ˜¯å¦åœ¨ä»»ä½•èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å¯»HMaster, HRegionServerå’Œ HQuorumPeerçš„è¿›ç¨‹ã€‚å¦‚æžœä»–ä»¬å­˜åœ¨ï¼Œæ€æŽ‰ä»–ä»¬ å¯åŠ¨é›†ç¾¤ åœ¨node-aï¼Œå‘å‡ºstart-hbase.shå‘½ä»¤ã€‚æ‚¨çš„è¾“å‡ºå°†ç±»ä¼¼äºŽä¸‹é¢çš„è¾“å‡ºã€‚ 12345678$ bin/start-hbase.shnode-c.example.com: starting zookeeper, logging to /home/hbuser/hbase-0.98.3-hadoop2/bin/../logs/hbase-hbuser-zookeeper-node-c.example.com.outnode-a.example.com: starting zookeeper, logging to /home/hbuser/hbase-0.98.3-hadoop2/bin/../logs/hbase-hbuser-zookeeper-node-a.example.com.outnode-b.example.com: starting zookeeper, logging to /home/hbuser/hbase-0.98.3-hadoop2/bin/../logs/hbase-hbuser-zookeeper-node-b.example.com.outstarting master, logging to /home/hbuser/hbase-0.98.3-hadoop2/bin/../logs/hbase-hbuser-master-node-a.example.com.outnode-c.example.com: starting regionserver, logging to /home/hbuser/hbase-0.98.3-hadoop2/bin/../logs/hbase-hbuser-regionserver-node-c.example.com.outnode-b.example.com: starting regionserver, logging to /home/hbuser/hbase-0.98.3-hadoop2/bin/../logs/hbase-hbuser-regionserver-node-b.example.com.outnode-b.example.com: starting master, logging to /home/hbuser/hbase-0.98.3-hadoop2/bin/../logs/hbase-hbuser-master-nodeb.example.com.out ZooKeeperé¦–å…ˆå¯åŠ¨ï¼Œç„¶åŽæ˜¯masterï¼Œç„¶åŽæ˜¯RegionServersï¼Œæœ€åŽæ˜¯backup mastersã€‚ éªŒè¯è¿›ç¨‹æ˜¯å¦æ­£åœ¨è¿è¡Œ åœ¨é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œè¿è¡Œè¯¥jpså‘½ä»¤å¹¶éªŒè¯æ¯å°æœåŠ¡å™¨ä¸Šæ˜¯å¦è¿è¡Œäº†æ­£ç¡®çš„è¿›ç¨‹ã€‚å¦‚æžœç”¨äºŽå…¶ä»–ç”¨é€”ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å…¶ä»–Javaè¿›ç¨‹ã€‚ node-a jps è¾“å‡º 1234$ jps20355 Jps20071 HQuorumPeer20137 HMaster node-b jps è¾“å‡º 12345$ jps15930 HRegionServer16194 Jps15838 HQuorumPeer16010 HMaster node-c jps è¾“å‡º 1234$ jps13901 Jps13639 HQuorumPeer13737 HRegionServer ZooKeeper è¿›ç¨‹åç§° è¿›ç¨‹HQuorumPeeræ˜¯ä¸€ä¸ªç”±HBaseæŽ§åˆ¶å’Œå¯åŠ¨çš„ZooKeeperå®žä¾‹.å¦‚æžœä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ZooKeeperï¼Œåˆ™æ¯ä¸ªç¾¤é›†èŠ‚ç‚¹ä»…é™äºŽä¸€ä¸ªå®žä¾‹ï¼Œå¹¶ä¸”ä»…é€‚ç”¨äºŽæµ‹è¯•ã€‚å¦‚æžœZooKeeperåœ¨HBaseä¹‹å¤–è¿è¡Œï¼Œåˆ™è°ƒç”¨è¯¥è¿›ç¨‹QuorumPeerã€‚æ›´å¤šè¯·æŸ¥çœ‹ç« èŠ‚ zookeeper . Web UI. Web UI æŽ¥å£æ›´æ”¹ åœ¨HBase 0.98.xä»¥ä¸Š, HBase Web UIçš„ç«¯å£ä»Žä¸»èŠ‚ç‚¹çš„60010å’ŒRegionServerçš„60030å˜åŒ–ä¸º16010 å’Œ 16030 å¦‚æžœä¸€åˆ‡è®¾ç½®æ­£ç¡®ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿä½¿ç”¨Webæµè§ˆå™¨è¿žæŽ¥åˆ°Master[http://node-a.example.com:16010/](http://node-a.example.com:16010/)æˆ–Secondary Masterçš„UI [http://node-b.example.com:16010/](http://node-b.example.com:16010/) ã€‚å¦‚æžœæ‚¨å¯ä»¥é€šè¿‡localhostè€Œä¸æ˜¯ä»Žå¦ä¸€å°ä¸»æœºè¿žæŽ¥ï¼Œè¯·æ£€æŸ¥æ‚¨çš„é˜²ç«å¢™è§„åˆ™ã€‚æ‚¨å¯ä»¥åœ¨ç«¯å£16030çš„IPåœ°å€ä¸­æŸ¥çœ‹æ¯ä¸ªRegionServersçš„Web UIï¼Œä¹Ÿå¯ä»¥é€šè¿‡å•å‡»Masterçš„Web UIä¸­çš„é“¾æŽ¥æ¥æŸ¥çœ‹ã€‚ æµ‹è¯•èŠ‚ç‚¹æˆ–æœåŠ¡æ¶ˆå¤±æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ åœ¨é…ç½®äº†ä¸‰èŠ‚ç‚¹é›†ç¾¤åŽï¼Œé›†ç¾¤å¹¶ä¸ä¼šå¾ˆæœ‰å¼¹æ€§ã€‚æ‚¨ä»ç„¶å¯ä»¥é€šè¿‡å…³é—­è¿›ç¨‹å¹¶æŸ¥çœ‹æ—¥å¿—æ¥æµ‹è¯•ä¸»Masteræˆ–RegionServerçš„è¡Œä¸ºã€‚ 2.5. æŽ¥ä¸‹æ¥ä¸‹ä¸€ç« èŠ‚ configuration, æä¾›æœ‰å…³ä¸åŒçš„HBaseè¿è¡Œæ¨¡å¼ã€è¿è¡ŒHBaseçš„ç³»ç»Ÿè¦æ±‚ä»¥åŠåˆ†å¸ƒå¼HBaseç¾¤é›†çš„å…³é”®é…ç½®çš„è¯¦ç»†ä¿¡æ¯ã€‚]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[åˆæ¬¡è¿è¡Œ Git å‰çš„é…ç½®]]></title>
    <url>%2F2019%2F02%2F25%2Ffirst-with-git%2F</url>
    <content type="text"><![CDATA[ä¸€èˆ¬åœ¨æ–°çš„ç³»ç»Ÿä¸Šï¼Œæˆ‘ä»¬éƒ½éœ€è¦å…ˆé…ç½®ä¸‹è‡ªå·±çš„ Git å·¥ä½œçŽ¯å¢ƒã€‚é…ç½®å·¥ä½œåªéœ€ä¸€æ¬¡ï¼Œä»¥åŽå‡çº§æ—¶è¿˜ä¼šæ²¿ç”¨çŽ°åœ¨çš„é…ç½®ã€‚å½“ç„¶ï¼Œå¦‚æžœéœ€è¦ï¼Œä½ éšæ—¶å¯ä»¥ç”¨ç›¸åŒçš„å‘½ä»¤ä¿®æ”¹å·²æœ‰çš„é…ç½®ã€‚ git config çš„å·¥å…·ï¼ˆè¯‘æ³¨ï¼šå®žé™…æ˜¯ git-config å‘½ä»¤ï¼Œåªä¸è¿‡å¯ä»¥é€šè¿‡ git åŠ ä¸€ä¸ªåå­—æ¥å‘¼å«æ­¤å‘½ä»¤ã€‚ï¼‰ï¼Œä¸“é—¨ç”¨æ¥é…ç½®æˆ–è¯»å–ç›¸åº”çš„å·¥ä½œçŽ¯å¢ƒå˜é‡ã€‚è€Œæ­£æ˜¯ç”±è¿™äº›çŽ¯å¢ƒå˜é‡ï¼Œå†³å®šäº† Git åœ¨å„ä¸ªçŽ¯èŠ‚çš„å…·ä½“å·¥ä½œæ–¹å¼å’Œè¡Œä¸ºã€‚è¿™äº›å˜é‡å¯ä»¥å­˜æ”¾åœ¨ä»¥ä¸‹ä¸‰ä¸ªä¸åŒçš„åœ°æ–¹ï¼š ç›®å½•/etc/gitconfigæ–‡ä»¶ï¼šç³»ç»Ÿä¸­å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ™®éé€‚ç”¨çš„é…ç½®ã€‚è‹¥ä½¿ç”¨ git config æ—¶ç”¨ â€”system é€‰é¡¹ï¼Œè¯»å†™çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶ã€‚ ~/.gitconfigæ–‡ä»¶ï¼šç”¨æˆ·ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶åªé€‚ç”¨äºŽè¯¥ç”¨æˆ·ã€‚è‹¥ä½¿ç”¨ git config æ—¶ç”¨ â€”global é€‰é¡¹ï¼Œè¯»å†™çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶ã€‚ å½“å‰é¡¹ç›®çš„ Gitç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯å·¥ä½œç›®å½•ä¸­çš„ .git/config æ–‡ä»¶ï¼‰ï¼šè¿™é‡Œçš„é…ç½®ä»…ä»…é’ˆå¯¹å½“å‰é¡¹ç›®æœ‰æ•ˆã€‚æ¯ä¸€ä¸ªçº§åˆ«çš„é…ç½®éƒ½ä¼šè¦†ç›–ä¸Šå±‚çš„ç›¸åŒé…ç½®ï¼Œæ‰€ä»¥ .git/config é‡Œçš„é…ç½®ä¼šè¦†ç›– /etc/gitconfig ä¸­çš„åŒåå˜é‡ã€‚ åœ¨ Windows ç³»ç»Ÿä¸Šï¼ŒGit ä¼šæ‰¾å¯»ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ .gitconfig æ–‡ä»¶ã€‚ä¸»ç›®å½•å³ $HOME å˜é‡æŒ‡å®šçš„ç›®å½•ï¼Œä¸€èˆ¬éƒ½æ˜¯ C:\Documents and Settings$USERã€‚æ­¤å¤–ï¼ŒGit è¿˜ä¼šå°è¯•æ‰¾å¯» /etc/gitconfig æ–‡ä»¶ï¼Œåªä¸è¿‡çœ‹å½“åˆ Git è£…åœ¨ä»€ä¹ˆç›®å½•ï¼Œå°±ä»¥æ­¤ä½œä¸ºæ ¹ç›®å½•æ¥å®šä½ã€‚ ç”¨æˆ·ä¿¡æ¯ç¬¬ä¸€ä¸ªè¦é…ç½®çš„æ˜¯ä½ ä¸ªäººçš„ç”¨æˆ·åç§°å’Œç”µå­é‚®ä»¶åœ°å€ã€‚è¿™ä¸¤æ¡é…ç½®å¾ˆé‡è¦ï¼Œæ¯æ¬¡ Git æäº¤æ—¶éƒ½ä¼šå¼•ç”¨è¿™ä¸¤æ¡ä¿¡æ¯ï¼Œè¯´æ˜Žæ˜¯è°æäº¤äº†æ›´æ–°ï¼Œæ‰€ä»¥ä¼šéšæ›´æ–°å†…å®¹ä¸€èµ·è¢«æ°¸ä¹…çº³å…¥åŽ†å²è®°å½•ï¼š 12$ git config --global user.name &quot;John Doe&quot;$ git config --global user.email johndoe@example.com å¦‚æžœç”¨äº† â€”global é€‰é¡¹ï¼Œé‚£ä¹ˆæ›´æ”¹çš„é…ç½®æ–‡ä»¶å°±æ˜¯ä½äºŽä½ ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„é‚£ä¸ªï¼Œä»¥åŽä½ æ‰€æœ‰çš„é¡¹ç›®éƒ½ä¼šé»˜è®¤ä½¿ç”¨è¿™é‡Œé…ç½®çš„ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚æžœè¦åœ¨æŸä¸ªç‰¹å®šçš„é¡¹ç›®ä¸­ä½¿ç”¨å…¶ä»–åå­—æˆ–è€…ç”µé‚®ï¼Œåªè¦åŽ»æŽ‰ â€”global é€‰é¡¹é‡æ–°é…ç½®å³å¯ï¼Œæ–°çš„è®¾å®šä¿å­˜åœ¨å½“å‰é¡¹ç›®çš„ .git/config æ–‡ä»¶é‡Œã€‚ æŸ¥çœ‹é…ç½®ä¿¡æ¯è¦æ£€æŸ¥å·²æœ‰çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ git config â€”list å‘½ä»¤ï¼š12345678$ git config --listuser.name=Scott Chaconuser.email=schacon@gmail.comcolor.status=autocolor.branch=autocolor.interactive=autocolor.diff=auto... æœ‰æ—¶å€™ä¼šçœ‹åˆ°é‡å¤çš„å˜é‡åï¼Œé‚£å°±è¯´æ˜Žå®ƒä»¬æ¥è‡ªä¸åŒçš„é…ç½®æ–‡ä»¶ï¼ˆæ¯”å¦‚ /etc/gitconfig å’Œ ~/.gitconfigï¼‰ï¼Œä¸è¿‡æœ€ç»ˆ Git å®žé™…é‡‡ç”¨çš„æ˜¯æœ€åŽä¸€ä¸ªã€‚ ä¹Ÿå¯ä»¥ç›´æŽ¥æŸ¥é˜…æŸä¸ªçŽ¯å¢ƒå˜é‡çš„è®¾å®šï¼Œåªè¦æŠŠç‰¹å®šçš„åå­—è·Ÿåœ¨åŽé¢å³å¯ï¼Œåƒè¿™æ ·ï¼š12$ git config user.nameScott Chacon æ–‡æœ¬ç¼–è¾‘å™¨æŽ¥ä¸‹æ¥è¦è®¾ç½®çš„æ˜¯é»˜è®¤ä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚Git éœ€è¦ä½ è¾“å…¥ä¸€äº›é¢å¤–æ¶ˆæ¯çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨æ–‡æœ¬ç¼–è¾‘å™¨ç»™ä½ ç”¨ã€‚é»˜è®¤ä¼šä½¿ç”¨æ“ä½œç³»ç»ŸæŒ‡å®šçš„é»˜è®¤ç¼–è¾‘å™¨ï¼Œä¸€èˆ¬å¯èƒ½ä¼šæ˜¯ Vi æˆ–è€… Vimã€‚å¦‚æžœä½ æœ‰å…¶ä»–åå¥½ï¼Œæ¯”å¦‚ Emacs çš„è¯ï¼Œå¯ä»¥é‡æ–°è®¾ç½®ï¼š git config --global core.editor emacs```12345å·®å¼‚åˆ†æžå·¥å…·è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ï¼Œåœ¨è§£å†³åˆå¹¶å†²çªæ—¶ä½¿ç”¨å“ªç§å·®å¼‚åˆ†æžå·¥å…·ã€‚æ¯”å¦‚è¦æ”¹ç”¨ vimdiff çš„è¯ï¼š```$ git config --global merge.tool vimdiff Git å¯ä»¥ç†è§£ kdiff3ï¼Œtkdiffï¼Œmeldï¼Œxxdiffï¼Œemergeï¼Œvimdiffï¼Œgvimdiffï¼Œecmergeï¼Œå’Œ opendiff ç­‰åˆå¹¶å·¥å…·çš„è¾“å‡ºä¿¡æ¯ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šä½¿ç”¨è‡ªå·±å¼€å‘çš„å·¥å…·ï¼Œå…·ä½“æ€Žä¹ˆåšå¯ä»¥å‚é˜…ç¬¬ä¸ƒç« ã€‚ å‚è€ƒhttps://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C-Git-%E5%89%8D%E7%9A%84%E9%85%8D%E7%BD%AE]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é…ç½® SSH å…¬é’¥è®¿é—® Github å’Œ Coding ä»“åº“]]></title>
    <url>%2F2019%2F02%2F22%2Fssh-connect-coding-and-github%2F</url>
    <content type="text"><![CDATA[ç”Ÿæˆå…¬é’¥æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ssh-keygen -t rsa -C &lt;your_email@example.com&gt;( ä½ çš„é‚®ç®±)ï¼Œè¿žç»­ç‚¹å‡» Enter é”®å³å¯ã€‚ 12345sh-keygen -t rsa -C &lt;your_email@example.com&gt;# Creates a new ssh key, using the provided email as a label# Generating public/private rsa key pair.Enter file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter] // æŽ¨èä½¿ç”¨é»˜è®¤åœ°å€Enter passphrase (empty for no passphrase): //æ­¤å¤„ç‚¹å‡» Enter é”®å³å¯ï¼Œä¹Ÿå¯ä»¥å¡«å†™å¯†ç ï¼Œå¡«å†™å¯†ç åŽæ¯æ¬¡ä½¿ç”¨ SSH æ–¹å¼æŽ¨é€ä»£ç æ—¶éƒ½ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼Œç”±äºŽè¿™ä¸ª Key ä¹Ÿä¸æ˜¯ç”¨äºŽå†›äº‹ç›®çš„ï¼Œæ‰€ä»¥ä¹Ÿæ— éœ€è®¾ç½®å¯†ç ã€‚ æˆåŠŸä¹‹åŽæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š 1234Your identification has been saved in /Users/you/.ssh/id_rsa.# Your public key has been saved in /Users/you/.ssh/id_rsa.pub.# The key fingerprint is:# 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com Coding.netæ·»åŠ å…¬é’¥Coding æä¾›è´¦æˆ· SSH å…¬é’¥å’Œé¡¹ç›® SSH å…¬é’¥è®¾ç½®ã€‚æœ¬è´¨ä¸Šè´¦æˆ·å…¬é’¥å’Œéƒ¨ç½²å…¬é’¥æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å…³è”çš„æ–¹å¼ä¸åŒã€‚åŒä¸€ä¸ª SSH å…¬é’¥æ–‡ä»¶ï¼Œå¦‚æžœå’Œ Coding è´¦æˆ·å…³è”ï¼Œä¾¿ç§°ä¸ºè´¦æˆ· SSH å…¬é’¥ï¼Œé…ç½®åŽæ‹¥æœ‰è´¦æˆ·ä¸‹æ‰€æœ‰é¡¹ç›®çš„è¯»å†™æƒé™ï¼›å¦‚æžœå’Œå…·ä½“çš„æŸä¸€ä¸ªé¡¹ç›®å…³è”ï¼Œåˆ™ç§°ä¸ºéƒ¨ç½²å…¬é’¥ï¼Œé…ç½®åŽé»˜è®¤æ‹¥æœ‰è¯¥é¡¹ç›®çš„åªè¯»æƒé™ã€‚ æ·»åŠ è´¦æˆ·å…¬é’¥ åœ¨ç»ˆç«¯è¾“å…¥open ~/.sshï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ã€Œid_rsa.pubã€æ–‡ä»¶ï¼ˆæ­¤å¤„æ˜¯ç”Ÿæˆå…¬é’¥çš„é»˜è®¤åç§°ï¼Œå¦‚æžœç”Ÿæˆå…¬é’¥æ—¶é‡‡ç”¨äº†å…¶ä»–åç§°ï¼Œæ‰“å¼€ç›¸å¯¹åº”çš„æ–‡ä»¶å³å¯ï¼‰ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ ç™»å½• Coding.netï¼Œè¿›å…¥ã€Œè´¦æˆ· -&gt; SSH å…¬é’¥ã€é¡µé¢ï¼Œç‚¹å‡»ã€Œæ–°å¢žå…¬é’¥ã€ å°†ç¬¬ä¸€æ­¥ä¸­å¤åˆ¶çš„å†…å®¹å¡«å†™åˆ°ã€Œå…¬é’¥å†…å®¹ã€ä¸€æ ï¼Œå…¬é’¥åç§°å¯éšæ„å¡«å†™ è®¾å®šå…¬é’¥æœ‰æ•ˆæœŸï¼Œå¯é€‰æ‹©å…·ä½“æ—¥æœŸæˆ–è®¾ç½®æ°¸ä¹…æœ‰æ•ˆ æ·»åŠ éƒ¨ç½²å…¬é’¥ åœ¨ç»ˆç«¯è¾“å…¥open ~/.sshï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ã€Œid_deploy.pubã€æ–‡ä»¶ï¼ˆæ­¤å¤„éƒ¨ç½²å…¬é’¥åç§°ä¸ºã€Œid_deploy.pubã€ï¼Œç”¨æˆ·åœ¨ç”Ÿæˆéƒ¨ç½²å…¬é’¥çš„æ—¶å€™å®Œå…¨å¯ä»¥è‡ªå®šä¹‰åç§°ï¼‰ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ ç™»å½• Coding.netï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ï¼Œç‚¹å‡»ã€Œè®¾ç½® -&gt; éƒ¨ç½²å…¬é’¥ -&gt; æ–°å»ºéƒ¨ç½²å…¬é’¥ã€ å°†ç¬¬ä¸€æ­¥ä¸­å¤åˆ¶çš„å†…å®¹å¡«å†™åˆ°ã€Œå…¬é’¥å†…å®¹ã€ä¸€æ ï¼Œå…¬é’¥åç§°è‡ªå®šä¹‰ ç‚¹å‡»ã€Œæ·»åŠ ã€ï¼Œç„¶åŽè¾“å…¥è´¦æˆ·å¯†ç å³å¯æˆåŠŸæ·»åŠ éƒ¨ç½²å…¬é’¥ Github.comæ·»åŠ å…¬é’¥ç±»ä¼¼ä¸Šé¢ æœ€ç»ˆæµ‹è¯•-é‡è¦æ·»åŠ å®Œæˆä¹‹åŽ, åˆ‡è®°è¦æµ‹è¯•è¿žæŽ¥å¦‚ä¸‹: 123ssh -T git@git.coding.net ssh -T git@github.com å‚è€ƒ https://help.github.com/en/articles/adding-a-new-ssh-key-to-your-github-account https://coding.net/help/doc/git/ssh-key.html]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœºå™¨å­¦ä¹ ç›¸å…³è¯„ä¼°æŒ‡æ ‡ï¼Œåˆ†ç±»ï¼Œå›žå½’ï¼Œèšç±»]]></title>
    <url>%2F2019%2F02%2F18%2Fevaluating-indicator%2F</url>
    <content type="text"><![CDATA[åˆ†ç±»ç®—æ³•æ··æ·†çŸ©é˜µ å®žé™…è¡¨çŽ° 1 P 0 N é¢„æµ‹è¡¨çŽ° 1 P TP FP 0 N FN TN Pï¼ˆPositiveï¼‰ï¼š ä»£è¡¨åˆ†ç±»1 Nï¼ˆNegativeï¼‰ï¼š ä»£è¡¨åˆ†ç±»0 Tï¼ˆTrueï¼‰ï¼š ä»£è¡¨é¢„æµ‹æ­£ç¡® Fï¼ˆFalseï¼‰ï¼š ä»£è¡¨é¢„æµ‹é”™è¯¯ äºŽæ˜¯ä¹Ž: TPï¼š é¢„æµ‹ä¸º1ï¼Œé¢„æµ‹æ­£ç¡®ï¼Œå®žé™…1 FPï¼š é¢„æµ‹ä¸º1ï¼Œé¢„æµ‹é”™è¯¯ï¼Œå®žé™…0 FNï¼š é¢„æµ‹ä¸º0ï¼Œé¢„æµ‹é”™ç¡®ï¼Œå®žé™…1 TNï¼š é¢„æµ‹ä¸º0ï¼Œé¢„æµ‹æ­£ç¡®ï¼Œå®žé™…0 å‡†ç¡®çŽ‡å‡†ç¡®çŽ‡çš„å®šä¹‰æ˜¯é¢„æµ‹æ­£ç¡®çš„ç»“æžœå æ€»æ ·æœ¬çš„ç™¾åˆ†æ¯” . å‡†ç¡®çŽ‡=(TP+TN)/(TP+TN+FP+FN) æ ·æœ¬ä¸å¹³è¡¡çš„æƒ…å†µä¸‹ï¼Œå¹¶ä¸èƒ½ä½œä¸ºå¾ˆå¥½çš„æŒ‡æ ‡æ¥è¡¡é‡ç»“æžœã€‚ ç²¾å‡†çŽ‡ç²¾å‡†çŽ‡ï¼ˆPrecisionï¼‰åˆå«æŸ¥å‡†çŽ‡ï¼Œå®ƒæ˜¯é’ˆå¯¹é¢„æµ‹ç»“æžœè€Œè¨€çš„ï¼Œå®ƒçš„å«ä¹‰æ˜¯åœ¨æ‰€æœ‰è¢«é¢„æµ‹ä¸ºæ­£çš„æ ·æœ¬ä¸­å®žé™…ä¸ºæ­£çš„æ ·æœ¬çš„æ¦‚çŽ‡ï¼Œæ„æ€å°±æ˜¯åœ¨é¢„æµ‹ä¸ºæ­£æ ·æœ¬çš„ç»“æžœä¸­ï¼Œæˆ‘ä»¬æœ‰å¤šå°‘æŠŠæ¡å¯ä»¥é¢„æµ‹æ­£ç¡®ï¼Œå…¶å…¬å¼å¦‚ä¸‹ï¼š ç²¾å‡†çŽ‡=TP/(TP+FP) ç²¾å‡†çŽ‡ä¸Žå‡†ç¡®çŽ‡åŒºåˆ«ç²¾å‡†çŽ‡ä»£è¡¨å¯¹æ­£æ ·æœ¬ç»“æžœä¸­çš„é¢„æµ‹å‡†ç¡®ç¨‹åº¦ï¼Œè€Œå‡†ç¡®çŽ‡åˆ™ä»£è¡¨æ•´ä½“çš„é¢„æµ‹å‡†ç¡®ç¨‹åº¦ï¼Œæ—¢åŒ…æ‹¬æ­£æ ·æœ¬ï¼Œä¹ŸåŒ…æ‹¬è´Ÿæ ·æœ¬ã€‚ å¬å›žçŽ‡å¬å›žçŽ‡ï¼ˆRecallï¼‰åˆå«æŸ¥å…¨çŽ‡ï¼Œå®ƒæ˜¯é’ˆå¯¹åŽŸæ ·æœ¬è€Œè¨€çš„ï¼Œå®ƒçš„å«ä¹‰æ˜¯åœ¨å®žé™…ä¸ºæ­£çš„æ ·æœ¬ä¸­è¢«é¢„æµ‹ä¸ºæ­£æ ·æœ¬çš„æ¦‚çŽ‡ï¼Œå…¶å…¬å¼å¦‚ä¸‹ï¼š ç²¾å‡†çŽ‡=TP/(TP+FN) F1åˆ†æ•°é€šå¸¸ï¼Œå¦‚æžœæƒ³è¦æ‰¾åˆ°äºŒè€…ä¹‹é—´çš„ä¸€ä¸ªå¹³è¡¡ç‚¹ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ–°çš„æŒ‡æ ‡ï¼šF1åˆ†æ•°ã€‚F1åˆ†æ•°åŒæ—¶è€ƒè™‘äº†æŸ¥å‡†çŽ‡å’ŒæŸ¥å…¨çŽ‡ï¼Œè®©äºŒè€…åŒæ—¶è¾¾åˆ°æœ€é«˜ï¼Œå–ä¸€ä¸ªå¹³è¡¡ã€‚ F1åˆ†æ•° = 2*æŸ¥å‡†çŽ‡*æŸ¥å…¨çŽ‡ / (æŸ¥å‡†çŽ‡ + æŸ¥å…¨çŽ‡) P-Ræ›²çº¿ï¼ˆæŸ¥å‡†çŽ‡-æŸ¥å…¨çŽ‡ï¼‰æ¨ªåæ ‡ä¸ºæŸ¥å…¨çŽ‡ï¼ˆå¬å›žçŽ‡ï¼ˆRecallï¼‰ï¼‰ï¼Œçºµåæ ‡ä¸ºæŸ¥å‡†çŽ‡ï¼ˆç²¾å‡†çŽ‡ï¼ˆPrecisionï¼‰ ï¼‰ çœŸæ­£çŽ‡&amp;å‡æ­£çŽ‡çµæ•åº¦ï¼ˆSensitivityï¼‰ = TP/(TP+FN) ç‰¹å¼‚åº¦ï¼ˆSpecificityï¼‰ = TN/(FP+TN) çœŸæ­£çŽ‡ï¼ˆTPRï¼‰ = çµæ•åº¦ = TP/(TP+FN) å‡æ­£çŽ‡ï¼ˆFPRï¼‰ = 1- ç‰¹å¼‚åº¦ = FP/(FP+TN) ROCï¼ˆæŽ¥å—è€…æ“ä½œç‰¹å¾æ›²çº¿ï¼‰æ¨ªåæ ‡ä¸ºå‡æ­£çŽ‡ï¼ˆFPRï¼‰ï¼Œçºµåæ ‡ä¸ºçœŸæ­£çŽ‡ï¼ˆTPRï¼‰ AUCï¼ˆæ›²çº¿ä¸‹çš„é¢ç§¯ï¼‰AUCçš„ä¸€èˆ¬åˆ¤æ–­æ ‡å‡† 0.5 - 0.7ï¼š æ•ˆæžœè¾ƒä½Žï¼Œä½†ç”¨äºŽé¢„æµ‹è‚¡ç¥¨å·²ç»å¾ˆä¸é”™äº† 0.7 - 0.85ï¼š æ•ˆæžœä¸€èˆ¬ 0.85 - 0.95ï¼š æ•ˆæžœå¾ˆå¥½ 0.95 - 1ï¼š æ•ˆæžœéžå¸¸å¥½ï¼Œä½†ä¸€èˆ¬ä¸å¤ªå¯èƒ½ å›žå½’ç®—æ³•fè¡¨ç¤ºé¢„æµ‹å€¼ï¼Œyè¡¨ç¤ºå®žé™…å€¼ MAE(Mean Absolute Error) å¹³å‡ç»å¯¹è¯¯å·®å¹³å‡ç»å¯¹è¯¯å·®MAEï¼ˆMean Absolute Errorï¼‰åˆè¢«ç§°ä¸º l1 èŒƒæ•°æŸå¤± MAE = \frac{ 1}{ n}\sum\limits_{ i = 1}^n { \left| { { f_i} - { y_i}} \right|}MAEä¸è¶³MAEè™½èƒ½è¾ƒå¥½è¡¡é‡å›žå½’æ¨¡åž‹çš„å¥½åï¼Œä½†æ˜¯ç»å¯¹å€¼çš„å­˜åœ¨å¯¼è‡´å‡½æ•°ä¸å…‰æ»‘ï¼Œåœ¨æŸäº›ç‚¹ä¸Šä¸èƒ½æ±‚å¯¼ï¼Œå¯ä»¥è€ƒè™‘å°†ç»å¯¹å€¼æ”¹ä¸ºæ®‹å·®çš„å¹³æ–¹ï¼Œè¿™å°±æ˜¯å‡æ–¹è¯¯å·®ã€‚ MSE(Mean Square Error) å¹³å‡å¹³æ–¹å·®/å‡æ–¹è¯¯å·®å‡æ–¹è¯¯å·®MSE(Mean Squared Error)åˆè¢«ç§°ä¸º l2 èŒƒæ•°æŸå¤± MSE = \frac{ 1}{ n}\sum\limits_{ i = 1}^n { { { \left( { { f_i} - { y_i}} \right)}^2}}MSEä¸è¶³MSEå’Œæ–¹å·®çš„æ€§è´¨æ¯”è¾ƒç±»ä¼¼ï¼Œä¸Žæˆ‘ä»¬çš„ç›®æ ‡å˜é‡çš„é‡çº²ä¸ä¸€è‡´ï¼Œä¸ºäº†ä¿è¯é‡çº²ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬éœ€è¦å¯¹MSEè¿›è¡Œå¼€æ–¹å¾—åˆ°RMSEã€‚ RMSE(Root Mean Square Error) å‡æ–¹æ ¹è¯¯å·®RMSE = \sqrt { MSE} = \sqrt { \frac{ 1}{ n}\sum\limits_{ i = 1}^n { { { \left( { { f_i} - { y_i}} \right)}^2}} }RMSEä¸è¶³ä¸Šé¢çš„å‡ ç§è¡¡é‡æ ‡å‡†çš„å–å€¼å¤§å°ä¸Žå…·ä½“çš„åº”ç”¨åœºæ™¯æœ‰å…³ç³»ï¼Œå¾ˆéš¾å®šä¹‰ç»Ÿä¸€çš„è§„åˆ™æ¥è¡¡é‡æ¨¡åž‹çš„å¥½åã€‚æ¯”å¦‚è¯´åˆ©ç”¨æœºå™¨å­¦ä¹ ç®—æ³•é¢„æµ‹ä¸Šæµ·çš„æˆ¿ä»·RMSEåœ¨2000å…ƒï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥æŽ¥å—çš„ï¼Œä½†æ˜¯å½“å››äº”çº¿åŸŽå¸‚çš„æˆ¿ä»·RMSEä¸º2000å…ƒï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŽ¥å—å—ï¼Ÿä¸‹é¢ä»‹ç»çš„å†³å®šç³»æ•°å°±æ˜¯ä¸€ä¸ªæ— é‡çº²åŒ–çš„æŒ‡æ ‡ã€‚ R2ï¼ˆR-Squareï¼‰å†³å®šç³»æ•°Coefficient of determination$ \bar y $ è¡¨ç¤ºè§‚æµ‹æ•°æ®çš„å¹³å‡å€¼ æ®‹å·®å¹³æ–¹å’ŒS{ S_{ res}} = \sum\limits_{ i = 1}^n { { { \left( { { f_i} - { y_i}} \right)}^2}}æ€»å¹³æ–¹å’Œ S{ S_{ tot}} = \sum\limits_{ i = 1}^n { { { \left( { { y_i} - \bar y} \right)}^2}}Ræ–¹ { r^2} = 1 - \frac{ { S{ S_{ res}}}}{ { S{ S_{ tot}}}} = 1 - \frac{ { \sum\limits_{ i = 1}^n { { { \left( { { f_i} - { y_i}} \right)}^2}} }}{ { \sum\limits_{ i = 1}^n { { { \left( { { y_i} - \bar y} \right)}^2}} }}åˆ†æ¯ç†è§£ä¸ºåŽŸå§‹æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ï¼Œåˆ†å­ä¸ºé¢„æµ‹æ•°æ®å’ŒåŽŸå§‹æ•°æ®çš„è¯¯å·®ï¼ŒäºŒè€…ç›¸é™¤å¯ä»¥æ¶ˆé™¤åŽŸå§‹æ•°æ®ç¦»æ•£ç¨‹åº¦çš„å½±å“ Adjusted R-Square (æ ¡æ­£å†³å®šç³»æ•°ï¼‰ r_{ adj}^2 = 1 - \frac{ { \left( { 1 - { r^2}} \right)\left( { n - 1} \right)}}{ { n - p - 1}}nä¸ºæ ·æœ¬æ•°é‡ï¼Œpä¸ºç‰¹å¾æ•°é‡æ¶ˆé™¤äº†æ ·æœ¬æ•°é‡å’Œç‰¹å¾æ•°é‡çš„å½±å“ èšç±»ç®—æ³•è½®å»“ç³»æ•°ï¼ˆSilhouette Coefficientï¼‰å¯¹äºŽå…¶ä¸­çš„ä¸€ä¸ªç‚¹ i æ¥è¯´ï¼š a(i) = average(iå‘é‡åˆ°æ‰€æœ‰å®ƒå±žäºŽçš„ç°‡ä¸­å…¶å®ƒç‚¹çš„è·ç¦»)b(i) = min (iå‘é‡åˆ°å„ä¸ªéžæœ¬èº«æ‰€åœ¨ç°‡çš„æ‰€æœ‰ç‚¹çš„å¹³å‡è·ç¦»)é‚£ä¹ˆ i å‘é‡è½®å»“ç³»æ•°å°±ä¸ºï¼š s\left( i \right) = \frac { { b\left( i \right) - a\left( i \right)}} { { \max \left\ { { a\left( i \right) ,b\left( i \right)} \right\}}} = \left\ { { \begin { array} { * { 20} { c}} { 1 - \frac { { a\left( i \right)}} { { b\left( i \right)}}}& { ,a\left( i \right) < b\left( i \right)} & \\ 0& { ,a\left( i \right) = b\left( i \right)} & \\ { \frac { { b\left( i \right)}} { { a\left( i \right)}} - 1}& { ,a\left( i \right) > b\left( i \right)} & \end { array}} \right.]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>deeplearning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[idea-start]]></title>
    <url>%2F2019%2F02%2F15%2Fidea-start%2F</url>
    <content type="text"><![CDATA[IntelliJ IDEAä¸»é¢˜è®¾ç½® ä¸»é¢˜æˆ‘çŽ°ç”¨ä¸»é¢˜: http://www.riaway.com/themeshow.php?tid=13$cid=1ç†è®ºä¸ŠJetBrainå®¶æ—çš„æ‰€æœ‰äº§å“éƒ½èƒ½ä½¿ç”¨,IDEA, Pycharm, webstormç­‰ç­‰,æ–¹æ³•æ˜¯File-&gt;Import setting, é€‰æ‹©ä½ ä¸‹è½½çš„Jarå°±å¯ä»¥ å­—ä½“è°ƒæ•´å­—ä½“,File -&gt; setting -&gt; editor -&gt;color scheme -&gt; color scheme fontæˆ‘è°ƒæ•´çš„æ˜¯DejaVu Sans Mono , Size :15 æˆ‘æ‰€ä½¿ç”¨çš„å¿«æ·é”® CTRL+D å¤åˆ¶å½“å‰è¡Œ CTRL+X å‰ªåˆ‡å½“å‰è¡Œ CTRL+Y åˆ é™¤å½“å‰è¡Œ SHIFT+ENTER å‘ä¸‹æ’å…¥æ–°è¡Œ CTRL+ENTER å‘ä¸Šæ’å…¥æ–°è¡Œ CTRL+W å¿«é€Ÿé€‰ä¸­ä»£ç  åå‘CTRL+SHIFT+W Ctrl+Alt+O æ ¼å¼åŒ–importåˆ—è¡¨ Ctrl+Alt+L æ ¼å¼åŒ–ä»£ç  Ctrl+F æœç´¢ F3 ä¸‹ä¸€ä¸ª shift+F3 ä¸Šä¸€ä¸ª]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[scalaè‡ªæˆ‘ä¹¦å†™]]></title>
    <url>%2F2019%2F02%2F15%2Fscala-start%2F</url>
    <content type="text"><![CDATA[ScalaåŸºç¡€Scalaå˜é‡é¦–å…ˆ,Scalaæœ‰ä¸¤ç§å˜é‡ å˜é‡: å…¶å€¼å¯ä»¥æ”¹å˜, å…³é”®è¯ var å¸¸é‡: å…¶å€¼ä¸èƒ½æ”¹å˜, å…³é”®è¯ val 123456789101112131415161718object HelloWorld &#123; def main(args: Array[String]): Unit =&#123; //4ç§å£°æ˜Žå˜é‡çš„æ–¹å¼ //å¯å˜å˜é‡var ä¸å¯å˜å˜é‡val //å£°æ˜Žå˜é‡ç±»åž‹ //val or var å˜é‡å : å˜é‡ç±»åž‹ = å˜é‡åˆå§‹å€¼ var myVar : String = &quot;myVar&quot;; val myVal : Int = 1; //ä¸å£°æ˜Žå˜é‡ç±»åž‹ ç±»åž‹æŽ¨æ–­ var myVar1 = 20; val myVal1 = &quot;sdfsd&quot;; //å¤šä¸ªèµ‹å€¼ val myVal22, myVal33 = 100; val(myVal2: Int, myVal3: String) = Pair(40,&quot;myVal3&quot;); println(myVar); println(myVal);println(myVar1);println(myVal1); println(myVal2);println(myVal3); &#125;&#125; Scalaè®¿é—®ä¿®é¥°ç¬¦ç±»ä¼¼Java, Scalaä¿®é¥°ç¬¦æœ‰:private , public, protected, é»˜è®¤æœªå£°æ˜Žæ—¶ä¸ºpublic, åŒæ—¶Scalaè¾ƒJavaæ›´ä¸ºä¸¥æ ¼ ç§æœ‰(private)æˆå‘˜ç”¨privateå…³é”®å­—ä¿®é¥°ï¼Œå¸¦æœ‰æ­¤æ ‡è®°çš„æˆå‘˜ä»…åœ¨åŒ…å«äº†æˆå‘˜å®šä¹‰çš„ç±»æˆ–å¯¹è±¡å†…éƒ¨å¯è§ï¼ŒåŒæ ·çš„è§„åˆ™è¿˜é€‚ç”¨å†…éƒ¨ç±»ã€‚(Javaå…è®¸å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±»çš„ç§æœ‰æˆå‘˜) ä¿æŠ¤(Protected)æˆå‘˜åªå…è®¸ä¿æŠ¤æˆå‘˜åœ¨å®šä¹‰äº†è¯¥æˆå‘˜çš„çš„ç±»çš„å­ç±»ä¸­è¢«è®¿é—®ã€‚(JavaåŒä¸€packgeéƒ½å¯ä»¥è®¿é—®) å…¬å…±(Public)æˆå‘˜ä»»ä½•åœ°æ–¹å‡å¯ä»¥è®¿é—® Scalaè¿ç®—ç¬¦ç®—æœ¯è¿ç®—ç¬¦åŒJava, 5ç±»12345+ //åŠ  +- //å‡ -* //ä¹˜ */ //é™¤ /% //å–ä½™ % å…³ç³»è¿ç®—ç¬¦åŒJava, 6ç±»123456== //ç­‰äºŽ!= //ä¸ç­‰äºŽ&gt; //å¤§äºŽ&lt; //å°äºŽ&gt;= //å¤§äºŽç­‰äºŽ&lt;= //å°äºŽç­‰äºŽ é€»è¾‘è¿ç®—ç¬¦åŒJava, 3ç±»123&amp;&amp; //é€»è¾‘ä¸Ž|| //é€»è¾‘æˆ–! //é€»è¾‘éž ä½è¿ç®—ç¬¦ä½è¿ç®—é’ˆå¯¹äºŒè¿›åˆ¶è¿›è¡Œæ“ä½œ,æœ‰7ç±»1234567&amp; //æŒ‰ä½ä¸Ž| //æŒ‰ä½æˆ–^ //æŒ‰ä½å¼‚æˆ–~ //æŒ‰ä½å–å&lt;&lt; //æŒ‰ä½å·¦ç§»è¿ç®—ç¬¦&gt;&gt; //æŒ‰ä½å³ç§»è¿ç®—ç¬¦&gt;&gt;&gt; //æ— ç¬¦å·å³ç§» èµ‹å€¼è¿ç®—ç¬¦1234567891011= //ç®€å•èµ‹å€¼+= //ç›¸åŠ åŽèµ‹å€¼-= //ç›¸å‡åŽèµ‹å€¼*= //ç›¸ä¹˜åŽèµ‹å€¼/= //ç›¸é™¤åŽèµ‹å€¼%= //æ±‚ä½™åŽèµ‹å€¼&lt;&lt;= //æŒ‰ä½å·¦ç§»åŽå†èµ‹å€¼&gt;&gt;= //æŒ‰ä½å³ç§»åŽå†èµ‹å€¼&amp;= //æŒ‰ä½ä¸ŽåŽèµ‹å€¼^= //æŒ‰ä½å¼‚æˆ–åŽèµ‹å€¼|= //æŒ‰ä½æˆ–åŽèµ‹å€¼ ScalaæŽ§åˆ¶è¯­å¥If1234if(å¸ƒå°”è¡¨è¾¾å¼)&#123; // å¦‚æžœå¸ƒå°”è¡¨è¾¾å¼ä¸º true åˆ™æ‰§è¡Œè¯¥è¯­å¥å—&#125; Ifâ€¦Else12345if(å¸ƒå°”è¡¨è¾¾å¼)&#123; // å¦‚æžœå¸ƒå°”è¡¨è¾¾å¼ä¸º true åˆ™æ‰§è¡Œè¯¥è¯­å¥å—&#125;else&#123; // å¦‚æžœå¸ƒå°”è¡¨è¾¾å¼ä¸º false åˆ™æ‰§è¡Œè¯¥è¯­å¥å—&#125; ifâ€¦else ifâ€¦else123456789if(å¸ƒå°”è¡¨è¾¾å¼ 1)&#123; // å¦‚æžœå¸ƒå°”è¡¨è¾¾å¼ 1 ä¸º true åˆ™æ‰§è¡Œè¯¥è¯­å¥å—&#125;else if(å¸ƒå°”è¡¨è¾¾å¼ 2)&#123; // å¦‚æžœå¸ƒå°”è¡¨è¾¾å¼ 2 ä¸º true åˆ™æ‰§è¡Œè¯¥è¯­å¥å—&#125;else if(å¸ƒå°”è¡¨è¾¾å¼ 3)&#123; // å¦‚æžœå¸ƒå°”è¡¨è¾¾å¼ 3 ä¸º true åˆ™æ‰§è¡Œè¯¥è¯­å¥å—&#125;else &#123; // å¦‚æžœä»¥ä¸Šæ¡ä»¶éƒ½ä¸º false æ‰§è¡Œè¯¥è¯­å¥å—&#125; Whileè¿è¡Œä¸€ç³»åˆ—è¯­å¥ï¼Œå¦‚æžœæ¡ä»¶ä¸ºtrueï¼Œä¼šé‡å¤è¿è¡Œï¼Œç›´åˆ°æ¡ä»¶å˜ä¸ºfalseã€‚1234while(condition)&#123; statement(s);&#125; do whileæ¡ä»¶è¡¨è¾¾å¼å‡ºçŽ°åœ¨å¾ªçŽ¯çš„å°¾éƒ¨ï¼Œæ‰€ä»¥å¾ªçŽ¯ä¸­çš„ statement(s) ä¼šåœ¨æ¡ä»¶è¢«æµ‹è¯•ä¹‹å‰è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚123do &#123; statement(s);&#125; while( condition ); for123for( var x &lt;- Range )&#123; statement(s);&#125; rangeæ˜¯ä¸ªèŒƒå›´,å·¦ç®­å¤´â†è¿™ä¸ªå®¶ä¼™æ˜¯ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰,å¯ä»¥ç†è§£æˆåŽé¢çš„èŒƒå›´ä¸­ç”Ÿæˆå•å€¼. forä¹Ÿèƒ½ç”¨æ¥è¿›è¡Œå¤šèŒƒå›´éåŽ†,ä¾‹å¦‚1234for( a &lt;- 1 to 3; b &lt;- 1 to 3)&#123; println( &quot;Value of a: &quot; + a ); println( &quot;Value of b: &quot; + b );&#125; è¿™æ ·å°†éåŽ†å‡ºæ‰€æœ‰æƒ…å†µ,å³æ‰€æœ‰å¯èƒ½æ€§. until ä¸Ž totoä¸ºåŒ…å«ä¸Šé™çš„é—­åŒºé—´ï¼Œå¦‚ï¼š1 to 3,Rangeä¸º1,2,3;untilä¸åŒ…å«ä¸Šé™ï¼Œå¦‚ï¼š1 until 3, Rangeä¸º1,2 forä¹Ÿèƒ½ç”¨æ¥éåŽ†é›†åˆ123for( var x &lt;- List )&#123; statement(s);&#125; forçš„è¿‡æ»¤,åœ¨forè¯­å¥ä¸­åŠ ifæ¡ä»¶1234567var a = 0;val numList = List(1,2,3,4,5,6,7,8,9,10);for( a &lt;- numList if a != 3; if a &lt; 8 )&#123; println( &quot;Value of a: &quot; + a );&#125; forçš„å­˜å‚¨ä¸Žè¿”å›ž12345678910var a = 0;val numList = List(1,2,3,4,5,6,7,8,9,10);// for loop execution with a yieldvar retVal = for&#123; a &lt;- numList if a != 3; if a &lt; 8 &#125;yield a //yieldç»™a// Now print returned values using another loop.for( a &lt;- retVal)&#123; println( &quot;Value of a: &quot; + a );&#125; Scalaæ•°ç»„å®šé•¿æ•°ç»„å˜é•¿æ•°ç»„Scalaå‡½æ•°æŒ‰åç§°è°ƒç”¨å‡½æ•°å‘½åå‚æ•°çš„å‡½æ•°å¯å˜å‚æ•°çš„å‡½æ•°é€’å½’å‡½æ•°é»˜è®¤å‚æ•°å€¼å‡½æ•°é«˜é˜¶å‡½æ•°åµŒå¥—å‡½æ•°åŒ¿åå‡½æ•°éƒ¨åˆ†åº”ç”¨å‡½æ•°æŸ¯é‡ŒåŒ–å‡½æ•°spark2-submit â€”driver-memory 5G â€”executor-memory 5G â€”conf spark.kryoserializer.buffer.max=2047m â€”jars SparkOnHBase-assembly-0.1-SNAPSHOT-deps.jar â€”master yarn â€”class â€œSparkOnHBaseâ€ sparkonhbase_2.11-0.1-SNAPSHOT.jar yarn application -list æŸ¥è¯¢æ‰€æœ‰çš„ä»»åŠ¡ï¼›ç„¶åŽä½¿ç”¨yarn application -kill yarn application -kill application_1512629122215_0235]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>scala</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mongoè‡ªæˆ‘ä¹¦å†™]]></title>
    <url>%2F2019%2F02%2F15%2Fmongo-start%2F</url>
    <content type="text"><![CDATA[MongoDBç®€ä»‹MongoDB æ˜¯ç”±C++è¯­è¨€ç¼–å†™çš„ï¼Œæ˜¯ä¸€ä¸ªåŸºäºŽåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿã€‚åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ›´å¤šçš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä¿è¯æœåŠ¡å™¨æ€§èƒ½ã€‚MongoDB æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚MongoDB å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æž„ç”±é”®å€¼(key=&gt;value)å¯¹ç»„æˆã€‚MongoDB æ–‡æ¡£ç±»ä¼¼äºŽ JSON å¯¹è±¡ã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚ MongoDBæ¦‚å¿µä¸Žå…³ç³»åž‹æ•°æ®åº“çš„åŒºåˆ«åœ¨äºŽ è¡¨ -&gt; é›†åˆ è¡Œ -&gt; æ–‡æ¡£ åˆ— -&gt; åŸŸåŒæ—¶ä¸æ”¯æŒè¿žæŽ¥æŸ¥è¯¢ SQLæœ¯è¯­/æ¦‚å¿µ | MongoDBæœ¯è¯­/æ¦‚å¿µ | è§£é‡Š/è¯´æ˜Ždatabase | database | æ•°æ®åº“table | collection | æ•°æ®åº“è¡¨/é›†åˆrow | document | æ•°æ®è®°å½•è¡Œ/æ–‡æ¡£column | field | æ•°æ®å­—æ®µ/åŸŸindex | index | ç´¢å¼•table joins | è¡¨è¿žæŽ¥,MongoDBä¸æ”¯æŒprimary key | primary key | ä¸»é”®,MongoDBè‡ªåŠ¨å°†_idå­—æ®µè®¾ç½®ä¸ºä¸»é”® MongoDBå¢žåˆ æ”¹æŸ¥MongoDBæ’å…¥æ–‡æ¡£MongoDB ä½¿ç”¨ insert() æˆ– save() æ–¹æ³•å‘é›†åˆä¸­æ’å…¥æ–‡æ¡£ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š db.COLLECTION_NAME.insert(document) MongoDBæ›´æ–°æ–‡æ¡£update() æ–¹æ³•ç”¨äºŽæ›´æ–°å·²å­˜åœ¨çš„æ–‡æ¡£ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š123456789db.collection.update( &lt;query&gt;, &lt;update&gt;, &#123; upsert: &lt;boolean&gt;, multi: &lt;boolean&gt;, writeConcern: &lt;document&gt; &#125;) å‚æ•°è¯´æ˜Žï¼šquery : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåŽé¢çš„ã€‚ update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$incâ€¦ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåŽé¢çš„ upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æžœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚ multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æžœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚ writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚ MongoDB åˆ é™¤æ–‡æ¡£remove() æ–¹æ³•çš„åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š123456789101112db.collection.remove( &lt;query&gt;, &lt;justOne&gt;)å¦‚æžœä½ çš„ MongoDB æ˜¯ 2.6 ç‰ˆæœ¬ä»¥åŽçš„ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼šdb.collection.remove( &lt;query&gt;, &#123; justOne: &lt;boolean&gt;, writeConcern: &lt;document&gt; &#125;) å‚æ•°è¯´æ˜Žï¼šquery :ï¼ˆå¯é€‰ï¼‰åˆ é™¤çš„æ–‡æ¡£çš„æ¡ä»¶ã€‚justOne : ï¼ˆå¯é€‰ï¼‰å¦‚æžœè®¾ä¸º true æˆ– 1ï¼Œåˆ™åªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ã€‚ writeConcern :ï¼ˆå¯é€‰ï¼‰æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚ MongoDBæŸ¥è¯¢æ–‡æ¡£MongoDB æŸ¥è¯¢æ•°æ®çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š db.collection.find(query, projection)query ï¼šå¯é€‰ï¼Œä½¿ç”¨æŸ¥è¯¢æ“ä½œç¬¦æŒ‡å®šæŸ¥è¯¢æ¡ä»¶projection ï¼šå¯é€‰ï¼Œä½¿ç”¨æŠ•å½±æ“ä½œç¬¦æŒ‡å®šè¿”å›žçš„é”®ã€‚æŸ¥è¯¢æ—¶è¿”å›žæ–‡æ¡£ä¸­æ‰€æœ‰é”®å€¼ï¼Œ åªéœ€çœç•¥è¯¥å‚æ•°å³å¯ï¼ˆé»˜è®¤çœç•¥ï¼‰ã€‚å¦‚æžœä½ éœ€è¦ä»¥æ˜“è¯»çš„æ–¹å¼æ¥è¯»å–æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ pretty() æ–¹æ³•ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š db.col.find().pretty()pretty() æ–¹æ³•ä»¥æ ¼å¼åŒ–çš„æ–¹å¼æ¥æ˜¾ç¤ºæ‰€æœ‰æ–‡æ¡£ã€‚ MongoDBæ“ä½œç¬¦MongoDBä¸­æ¡ä»¶æ“ä½œç¬¦æœ‰ï¼š12345678910111213$gt -------- greater than &gt;$gte --------- gt equal &gt;=$lt -------- less than &lt;$lte --------- lt equal &lt;=$ne ----------- not equal !=$eq -------- equal =$type $typeæ“ä½œç¬¦æ˜¯åŸºäºŽBSONç±»åž‹æ¥æ£€ç´¢é›†åˆä¸­åŒ¹é…çš„æ•°æ®ç±»åž‹ï¼Œå¹¶è¿”å›žç»“æžœã€‚MongoDB ä¸­å¯ä»¥ä½¿ç”¨çš„ç±»åž‹å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š1234567891011121314151617181920ç±»åž‹ æ•°å­— å¤‡æ³¨Double 1 String 2 Object 3 Array 4 Binary data 5 Undefined 6 å·²åºŸå¼ƒã€‚Object id 7 Boolean 8 Date 9 Null 10 Regular Expression 11 JavaScript 13 Symbol 14 JavaScript (with scope) 15 32-bit integer 16 Timestamp 17 64-bit integer 18 Min key 255 Query with -1.Max key 127 MongoDBåŸºæœ¬æ–¹æ³•MongoDB Limit() æ–¹æ³•å¦‚æžœä½ éœ€è¦åœ¨MongoDBä¸­è¯»å–æŒ‡å®šæ•°é‡çš„æ•°æ®è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨MongoDBçš„Limitæ–¹æ³•ï¼Œlimit()æ–¹æ³•æŽ¥å—ä¸€ä¸ªæ•°å­—å‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡å®šä»ŽMongoDBä¸­è¯»å–çš„è®°å½•æ¡æ•°ã€‚è¯­æ³•limit()æ–¹æ³•åŸºæœ¬è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š db.COLLECTION_NAME.find().limit(NUMBER) MongoDB Skip() æ–¹æ³•æˆ‘ä»¬é™¤äº†å¯ä»¥ä½¿ç”¨limit()æ–¹æ³•æ¥è¯»å–æŒ‡å®šæ•°é‡çš„æ•°æ®å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨skip()æ–¹æ³•æ¥è·³è¿‡æŒ‡å®šæ•°é‡çš„æ•°æ®ï¼Œskipæ–¹æ³•åŒæ ·æŽ¥å—ä¸€ä¸ªæ•°å­—å‚æ•°ä½œä¸ºè·³è¿‡çš„è®°å½•æ¡æ•°ã€‚è¯­æ³•skip() æ–¹æ³•è„šæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š db.COLLECTION_NAME.find().limit(NUMBER).skip(NUMBER)æƒ³è¦è¯»å–ä»Ž 10 æ¡è®°å½•åŽ 100 æ¡è®°å½•ï¼Œç›¸å½“äºŽ sql ä¸­limit (10,100)ã€‚ db.COLLECTION_NAME.find().skip(10).limit(100) MongoDB sort()æ–¹æ³•åœ¨MongoDBä¸­ä½¿ç”¨ä½¿ç”¨sort()æ–¹æ³•å¯¹æ•°æ®è¿›è¡ŒæŽ’åºï¼Œsort()æ–¹æ³•å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šæŽ’åºçš„å­—æ®µï¼Œå¹¶ä½¿ç”¨ 1 å’Œ -1 æ¥æŒ‡å®šæŽ’åºçš„æ–¹å¼ï¼Œå…¶ä¸­ 1 ä¸ºå‡åºæŽ’åˆ—ï¼Œè€Œ-1æ˜¯ç”¨äºŽé™åºæŽ’åˆ—ã€‚è¯­æ³•sort()æ–¹æ³•åŸºæœ¬è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š db.COLLECTION_NAME.find().sort({KEY:1}) ensureIndex() æ–¹æ³•MongoDBä½¿ç”¨ ensureIndex() æ–¹æ³•æ¥åˆ›å»ºç´¢å¼•ã€‚è¯­æ³•ensureIndex()æ–¹æ³•åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š db.COLLECTION_NAME.ensureIndex({KEY:1})è¯­æ³•ä¸­ Key å€¼ä¸ºä½ è¦åˆ›å»ºçš„ç´¢å¼•å­—æ®µï¼Œ1ä¸ºæŒ‡å®šæŒ‰å‡åºåˆ›å»ºç´¢å¼•ï¼Œå¦‚æžœä½ æƒ³æŒ‰é™åºæ¥åˆ›å»ºç´¢å¼•æŒ‡å®šä¸º-1å³å¯ã€‚ aggregate() æ–¹æ³•MongoDBä¸­èšåˆçš„æ–¹æ³•ä½¿ç”¨aggregate()ã€‚è¯­æ³•aggregate() æ–¹æ³•çš„åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š &gt;db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)è¡¨è¾¾å¼ | æè¿° | å®žä¾‹$sum | è®¡ç®—æ€»å’Œã€‚ | db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$sum : â€œ$likesâ€}}}])$avg | è®¡ç®—å¹³å‡å€¼ | db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$avg : â€œ$likesâ€}}}])$min | èŽ·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚ | db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$min : â€œ$likesâ€}}}])$max | èŽ·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚ | db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$max : â€œ$likesâ€}}}])$push | åœ¨ç»“æžœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚ | db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, url : {$push: â€œ$urlâ€}}}])$addToSet | åœ¨ç»“æžœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä¸åˆ›å»ºå‰¯æœ¬ã€‚ | db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, url : {$addToSet : â€œ$urlâ€}}}])$first | æ ¹æ®èµ„æºæ–‡æ¡£çš„æŽ’åºèŽ·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚ | db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, first_url : {$first : â€œ$urlâ€}}}]) $last | æ ¹æ®èµ„æºæ–‡æ¡£çš„æŽ’åºèŽ·å–æœ€åŽä¸€ä¸ªæ–‡æ¡£æ•°æ® | db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, last_url : {$last : â€œ$urlâ€}}}])1db.getCollection(&apos;testCollection&apos;).aggregate([&#123;$group : &#123;label : &quot;$label&quot;, num_tutorial : &#123;$sum : 1&#125;&#125;&#125;]) å¯¹labelèšåˆ,æŸ¥è¯¢å„ä¸ªlabelæ¡æ•° mongoå¯¼å…¥CSVæ–‡ä»¶mongoimport -h 172.20.3.10:27017 â€”db fourClassify â€”collection allTrainCollection â€”type csv â€”headerline â€”file D:/all_train_data.csv mongoå¯¼å‡ºCSVæ–‡ä»¶mongoexport -h 172.20.3.10:27017 â€”db fourClassify â€”collection testCollection â€”type=csv â€”fieldFile D:/fieldFile.txt â€”out D:/1.csv]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>mongo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŸ¥æ‰¾ç®—æ³•-JAVAç‰ˆæœ¬]]></title>
    <url>%2F2017%2F09%2F11%2Fsearch%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« å å‘ï¼Œè¦æ¢³ç†ä¸€ä¸‹æŸ¥æ‰¾ç®—æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839package Offer;import java.util.Arrays;public class search &#123; public static void main(String[] args) &#123; int[] numbers = &#123; 10, 50, 20, 30, 100, 900, 400, 400 &#125;; System.out.println(SequelSearch(numbers, 100)); System.out.println(BinarySearch(numbers, 100)); &#125; // é¡ºåºæŸ¥æ‰¾ public static int SequelSearch(int[] numbers, int a) &#123; for (int i = 0; i &lt; numbers.length; i++) &#123; if (numbers[i] == a) &#123; return i; &#125; &#125; return -1; &#125; // äºŒåˆ†æŸ¥æ‰¾ // é’ˆå¯¹å·²æŽ’åºä»Žå°åˆ°å¤§. public static int BinarySearch(int[] numbers, int a) &#123; int low = 0, high = numbers.length - 1; while (low &lt;= high) &#123; int mid = (low + high) / 2; if (numbers[mid] &lt; a) &#123; low = mid + 1; &#125; else if (numbers[mid] &gt; a) &#123; high = mid - 1; &#125; else return mid; &#125; return -1; &#125;&#125;]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>search</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŽ’åºç®—æ³•-JAVAç‰ˆæœ¬]]></title>
    <url>%2F2017%2F08%2F21%2Fsort%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« å å‘ï¼Œè¦æ¢³ç†ä¸€ä¸‹æŽ’åºç®—æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161package Offer;import java.util.Arrays;public class Sorting &#123; public static void main(String[] args) &#123; int[] numbers = &#123;10, 50, 20, 30, 100, 900, 400, 400&#125;; System.out.println(&quot;å†’æ³¡æŽ’åº:&quot; + Arrays.toString(bubbleSort(numbers))); System.out.println(&quot;é€‰æ‹©æŽ’åº:&quot; + Arrays.toString(selectSort(numbers))); System.out.println(&quot;æ’å…¥æŽ’åº:&quot; + Arrays.toString(insertSort(numbers))); System.out.println(&quot;å¸Œå°”æŽ’åº:&quot; + Arrays.toString(shellSort(numbers))); System.out.println(&quot;å½’å¹¶æŽ’åº:&quot; + Arrays.toString(mergeSort(numbers,0,numbers.length-1))); System.out.println(&quot;å¿«é€ŸæŽ’åº:&quot; + Arrays.toString(quickSort(numbers,0,numbers.length-1))); &#125; // å†’æ³¡æŽ’åº // éåŽ†æ¯”è¾ƒå…¨ä½“å…ƒç´ ,å¦‚æžœç›¸é‚»ä¸¤ä¸ªå…ƒç´ é¡ºåºä¸ä¸€è‡´,åˆ™äº¤æ¢. public static int[] bubbleSort(int[] numbers) &#123; int temp = 0; int size = numbers.length; for (int i = 0; i &lt; size - 1; i++) &#123; for (int j = 0; j &lt; size - 1 - i; j++) &#123; if (numbers[j] &gt; numbers[j + 1]) // äº¤æ¢ä¸¤æ•°ä½ç½® &#123; temp = numbers[j]; numbers[j] = numbers[j + 1]; numbers[j + 1] = temp; &#125; &#125; &#125; return numbers; &#125; //é€‰æ‹©æŽ’åº //å¯»æ‰¾æœªæŽ’åºæœ€å°å…ƒç´ ä¸Žè‡ªèº«äº¤æ¢ä½ç½® public static int[] selectSort(int[] numbers) &#123; int temp = 0; int size = numbers.length; for(int i = 0; i &lt; size ; i++) &#123; int k = i ; // é€‰å–æœ€å°å…ƒç´  for(int j = i + 1; j &lt; size ; j++)&#123; if (numbers[j] &lt; numbers[k]) &#123; k = j; &#125; &#125; // äº¤æ¢ä½ç½®zï¼Œè‡ªèº«æœ€å°æ— é¡»äº¤æ¢ if(i != k) &#123; temp = numbers[i]; numbers[i] = numbers[k]; numbers[k] = temp; &#125; &#125; return numbers; &#125; //æ’å…¥æŽ’åº //å°†æœªæŽ’åºå…ƒç´ å‘å‰æ‰«æï¼Œæ’å…¥åœ¨å°äºŽåŽé¢ä¸”å¤§äºŽå‰é¢çš„ä½ç½® public static int[] insertSort(int[] numbers) &#123; int temp = 0; int size = numbers.length; int j = 0; for(int i = 0; i &lt; size ; i++) &#123; temp = numbers[i]; //åŽç§»è¾ƒå¤§å…ƒç´  for(j = i; j &gt; 0 &amp;&amp; temp &lt; numbers[j-1]; j--) &#123; numbers[j] = numbers[j-1]; &#125; numbers[j] = temp; &#125; return numbers; &#125; //å¸Œå°”æŽ’åº æ’å…¥æŽ’åºçš„å˜å½¢ public static int[] shellSort(int[] arr)&#123; int gap = 1, i, j, len = arr.length; int temp; while (gap &lt; len / 3) gap = gap * 3 + 1; // &lt;O(n^(3/2)) by Knuth,1973&gt;: 1, 4, 13, 40, 121, ... for (; gap &gt; 0; gap /= 3) &#123; for (i = gap; i &lt; len; i++) &#123; temp = arr[i]; for (j = i - gap; j &gt;= 0 &amp;&amp; arr[j] &gt; temp; j -= gap) arr[j + gap] = arr[j]; arr[j + gap] = temp; &#125; &#125; return arr; &#125; //å½’å¹¶æŽ’åº public static int[] mergeSort(int[] nums, int low, int high) &#123; int mid = (low + high) / 2; if (low &lt; high) &#123; // å·¦è¾¹ mergeSort(nums, low, mid); // å³è¾¹ mergeSort(nums, mid + 1, high); // å·¦å³å½’å¹¶ merge(nums, low, mid, high); &#125; return nums; &#125; public static void merge(int[] nums, int low, int mid, int high) &#123; int[] temp = new int[high - low + 1]; int i = low;// å·¦æŒ‡é’ˆ int j = mid + 1;// å³æŒ‡é’ˆ int k = 0; // æŠŠè¾ƒå°çš„æ•°å…ˆç§»åˆ°æ–°æ•°ç»„ä¸­ while (i &lt;= mid &amp;&amp; j &lt;= high) &#123; if (nums[i] &lt; nums[j]) &#123; temp[k++] = nums[i++]; &#125; else &#123; temp[k++] = nums[j++]; &#125; &#125; // æŠŠå·¦è¾¹å‰©ä½™çš„æ•°ç§»å…¥æ•°ç»„ while (i &lt;= mid) &#123; temp[k++] = nums[i++]; &#125; // æŠŠå³è¾¹è¾¹å‰©ä½™çš„æ•°ç§»å…¥æ•°ç»„ while (j &lt;= high) &#123; temp[k++] = nums[j++]; &#125; // æŠŠæ–°æ•°ç»„ä¸­çš„æ•°è¦†ç›–numsæ•°ç»„ for (int k2 = 0; k2 &lt; temp.length; k2++) &#123; nums[k2 + low] = temp[k2]; &#125; &#125; //å¿«é€ŸæŽ’åº private static int getMiddle(int[] list, int low, int high) &#123; int tmp = list[low]; //æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½œä¸ºä¸­è½´ while (low &lt; high) &#123; while (low &lt; high &amp;&amp; list[high] &gt;= tmp) &#123; high--; &#125; list[low] = list[high]; //æ¯”ä¸­è½´å°çš„è®°å½•ç§»åˆ°ä½Žç«¯ while (low &lt; high &amp;&amp; list[low] &lt;= tmp) &#123; low++; &#125; list[high] = list[low]; //æ¯”ä¸­è½´å¤§çš„è®°å½•ç§»åˆ°é«˜ç«¯ &#125; list[low] = tmp; //ä¸­è½´è®°å½•åˆ°å°¾ return low; //è¿”å›žä¸­è½´çš„ä½ç½® &#125; private static int[] quickSort(int[] list, int low, int high) &#123; if (low &lt; high) &#123; int middle = getMiddle(list, low, high); //å°†listæ•°ç»„è¿›è¡Œä¸€åˆ†ä¸ºäºŒ quickSort(list, low, middle - 1); //å¯¹ä½Žå­—è¡¨è¿›è¡Œé€’å½’æŽ’åº quickSort(list, middle + 1, high); //å¯¹é«˜å­—è¡¨è¿›è¡Œé€’å½’æŽ’åº &#125; return list; &#125; &#125;]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[http çŠ¶æ€ç ]]></title>
    <url>%2F2017%2F08%2F20%2Fhttp-status-code%2F</url>
    <content type="text"><![CDATA[HTTPçŠ¶æ€ç ï¼ˆHTTP Status Codeï¼‰,æ˜¯æŒ‡å½“è®¿é—®ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚åŽï¼Œæ˜¾ç¤ºç½‘é¡µå‰ï¼Œç½‘é¡µæ‰€åœ¨æœåŠ¡å™¨ä¼šè¿”å›žä¸€ä¸ªåŒ…å«HTTPçŠ¶æ€ç çš„ä¿¡æ¯å¤´ï¼Œæ¥å“åº”æµè§ˆå™¨çš„è¯·æ±‚ã€‚ ä¸‹é¢è¡¨æ ¼ï¼Œæ¸…æ¥šçš„åˆ†ç±»äº†çŠ¶æ€ç ï¼š HTTPçŠ¶æ€ç åˆ†ç±» çŠ¶æ€ç  å«ä¹‰ å¤‡æ³¨ 1** ä¿¡æ¯ï¼Œæ”¶åˆ°è¯·æ±‚ 2** æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæŽ¥æ”¶å¹¶å¤„ç† 3** é‡å®šå‘ï¼Œéœ€è¿›ä¸€æ­¥æ“ä½œ 4** å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚ 5** æœåŠ¡ç«¯é”™è¯¯ï¼ŒæœåŠ¡å™¨å¤„ç†è¿‡ç¨‹å‘ç”Ÿé”™è¯¯ å¸¸è§çŠ¶æ€ç ï¼š çŠ¶æ€ç  å«ä¹‰ å¤‡æ³¨ 200 OK è¯·æ±‚æˆåŠŸ 301 Move Permanently èµ„æºå·²è¢«æ°¸ä¹…è½¬ç§»åˆ°å…¶ä»–URL 304 Not Modified æ‰€è¯·æ±‚èµ„æºæœªä¿®æ”¹ 305 Use Proxy ä½¿ç”¨ä»£ç†ï¼Œæ‰€è¯·æ±‚èµ„æºå¿…é¡»é€šè¿‡ä»£ç†è®¿é—® 400 BadRequest å®¢æˆ·ç«¯è¯­æ³•é”™è¯¯ 401 unauthorized èº«ä»½è®¤è¯ 403 Forbidden æœåŠ¡ç«¯æ‹’ç» 404 NotFound æœªæ‰¾åˆ° 500 Internal Server Error æœåŠ¡å™¨å†…éƒ¨é”™è¯¯]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linuxåŸºç¡€ç¬”è®°]]></title>
    <url>%2F2017%2F08%2F18%2Flinux%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« ä¸ºéœ€è¦çš„äººå‡†å¤‡ç€ï¼ŒåŽæœŸä¼šä¸æ–­æ·»åŠ å†…å®¹ã€‚æƒå½“æ‰‹å†Œä½¿ç”¨ã€‚ ç»´åŸºå®šä¹‰Linuxï¼ˆ/ËˆlÉªnÉ™ks/ lin-É™ksï¼‰æ˜¯ä¸€ç§è‡ªç”±å’Œå¼€æ”¾æºä»£ç çš„ç±»UNIXæ“ä½œç³»ç»Ÿã€‚ç›®å‰è¿ç”¨æœ€å¹¿æ³›ï¼Œä½¿ç”¨äººæ•°æœ€å¤šçš„æ“ä½œç³»ç»Ÿã€‚ Linux å‘è¡Œç‰ˆåˆ†ç±»Linuxçš„å‘è¡Œç‰ˆæœ¬å¯ä»¥å¤§ä½“åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å•†ä¸šå…¬å¸ç»´æŠ¤çš„å‘è¡Œç‰ˆæœ¬ï¼Œä¸€ç±»æ˜¯ç¤¾åŒºç»„ç»‡ç»´æŠ¤çš„å‘è¡Œç‰ˆæœ¬ï¼Œå‰è€…ä»¥è‘—åçš„Redhatï¼ˆRHELï¼‰ä¸ºä»£è¡¨ï¼ŒåŽè€…ä»¥Debianä¸ºä»£è¡¨ã€‚ Redhat ç³»åˆ— RHEL(Redhat Enterprise Linuxï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„Redhat Advance Serveræ”¶è´¹ç‰ˆæœ¬) FedoraCore(ç”±åŽŸæ¥çš„Redhatæ¡Œé¢ç‰ˆæœ¬å‘å±•è€Œæ¥ï¼Œå…è´¹ç‰ˆæœ¬) CentOS(RHELçš„ç¤¾åŒºå…‹éš†ç‰ˆæœ¬ï¼Œå…è´¹)ã€‚Debian ç³»åˆ— Debian Ubuntu Linux ç³»ç»Ÿå¸¸ç”¨ç›®å½•çš„å«ä¹‰123456789101112131415161718/binï¼šbinæ˜¯Binaryçš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚/bootï¼šè¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨Linuxæ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿žæŽ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚/dev ï¼šdevæ˜¯Device(è®¾å¤‡)çš„ç¼©å†™, è¯¥ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯Linuxçš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨Linuxä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚/etcï¼šè¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚/homeï¼šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„ã€‚/libï¼šè¿™ä¸ªç›®å½•é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿žæŽ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºŽWindowsé‡Œçš„DLLæ–‡ä»¶ã€‚å‡ ä¹Žæ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚/lost+foundï¼šè¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œå½“ç³»ç»Ÿéžæ³•å…³æœºåŽï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚/mediaï¼šlinuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ã€å…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åŽï¼Œlinuxä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚/mntï¼šç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰é©±æŒ‚è½½åœ¨/mnt/ä¸Šï¼Œç„¶åŽè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹å…‰é©±é‡Œçš„å†…å®¹äº†ã€‚/optï¼š è¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚ä½ å®‰è£…ä¸€ä¸ªORACLEæ•°æ®åº“åˆ™å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚é»˜è®¤æ˜¯ç©ºçš„ã€‚/rootï¼šè¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚/sbinï¼šså°±æ˜¯Super Userçš„æ„æ€ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚/tmpï¼šè¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ã€‚/usrï¼š è¿™æ˜¯ä¸€ä¸ªéžå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼ä¸Žwindowsä¸‹çš„program filesç›®å½•ã€‚/usr/binï¼šç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚/usr/sbinï¼šè¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚/usr/srcï¼šå†…æ ¸æºä»£ç é»˜è®¤çš„æ”¾ç½®ç›®å½•ã€‚/varï¼šè¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚ Linux æ–‡ä»¶å±žæ€§åŠæƒé™æ¯ä¸ªæ–‡ä»¶çš„å±žæ€§éƒ½æ˜¯ç”±10ä¸ªå­—ç¬¦æ¥ç¡®å®šã€‚0ï¼šæ–‡ä»¶ç±»åž‹ å½“ä¸º[ d ]åˆ™æ˜¯ç›®å½• å½“ä¸º[ - ]åˆ™æ˜¯æ–‡ä»¶ï¼› è‹¥æ˜¯[ l ]åˆ™è¡¨ç¤ºä¸ºé“¾æŽ¥æ–‡æ¡£(link file)ï¼› è‹¥æ˜¯[ b ]åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„å¯ä¾›å‚¨å­˜çš„æŽ¥å£è®¾å¤‡(å¯éšæœºå­˜å–è£…ç½®)ï¼› è‹¥æ˜¯[ c ]åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€é¼ æ ‡(ä¸€æ¬¡æ€§è¯»å–è£…ç½®)ã€‚1-3ï¼šæ–‡ä»¶æ‰€æœ‰è€…æƒé™4-6ï¼šæ‰€æœ‰è€…åŒç»„æƒé™7-9ï¼šå…¶ä»–ç”¨æˆ·æƒé™å…¶ä¸­ä¸åŒç”¨æˆ·çš„æƒé™æœ‰3ä¸ªå­—æ¯æž„æˆï¼š[ r ]ä»£è¡¨å¯è¯»(read)ã€[ w ]ä»£è¡¨å¯å†™(write)ã€[ x ]ä»£è¡¨å¯æ‰§è¡Œ(execute)ã€‚ è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªæƒé™çš„ä½ç½®ä¸ä¼šæ”¹å˜ï¼Œå¦‚æžœæ²¡æœ‰æƒé™ï¼Œå°±ä¼šå‡ºçŽ°å‡å·[ - ]è€Œå·²ã€‚ Linux å¸¸ç”¨å‘½ä»¤man: å¸®åŠ© ç›®å½•ç›¸å…³å‘½ä»¤1234567ls: åˆ—å‡ºç›®å½•cdï¼šåˆ‡æ¢ç›®å½•pwdï¼šæ˜¾ç¤ºç›®å‰çš„ç›®å½•mkdirï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•rmdirï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•cp: å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•rm: ç§»é™¤æ–‡ä»¶æˆ–ç›®å½• æ–‡ä»¶å¤„ç†ç›¸å…³1234567cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹tac ä»Žæœ€åŽä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’è‘—å†™ï¼nl æ˜¾ç¤ºçš„æ—¶å€™ï¼Œé¡ºé“è¾“å‡ºè¡Œå·ï¼more ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹less ä¸Ž more ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æ›´å¥½çš„æ˜¯ï¼Œä»–å¯ä»¥å¾€å‰ç¿»é¡µï¼head åªçœ‹å¤´å‡ è¡Œtail åªçœ‹å°¾å·´å‡ è¡Œ ç¡¬ä»¶é…ç½®ç›¸å…³12345fdisk -l æŸ¥çœ‹ç¡¬ç›˜åŠåˆ†åŒºæƒ…å†µdf æŸ¥çœ‹åˆ†åŒºç©ºé—´ä½¿ç”¨æƒ…å†µfree æŸ¥çœ‹å†…å­˜ä¿¡æ¯cat /proc/meminfo å†…å­˜ä¿¡æ¯more /proc/cpuinfo æŸ¥è¯¢CPUåŸºæœ¬ä¿¡æ¯ ç½‘ç»œé…ç½®ç›¸å…³12345ifconfig æŸ¥çœ‹å·²å¯ç”¨çš„ç½‘ç»œæŽ¥å£ä¿¡æ¯netstat æ˜¾ç¤ºç½‘ç»œçŠ¶æ€top å®žæ—¶ç›‘æŽ§CPUã€å†…å­˜ã€è¿›ç¨‹ç­‰ä½¿ç”¨æƒ…å†µps æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹kill å…³é—­è¿›ç¨‹ å‚è€ƒ- Linuxå‘½ä»¤æŸ¥è¯¢]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›žå½’ Despacito]]></title>
    <url>%2F2017%2F08%2F17%2Freback%2F</url>
    <content type="text"><![CDATA[DespacitoCome on over in my directionå¿«ç‚¹ä¸Žæˆ‘åŒè¡Œå§So thankful for that, itâ€™s such a blessinâ€™, yeahä½ èƒ½æ¥åˆ°æˆ‘çš„èº«è¾¹ï¼Œé‚£æ˜¯ä¸Šå¤©çš„çœ·é¡¾Turn every situation into Heaven, yeahä½ å°†ä¸€åˆ‡åŽ„è¿åŒ–ä¸ºä¹Œæœ‰Oh, you areå“¦ï¼Œä½ æ˜¯My sunrise on the darkest dayæˆ‘åœ¨é»‘æš—é»Žæ˜Žé‡Œçš„ä¸€ä¸æ›™å…‰Got me feelinâ€™ some kind of wayä½ æ€»ä¼šè®©æˆ‘äº§ç”Ÿä¸€ç§ç¾Žå¥½çš„æ„Ÿè§‰Make me wanna savor every moment slowly, slowlyè®©æˆ‘æƒ³ç»†ç»†å’€åš¼ç”Ÿå‘½ä¸­çš„æ¯åˆ†æ¯ç§’You fit me, tailor-made love, how you put it onä½ å°±åƒæ˜¯æˆ‘é‡èº«å®šåšçš„ç°å§‘å¨˜ï¼Œæ²¡äººçŸ¥é“æ€Žä¹ˆä¸ºä½ ç©¿ä¸ŠçŽ»ç’ƒéž‹Got the only key, know how to turn it onè€Œæˆ‘æ˜¯å”¯ä¸€çŸ¥é“å¦‚ä½•åšçš„çŽ‹å­The way you nibble on my ear, the only words I wanna hearä½ åœ¨æˆ‘è€³è¾¹çš„è½»è½»ç»†è¯­ï¼Œé‚£æ˜¯æˆ‘çš„å¤©ç±ä¹‹éŸ³Baby take it slow so we can last longå®è´ï¼Œæ‰€æœ‰çš„çˆ±æƒ…éƒ½éœ€è¦æ¸©å­˜ï¼Œåªæœ‰è¿™æ ·å®ƒæ‰ä¼šé•¿ä¹…Oh, tÃº, tÃº eres el imn y yo soy el metalä½  ä½ æ˜¯ç£çŸ³è€Œæˆ‘æ˜¯é‡‘å±žMe voy acercando y voy armando el planæˆ‘ä¸€æ­¥æ­¥æŽ¥è¿‘ ç›˜ç®—ç€å¦‚ä½•å‡ºæ‹›SÃ³lo con pensarlo se acelera el pulsoå…‰æ˜¯æƒ³æƒ³ æˆ‘çš„è„‰æå°±ç‹‚è·³Oh, yeahå“¦ï¼Œæ˜¯çš„Ya, ya me estÃ¡ gustando mÃ¡s de lo normalçŽ°åœ¨ çŽ°åœ¨è¿™æ„Ÿè§‰éžæ¯”å¯»å¸¸Todos mis sentidos van pidiendo mÃ¡sæˆ‘çš„æ‰€æœ‰æ„Ÿå®˜éƒ½é¥¥æ¸´ä¸‡åˆ†Esto hay que tomarlo sin ningÃºn apuroä½†è¿™äº‹å„¿ç€æ€¥ä¸å¾—Despacitoæ…¢æ…¢åœ°æ¥Quiero respirar tu cuello despacitoæƒ³è¦åœ¨ä½ è„–é¢ˆé—´æ…¢æ…¢åœ°å–˜æ¯Deja que te diga cosas al oÃ­doåœ¨ä½ çš„è€³è¾¹è¯´å°½ç”œè¨€èœœè¯­å¥½Para que te acuerdes si no estÃ¡s conmigoè®©ä½ åœ¨ä»¥åŽéƒ½èƒ½æƒ³èµ·æ­¤æ—¶æ­¤åˆ»Despacitoæ…¢æ…¢åœ°æ¥Quiero desnudarte a besos despacitoæƒ³è¦ç”¨å»æ…¢æ…¢è¤ªåŽ»ä½ çš„è¡£è¡«Firmo en las paredes de tu laberintoåœ¨ä½ è¿·å®«çš„å¢™ä¸Šç•™ä¸‹æˆ‘çš„åå­—Y hacer de tu cuerpo todo un manuscritoæŠŠä½ çš„èº«ä½“å˜æˆæˆ‘çš„æ‰‹ç¨¿(Sube, sube, sube, sube, sube)äº²çˆ±çš„ï¼Œäº²çˆ±çš„ï¼Œäº²çˆ±çš„ï¼Œäº²çˆ±çš„ï¼Œäº²çˆ±çš„Quiero ver bailar tu peloæƒ³è¦çœ‹ä½ å‘ä¸é£žæ‰¬Quiero ser tu ritmoæƒ³è¦æˆä¸ºä½ èˆžåŠ¨çš„æ—‹å¾‹Que le enseÃ±es a mi bocaæƒ³è¦ä½ å‘Šè¯‰æˆ‘çš„å˜´å”‡Tus lugares favoritosä½•å¤„æ˜¯ä½ æƒ³è¦äº²å»çš„åœ°æ–¹(Favorito, favorito, baby)ï¼ˆæœ€æƒ³è¦çš„ å®è´ï¼‰DÃ©jame sobrepasar tus zonas de peligroè®©æˆ‘è¶Šè¿‡ä½ çš„å±é™©åœ°å¸¦Hasta provocar tus gritosç›´åˆ°ä»¤ä½ å°–å«Y que olvides tu apellidoç›´åˆ°ä½ å¿˜è®°äº†è‡ªå·±çš„åå­—Si te pido un beso, ven, dÃ¡meloè‹¥æˆ‘å‘ä½ ç´¢å» é‚£ä½ å°±æ¥è½»å»æˆ‘å§Yo sÃ© que estÃ¡s pensÃ¡ndoloæˆ‘çŸ¥é“ä½ æƒ³è¿™ä¹ˆåšLlevo tiempo intentÃ¡ndoloæˆ‘å·²ç»ä¸ºä½ åŠªåŠ›äº†é‚£ä¹ˆä¹…å®è´Mami, esto es dando y dÃ¡ndoloä½ å°±ç»™æˆ‘å§ ç»™æˆ‘ä¸€ä¸ªä½ çš„å»Sabes que tu corazÃ³n conmigo te hace bang-bangçŸ¥é“ä½ ä¸Žæˆ‘åœ¨ä¸€èµ·æ—¶ ä½ çš„å¿ƒè·³ ç °ç °Sabes que esa beba estÃ¡ buscando de mi bang-bangä½ çŸ¥é“ä½ æ‰€éœ€æŒ‰ç…§çš„é‚£ç§ æˆ‘èƒ½ç»™çš„ ç °ç °Ven, prueba de mi boca para ver cÃ³mo te sabeæ¥å°å°æˆ‘çš„å”‡æ˜¯ä»€ä¹ˆå‘³é“Quiero, quiero, quiero ver cuÃ¡nto amor a ti te cabeæˆ‘æƒ³è¦ æƒ³è¦çœ‹çœ‹ä½ èƒ½æ‰¿å—å¤šæ·±çš„çˆ±Yo no tengo prisa, yo me quiero dar el viajeæˆ‘ä¸ç€æ€¥ æˆ‘å–œæ¬¢æ¸¸çŽ©çš„æ„Ÿè§‰Empecemos lento, despuÃ©s salvajeå¼€å§‹æ—¶é£Žå¹³æµªé™ ä¹‹åŽåˆ™ç”µé—ªé›·é¸£Pasito a pasito, suave suavecitoä¸€ç‚¹ä¸€ç‚¹ æ¸©æŸ”å†æ¸©æŸ”Nos vamos pegando, poquito a poquitoæˆ‘ä»¬è¶Šè´´è¶Šè¿‘ ä¸€ç‚¹ä¸€ç‚¹Cuando tÃº me besas con esa destrezaä½ äº²å»çš„æ—¶å€™æ˜¯å¦‚æ­¤å¨´ç†ŸVeo que eres malicia con delicadezaæˆ‘æ‰å‘çŽ°ä½ æ˜¯ä¸€ä¸ªå¨‡åªšçš„å°åè›‹Pasito a pasito, suave suavecitoä¸€ç‚¹ä¸€ç‚¹ æ¸©æŸ”å†æ¸©æŸ”Nos vamos pegando, poquito a poquitoæˆ‘ä»¬è¶Šè´´è¶Šè¿‘ ä¸€ç‚¹ä¸€ç‚¹Y es que esa belleza es un rompecabezasä½ çš„ç¾Ž å¦‚åŒæ‰“ä¹±çš„æ‹¼å›¾ä¸€æ · ä»¤äººç€è¿·Pero paâ€™ montarlo aquÃ­ tengo la piezaä½†æˆ‘ä¼šæ‹¼å¥½çš„ å› ä¸ºç¼ºå¤±çš„é‚£ä¸€å—åœ¨æˆ‘çš„æ‰‹ä¸­Â¡Oye!å˜¿ï¼Despacitoæ…¢æ…¢åœ°æ¥Quiero respirar tu cuello despacitoæƒ³è¦åœ¨ä½ è„–é¢ˆé—´æ…¢æ…¢åœ°å–˜æ¯Deja que te diga cosas al oÃ­doåœ¨ä½ çš„è€³è¾¹è¯´å°½ç”œè¨€èœœè¯­Para que te acuerdes si no estÃ¡s conmigoå¥½è®©ä½ åœ¨ä»¥åŽéƒ½èƒ½æƒ³èµ·æ­¤æ—¶æ­¤åˆ»Despacitoæ…¢æ…¢åœ°æ¥Quiero desnudarte a besos despacitoæƒ³è¦ç”¨å»æ…¢æ…¢è¤ªåŽ»ä½ çš„è¡£è¡«Firmo en las paredes de tu laberintoåœ¨ä½ è¿·å®«çš„å¢™ä¸Šç•™ä¸‹æˆ‘çš„åå­—Y hacer de tu cuerpo todo un manuscritoæŠŠä½ çš„èº«ä½“å˜æˆæˆ‘çš„æ‰‹ç¨¿(Sube, sube, sube, sube, sube)äº²çˆ±çš„ï¼Œäº²çˆ±çš„ï¼Œäº²çˆ±çš„ï¼Œäº²çˆ±çš„ï¼Œäº²çˆ±çš„Quiero ver bailar tu peloæƒ³è¦çœ‹ä½ å‘ä¸é£žæ‰¬Quiero ser tu ritmoæƒ³è¦æˆä¸ºä½ èˆžåŠ¨çš„æ—‹å¾‹Que le enseÃ±es a mi bocaæƒ³è¦ä½ å‘Šè¯‰æˆ‘çš„å˜´å”‡Tus lugares favoritosä½•å¤„æ˜¯ä½ æƒ³è¦äº²å»çš„åœ°æ–¹(Favorito, favorito, baby)ï¼ˆæœ€æƒ³è¦çš„ å®è´DÃ©jame sobrepasar tus zonas de peligroè®©æˆ‘è¶Šè¿‡ä½ çš„å±é™©åœ°å¸¦Hasta provocar tus gritosç›´åˆ°ä»¤ä½ å°–å«Y que olvides tu apellidoçŸ¥é“ä½ å¿˜è®°äº†è‡ªå·±çš„åå­—Despacitoæ…¢æ…¢åœ°æ¥This is how we do it down in Puerto Ricoè¿™å°±æ˜¯æ³¢å¤šé»Žå„çš„åšæ³•I just wanna hear you screaming, â€œÂ¡Ay, Bendito!â€æˆ‘åªæƒ³å¬åˆ°ä½ å°–å«ï¼Œâ€œå—¨ï¼Œæœ¬è¿ªæ‰˜ï¼â€I can move foreverm se quede contigoæˆ‘å¯ä»¥æ°¸è¿œç§»åŠ¨Â¡Bailalo!bailaloï¼ï¼ˆåŠ åˆ©è¥¿äºšè¯­ï¼‰Pasito a pasito, suave suavecitoä¸€ç‚¹ä¸€ç‚¹ æ¸©æŸ”å†æ¸©æŸ”Nos vamos pegando, poquito a poquitoæˆ‘ä»¬è¶Šè´´è¶Šè¿‘ ä¸€ç‚¹ä¸€ç‚¹Que le enseÃ±es a mi bocaå‘Šè¯‰ä»–ä»¬ æˆ‘çš„å˜´Tus lugares favoritosæ˜¯ä½ æœ€å–œæ¬¢çš„åœ°æ–¹(Favorito, favorito, baby)ï¼ˆæœ€æƒ³è¦çš„ å®è´ï¼‰Pasito a pasito, suave suavecitoä¸€ç‚¹ä¸€ç‚¹ æ¸©æŸ”å†æ¸©æŸ”Nos vamos pegando, poquito a poquitoæˆ‘ä»¬è¶Šè´´è¶Šè¿‘ ä¸€ç‚¹ä¸€ç‚¹Hasta provocar tus gritos (Fonsi)ç›´åˆ°ä»¤ä½ å°–å«(Fonsi)Y que olvides tu apellido (D.Y.)ç›´åˆ°ä½ å¿˜è®°äº†è‡ªå·±çš„åå­—ï¼ˆD.Y.ï¼‰Despacitoæ…¢æ…¢åœ°æ¥]]></content>
      <categories>
        <category>å¿ƒæƒ…éšç¬”</category>
      </categories>
      <tags>
        <tag>å¿ƒæƒ…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuå¼€å¯rootè´¦æˆ·ç™»å½•åŽçš„ä¸¤æ¡ç¬”è®°]]></title>
    <url>%2F2016%2F08%2F13%2Froot-ubuntu%2F</url>
    <content type="text"><![CDATA[åšHadoopé›†ç¾¤æ—¶,ä»¥rootè´¦æˆ·ç™»å½•èŽ·å–åˆ°æœ€é«˜æƒé™.å¯ä»¥é¿å…å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦.ä½†æœ‰ä¸¤ç‚¹éœ€è¦ç•¥ä½œä¿®æ”¹çš„bugä¹‹å¤„.ç¬”è€…Ubuntu 14.04 LTS ROOTè´¦æˆ·ç™»å½•æ—¶ç•Œé¢æŠ¥é”™ç™»å½•ç³»ç»Ÿæ—¶å‡ºçŽ°12Error found when loading /root/.profilestdin: is not a tty æ­¤æ—¶éœ€è¦æ›´æ”¹1/root/.profile ç¼–è¾‘å¹¶ä¿®æ”¹ä¸€æ ·ä»£ç å¦‚ä¸‹:12gedit /root/.profile # æ‰“å¼€tty -s &amp;&amp; mesg n # ä¿®æ”¹mesg n çš„æ‰€åœ¨è¡Œä»£ç  ç„¶åŽé‡å¯ç³»ç»Ÿå³å¯. ROOTè´¦æˆ·å¯åŠ¨Chromiumæµè§ˆå™¨æŠ¥é”™ä»¥ROOTç”¨æˆ·å¯åŠ¨Chromiumæ—¶,ä¼šæŠ¥é”™ä¸èƒ½ä»¥æ ¹ç”¨æˆ·èº«ä»½è¿è¡Œgoogle chrome æµè§ˆå™¨æ­¤æ—¶,æˆ‘æœ€åˆçš„è§£å†³åŠžæ³•å°±æ˜¯ä»¥éšèº«æ–¹å¼æ‰“å¼€æµè§ˆå™¨.åŽæ¥æ‰¾åˆ°ä¸‹é¢çš„è§£å†³åŠžæ³•,å°†chromiumç”¨æˆ·æ•°æ®æ–‡ä»¶å¤¹.è¿›å…¥ä¸‹é¢è·¯å¾„1/usr/share/applications/ åœ¨chromiumå¿«æ·å›¾æ ‡ä¸Šå³é”®ï¼Œç‚¹å‡»å±žæ€§ï¼Œåœ¨å‘½ä»¤å±žæ€§åŽæ·»åŠ 1-user-data-dir å³å¯.]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuä¸‹Matplotlibçš„å®‰è£…ä¸ŽSDNä»¿çœŸ]]></title>
    <url>%2F2016%2F08%2F10%2Fmatplotlib-ubuntu%2F</url>
    <content type="text"><![CDATA[å¸®åŒå­¦åšSDN(Software Defined Network)è½¯ä»¶å®šä¹‰ç½‘ç»œæ–¹å‘çš„ä»£ç ä»¿çœŸ,çŽ¯å¢ƒçš„å®‰è£…ä¸Žè°ƒè¯•å¦‚ä¸‹. å®‰è£…pipæ”¯æŒä¸‹è½½get-pip å®‰è£…åŒ…1wget https://bootstrap.pypa.io/get-pip.py --no-check-certificate å®‰è£…pip æ”¯æŒ1sudo python get-pip.py å®‰è£…Matplotlibåº“ å®‰è£…scipyç»„ä»¶ 1sudo apt-get install python-scipy å®‰è£…numpyç»„ä»¶ 1sudo apt-get install python-numpy å®‰è£… matplotlib 1sudo apt-get install python-matplotlib åˆ©ç”¨pipå®‰è£…neworkx1sudo pip install networkx å®‰è£…Rè¯­è¨€1sudo apt-get install r-base è¿è¡Œç¨‹åº1./DO_EVERYTHING.sh ä»£ç æŠ¥é”™,å¹¶æœªçœ‹åˆ°PLOTâ€¦éƒé—·â€¦ ä»£ç åœ°å€sdnctrlsim-Github åŽç»­æŠ¥é”™é—®é¢˜æœ€ç»ˆè§£å†³.ç”Ÿæˆçš„PLOT,è·¯å¾„æ²¡æ‰¾å¯¹.]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Matplotlib SDN</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Sparké›†ç¾¤æ­å»ºæ•™ç¨‹ in Ubuntu 14.04]]></title>
    <url>%2F2016%2F07%2F18%2Fspark-cookbook%2F</url>
    <content type="text"><![CDATA[åŸºæœ¬çŽ¯å¢ƒæ€»è§ˆ-åŠä¸‹è½½é“¾æŽ¥VMware 12.1.1Ubuntu 14.04JAVA 1.8.0Hadoop 2.7.2Spark 1.6.2SCALA 2.10.6ideaIC-2016.2scala-intellij-bin-2016.2.1æ–‡æœ«æœ‰ç½‘ç›˜æä¾›æœ¬æ–‡çŽ¯å¢ƒä¸‹è½½ VMtoolså®‰è£… VMwareèœå•-è™šæ‹Ÿæœº-å®‰è£…VMtools è§£åŽ‹tar.gz teminalä¸­æ‰§è¡Œ./vmware-install.pl é‡å¯è™šæ‹Ÿæœºç³»ç»Ÿ Hadoop 2.7.2 in Ubuntu 14.04 LTS é…ç½®å¼€å§‹Ubuntuå¼€å¯rootè´¦æˆ·ç™»å½• vim å®‰è£… å¯ä»¥ç”¨geditä»£æ›¿ 1sudo apt-get install vim Ubuntu14.04æ¡Œé¢çŽ¯å¢ƒç›®å½• 1sudo gedit /usr/share/lightdm/lightdm.conf.d/50-unity-greeter.conf æ¡Œé¢çŽ¯å¢ƒè®¾ç½®å¦‚ä¸‹ å¼€å¯rootè´¦æˆ· 1234567[SeatDefaults]greeter-session=unity-greeteruser-session=ubuntugreeter-show-manual-login=trueallow-guest=false- å¯ç”¨rootè´¦å·sudo passwd root SSHå®žçŽ°æ— å¯†ç ç™»å½• sshé€šè®¯å®‰è£… 1sudo apt-get install ssh sshå¯åŠ¨ 1/etc/init.d/ssh start sshçŠ¶æ€ 1ps -e |grep ssh ç”Ÿæˆå…¬é’¥ ç§é’¥ 1ssh-keygen -t rsa -P &quot;&quot; å…¬é’¥æ·»åŠ æŽˆæƒ 1cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys ç™»å…¥ 1ssh localhost ç™»å‡º 1exit æ›´æ”¹hosts ä¸Žhostname æŸ¥çœ‹IP 1ifconfig ç¼–è¾‘hostname 123vim /etc/hostname # ç”¨geditä¹Ÿå¯i #æ›´æ”¹ä¸ºä¸»æœºåSparkMaster SparkWorker1 SparkWorker2shift+zz ä¿å­˜é€€å‡º æ›´æ”¹hosts 123vim /etc/hostsi #æ›´æ”¹IPåŠå¯¹åº”ä¸»æœºåå­—shift+zz ä¿å­˜é€€å‡º å…¬é’¥æ·»åŠ è‡³æŽˆæƒ 123456scpä¼ è¾“ æ–¹æ³•å¤±æ•ˆï¼Œé€šè¿‡æ‹·è´å³å¯cd /root/.ssh/å°†slaveçš„å¯†é’¥ä¼ åˆ°Masterä¸Šscp id_rsa.pub root@SparkMaster:/root/.ssh/id_rsa.pub.SparkWorker1 scp id_rsa.pub root@SparkMaster:/root/.ssh/id_rsa.pub.SparkWorker2cat ~/.ssh/id_rsa.pub.SparkWorker1 &gt;&gt; ~/.ssh/authorized_keys cat ~/.ssh/id_rsa.pub.SparkWorker2 &gt;&gt; ~/.ssh/authorized_keys è¿™æ ·æˆ‘ä»¬çš„authorized_keyså°±æœ‰äº†ä¸‰å°ä¸»æœºçš„å¯†é’¥,å°†authorized_keysåˆ†åˆ«å¤åˆ¶åˆ°å¦å¤–ä¸¤å°ç”µè„‘å¯¹åº”ç›®å½•ä¸‹ JavaçŽ¯å¢ƒå®‰è£…1.8.0 ä¸‹è½½å®‰è£…Java 123mkdir /usr/lib/javamv /root/.... /usr/lib/javatar -xvf jdk-.... ä¿®æ”¹JAVAçŽ¯å¢ƒé…ç½®ä½¿ç”Ÿæ•ˆ1.8.0 1234567gedit ~/.bashrcexport JAVA_HOME=/usr/lib/java/jdk1.8.0_91export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport CLASS_PATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=$&#123;JAVA_HOME&#125;/bin:$PATH- ä½¿bashrcç”Ÿæ•ˆsource ~/.bashrc HadoopçŽ¯å¢ƒå®‰è£…2.7.2 ä¸‹è½½å®‰è£…Hadoop 12mkdir /usr/lib/hadooptar -xvf hadoop-.... ä¿®æ”¹HadoopçŽ¯å¢ƒé…ç½®ä½¿ç”Ÿæ•ˆ2.7.2 1234567gedit ~/.bashrcexport JAVA_HOME=/usr/lib/java/jdk1.8.0_91export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport CLASS_PATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=$&#123;JAVA_HOME&#125;/bin:/usr/lib/hadoop/hadoop-2.7.2/bin:$PATH - ä½¿bashrcç”Ÿæ•ˆsource ~/.bashrc hadoop ç‰ˆæœ¬hadoop version æ›´æ”¹hadoopä¸‰ä¸ªæ–‡ä»¶çš„javaçŽ¯å¢ƒ 1234567cd /usr/lib/hadoop/hadoop-2.7.2/etc/hadoopgedit hadoop-env.sh # ä¿®æ”¹å¦‚ä¸‹export JAVA_HOME=/usr/lib/java/jdk1.8.0_91 gedit yarn-env.sh # ä¿®æ”¹å¦‚ä¸‹export JAVA_HOME=/usr/lib/java/jdk1.8.0_91gedit mapred-env.sh # ä¿®æ”¹å¦‚ä¸‹export JAVA_HOME=/usr/lib/java/jdk1.8.0_91 æ›´æ”¹slaves ä¸º2ä¸ªå­èŠ‚ 1gedit slaves #SparkWorker1 Sparkworker2 æ›´æ”¹ä¸‰ä¸ªxmlæ–‡ä»¶ 1cd /usr/lib/hadoop/hadoop-2.7.2/etc/hadoop æ›´æ”¹site.xmlæ–‡ä»¶ 123456789101112&lt;configuration&gt; &lt;property&gt; &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://SparkMaster:9000/&lt;/value&gt; &lt;description&gt;The name of default file system&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/usr/lib/hadoop/hadoop-2.7.2/tmp&lt;/value&gt; &lt;description&gt;A base for other temporary directories&lt;/description&gt; &lt;/property&gt; &lt;/configuration&gt; æ›´æ”¹dfs.xmlæ–‡ä»¶ 1234567891011121314&lt;configuration&gt; &lt;property&gt; &lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;2&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; &lt;value&gt;/usr/lib/hadoop/hadoop-2.7.2/dfs/name&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.datanode.name.dir&lt;/name&gt; &lt;value&gt;/usr/lib/hadoop/hadoop-2.7.2/dfs/data&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; æ›´æ”¹mapred.xmlæ–‡ä»¶ 123456&lt;configuration&gt; &lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; æ›´æ”¹yarn.xmlæ–‡ä»¶ 12345678910&lt;configuration&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt; &lt;value&gt;SparkMaster&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; scp ä¼ è¾“çŽ¯å¢ƒåˆ°èŠ‚ç‚¹æœºå™¨ 1234scp -r hadoop/ root@SparkWorker1:/usr/lib/scp -r java/ root@SparkWorker1:/usr/lib/scp -r hadoop/ root@SparkWorker2:/usr/lib/scp -r java/ root@SparkWorker2:/usr/lib/ ç¼–è¾‘bashrc 1234567gedit ~/.bashrcexport JAVA_HOME=/usr/lib/java/jdk1.8.0_91export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport CLASS_PATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=$&#123;JAVA_HOME&#125;/bin:/usr/lib/hadoop/hadoop-2.7.2/bin:$PATH - ä½¿bashrcç”Ÿæ•ˆsource ~/.bashrc æ ¼å¼åŒ–hdfsç³»ç»Ÿ 12cd /usr/lib/hadoop/hadoop-2.7.2/sbinhadoop namenode -format å¯åŠ¨hdfsç³»ç»Ÿ 12./start-dfs.sh htttp://SparkMaster:50070 # HDFSé›†ç¾¤ å¯åŠ¨yarné›†ç¾¤ 1234./start-yarn.shhttp://SparkMaster:8088 #ResourceManagerçŠ¶æ€http://SparkWorker1:8042 #NodeManagerçŠ¶æ€http://SparkWorker1:8042 #NodeManagerçŠ¶æ€ åŽ†å²æœåŠ¡ 123./mr-jobhistory-daemon.sh start historyserver #åŽ†å²æœåŠ¡http://SparkMaster:19888 #ResourceManagerçŠ¶æ€./mr-jobhistory-daemon.sh stop historyserver #åœæ­¢ slaveæ— æ³•å¯åŠ¨nodemanagerå¯ä»¥åˆ é™¤dataæ–‡ä»¶å¤¹ 12usr/lib/hadoop/tmp/dfs/ -lsrm -r /data/ Hadoopå®žä¾‹æµ‹è¯• å»ºç«‹è¾“å…¥è¾“å‡ºæ–‡ä»¶å¤¹ 12hadoop fs -mkdir -p /data/wordcounthadoop fs -mkdir -p /output/ å¤åˆ¶æ‰€éœ€æ–‡ä»¶åˆ°è¾“å…¥æ–‡ä»¶å¤¹ 1hadoop fs -put ../etc/haddop/#.xml /data/wordcount/ æ‰§è¡Œwordcount çš„mapreduceå‘½ä»¤ 1hadoop jar ../share/hadoop//mapreduce/hadoop-mapreduce-examples-2.7.2.jar wordcount /data/wordcount/hadoop /output/wordcount2 å¯ä»¥æŸ¥çœ‹ä¸ªæ–‡ä»¶å¤¹åŠæ–‡ä»¶ 1http://sparkmaster:50070/explorer.html#/ hadoop é…ç½®å®Œæ¯• è¿è¡Œå®žä¾‹æˆåŠŸ Spark 1.6.2 SCALA 2.10.6 é…ç½®å¼€å§‹ SPARK SCALAçŽ¯å¢ƒé…ç½® SparkçŽ¯å¢ƒå®‰è£…1.6.2 12mkdir /usr/lib/sparktar -xvf spark-.... ScalaçŽ¯å¢ƒå®‰è£…2.10.6 12mkdir /usr/lib/scalatar -xvf scala-.... Spark Scalaé…ç½® 12345678910111213141516gedit ~/.bashrc# SCALA é…ç½®export JAVA_HOME=/usr/lib/java/jdk1.8.0_91export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport SCALA_HOME=/usr/lib/scala/scala-2.10.6export CLASS_PATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=$&#123;SCALA_HOME&#125;/bin:$&#123;JAVA_HOME&#125;/bin:/usr/lib/hadoop/hadoop-2.7.2/bin:$PATH# SPARK é…ç½®export JAVA_HOME=/usr/lib/java/jdk1.8.0_91export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport SCALA_HOME=/usr/lib/scala/scala-2.10.6export SPARK_HOME=/usr/lib/spark/spark-1.6.2-bin-hadoop2.6export CLASS_PATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=$&#123;SPARK_HOME&#125;/lib:$&#123;SCALA_HOME&#125;/bin:$&#123;JAVA_HOME&#125;/bin:/usr/lib/hadoop/hadoop-2.7.2/bin:$PATH- ä½¿bashrcç”Ÿæ•ˆsource ~/.bashrc Spark-env.sh slave é…ç½® 1234cp spark-env.sh.template spark-env.shcp slave.template slavegedit spark-env.shgedit slave è¿½åŠ spark-env.shä¿¡æ¯ 12345export JAVA_HOME=/usr/lib/java/jdk1.8.0_91export SCALA_HOME=/usr/lib/scala/scala-2.10.6export SPARK_MASTER_IP=192.168.204.130export SPARK_WORKER_MEMORY=2gexport HADOOP_CONF_DIR=/usr/lib/hadoop/hadoop-2.7.2/conf ä¿®æ”¹slave 123SparkMasterSparkWorker1SparkWorker2 ä¼ è¾“ SCALA å’Œ SPARK 1234scp -r /usr/lib/spark/ root@SparkWorker1:/usr/lib/scp -r /usr/lib/spark/ root@SparkWorker2:/usr/lib/scp -r /usr/lib/scala/ root@SparkWorker1:/usr/lib/scp -r /usr/lib/scala/ root@SparkWorker2:/usr/lib/ å¯åŠ¨spark 12cd /usr/lib/spark/spark-1.6.2-bin-hadoop2.6/sbin# ./start-all.sh è§‚å¯ŸSpark 1http://sparkmaster:8080/ å¯åŠ¨spark-shell 12cd /usr/lib/spark/spark-1.6.2-bin-hadoop2.6/bin# ./spark-shell è§‚å¯ŸSpark-shell 1http://sparkmaster:4040/ SPARKæµ‹è¯• åˆ‡æ¢ç›®å½• 1cd /usr/lib/spark/spark-1.6.2-bin-hadoop2.6 å°†README.md ä¸Šä¼ è‡³data 1hadoop fs -put README.md /data/ å¯åŠ¨Spark shell æ—¶é—´è¦ç”¨12 Min 1MASTER=spark://SparkMaster:7077 ./spark-shell è¯»å–README.md åšå¦‚ä¸‹å¤„ç† 123val file = sc.textFile(&quot;hdfs://SparkMaster:9000/data/README.md&quot;)val count = file.flatMap(line =&gt; line.split(&quot; &quot;)).map(word =&gt; (word, 1)).reduceByKey(_+_)count collect SPARK SCALA é…ç½®å®Œæ¯• è¿è¡Œå®žä¾‹æˆåŠŸ IDEA å®‰è£…æµ‹è¯• åˆ›å»ºæ–‡ä»¶å¤¹ 1mkdir /usr/local/idea æ‹·è´è‡³æ–‡ä»¶å¤¹ 1cp /root/ideaIC-2016.2.tar.gz /usr/local/idea/ åˆ‡æ¢è‡³ç›®å½•å¹¶è§£åŽ‹ 12cd /usr/local/idea/tzr -xvf ideaIC-2016.2.tar.gz ä¸ºæ–¹ä¾¿æ˜¯ç”¨binä¸‹å‘½ä»¤,å°†å…¶é…ç½®åœ¨~/.bashrcçš„PATHé‡Œ.ä¸‹é¢å°±æ˜¯æˆªæ­¢ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰çŽ¯å¢ƒé…ç½®. 12345678export JAVA_HOME=/usr/lib/java/jdk1.8.0_91export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport SCALA_HOME=/usr/lib/scala/scala-2.10.6export SPARK_HOME=/usr/lib/spark/spark-1.6.2-bin-hadoop2.6export CLASS_PATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=/usr/local/idea/idea-IC-162.1121.32/bin:$&#123;SPARK_HOME&#125;/lib:$&#123;SCALA_HOME&#125;/bin:$&#123;JAVA_HOME&#125;/bin:/usr/lib/hadoop/hadoop-2.7.2/bin:$PATH- ä½¿bashrcç”Ÿæ•ˆsource ~/.bashrc æ‰“å¼€IDEA 12cd /usr/local/idea/idea-IC-162.1121.32/binidea.sh å®‰è£…SCALAæ’ä»¶plugins åœ¨çº¿å®‰è£…æ¬¢è¿Žç•Œé¢-å³ä¸‹è§’configuration-å·¦ä¸‹è§’Install JetBrains-æœç´¢scala-installå³å¯ ç¦»çº¿å®‰è£…æ¬¢è¿Žç•Œé¢-å³ä¸‹è§’configuration-ä¸‹æ–¹Install plugins from disk-é€‰æ‹©å®‰è£… åˆ›å»ºé¡¹ç›®Create New Project-Scala-SBT-name-location-SDK(é€‰æ‹©JAVAè·¯å¾„)-SBT-SCALA-Finashç”±äºŽè¦è‡ªåŠ¨å®ŒæˆSBTå·¥å…·çš„å®‰è£…,ç”¨æ—¶è¾ƒé•¿,æœ¬äººç”¨æ—¶30minä»¥ä¸Š. èµ„æ–™æä¾›é“¾æŽ¥: http://pan.baidu.com/s/1slQpli1å¯†ç : ####è¯·æ‰“èµç´¢è¦. çŽ¯å¢ƒæä¾›é“¾æŽ¥: http://pan.baidu.com/s/1bpcDkxLå¯†ç : ####è¯·æ‰“èµç´¢è¦. å‹æƒ…æç¤º,å¦‚æœ‰å¸®åŠ©,æ–‡ç« åº•ä¸‹æœ‰æ‰“èµæŒ‰é”®.]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Hadoop Spark</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Codingç¬”è®°ç³»åˆ—2--ä¸¤ä¸ªç®€å•å±•ç¤º]]></title>
    <url>%2F2016%2F07%2F14%2Fcode-cookbook-3%2F</url>
    <content type="text"><![CDATA[Codingç¬”è®°ç¬¬ä¸‰ç¯‡,æœ‰ä¸¤ä¸ªä¸æˆæ ·å­çš„ä¸œè¥¿,è´´å‡ºæ¥çœ‹çœ‹.åšçš„å®žåœ¨æ˜¯å¤ªlowäº†,æˆ‘éƒ½ä¸æƒ³æ‹¿å‡ºæ¥è§äºº. çŽ‹å°æ³¢-ç®€ä»‹é¡µé¢è¯·ç‚¹å‡»çŽ‹å°æ³¢-ç®€ä»‹é¡µé¢ è¯—ç»-å›½é£Ž-å±•ç¤ºé¡µé¢è¯·ç‚¹å‡»è¯—ç»-å›½é£Ž-å±•ç¤ºé¡µé¢åœ¨è¿™é‡Œç”¨css JSè¯­æ³•çš„æ—¶å€™,æ²¡æœ‰èƒ½å¤Ÿç†Ÿç»ƒçš„æŽŒæ¡,ç¦»å¼€äº†IDEå°±ä¸èƒ½å†™.ä¹Ÿæ²¡èƒ½æŽŒæ¡Bootstrapè¿™æˆç†Ÿçš„å‰ç«¯å¼€å‘æ¡†æž¶. æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„å’ŒåŠ å¼ºçš„åœ°æ–¹: è¯­æ³•è§„èŒƒ CSSè¿™ç§ç®€å•çš„è¯­æ³•è¿˜æ˜¯æœ‰ä¸€äº›ç”Ÿç–,ä¸èƒ½å¾ˆå¥½çš„è¿ç”¨.ä»¥è‡³äºŽä¸åœçš„åŽ»æŸ¥ç”¨æ³•.ç†Ÿç»ƒåº¦å¤ªæ¬ ç¼º è§è¯†çŸ­æµ… æ²¡æœ‰å¯¹æ•´ä¸ªè®¾è®¡æœ‰ä¸€ä¸ªå…¨é¢çš„ç†æ€§çš„è®¤è¯†,å¯¼è‡´è‡ªå·±åœ¨å®žè·µä¸­,ä¸åœçš„æ”¹Idea,æœ€ç»ˆå·²ç»åç¦»åˆå¿ƒç”šè¿œ. ä»¥åŽè¦å¤šåŠ æ³¨æ„]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Coding</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Codingç¬”è®°ç³»åˆ—2--åˆæ¶‰å‰ç«¯ç•¥æœ‰è¶£]]></title>
    <url>%2F2016%2F06%2F22%2Fcode-cookbook-2%2F</url>
    <content type="text"><![CDATA[Codingç¬”è®°ç¬¬äºŒç¯‡.è¿™å‡ å¤©ä¸æƒ³çœ‹paper,ä¹Ÿä¸æƒ³å†™paper.å¯èƒ½è¿™å‡ å¤©å¤©æ°”å¤ªçƒ­,å¿ƒæƒ…æµ®èº,æƒ³æ¢æ¢å¿ƒæƒ…. HTML5 and CSSè¿™éƒ¨åˆ†å¾ˆç®€å•,åªè¦è®°ä½å‘½ä»¤æ˜¯è‡ªå°é—­è¿˜æ˜¯é…å¯¹å°é—­.ä¹Ÿä¸æ¸…æ¥šè¿™ä¹ˆè¯´å¯¹ä¸å¯¹,ä¸€ç›´çœ‹è‹±æ–‡çš„.æ€»ç»“å‡ ç‚¹è‡ªå·±æ„Ÿè§‰å€¼å¾—è®°å¿†çš„åœ°æ–¹: aæ ‡ç­¾å¯¹åº”é“¾æŽ¥href,pæ ‡ç­¾æ–‡å­—è®°å½•æ ‡ç­¾. imgæ ‡ç­¾å¯¹å·²é“¾æŽ¥src. .classcssä¸­å¯¹åº”classéœ€è¦å‰åŠ . #idcssä¸­å¯¹åº”idéœ€è¦åŠ # h1cssä¸­å¯¹åº”æ ‡ç­¾ç›´æŽ¥è§„å®š BootstrapBootstrapä½œä¸ºæœ€é€šç”¨çš„å‰ç«¯æ¡†æž¶,ç”¨èµ·æ¥ç®€ç›´æ— è„‘. è‡ªå¸¦css btn ä»¥åŠ btn-default btn-primary â€¦ well ä¹‹å‰æ²¡æ³¨æ„è¿™ä¸ªæ ·å¼,è¶…å¥½ç”¨ ulæ— åºolæœ‰åºæ•°å­— inputä¸­å•é€‰radioå¤šé€‰checkbox jQueryjQåœ¨è¿™é‡Œå­¦ä¹ å¤ªæ—©äº†å§,æ‰€å¹¸è¿˜æ˜¯å¾ˆç®€å•. ç›´æŽ¥ç»™å‡ºæ¶‰åŠåˆ°çš„ç”¨æ³•12345678910111213141516171819202122232425&lt;script&gt; $(document).ready(function() &#123; $(&quot;#target1&quot;).css(&quot;color&quot;, &quot;red&quot;); // cssæ ·å¼ $(&quot;#target1&quot;).prop(&quot;disabled&quot;, true); // disabled $(&quot;#target4&quot;).remove(); // ç§»é™¤æ ·å¼ $(&quot;#target2&quot;).appendTo(&quot;#right-well&quot;); // æ·»åŠ  $(&quot;#target5&quot;).clone().appendTo(&quot;#left-well&quot;); // å…‹éš†ä¸‹æ·»åŠ  $(&quot;#target1&quot;).parent().css(&quot;background-color&quot;, &quot;red&quot;); // çˆ¶ç±» $(&quot;#right-well&quot;).children().css(&quot;color&quot;, &quot;orange&quot;); // å­ç±» $(&quot;#left-well&quot;).children().css(&quot;color&quot;, &quot;green&quot;); $(&quot;.target:nth-child(2)&quot;).addClass(&quot;animated bounce&quot;); // å±‚æ•° $(&quot;.target:even&quot;).addClass(&quot;animated shake&quot;); // å¥‡å¶even odd $(&quot;body&quot;).addClass(&quot;animated hinge&quot;) // bodyæ“ä½œ &#125;);&lt;/script&gt;]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Coding</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Codingç¬”è®°ç³»åˆ—1--å…¥é—¨å‰ç«¯é¡»çŸ¥]]></title>
    <url>%2F2016%2F06%2F20%2Fcode-cookbook-1%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯Codingç¬”è®°çš„ç¬¬ä¸€ç¯‡,å†™è¿™ç³»åˆ—æ–‡ç« ä¸»è¦æ˜¯è®°å½•å­¦ä¹ å¿ƒå¾—.2016-6-20è¿™å¤©å¼€å§‹,è®°å½•è‡ªå·±åœ¨Freecodecampçš„å­¦ä¹ åŽ†ç¨‹.è®¡åˆ’èŠ±è´¹2ä¸ªæœˆåœ¨ä¸Šé¢åˆ·,ä¸çŸ¥é“èƒ½å­¦ä¹ åˆ°ä»€ä¹ˆç¨‹åº¦.è¿™æ˜¯ç³»åˆ—ç¬”è®°çš„å¼€ç¯‡,å°±å†™ä¸‹æ³¨æ„äº‹é¡¹å§,ä¹Ÿæ˜¯FCCå®˜æ–¹çš„ä¸€äº›è§‚å¿µ. æ¯å¤©çš„è®­ç»ƒä»£ç äºº,å¸¸è¯´,ä»£ç æ˜¯ä¸ªä½“åŠ›æ´».è¦æœ‰é‡çš„ç§¯ç´¯,æ‰èƒ½æŽŒæ¡è¿™é¡¹ä½“åŠ›æ´». ä¸€è¯»äºŒæœä¸‰æé—®å­¦ä¹ ä¸€é—¨è¯­è¨€,é¦–å…ˆå°±æ˜¯é˜…è¯»å®˜æ–¹æ–‡æ¡£,ä½¿ç”¨æ–¹æ³•éƒ½æœ‰è¯´æ˜Ž,errorçš„è§£å†³åŠžæ³•ä¹Ÿèƒ½æ‰¾åˆ°.ç¬¬äºŒ,å°±æ˜¯å–„ç”¨æœç´¢å¼•æ“Ž,ä½ è¦ç›¸ä¿¡è¿™é—®é¢˜ä½ ä¸æ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°,ä½ ä¹Ÿä¸æ˜¯å›°æ‰°çš„ç¬¬ä¸€äºº.ç¬¬ä¸‰,å°±æ˜¯QustionçŽ¯èŠ‚,æ±‚åŠ©äºŽä¸€äº›æœ‰Codingç»éªŒçš„è€æ‰‹,æ˜¯æœ€å¿«çš„è§£å†³åŠžæ³•.æ­¤ç±»æ–¹æ³•,ä¸è¦å¸¸ç”¨.ä»£ç æ˜¯å­¤ç‹¬çš„æ—…è¡Œ.å…¶æ¬¡,ä¸ºä»€ä¹ˆè¦å†™è¿™ç³»åˆ—æ–‡ç« ,ä¸ºä»€ä¹ˆå†™åšå®¢,å†™è¿™äº›åˆ°åº•æœ‰ä»€ä¹ˆç”¨,åˆæ˜¯ä¸ºäº†ä»€ä¹ˆå†™?æ€»æ˜¯æœ‰äººé—®è¿™äº›é—®é¢˜,ä¸æ˜¯ä¸ºä»€ä¹ˆ,è€Œæ˜¯ä¸ºäº†ä»€ä¹ˆ.äººæ€»æ˜¯è‡ªç§çš„,é‚£å°±è¯´å¥ç…½æƒ…çš„è¯å§. ä¸ºäº†é‡è§æ›´å¥½çš„è‡ªå·±]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Coding</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨è½¯ä»¶æŽ¨èä¸Žåˆ†äº«--Windowsè½¯ä»¶ç¯‡]]></title>
    <url>%2F2016%2F06%2F17%2Fsoftware-windows%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆ,ä½¿ç”¨äº†è¿™ä¹ˆå¤šå¹´çš„ç”µè„‘,ä¹Ÿç§¯æ”’äº†ä¸€äº›å¾®ä¸è¶³é“çš„ä½¿ç”¨ç»éªŒ,ä¸€ç›´æƒ³è®°å½•è®°å½•ç»™è‡ªå·±ä¸ªå¤‡å¿˜,åŒæ—¶åˆ†äº«ç»™åˆ«äººä½œä¸ºå‚è€ƒ.åŒæ—¶,æœ¬äººç”±äºŽæ˜¯ç©·å±Œä¸ä¸€ä¸ª,ç›®å‰çš„ä½¿ç”¨å¹³å°ä»…é™äºŽWindows,ä¹‹å‰æœ‰è¿‡MacOSçš„ä½¿ç”¨ç»éªŒ,ä½†å¯¹MacOSç†Ÿæ‚‰åº¦è¿˜æ˜¯ä¸å¤Ÿ,è¿˜è¿œè¿œæ²¡èƒ½è¾¾åˆ°å¯ä»¥å†™å‡ºçš„ç¨‹åº¦. æ­¤æ–‡,æ˜¯è½¯ä»¶ç¯‡,ç¡¬ä»¶ç¯‡é“¾æŽ¥ä¸ºPCç¡¬ä»¶å¹³å°çš„æŽ¨èä¸Žåˆ†äº«â€”Windowsç¡¬ä»¶ç¯‡ å½“PCæˆä¸ºç”Ÿæ´»ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†æ—¶,ä¼˜ç§€çš„è½¯ä»¶ç»™ç”Ÿæ´»ä¹ƒè‡³äººç”Ÿéƒ½ä¼šå¸¦æ¥ä¼˜è´¨çš„ä½“éªŒ.ç»“åˆæœ¬äººå¤šå¹´çš„è½¯ä»¶ä½¿ç”¨ç»éªŒ,æ•´ç†å‡ºè¿™äº›å¸¸ç”¨çš„è½¯ä»¶,åœ¨æ­¤,åˆ†äº«ç»™å¤§å®¶.é—²è¯å°‘è¯´,è¿›å…¥æ­£é¢˜å•¦. ç³»ç»Ÿç¯‡Windows 10 ä¸è¦æ‹…å¿ƒ10ä¼šç¨³å®šæ€§å¾ˆå·® ç”¨æˆ·ä½“éªŒå¾ˆå¥½ æœ‰ä¸€å®šå­¦ä¹ æˆæœ¬ Windows 7 ç¨³å®šåŠžå…¬æ¸¸æˆé¦–é€‰ä»…æŽ¨è,åŽŸç‰ˆä¸‹è½½å®‰è£….å¥‰ä¸Šä¸‹è½½åœ°å€MSDN,I tell you,MSDNé‡Œçš„è½¯ä»¶éƒ½æ˜¯å·¨ç¡¬å®¶çš„åŽŸç‰ˆé•œåƒ,ä¸‹é¢æ¶‰åŠåˆ°å·¨ç¡¬å®¶åº”ç”¨,éƒ½å¯ä»¥ä»Žè¿™é‡Œæ‰¾åˆ°,å¯ä»¥æ”¾å¿ƒä¸‹è½½.è‡³äºŽå·¨ç¡¬å®¶çš„äº§å“æ¿€æ´»,å°±éœ€è¦å¤§å®¶å„æ˜¾ç¥žé€šäº†. åŠžå…¬ç¯‡å¦‚æžœ,è¯»è€…ä½ æŠŠä½ çš„PCå½“æˆç”Ÿäº§åŠ›å·¥å…·çš„è¯,ä¹Ÿå°±æ˜¯ä½ å·¥ä½œå¿…å¤‡å“.é‚£è¿™äº›è½¯ä»¶ä½ å¯èƒ½ä¼šå¾ˆå–œæ¬¢. åŠžå…¬è½¯ä»¶OfficeMicrosoft Office 2016 ä½“éªŒè¶…å¥½,æ¯”13æå‡çš„ä¸æ˜¯ä¸€ç‚¹åŠç‚¹ Office 365 æŽ¨èè´­ä¹° Microsoft Office 2013 ç¨³å®šåŠžå…¬é¦–é€‰å¯¹äºŽå·¨ç¡¬å®¶æ—çš„äº§å“,å¦‚æžœæœ‰èƒ½åŠ›å°±æ”¯æŒæ­£ç‰ˆè´­ä¹°.å­¦æ ¡ä¸€èˆ¬æœ‰å…è´¹æ­£ç‰ˆå¯ç”¨.å…¶ä»–æ¿€æ´»æ–¹å¼å¦‚KMS,è‡ªå·±å¯ç”¨åŠ¨æ‰‹æ“ä½œ,è¿™é‡Œä¸å†å™è¿°. WPS ä¸ªäººç”¨æˆ·å»ºè®®ä½¿ç”¨ åŠŸèƒ½ä¸ªæ€§åŒ–å¼º PDFæ–‡æ¡£å¤„ç†ç¦æ˜•é˜…è¯»å™¨ å›½äº§è‰¯å¿ƒ åœ¨å·¨æ— éœ¸Adobeé¢å‰åˆ†ä¸‹ä¸€å¤§æ¯ç¾¹ æ®è¯´å½“åˆå…¬å¸çœ‹ä¸èµ·ä¸­å›½å¸‚åœºåªåšè‹±æ–‡foxit å¯åŠ¨é€Ÿåº¦,å¤„ç†é€Ÿåº¦è¿œè¶…Adobeå®˜ç½‘åœ°å€è¿™é‡Œå“¦ç¦æ˜•é˜…è¯»å™¨ä¸­æ–‡ç‰ˆ Adobe Acrobat ç¼–è¾‘PDFç¥žå™¨ é‚®ä»¶å¤„ç†Foxmail å…¥èŒå¿…å¤‡,ç¬¬ä¸€é¦–é€‰ å„ç§é‚®ä»¶æ”¶å‘é¡ºåˆ©å¦‚Gmailå®˜ç½‘åœ°å€å“¦Foxmail Outlook å·¥ä½œæ—¶,è§ä¸€äº›è€æ¿è¿˜æ˜¯ç”¨è¿™ä¸ª ç†Ÿæ‚‰çš„è¯,ä¹Ÿå¾ˆå¥½ç”¨ ä»£ç ç¯‡ç¼–è¾‘å™¨Sublime ä»£ç ç•Œæœ€æ€§æ„Ÿçš„ç¼–è¾‘å™¨ æ”¶è´¹ç¼–è¾‘å™¨ è¯·æ”¯æŒæ­£ç‰ˆ,ç ´è§£é è‡ªå·± VIM Vimå¤§æ³• notepad++ Winå¹³å° å…è´¹å¥½ç”¨ å·¥å…·F.lux æŠ¤çœ¼é¦–é€‰ ç”¨äº†å°±ç¦»ä¸å¼€ Evething æœ¬åœ°æœç´¢ç¥žå™¨ Total Commander æ–‡ä»¶ç®¡ç†ç¥žå™¨ Clover ä¾¿ç­¾å¼èµ„æºç®¡ç†å™¨]]></content>
      <categories>
        <category>æŽ¨èåˆ†äº«</category>
      </categories>
      <tags>
        <tag>hardware</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰æ²³æ¡¥]]></title>
    <url>%2F2016%2F06%2F05%2Ftime%2F</url>
    <content type="text"><![CDATA[å²æœˆé™å¥½,çŽ°ä¸–å®‰ç¨³]]></content>
      <categories>
        <category>å¿ƒæƒ…éšç¬”</category>
      </categories>
      <tags>
        <tag>å¿ƒæƒ…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo-githubéƒ¨ç½²æŒ‡å—]]></title>
    <url>%2F2016%2F06%2F02%2Fhexo-deploy%2F</url>
    <content type="text"><![CDATA[æœ¬åšä½¿ç”¨çš„æ˜¯Hexo+githubéƒ¨ç½²è€Œæˆ,å¹¶æ— èŠ±è´¹,åªéœ€è¦ä¸€å®šçš„æŠ€æœ¯æ°´å¹³. å‰æœŸå‡†å¤‡ç”³è¯·githubè´¦å·githubä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„ä»£ç æ‰˜ç®¡å¹³å°,å¦‚ä»Šçš„ç å†œä¸–ç•Œ,ç¬¬ä¸€è¦æ±‚ä¸æ˜¯ä½ ä»€ä¹ˆé¡¹ç›®ç»éªŒ,å·¥ä½œç»éªŒ,ç¬¬ä¸€ç‚¹å°±æ˜¯ä½ çš„githubè´¦å·,å¯¹è¿™ä¸ªå¼€æºçš„ä»£ç ä¸–ç•Œæœ‰ä½•è´¡çŒ®,æ˜¯è¡¡é‡ä¸€ä¸ªæˆåŠŸä»£ç è€…çš„é‡è¦æ ‡å‡†. githubå®˜ç½‘ éƒ¨ç½²gitçŽ¯å¢ƒgitæ˜¯ä¸€ç§ä»£ç ç®¡ç†æ–¹å¼,æ˜¯ä¸€ç§å…è´¹ã€å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿ.gitä¸‹è½½åœ°å€ éƒ¨ç½²Node.jsçŽ¯å¢ƒNode.jsæ˜¯ä¸€ä¸ªJavascriptè¿è¡ŒçŽ¯å¢ƒ(runtime). Node.jsä¼˜ç‚¹ RESTful API å•çº¿ç¨‹Node.jså¯ä»¥åœ¨ä¸æ–°å¢žé¢å¤–çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œä¾ç„¶å¯ä»¥å¯¹ä»»åŠ¡è¿›è¡Œå¹¶è¡Œå¤„ç† â€”â€” Node.jsæ˜¯å•çº¿ç¨‹çš„ã€‚å®ƒé€šè¿‡äº‹ä»¶è½®è¯¢ï¼ˆevent loopï¼‰æ¥å®žçŽ°å¹¶è¡Œæ“ä½œï¼Œå¯¹æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥è¦å……åˆ†åˆ©ç”¨è¿™ä¸€ç‚¹ â€”â€” å°½å¯èƒ½çš„é¿å…é˜»å¡žæ“ä½œï¼Œå–è€Œä»£ä¹‹ï¼Œå¤šä½¿ç”¨éžé˜»å¡žæ“ä½œã€‚ éžé˜»å¡žIO V8è™šæ‹Ÿæœº äº‹ä»¶é©±åŠ¨node.jsä¸‹è½½åœ°å€ éƒ¨ç½²HexoçŽ¯å¢ƒåˆå§‹åŒ–ä½¿ç”¨gitåœ¨ä»»æ„éžä¸­æ–‡è·¯å¾„ç©ºæ–‡ä»¶å¤¹,ä½¿ç”¨å‘½ä»¤1npm install hexo-cli -g éƒ¨ç½²hexo-deployer-git1npm install hexo-deployer-git --save ç”Ÿæˆç›®å½•1hexo init é™æ€åŒ–123hexo generateorhexo g éƒ¨ç½²123hexo deployorhexo d æœ¬åœ°æœåŠ¡12345hexo serveror hexo server -p 5000 #ç«¯å£å·orhexo s å®Œæ•´éƒ¨ç½²æ­¥éª¤123456npm install hexo-cli -gnpm install hexo-deployer-git --savehexo inithexo clean # åˆ é™¤é™æ€æ–‡ä»¶hexo ghexo d githubä»“åº“å»ºç«‹ä¸Žç”¨æˆ·åä¸€è‡´çš„Respository,ä¾‹å¦‚ç”¨æˆ·åä¸ºxixici,åˆ™å»ºç«‹xixici.github.io config.ymlé…ç½®ä¿®æ”¹ä¿®æ”¹Hexoç«™ç‚¹ä¸»ç›®å½•ä¸‹config.ymlæ–‡ä»¶ä¸­éƒ¨ç½²éƒ¨åˆ†.å¦‚ä¸‹:1234deploy: type: git repository: http://github.com/xixici/xixici.github.io.git branch: master ç„¶åŽéƒ¨ç½²å°±éœ€è¦ä¸Šè¿°å‘½ä»¤12hexo ghexo d æ–‡ç« å‘è¡¨1hexo new post &quot;markdown tips&quot; æœ¬äººçŽ¯å¢ƒ12345678910111213$ hexo version # å‘½ä»¤è¯­å¥hexo: 3.2.0hexo-cli: 1.0.1os: Windows_NT 10.0.10586 win32 x64http_parser: 2.5.2node: 4.4.4v8: 4.5.103.35uv: 1.8.0zlib: 1.2.8ares: 1.10.1-DEVicu: 56.1modules: 46openssl: 1.0.2h å‚è€ƒ ä½¿ç”¨Hexoæ­å»ºä¸ªäººåšå®¢(åŸºäºŽhexo3.0) http://baixin.io/2015/08/12/hexo/ å¦‚ä½•æ­å»ºä¸€ä¸ªç‹¬ç«‹åšå®¢â€”â€”ç®€æ˜Ž Github Pagesä¸Ž jekyll æ•™ç¨‹]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>hexo github</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PCç¡¬ä»¶å¹³å°çš„æŽ¨èä¸Žåˆ†äº«--Windowsç¡¬ä»¶ç¯‡]]></title>
    <url>%2F2016%2F05%2F30%2Fhardware-windows%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆ,ä½¿ç”¨äº†è¿™ä¹ˆå¤šå¹´çš„ç”µè„‘,ä¹Ÿç§¯æ”’äº†ä¸€äº›å¾®ä¸è¶³é“çš„ä½¿ç”¨ç»éªŒ,ä¸€ç›´æƒ³è®°å½•è®°å½•ç»™è‡ªå·±ä¸ªå¤‡å¿˜,åŒæ—¶åˆ†äº«ç»™åˆ«äººä½œä¸ºå‚è€ƒ.åŒæ—¶,æœ¬äººç”±äºŽæ˜¯ç©·å±Œä¸ä¸€ä¸ª,ç›®å‰çš„ä½¿ç”¨å¹³å°ä»…é™äºŽWindows,ä¹‹å‰æœ‰è¿‡MacOSçš„ä½¿ç”¨ç»éªŒ,ä½†å¯¹MacOSç†Ÿæ‚‰åº¦è¿˜æ˜¯ä¸å¤Ÿ,è¿˜è¿œè¿œæ²¡èƒ½è¾¾åˆ°å¯ä»¥å†™å‡ºçš„ç¨‹åº¦. æ­¤æ–‡,æ˜¯ç¡¬ä»¶ç¯‡,è½¯ä»¶ç¯‡é“¾æŽ¥ä¸ºå¸¸ç”¨è½¯ä»¶æŽ¨èä¸Žåˆ†äº«â€”Windowsè½¯ä»¶ç¯‡æœ‰ä¸€ä¸ªä¼˜è¶Šçš„ç¡¬ä»¶çŽ¯å¢ƒ,èº«å¿ƒä¸Žå·¥ä½œéƒ½èƒ½å—ç›ŠåŒªæµ….ç¡¬ä»¶çš„é€‰è´­æ¥è¯´,çº¿ä¸Šä¸Žçº¿ä¸‹éƒ½ä¼šæœ‰å¾ˆå¤šå‘ç­‰ç€åŽ»è·³.æ€»ä½“æ¥è¯´,å¯¹äºŽçŽ°å¦‚ä»Šçš„äº’è”ç½‘æ—¶ä»£è€Œè¨€,çº¿ä¸Šä¼šæ˜¯å¤§å¤šæ•°é¦–è¦é€‰é¡¹.å½“ç„¶,å¦‚æžœçº¿ä¸‹æœ‰å¾ˆå¥½çš„é€‰æ‹©,æˆ–è®¸ä¸å¿…æ¥çº¿ä¸Šè¿™é±¼é¾™æ··æ‚çš„ä¸–ç•Œ. é…ç½®ä¸ªäººå»ºè®®(è‚ºè…‘ä¹‹è¨€.å› äººè€Œå¼‚) SSD(å›ºæ€)ç¡¬ç›˜ 120GBä»¥ä¸Š,ä¸Šä¸å°é¡¶,å¤šå¤šç›Šå–„ RAM(å†…å­˜) 8Gèµ· CPU(ä¸­å¤®å¤„ç†å™¨) å–œæ–°åŽŒæ—§,åž‹å·è¶Šæ–°è¶Šä¼˜è¶Š å“ç‰ŒæŽ¨è Lenovoè”æƒ³(ç¾Žå¸è‰¯å¿ƒ)å¯¹ä¸è¿½æ±‚æ€§ä»·æ¯”,ä¸careé’±è¿™ä¸ªé—®é¢˜,è”æƒ³ä¸å¤±ä¸ºä½ çš„ç¬¬ä¸€å¤‡é€‰.è”æƒ³è¿™ç§æˆ˜äº”æ¸£,æŽ¥è¿‡IBMçš„Thinkpad,æŠŠç¬”ç”µç¬¬ä¸€å“ç‰Œç»™æ‹‰ä¸‹é©¬,æˆ‘ä¹Ÿä¸è¯´ä»€ä¹ˆäº†. Acerå®ç¢(è¸å®žå‹å•†)å¯¹å®ç¢qiè€Œè¨€,æˆ‘æ„Ÿè§‰å°±æ˜¯ä¸€æŒºè¸å®žçš„å‹å•†,èº«è¾¹çš„ç›†å‹ä»¬ä¹Ÿæœ‰äººç”¨è¿‡. Haseeç¥žèˆŸ(èµ¶ç´§ä¸Šèˆ¹)ç¥žèˆŸç»å¯¹æ˜¯å¹¿å¤§ç¬”ç”µçˆ±å¥½è€…çš„ç¬¬ä¸€å…¥é€‰å“ç‰Œ.éžå°ç™½,ç¬¬ä¸€é€‰,èµ¶ç´§ä¸Šèˆ¹. HPæƒ æ™® Dellæˆ´å°” AsusåŽç¡• Samsungä¸‰æ˜Ÿå¯¹äºŽä¸€ç”Ÿäº§åŠ›å·¥å…·è€Œè¨€,é¦–ä½çš„æ˜¯æå‡ç”Ÿäº§åŠ›,ç¬¬äºŒä½æ˜¯ä¸ªäººå–œå¥½.å¦‚æžœé¡ºåºåä¹‹,æˆ‘ä¹Ÿæ²¡ä»€ä¹ˆè¯è¯´.ç»å¸¸æœ‰æœ‹å‹è¯´,æˆ‘å¾ˆå–œæ¬¢æŸæŸåž‹å·çš„ç”µè„‘,æˆ‘åªæœ‰ä¸€ä¸ªå­—,ä¹°.å¼€å¿ƒå°±å¥½,æƒ³å¤ªå¤š,ä½•å¿…å‘¢. é€‰è´­æŒ‡å—(çº¿ä¸Š)äº¬ä¸œè™½ç„¶ä¸€ç›´è¢«èª‰ä¸ºäºŒæ‰‹ä¸œ,ä½†ç›¸å¯¹äºŽå‡è´§æ¨ªè¡Œçš„æŸçŒ«æ¥è¯´,ä¿éšœä¹Ÿä¸æ˜¯é«˜äº†ä¸€åˆ†ä¸¤åˆ†.é¦–æŽ¨. è£…æœºå¤§å¸ˆæŸçŒ«ä¹Ÿæœ‰å¾ˆå¤šè‰¯å¿ƒå–å®¶,æŸç¾Žè¦è°¨æ…Ž.åœ¨è¿™é‡ŒæŽ¨èä¸¤ä¸ªå¥½è¯„å¾ˆé«˜çš„åº— èŒå”è£…æœºå¤ªå¤šäººå®‰åˆ©è¿™å®¶ æ‘©è¥¿ç”µè„‘å¡å§åŸºä½¬æŽ¨è å°å¼æœºæŽ¨èæ¬¾åŠžå…¬å°æœº Dell Vostro Dell Inspiron æ¸¸æˆå°æœº ä¸æŽ¨èå“ç‰Œ,ç»„è£…ä¸ºå®œ ç¬”ç”µæŽ¨èæ¬¾åŠžå…¬ç¬”ç”µ Thinkpad T450 æ¸¸æˆç¬”ç”µ ç¥žèˆŸ Z6 HP æš—å½±ç²¾çµ Lenovo æ‹¯æ•‘è€… é«˜ç«¯çŽ©å®¶ç¬”ç”µ Alienware å¤–æ˜Ÿäºº Razer Blade é›·è›‡çµåˆƒ Terrans Force æœªæ¥äººç±» å¦‚æžœä½ å¿ƒä»ªæŸä¸€ç§,å°±å‡ºæ‰‹å§.]]></content>
      <categories>
        <category>æŽ¨èåˆ†äº«</category>
      </categories>
      <tags>
        <tag>hardware</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[markdownå­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2016%2F05%2F23%2Fmarkdown-tips%2F</url>
    <content type="text"><![CDATA[å½“ä½ éœ€è¦ä½¿ç”¨ä¸€ç§ é«˜æ ¼è°ƒ,åˆå¾ˆ GeekèŒƒ çš„æ–‡å­—å·¥å…·æ¥è®°å½•è‡ªå·±,åˆ†äº«ä»·å€¼æ—¶,Markdwonå°±æ˜¯ä½ çš„é¦–é€‰.å½“ä½ å­¦ä¹ ä¸€é¡¹å·¥å…·,å¹¶ä¸”ä½¿ç”¨å®ƒ,æˆ–è®¸ä½ ä¼šèŠ±è´¹å¾ˆå¤§çš„æˆæœ¬,ä½†æ˜¯å¦‚æžœä½ å­¦ä¼šäº†,å¹¶ä½¿ç”¨,ä½ ä¼šçˆ±ä¸Šä»–.MarkDownå¦‚æ˜¯è¯´. å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨â€”MarkPad(WINå¹³å°)MarkPad æ˜¯æ¬¾å¼€æºçš„ Markdown ç¼–è¾‘, Window 8 å’Œè°å‹å¥½çš„é£Žæ ¼ç•Œé¢ã€‚ Markdownå®žç”¨è¯­æ³• ä»¥ä¸‹æ˜¯å¸¸ç”¨ç”¨æ³•,å¦‚ åŠ ç²—, æ–œä½“, é“¾æŽ¥, åˆ—è¡¨, å…¬å¼, ä»£ç , è¡¨æ ¼ç­‰ç­‰ åŠ ç²—ä¸Žæ–œä½“12**åŠ ç²—çš„ç”¨æ³•åœ¨è¿™é‡Œ***æ–œä½“çš„ç”¨æ³•æ˜¯è¿™é‡Œ* åŠ ç²—çš„ç”¨æ³•åœ¨è¿™é‡Œ æ–œä½“çš„ç”¨æ³•æ˜¯è¿™é‡Œ æ ‡é¢˜çš„ç”¨æ³•1234#æ ‡é¢˜1##æ ‡é¢˜1......######æ ‡é¢˜1 #çš„æ•°é‡çš„å¤šå°‘ä¸Žå¤§å°æœ‰å…³,ç±»ä¼¼çš„è¿˜æœ‰-,è‡ªå·±è¯•éªŒç”¨æ³•å§. é“¾æŽ¥çš„å†™æ³•1[XIXICI ä¸»é¡µ](http:\\xixici.com\) XIXICI ä¸»é¡µ é˜…è¯»æ›´å¤š1&lt;!--more--&gt; å¼•ç”¨12&gt;ä¸èƒ½å¬å‘½äºŽè‡ªå·±è€…ï¼Œå°±è¦å—å‘½äºŽä»–äººã€‚â€”â€”å°¼é‡‡ã€ŠæŸ¥ç‰¹æ‹‰æ–¯å¦‚æ˜¯è¯´ã€‹ ä¸èƒ½å¬å‘½äºŽè‡ªå·±è€…ï¼Œå°±è¦å—å‘½äºŽä»–äººã€‚â€”â€”å°¼é‡‡ã€ŠæŸ¥ç‰¹æ‹‰æ–¯å¦‚æ˜¯è¯´ã€‹ å¾…åŠžäº‹å®œ12345- [ ] æ”¯æŒä»¥ PDF æ ¼å¼å¯¼å‡ºæ–‡ç¨¿- [ ] æ”¹è¿› Cmd æ¸²æŸ“ç®—æ³•ï¼Œä½¿ç”¨å±€éƒ¨æ¸²æŸ“æŠ€æœ¯æé«˜æ¸²æŸ“æ•ˆçŽ‡- [x] æ–°å¢ž Todo åˆ—è¡¨åŠŸèƒ½- [x] ä¿®å¤ LaTex å…¬å¼æ¸²æŸ“é—®é¢˜- [x] æ–°å¢ž LaTex å…¬å¼ç¼–å·åŠŸèƒ½ [ ] æ”¯æŒä»¥ PDF æ ¼å¼å¯¼å‡ºæ–‡ç¨¿ [ ] æ”¹è¿› Cmd æ¸²æŸ“ç®—æ³•ï¼Œä½¿ç”¨å±€éƒ¨æ¸²æŸ“æŠ€æœ¯æé«˜æ¸²æŸ“æ•ˆçŽ‡ [x] æ–°å¢ž Todo åˆ—è¡¨åŠŸèƒ½ [x] ä¿®å¤ LaTex å…¬å¼æ¸²æŸ“é—®é¢˜ [x] æ–°å¢ž LaTex å…¬å¼ç¼–å·åŠŸèƒ½ è´¨èƒ½å®ˆæ’å…¬å¼1$$E=mc^2$$ E=mc^2é«˜äº®ä»£ç 1234567@requires_authorizationclass SomeClass: passif __name__ == '__main__': # A comment print 'hello world' åœ¨æ•´æ®µä»£ç ä¸¤ç«¯åŠ ä¸‰ä¸ª`, å¯ä»¥å¯¹æ•´æ®µä»£ç åŠ é«˜äº®.ä»…ä»…å¯¹ä¸€å¥ä»£ç é«˜äº®å¯ä»¥åœ¨å¥å­ä¸¤ç«¯åŠ ä¸€ä¸ª`å³å¯. ç»˜åˆ¶è¡¨æ ¼12345| é¡¹ç›® | ä»·æ ¼ | æ•°é‡ || -------- | -----: | :----: || è®¡ç®—æœº | \$1600 | 5 || æ‰‹æœº | \$12 | 12 || ç®¡çº¿ | \$1 | 234 | é¡¹ç›® ä»·æ ¼ æ•°é‡ è®¡ç®—æœº $1600 5 æ‰‹æœº $12 12 ç®¡çº¿ $1 234 ç½‘æ˜“äº‘éŸ³ä¹æ’å…¥1&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=330 height=86 src=&quot;http://music.163.com/outchain/player?type=2&amp;id=32957377&amp;auto=1&amp;height=66&quot;&gt;&lt;/iframe&gt; è‡ªåŠ¨æ’­æ”¾å°†auto=1å³å¯. Geekçš„ä¸“æ³¨åœ¨æœ¬æ–‡è¡¨çŽ°çš„æ·‹æ¼“å°½è‡´.åªç”¨é”®ç›˜å°±èƒ½å†™å‡ºæ¥è¿™ä¹ˆæ¼‚äº®(æŽ’ç‰ˆè€Œå·²)çš„æ–‡ç« . å‚è€ƒ æ¬¢è¿Žä½¿ç”¨ Cmd Markdown ç¼–è¾‘é˜…è¯»å™¨ MarkPadä¸‹è½½åœ°å€]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
</search>
